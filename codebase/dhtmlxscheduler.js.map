{"version":3,"file":"dhtmlxscheduler.js","sources":["../sources/global.js","../sources/plugins/drag_highlight_pos.js","../sources/plugins/limit.js","../sources/plugins/batch_update.js","../node_modules/remote-client/dist/remote.es6.js","../sources/plugins/remote_events/remote_events.ts","../sources/plugins/remote_events/handlers.js","../sources/plugins/index.js","../sources/plugins/undo_delete.js","../sources/plugins/remote_events/index.js","../sources/core/utils/utils.js","../sources/core/nav_bar.js","../sources/core/scheduler_resize_listener.js","../sources/utils/eventable.js","../sources/core/utils/event.js","../sources/core/common.js","../sources/core/utils/scoped_event.js","../sources/core/utils/dom_helpers.js","../sources/utils/env.js","../sources/core/common/url_serialize.js","../sources/core/base.js","../sources/core/common/get_serializable_events.js","../sources/core/load.js","../sources/core/loaders/xml.js","../sources/core/loaders/json.js","../sources/core/loaders/ical.js","../sources/core/lightbox.js","../sources/core/touch.js","../sources/core/skins.js","../sources/core/dataprocessor/dataprocessor_hooks.js","../sources/core/dataprocessor/dataprocessor.js","../sources/core/message.js","../sources/locale/locale_ar.js","../sources/locale/locale_be.js","../sources/locale/locale_ca.js","../sources/locale/locale_cn.js","../sources/locale/locale_cs.js","../sources/locale/locale_da.js","../sources/locale/locale_de.js","../sources/locale/locale_el.js","../sources/locale/locale_en.js","../sources/locale/locale_es.js","../sources/locale/locale_fi.js","../sources/locale/locale_fr.js","../sources/locale/locale_he.js","../sources/locale/locale_hu.js","../sources/locale/locale_id.js","../sources/locale/locale_it.js","../sources/locale/locale_jp.js","../sources/locale/locale_manager.js","../sources/locale/locale_nb.js","../sources/locale/locale_nl.js","../sources/locale/locale_no.js","../sources/locale/locale_pl.js","../sources/locale/locale_pt.js","../sources/locale/locale_ro.js","../sources/locale/locale_ru.js","../sources/locale/locale_si.js","../sources/locale/locale_sk.js","../sources/locale/locale_sv.js","../sources/locale/locale_tr.js","../sources/locale/locale_ua.js","../sources/core/datepicker.js","../sources/scheduler_factory_method.js","../sources/core/state.js","../sources/core/common_errors.js","../sources/core/scheduler.js","../sources/core/wai_aria.js","../sources/core/common/assert.js","../sources/core/jquery.js","../sources/core/destructor.js","../sources/core/utils/ajax.js","../sources/core/config.js","../sources/core/event.js","../sources/core/event_highlight.js","../sources/core/dhtmlx/dhtmlx_suite_hooks.js","../sources/core/delay_render.js","../sources/core/connector.js","../sources/locale/index.js","../sources/ext/extension_manager.js","../sources/dhtmlx_hook.js","../sources/core/virtual_events_helpers.js","../sources/ext/drag_between.js","../sources/ext/keyboard_navigation/modals.js","../sources/ext/keyboard_navigation/key_nav_legacy.js","../sources/ext/keyboard_navigation/scheduler_handlers.js","../sources/legacy/dhtmlx_error.js","../sources/ext/map_view/gMapAdapter.ts","../sources/ext/map_view/osmMapAdapter.ts","../sources/ext/map_view/mapboxAdapter.ts","../node_modules/rrule/dist/esm/weekday.js","../node_modules/rrule/dist/esm/helpers.js","../node_modules/rrule/dist/esm/dateutil.js","../node_modules/rrule/dist/esm/iterresult.js","../node_modules/rrule/node_modules/tslib/tslib.es6.mjs","../node_modules/rrule/dist/esm/callbackiterresult.js","../node_modules/rrule/dist/esm/types.js","../node_modules/rrule/dist/esm/nlp/i18n.js","../node_modules/rrule/dist/esm/nlp/totext.js","../node_modules/rrule/dist/esm/nlp/parsetext.js","../node_modules/rrule/dist/esm/nlp/index.js","../node_modules/rrule/dist/esm/datetime.js","../node_modules/rrule/dist/esm/parseoptions.js","../node_modules/rrule/dist/esm/parsestring.js","../node_modules/rrule/dist/esm/datewithzone.js","../node_modules/rrule/dist/esm/optionstostring.js","../node_modules/rrule/dist/esm/cache.js","../node_modules/rrule/dist/esm/masks.js","../node_modules/rrule/dist/esm/iterinfo/yearinfo.js","../node_modules/rrule/dist/esm/iterinfo/index.js","../node_modules/rrule/dist/esm/iterinfo/monthinfo.js","../node_modules/rrule/dist/esm/iterinfo/easter.js","../node_modules/rrule/dist/esm/iter/poslist.js","../node_modules/rrule/dist/esm/iter/index.js","../node_modules/rrule/dist/esm/rrule.js","../node_modules/rrule/dist/esm/rrulestr.js","../node_modules/rrule/dist/esm/rruleset.js","../node_modules/rrule/dist/esm/iterset.js","../sources/ext/timeline/autoscroll.js","../sources/ext/timeline/rtl_scroll_helper.js","../sources/ext/tooltip/tooltip.ts","../sources/ext/tooltip/tooltipManager.ts","../sources/ext/extensions_all.js","../sources/ext/active_links.js","../sources/ext/agenda_legacy_view.js","../sources/ext/agenda.js","../sources/ext/all_timed.js","../sources/ext/collision.js","../sources/ext/container_autoresize.js","../sources/ext/cookie.js","../sources/ext/daytimeline.js","../sources/ext/editors.js","../sources/ext/expand.js","../sources/ext/export_api/index.js","../sources/ext/grid_view.js","../sources/ext/html_templates.js","../sources/ext/key_nav.js","../sources/ext/keyboard_navigation/common/keyboard_shortcuts.js","../sources/ext/keyboard_navigation/common/eventhandler.js","../sources/ext/keyboard_navigation/common/trap_modal_focus.js","../sources/ext/keyboard_navigation/marker.js","../sources/ext/keyboard_navigation/elements/scheduler_node.js","../sources/ext/keyboard_navigation/elements/nav_node.js","../sources/ext/keyboard_navigation/elements/header_cell.js","../sources/ext/keyboard_navigation/elements/event.js","../sources/ext/keyboard_navigation/elements/time_slot.js","../sources/ext/keyboard_navigation/elements/minical_button.js","../sources/ext/keyboard_navigation/elements/minical_cell.js","../sources/ext/keyboard_navigation/elements/data_area.js","../sources/ext/keyboard_navigation/core.js","../sources/ext/keyboard_navigation/minical_handlers.js","../sources/ext/layer.js","../sources/ext/legacy.js","../sources/legacy/dhtmlxcommon.js","../sources/ext/limit.js","../sources/ext/map_view/index.ts","../sources/ext/minical.js","../sources/ext/monthheight.js","../sources/ext/multisection.js","../sources/ext/multiselect.js","../sources/ext/multisource.js","../sources/ext/mvc.js","../sources/ext/outerdrag.js","../sources/ext/pdf.js","../sources/ext/quick_info.js","../sources/ext/readonly.js","../sources/ext/recurring.js","../sources/ext/recurring_legacy.js","../sources/ext/serialize.js","../sources/ext/timeline.js","../sources/ext/timeline/timeline_smart_render.js","../sources/ext/tooltip/index.ts","../sources/ext/treetimeline.js","../sources/ext/units.js","../sources/ext/url.js","../sources/ext/week_agenda.js","../sources/ext/wp.js","../sources/ext/year_view.js","../sources/dhtmlxscheduler.individual.js","../sources/scheduler_factory.js"],"sourcesContent":["\n/* eslint-disable no-restricted-globals */\nvar globalScope;\nif(typeof window !== \"undefined\"){\n\tglobalScope = window;\n}else{\n\tglobalScope = global;\n}\n/* eslint-enable no-restricted-globals */\n\nexport default globalScope;","export default function dragHighlightPos(scheduler){\n    let dndMarkers = [];\n    let dragStarted = false;\n    let eventNode = null;\n    let event = null;\n\n    function isEnabled() { \n        return scheduler.config.drag_highlight && scheduler.markTimespan;\n    }\n\n    function checkViewName(viewName){\n        const viewObj = scheduler.getView(viewName);\n        if(viewObj){\n            return viewObj.layout;\n        }\n        return viewName;\n    }\n\n    function checkSectionPropertyName(viewName){\n        const viewObj = scheduler.getView(viewName);\n        if(viewObj.y_property){\n            return viewObj.y_property;\n        }\n        if(viewObj.map_to){\n            return viewObj.map_to;\n        }\n    }\n\n    function setRequiredStylesToMarker(eventNode, layout){\n        switch (layout) {\n            case \"month\":\n                eventNode.style.top = \"\";\n                eventNode.style.left = \"\";\n                break;\n            case \"timeline\":\n                eventNode.style.left = \"\";\n                eventNode.style.marginLeft = \"1px\";\n                break;\n            default:\n                eventNode.style.top = \"\";\n                break;\n        }\n    }\n    \n    function createMarkerConfig(configSettings){\n        const { event, layout, viewName, sectionId, eventNode } = configSettings;\n        setRequiredStylesToMarker(eventNode, layout);\n        const sections = {};\n        let markerObject = {\n            start_date: event.start_date,\n            end_date: event.end_date,\n            css: \"dhx_scheduler_dnd_marker\",\n            html: eventNode\n        };\n        //GS-2644: case for round_position config in timeline view\n        if (layout == \"timeline\") {\n            const viewObj = scheduler.getView(viewName);\n            if (viewObj.round_position) {\n                const index = scheduler._get_date_index(viewObj,event.start_date);\n                const rounded_date = viewObj._trace_x[index];\n                markerObject.start_date = rounded_date;\n            }\n        }\n        if (layout == \"timeline\" || layout == \"month\" ){\n            // we need to set end date less than 24 hours of the views to avoid receiving multiple marktimespans\n            markerObject = {...markerObject, end_date: scheduler.date.add(event.start_date, 1, 'minute')};\n        }\n        if (sectionId){\n            sections[viewName] = sectionId;\n            markerObject.sections = sections;\n        }\n        return markerObject;\n    }\n\n    function createViewMarker(settings){\n        const { layout } = settings;\n        let markerConfigs;\n        switch (layout) {\n            case \"month\": \n                markerConfigs = getMonthViewMarkers(settings);\n                break;\n            case 'timeline':\n            case 'units':\n                markerConfigs = getTimelineAndUnitsViewMarkers(settings);\n                break;\n            default: \n                markerConfigs = getColumnViewMarkers(settings);\n                break;\n        }\n        markerConfigs.forEach((cfg) => {\n            dndMarkers.push(scheduler.markTimespan(cfg));\n        });\n    }\n\n    function getColumnViewMarkers(settings){\n        const {event, layout, viewName, sectionId} = settings;\n        let columnViewMarkersArray = [];\n            let eventNodes = scheduler.$container.querySelectorAll(`[${scheduler.config.event_attribute}='${event.id}']:not(.dhx_cal_select_menu):not(.dhx_drag_marker)`);\n            if(eventNodes){\n                for (let i = 0; i < eventNodes.length; i++) {\n                    let eventNodeClone = eventNodes[i].cloneNode(true);\n                    let startDate = new Date(+eventNodeClone.getAttribute(\"data-bar-start\"));\n                    let endDate = new Date(+eventNodeClone.getAttribute(\"data-bar-end\"));\n                    let dates = {start_date: startDate, end_date: endDate};\n                    const configSettings = {\n                        event: dates, \n                        layout, \n                        viewName, \n                        sectionId, \n                        eventNode:eventNodeClone\n                    };\n                    columnViewMarkersArray.push(createMarkerConfig(configSettings));\n                }\t\n            }\n        return columnViewMarkersArray;\n    }\n\n    function getMonthViewMarkers(settings){\n        let monthViewMarkersArray = [];\n        const {event, layout, viewName, sectionId} = settings;\n        const weekDates = [];\n        let currDate = new Date(event.start_date);\n        while(currDate.valueOf() < event.end_date.valueOf()){\n            let obj = {start_date: currDate};\n            weekDates.push(obj);\n            currDate = scheduler.date.week_start(scheduler.date.add(currDate, 1, \"week\"));\n        }\n        let cells = scheduler.$container.querySelectorAll(`[${scheduler.config.event_attribute}='${event.id}']`);\n        for (let i = 0; i < cells.length; i++) {\n            const configSettings = {\n                event: weekDates[i], \n                layout, \n                viewName, \n                sectionId, \n                eventNode: cells[i].cloneNode(true)\n            };\n            monthViewMarkersArray.push(createMarkerConfig(configSettings));\n        }\n        return monthViewMarkersArray;\n    }\n\n    function getTimelineAndUnitsViewMarkers(settings){\n        let unitMarkersArray = [];\n        const {event, layout, viewName, eventNode} = settings;\n        let sectionPropertyName = checkSectionPropertyName(viewName);\n        if (sectionPropertyName){\n            const sections = String(event[sectionPropertyName]).split(scheduler.config.section_delimiter);\n            const formatedSections = sections.map(element => String(element));\n            const elems = [];\n            for (let i = 0; i < formatedSections.length; i++) {\n                elems[i] = eventNode.cloneNode(true);\n                const configSettings = {\n                    event, \n                    layout, \n                    viewName, \n                    sectionId: formatedSections[i],\n                    eventNode: elems[i]\n                };\n                unitMarkersArray.push(createMarkerConfig(configSettings));\n            }\n        }\n        return unitMarkersArray;\n    }\n    \n    scheduler.attachEvent(\"onBeforeDrag\", function (id, mode, e){\n        if (isEnabled()) {\n            dragStarted = true;\n            event = scheduler.getEvent(id);\n            eventNode = e.target.closest(`[${scheduler.config.event_attribute}]`);\n            const viewName = scheduler.getState().mode;\n            const layout = checkViewName(viewName);\n            // to avoid incorrect eventNode and marker creation when scheduler.config.cascade_event_display included\n            if (layout == \"units\" && scheduler.config.cascade_event_display ) {\n                scheduler.unselect(id);\n                eventNode = e.target.closest(`[${scheduler.config.event_attribute}]`);\n            }\n        }\n        return true;\n    });\n\n    scheduler.attachEvent(\"onEventDrag\", function (id, mode, e){\n        if(dragStarted && isEnabled()){\n            dragStarted = false;// insert element only once after dnd start\n            const viewName = scheduler.getState().mode;\n            const layout = checkViewName(viewName);\n            const sectionId = scheduler.getActionData(e).section;\n            if (event) {\n                const settings = {\n                    event, \n                    layout, \n                    viewName, \n                    sectionId, \n                    eventNode\n                };\n                createViewMarker(settings);\n            }\n        }\n    });\n\n    scheduler.attachEvent(\"onDragEnd\", function(id, mode, e){\n        for (let i = 0; i < dndMarkers.length; i++) {\n            scheduler.unmarkTimespan(dndMarkers[i]);\n        }\n        dndMarkers = [];\n        eventNode = null;\n        event = null;\n    });\n}","export default function limitPlugin(scheduler){\n\n\n\tscheduler.config.mark_now = true;\n\tscheduler.config.display_marked_timespans = true;\n\tscheduler.config.overwrite_marked_timespans = true;\n\n\n\tvar dhx_time_block = \"dhx_time_block\";\n\tvar default_timespan_type = \"default\";\n\tvar fix_options = function(options, days, zones) {\n\t\tif (days instanceof Date && zones instanceof Date) {\n\t\t\toptions.start_date = days;\n\t\t\toptions.end_date = zones;\n\t\t} else {\n\t\t\toptions.days = days;\n\t\t\toptions.zones = zones;\n\t\t}\n\t\treturn options;\n\t};\n\tvar get_resulting_options = function(days, zones, sections) {\n\t\tvar options = (typeof days == \"object\") ? days : { days: days };\n\t\toptions.type = dhx_time_block;\n\t\toptions.css = \"\";\n\t\tif (zones) {\n\t\t\tif (sections)\n\t\t\t\toptions.sections = sections;\n\t\t\toptions = fix_options(options, days, zones);\n\t\t}\n\t\treturn options;\n\t};\n\tscheduler.blockTime = function(days, zones, sections){\n\t\tvar options = get_resulting_options(days, zones, sections);\n\t\treturn scheduler.addMarkedTimespan(options);\n\t};\n\tscheduler.unblockTime = function(days, zones, sections) {\n\t\tzones = zones || \"fullday\";\n\t\tvar options = get_resulting_options(days, zones, sections);\n\t\treturn scheduler.deleteMarkedTimespan(options);\n\t};\n\n\tscheduler.checkInMarkedTimespan = function(ev, timespan_type, on_overlap){\n\t\ttimespan_type = timespan_type || default_timespan_type;\n\n\t\tvar res = true;\n\t\tvar temp_start_date = new Date(ev.start_date.valueOf());\n\t\tvar temp_end_date = scheduler.date.add(temp_start_date, 1, \"day\");\n\t\tvar timespans = scheduler._marked_timespans;\n\t\tfor (; temp_start_date < ev.end_date; temp_start_date = scheduler.date.date_part(temp_end_date), temp_end_date = scheduler.date.add(temp_start_date, 1, \"day\") ) {\n\t\t\tvar day_value = +scheduler.date.date_part( new Date(temp_start_date) ); // the first part of event not necessarily contains only date part\n\t\t\tvar day_index = temp_start_date.getDay();\n\n\t\t\tvar zones = getZones(ev, timespans, day_index, day_value, timespan_type);\n\t\t\tif (zones){\n\t\t\t\tfor (var i = 0; i < zones.length; i+=2) {\n\n\t\t\t\t\t// they may change for new event if it passes limit zone\n\t\t\t\t\tvar eventStart = scheduler._get_zone_minutes(temp_start_date);\n\t\t\t\t\tvar eventEnd = ( ev.end_date>temp_end_date || ev.end_date.getDate() != temp_start_date.getDate() ) ? 1440 : scheduler._get_zone_minutes(ev.end_date);\n\n\t\t\t\t\tvar markerStart = zones[i];\n\t\t\t\t\tvar markerEnd = zones[i+1];\n\t\t\t\t\tif (markerStart<eventEnd && markerEnd>eventStart) {\n\t\t\t\t\t\tif(typeof on_overlap == \"function\"){\n\t\t\t\t\t\t\t//handler allows to cancel overlapping\n\t\t\t\t\t\t\t//actually needed only to keep default behavior of limits\n\t\t\t\t\t\t\tres = on_overlap(ev, eventStart, eventEnd, markerStart, markerEnd);//event object, event start/end minutes in 'zones' format, zone start/end minutes\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tres = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!res)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn !res;\n\t};\n\tscheduler.checkLimitViolation = function(event){\n\t\tif(!event)\n\t\t\treturn true;\n\t\tif (!scheduler.config.check_limits)\n\t\t\treturn true;\n\t\tvar s = scheduler;\n\t\tvar c = s.config;\n\t\tvar evs = [];\n\t\tif ((event.rec_type && event._end_date) || (event.rrule)) {\n\t\t\tconst seriesEnd = event._end_date || event.end_date;\n\t\t\t// GS-2482 need to take into account that a part of recurring events might be outside the limits\n\t\t\tif ((c.limit_start && c.limit_end)) {\n\t\t\t\tvar recEventInLimits = seriesEnd.valueOf() >= c.limit_start.valueOf() && event.start_date.valueOf() <= c.limit_end.valueOf();\n\t\t\t\treturn recEventInLimits;\n\t\t\t} else return true;\n\t\t} else {\n\t\t\tevs = [event];\n\t\t}\n\n\t\tvar complete_res = true;\n\t\tfor (var p=0; p<evs.length; p++) {\n\t\t\tvar res = true;\n\t\t\tvar ev = evs[p];\n\t\t\t// Event could have old _timed property (e.g. we are creating event with DND on timeline view and crossed day)\n\t\t\tev._timed = scheduler.isOneDayEvent(ev);\n\n\t\t\tres = (c.limit_start && c.limit_end) ? (ev.start_date.valueOf() >= c.limit_start.valueOf() && ev.end_date.valueOf() <= c.limit_end.valueOf()) : true;\n\t\t\tif (res){\n\t\t\t\tres = !scheduler.checkInMarkedTimespan(ev, dhx_time_block, function(event, eventStart, eventEnd, markerStart, markerEnd){\n\t\t\t\t\t//try crop event to allow placing\n\t\t\t\t\tvar allow = true;\n\t\t\t\t\tif (eventStart<=markerEnd && eventStart >= markerStart){\n\t\t\t\t\t\tif (markerEnd == 24*60 || eventEnd <= markerEnd){\n\t\t\t\t\t\t\tallow = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(event._timed && s._drag_id && s._drag_mode == \"new-size\"){\n\t\t\t\t\t\t\tevent.start_date.setHours(0);\n\t\t\t\t\t\t\tevent.start_date.setMinutes(markerEnd);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tallow = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ((eventEnd >= markerStart && eventEnd <= markerEnd) || (eventStart < markerStart && eventEnd > markerEnd)){\n\t\t\t\t\t\tif(event._timed && s._drag_id && s._drag_mode == \"new-size\"){\n\t\t\t\t\t\t\tevent.end_date.setHours(0);\n\t\t\t\t\t\t\tevent.end_date.setMinutes(markerStart);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tallow = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn allow;\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (!res) {\n\t\t\t\tres = (s.checkEvent(\"onLimitViolation\")) ? s.callEvent(\"onLimitViolation\",[ev.id, ev]) : res;\n\t\t\t}\n\t\t\tcomplete_res = complete_res && res;\n\t\t}\n\t\tif(!complete_res){\n\t\t\ts._drag_id = null;\n\t\t\ts._drag_mode = null;\n\t\t}\n\t\treturn complete_res;\n\n\n\t};\n\tscheduler._get_blocked_zones = function(timespans, property, day_index, day_value, timespan_type){\n\t\tvar zones =[];\n\t\tif (timespans && timespans[property]) {\n\t\t\tvar timeline_zones = timespans[property];\n\t\t\tvar blocked_timeline_zones = this._get_relevant_blocked_zones(day_index, day_value, timeline_zones, timespan_type);\n\t\t\tfor (var i=0; i<blocked_timeline_zones.length; i++) {\n\t\t\t\tzones = this._add_timespan_zones(zones, blocked_timeline_zones[i].zones);\n\t\t\t}\n\t\t}\n\t\treturn zones;\n\t};\n\tscheduler._get_relevant_blocked_zones = function(day_index, day_value, zones, timespan_type) {\n\t\tvar resultZones;\n\t\tif(scheduler.config.overwrite_marked_timespans){\n\t\t\tresultZones = (zones[day_value] && zones[day_value][timespan_type]) ? zones[day_value][timespan_type] :\n\t\t\t(zones[day_index] && zones[day_index][timespan_type]) ? zones[day_index][timespan_type] : [];\n\t\t}else{\n\t\t\tresultZones = [];\n\t\t\tif(zones[day_value] && zones[day_value][timespan_type]){\n\t\t\t\tresultZones = resultZones.concat(zones[day_value][timespan_type]);\n\t\t\t}\n\t\t\t\n\t\t\tif((zones[day_index] && zones[day_index][timespan_type])){\n\t\t\t\tresultZones = resultZones.concat(zones[day_index][timespan_type]);\n\t\t\t}\n\t\t}\n\n\t\treturn resultZones;\n\t};\n\tfunction getZones(ev, timespans, day_index, day_value, timespan_type){\n\t\tvar s = scheduler;\n\t\t//containers for 'unit' and 'timeline' views, and related 'section_id' properties\n\t\tvar zones = [];\n\t\tvar containers = {\n\t\t\t'_props':'map_to',\n\t\t\t'matrix':'y_property'};\n\t\t//check blocked sections in all units and timelines\n\t\tfor(var container in containers){\n\t\t\tvar property = containers[container];\n\t\t\tif(s[container]){\n\t\t\t\tfor(var view in s[container]){\n\t\t\t\t\tvar view_config = s[container][view];\n\t\t\t\t\tvar linker = view_config[property];\n\t\t\t\t\tif(!ev[linker]) continue;\n\t\t\t\t\tzones =  s._add_timespan_zones(zones,\n\t\t\t\t\t\tscheduler._get_blocked_zones(timespans[view], ev[linker], day_index, day_value, timespan_type));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// now need to add day blocks\n\t\tzones = s._add_timespan_zones(zones, scheduler._get_blocked_zones(timespans, 'global', day_index, day_value, timespan_type));\n\t\treturn zones;\n\t}\n\n\tscheduler._mark_now = function(hide) {\n\t\t// day, week, units views\n\t\tvar dhx_now_time = 'dhx_now_time';\n\t\tif (!this._els[dhx_now_time]) {\n\t\t\tthis._els[dhx_now_time] = [];\n\t\t}\n\t\tvar now = scheduler._currentDate();\n\t\tvar cfg = this.config;\n\t\tscheduler._remove_mark_now(); // delete previous marks if they exist\n\t\tif (!hide && cfg.mark_now && now < this._max_date && now > this._min_date && now.getHours() >= cfg.first_hour && now.getHours()<cfg.last_hour) {\n\t\t\tvar day_index = this.locate_holder_day(now);\n\t\t\tthis._els[dhx_now_time] = scheduler._append_mark_now(day_index, now);\n\t\t}\n\t};\n\tscheduler._append_mark_now = function(day_index, now) {\n\t\tvar dhx_now_time = 'dhx_now_time';\n\t\tvar zone_start= scheduler._get_zone_minutes(now);\n\t\tvar options = {\n\t\t\tzones: [zone_start, zone_start+1],\n\t\t\tcss: dhx_now_time,\n\t\t\ttype: dhx_now_time\n\t\t};\n\t\tif (!this._table_view) {\n\t\t\tif (this._props && this._props[this._mode]) { // units view\n\t\t\t\tvar start_index,\n\t\t\t\t\tend_index;\n\n\t\t\t\tvar view = this._props[this._mode];\n\t\t\t\tvar units_l = view.size || view.options.length;\n\t\t\t\tif (view.days > 1) {\n\t\t\t\t\tif(view.size && view.options.length){\n\t\t\t\t\t\tday_index = ((view.position+ day_index) / view.options.length) * view.size;\n\t\t\t\t\t}\n\t\t\t\t\tstart_index = day_index;\n\t\t\t\t\tend_index = day_index + units_l;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tstart_index = 0;\n\t\t\t\t\tend_index = start_index + units_l;\n\t\t\t\t}\n\n\t\t\t\tvar r_divs = [];\n\n\t\t\t\tfor (var i = start_index; i < end_index; i++) {\n\t\t\t\t\tvar t_day = i; // as each unit is actually considered +1 day\n\t\t\t\t\toptions.days = t_day;\n\t\t\t\t\tvar t_div = scheduler._render_marked_timespan(options, null, t_day)[0];\n\t\t\t\t\tr_divs.push(t_div);\n\t\t\t\t}\n\t\t\t\treturn r_divs;\n\t\t\t} else {  // day/week views\n\t\t\t\toptions.days = day_index;\n\t\t\t\treturn scheduler._render_marked_timespan(options, null, day_index);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._mode == \"month\") {\n\t\t\t\toptions.days = +scheduler.date.date_part(now);\n\t\t\t\treturn scheduler._render_marked_timespan(options, null, null);\n\t\t\t}\n\t\t}\n\t};\n\tscheduler._remove_mark_now = function() {\n\t\tvar dhx_now_time = 'dhx_now_time';\n\t\tvar els = this._els[dhx_now_time];\n\t\tfor (var i=0; i<els.length; i++) {\n\t\t\tvar div = els[i];\n\t\t\tvar parent = div.parentNode;\n\t\t\tif (parent) {\n\t\t\t\tparent.removeChild(div);\n\t\t\t}\n\t\t}\n\t\tthis._els[dhx_now_time] = [];\n\t};\n\n\t/*\n\tscheduler._marked_timespans = {\n\t\t\"global\": {\n\t\t\t\"0\": {\n\t\t\t\t\"default\": [\n\t\t\t\t\t{  // sunday\n\t\t\t\t\t\tzones: [0, 100, 500, 600],\n\t\t\t\t\t\tcss: \"yellow_box\",\n\t\t\t\t\t\ttype: \"default\",\n\t\t\t\t\t\tview: \"global\",\n\t\t\t\t\t\tday: 0\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t\t\"112121312\": {\n\t\t\t\t\"my_special_type\": [\n\t\t\t\t\t{\n\t\t\t\t\t\tzones: [600, 900],\n\t\t\t\t\t\ttype: \"block\",\n\t\t\t\t\t\tcss: \"some_class\",\n\t\t\t\t\t\tview: \"global\",\n\t\t\t\t\t\tday: 112121312\n\t\t\t\t\t},\n\t\t\t\t\t{}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t\"units\": {\n\t\t\t\"5_id\": {\n\t\t\t\t\"3\": {\n\t\t\t\t\t\"special_type\": [ {}, {}, {} ],\n\t\t\t\t\t\"another_type\": [ {} ]\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"6_id\": {\n\t\t\t\t\"11212127\": {\n\t\t\t\t\t...\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t*/\n\tscheduler._marked_timespans = { global: {} };\n\n\tscheduler._get_zone_minutes = function(date) {\n\t\treturn date.getHours()*60 + date.getMinutes();\n\t};\n\tscheduler._prepare_timespan_options = function(config) { // receives 1 option, returns array of options\n\t\tvar r_configs = []; // resulting configs\n\t\tvar temp_configs = [];\n\n\t\tif (config.days == \"fullweek\")\n\t\t\tconfig.days = [0,1,2,3,4,5,6];\n\n\t\tif (config.days instanceof Array) {\n\t\t\tvar t_days = config.days.slice();\n\t\t\tfor (var i=0; i<t_days.length; i++) {\n\t\t\t\tvar cloned_config = scheduler._lame_clone(config);\n\t\t\t\tcloned_config.days = t_days[i];\n\t\t\t\tr_configs.push.apply(r_configs, scheduler._prepare_timespan_options(cloned_config));\n\t\t\t}\n\t\t\treturn r_configs;\n\t\t}\n\n\t\tif ( !config ||\n\t\t\t!((config.start_date && config.end_date && config.end_date > config.start_date) || (config.days !== undefined && config.zones)) && !config.type )\n\t\t\treturn r_configs;  // incorrect config was provided\n\n\t\tvar min = 0;\n\t\tvar max = 24*60;\n\t\tif (config.zones == \"fullday\")\n\t\t\tconfig.zones = [min, max];\n\t\tif (config.zones && config.invert_zones) {\n\t\t\tconfig.zones = scheduler.invertZones(config.zones);\n\t\t}\n\n\t\tconfig.id = scheduler.uid();\n\t\tconfig.css = config.css||\"\";\n\t\tconfig.type = config.type||default_timespan_type;\n\n\t\tvar sections = config.sections;\n\t\tif (sections) {\n\t\t\tfor (var view_key in sections) {\n\t\t\t\tif (sections.hasOwnProperty(view_key)) {\n\t\t\t\t\tvar ids = sections[view_key];\n\t\t\t\t\tif (!(ids instanceof Array))\n\t\t\t\t\t\tids = [ids];\n\t\t\t\t\tfor (var i=0; i<ids.length; i++) {\n\t\t\t\t\t\tvar t_config = scheduler._lame_copy({}, config);\n\t\t\t\t\t\tt_config.sections = {};\n\t\t\t\t\t\tt_config.sections[view_key] = ids[i];\n\t\t\t\t\t\ttemp_configs.push(t_config);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\ttemp_configs.push(config);\n\t\t}\n\n\t\tfor (var k=0; k<temp_configs.length; k++) {\n\t\t\tvar c_config = temp_configs[k]; // config to be checked\n\n\t\t\tvar start_date = c_config.start_date;\n\t\t\tvar end_date = c_config.end_date;\n\n\t\t\tif (start_date && end_date) {\n\t\t\t\tvar t_sd = scheduler.date.date_part(new Date(start_date)); // e.g. 05 october\n\t\t\t\tvar t_ed= scheduler.date.add(t_sd, 1, \"day\");  // 06 october, will both be incremented in the loop\n\n\t\t\t\twhile (t_sd < end_date) {\n\t\t\t\t\tvar t_config = scheduler._lame_copy({}, c_config);\n\t\t\t\t\tdelete t_config.start_date;\n\t\t\t\t\tdelete t_config.end_date;\n\t\t\t\t\tt_config.days = t_sd.valueOf();\n\t\t\t\t\tvar zone_start = (start_date > t_sd) ? scheduler._get_zone_minutes(start_date) : min;\n\t\t\t\t\tvar zone_end = ( end_date > t_ed || end_date.getDate() != t_sd.getDate() ) ? max : scheduler._get_zone_minutes(end_date);\n\t\t\t\t\tt_config.zones = [zone_start, zone_end];\n\t\t\t\t\tr_configs.push(t_config);\n\n\t\t\t\t\tt_sd = t_ed;\n\t\t\t\t\tt_ed = scheduler.date.add(t_ed, 1, \"day\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (c_config.days instanceof Date)\n\t\t\t\t\tc_config.days = (scheduler.date.date_part(c_config.days)).valueOf();\n\t\t\t\tc_config.zones = config.zones.slice();\n\t\t\t\tr_configs.push(c_config);\n\t\t\t}\n\t\t}\n\t\treturn r_configs;\n\t};\n\tscheduler._get_dates_by_index = function(index, start, end) {\n\t\tvar dates = [];\n\t\tstart = scheduler.date.date_part(new Date(start||scheduler._min_date));\n\t\tend = new Date(end||scheduler._max_date);\n\t\tvar start_day = start.getDay();\n\t\tvar delta = (index-start_day >= 0) ? (index-start_day) : (7-start.getDay()+index);\n\t\tvar t_date = scheduler.date.add(start, delta, \"day\");\n\t\tfor (; t_date < end; t_date = scheduler.date.add(t_date, 1, \"week\")) {\n\t\t\tdates.push(t_date);\n\t\t}\n\t\treturn dates;\n\t};\n\tscheduler._get_css_classes_by_config = function(config) {\n\t\tvar css_classes = [];\n\t\tif (config.type == dhx_time_block) {\n\t\t\tcss_classes.push(dhx_time_block);\n\t\t\tif (config.css)\n\t\t\t\tcss_classes.push(dhx_time_block+\"_reset\");\n\t\t}\n\t\tcss_classes.push(\"dhx_marked_timespan\", config.css);\n\t\treturn css_classes.join(\" \");\n\t};\n\tscheduler._get_block_by_config = function(config) {\n\t\tvar block  = document.createElement(\"div\");\n\t\tif (config.html) {\n\t\t\tif (typeof config.html == \"string\")\n\t\t\t\tblock.innerHTML = config.html;\n\t\t\telse\n\t\t\t\tblock.appendChild(config.html);\n\t\t}\n\t\treturn block;\n\t};\n\tscheduler._render_marked_timespan = function(options, area, day) {\n\t\tvar blocks = []; // resulting block which will be rendered and returned\n\t\tvar c = scheduler.config;\n\t\tvar min_date = this._min_date;\n\t\tvar max_date = this._max_date;\n\t\tvar day_value = false; // if timespan for specific date should be displayed\n\n\t\tif (!c.display_marked_timespans)\n\t\t\treturn blocks;\n\n\t\t// in case of markTimespan\n\t\tif (!day && day !== 0) {\n\t\t\tif (options.days < 7)\n\t\t\t\tday = options.days;\n\t\t\telse {\n\t\t\t\tvar date_to_display = new Date(options.days);\n\t\t\t\tday_value = +date_to_display;\n\n\t\t\t\t// in case of markTimespan date could be not in the viewing range, need to return\n\t\t\t\tif ( !(+max_date > +date_to_display && +min_date <= +date_to_display) )\n\t\t\t\t\treturn blocks;\n\n\t\t\t\tday = date_to_display.getDay();\n\t\t\t}\n\n\t\t\t// convert day default index (Sun - 0, Sat - 6) to index of hourscales (depends on week_start and config.start_on_monday)\n\t\t\tvar min_day = min_date.getDay();\n\t\t\tif (min_day > day) {\n\t\t\t\tday = 7 - (min_day-day);\n\t\t\t} else {\n\t\t\t\tday = day - min_day;\n\t\t\t}\n\t\t}\n\t\tvar zones = options.zones;\n\t\tvar css_classes = scheduler._get_css_classes_by_config(options);\n\n\t\tif (scheduler._table_view && scheduler._mode == \"month\") {\n\t\t\tvar areas = [];\n\t\t\tvar days = [];\n\n\n\t\t\tif (!area) {\n\t\t\t\tdays = (day_value) ? [day_value] : scheduler._get_dates_by_index(day);\n\t\t\t\tfor (var i=0; i < days.length; i++) {\n\t\t\t\t\tareas.push( this._scales[days[i]] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tareas.push(area);\n\t\t\t\tdays.push(day);\n\t\t\t}\n\n\t\t\tfor (var i=0; i < areas.length; i++) {\n\t\t\t\tarea = areas[i];\n\t\t\t\tday = days[i];\n\n\t\t\t\tvar sday = this.locate_holder_day(day, false) % this._cols.length;\n\n\t\t\t\tif(this._ignores[sday]) continue;\n\n\t\t\t\tvar block_proto = scheduler._get_block_by_config(options);\n\t\t\t\tblock_proto.className = css_classes;\n\t\t\t\tblock_proto.style.top = \"0px\";\n\t\t\t\tblock_proto.style.height = \"100%\";\n\t\t\t\t\n\t\t\t\tfor (var k=0; k < zones.length; k+=2) {\n\t\t\t\t\tvar start = zones[i];\n\t\t\t\t\tvar end = zones[i+1];\n\t\t\t\t\tif (end <= start)\n\t\t\t\t\t\treturn [];\n\n\t\t\t\t\tvar block = block_proto.cloneNode(true);\n\n\t\t\t\t\tblock.style.left = \"0px\";\n\t\t\t\t\tblock.style.width = \"100%\";\n\n\t\t\t\t\tarea.appendChild(block);\n\t\t\t\t\tblocks.push(block);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tvar index = day;\n\n\t\t\tif(this._ignores[this.locate_holder_day(day, false)]) return blocks;\n\n\t\t\tif (this._props && this._props[this._mode] && options.sections && options.sections[this._mode]) {\n\t\t\t\tvar view = this._props[this._mode];\n\t\t\t\tindex = view.order[options.sections[this._mode]];\n\n\t\t\t\tvar inner_index = view.order[options.sections[this._mode]];\n\t\t\t\tif(!(view.days > 1)){\n\t\t\t\t\tindex = inner_index;\n\t\t\t\t\tif (view.size && (index > view.position+view.size)) {\n\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tvar units_l = view.size || view.options.length;\n\t\t\t\t\tindex = index*units_l + inner_index;\n\t\t\t\t}\n\t\t\t}\n\t\t\tarea = area ? area : scheduler.locate_holder(index);\n\n\t\t\tfor (var i = 0; i < zones.length; i+=2){\n\t\t\t\tvar start = Math.max(zones[i], c.first_hour*60);\n\t\t\t\tvar end = Math.min(zones[i+1], c.last_hour*60);\n\t\t\t\tif (end <= start) {\n\t\t\t\t\tif (i+2 < zones.length)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\telse\n\t\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\tvar block = scheduler._get_block_by_config(options);\n\t\t\t\tblock.className = css_classes;\n\n\t\t\t\t// +1 for working with section which really takes up whole height (as % would be == 0)\n\t\t\t\tvar all_hours_height = this.config.hour_size_px*24 + 1;\n\t\t\t\tvar hour_ms = 60*60*1000;\n\t\t\t\tblock.style.top = (Math.round((start*60*1000-this.config.first_hour*hour_ms)*this.config.hour_size_px/hour_ms) % all_hours_height) + \"px\";\n\t\t\t\tblock.style.height = Math.max((Math.round(((end-start)*60*1000)*this.config.hour_size_px/hour_ms)) % all_hours_height, 1)+\"px\";\n\n\t\t\t\tarea.appendChild(block);\n\t\t\t\tblocks.push(block);\n\t\t\t}\n\t\t}\n\t\treturn blocks;\n\t};\n\n\tscheduler._mark_timespans = function(){\n\t\tvar data = this._els[\"dhx_cal_data\"][0];\n\t\tvar divs = [];\n\t\tif (scheduler._table_view && scheduler._mode == \"month\"){\n\t\t\tfor (var day in this._scales) {\n\t\t\t\tvar date = new Date(+day);\n\t\t\t\tdivs.push.apply(divs, scheduler._on_scale_add_marker(this._scales[day],date));\n\t\t\t}\n\t\t}else {\n\t\t\t//manually trigger rendering of configs for each column\n\t\t\tvar date = new Date(scheduler._min_date);\n\t\t\tfor (var i = 0, len = data.childNodes.length; i < len; i++) {\n\t\t\t\tvar area = data.childNodes[i];\n\t\t\t\tif (area.firstChild && scheduler._getClassName(area.firstChild).indexOf(\"dhx_scale_hour\") > -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tdivs.push.apply(divs, scheduler._on_scale_add_marker(area, date));\n\t\t\t\tdate = scheduler.date.add(date, 1, \"day\");\n\t\t\t}\n\t\t}\n\t\treturn divs;\n\t};\n\n\t// just marks timespan, will be cleaned after refresh\n\tscheduler.markTimespan = function(configuration) {\n\t\tif(!this._els){\n\t\t\tthrow new Error(\"`scheduler.markTimespan` can't be used before scheduler initialization. Place `scheduler.markTimespan` call after `scheduler.init`.\");\n\t\t}\n\n\n\t\tvar rebuild_els = false;\n\t\tif(!this._els[\"dhx_cal_data\"]){\n\t\t\tscheduler.get_elements();\n\t\t\trebuild_els = true;\n\t\t}\n\n\n\t\t// backup regular marked timespans\n\t\tvar timespans_ids = scheduler._marked_timespans_ids,\n\t\t\ttimespan_types = scheduler._marked_timespans_types,\n\t\t\ttimespans = scheduler._marked_timespans;\n\n\t\tscheduler.deleteMarkedTimespan();\n\n\t\t//add block to configs\n\t\tscheduler.addMarkedTimespan(configuration);\n\n\t\tvar divs = scheduler._mark_timespans();\n\n\t\tif(rebuild_els)\n\t\t\tscheduler._els = [];\n\n\t\t// restore timespan config\n\t\tscheduler._marked_timespans_ids = timespans_ids;\n\t\tscheduler._marked_timespans_types = timespan_types;\n\t\tscheduler._marked_timespans = timespans;\n\n\t\treturn divs;\n\t};\n\tscheduler.unmarkTimespan = function(divs) {\n\t\tif (!divs)\n\t\t\treturn;\n\t\tfor (var i=0; i<divs.length; i++) {\n\t\t\tvar div = divs[i];\n\t\t\t// parent may no longer be present if we switched views, navigated\n\t\t\tif (div.parentNode) {\n\t\t\t\tdiv.parentNode.removeChild(div);\n\t\t\t}\n\t\t}\n\t};\n\n\n\tscheduler._addMarkerTimespanConfig = function(config){\n\t\tvar global = \"global\";\n\t\tvar timespans = scheduler._marked_timespans;\n\t\tvar id = config.id;\n\n\t\tvar ids = scheduler._marked_timespans_ids;\n\t\tif (!ids[id])\n\t\t\tids[id] = [];\n\n\n\t\tvar day = config.days;\n\n\t\tvar sections = config.sections;\n\t\tvar type = config.type; // default or specified\n\t\tconfig.id = id;\n\n\t\tif (sections) {\n\t\t\tfor (var view_key in sections) {\n\t\t\t\tif (sections.hasOwnProperty(view_key)) {\n\t\t\t\t\tif (!timespans[view_key])\n\t\t\t\t\t\ttimespans[view_key] = {};\n\t\t\t\t\tvar unit_id = sections[view_key];\n\t\t\t\t\tvar timespans_view = timespans[view_key];\n\t\t\t\t\tif (!timespans_view[unit_id])\n\t\t\t\t\t\ttimespans_view[unit_id] = {};\n\t\t\t\t\tif (!timespans_view[unit_id][day])\n\t\t\t\t\t\ttimespans_view[unit_id][day] = {};\n\t\t\t\t\tif (!timespans_view[unit_id][day][type]){\n\t\t\t\t\t\ttimespans_view[unit_id][day][type] = [];\n\t\t\t\t\t\tif(!scheduler._marked_timespans_types)\n\t\t\t\t\t\t\tscheduler._marked_timespans_types = {};\n\t\t\t\t\t\tif(!scheduler._marked_timespans_types[type])\n\t\t\t\t\t\t\tscheduler._marked_timespans_types[type] = true;\n\t\t\t\t\t}\n\t\t\t\t\tvar day_configs = timespans_view[unit_id][day][type];\n\t\t\t\t\tconfig._array = day_configs;\n\t\t\t\t\tday_configs.push(config);\n\t\t\t\t\tids[id].push(config);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!timespans[global][day])\n\t\t\t\ttimespans[global][day] = {};\n\t\t\tif (!timespans[global][day][type])\n\t\t\t\ttimespans[global][day][type] = [];\n\n\t\t\tif(!scheduler._marked_timespans_types)\n\t\t\t\tscheduler._marked_timespans_types = {};\n\t\t\tif(!scheduler._marked_timespans_types[type])\n\t\t\t\tscheduler._marked_timespans_types[type] = true;\n\n\t\t\tvar day_configs = timespans[global][day][type];\n\t\t\tconfig._array = day_configs;\n\t\t\tday_configs.push(config);\n\t\t\tids[id].push(config);\n\t\t}\n\n\t};\n\n\tscheduler._marked_timespans_ids = {};\n\t// adds marked timespan to collections, persistent\n\tscheduler.addMarkedTimespan = function(configuration) {\n\t\tvar configs = scheduler._prepare_timespan_options(configuration);\n\t\tif (!configs.length)\n\t\t\treturn; // options are incorrect, nothing to mark\n\n\t\tvar id = configs[0].id;\n\t\tfor (var i=0; i<configs.length; i++) {\n\t\t\tscheduler._addMarkerTimespanConfig(configs[i]);\n\t\t}\n\t\treturn id;\n\t};\n\t// not used for now\n\tscheduler._add_timespan_zones = function(current_zones, zones) {\n\t\tvar resulting_zones = current_zones.slice();\n\t\tzones = zones.slice();\n\n\t\tif (!resulting_zones.length)\n\t\t\treturn zones;\n\n\t\tfor (var i=0; i<resulting_zones.length; i+=2) {\n\t\t\tvar c_zone_start = resulting_zones[i];\n\t\t\tvar c_zone_end = resulting_zones[i+1];\n\t\t\tvar isLast = (i+2 == resulting_zones.length);\n\n\t\t\tfor (var k=0; k<zones.length; k+=2) {\n\t\t\t\tvar zone_start = zones[k];\n\t\t\t\tvar zone_end = zones[k+1];\n\t\t\t\tif ((zone_end > c_zone_end && zone_start <= c_zone_end) || (zone_start < c_zone_start && zone_end >= c_zone_start)) {\n\t\t\t\t\tresulting_zones[i] = Math.min(c_zone_start, zone_start);\n\t\t\t\t\tresulting_zones[i+1] = Math.max(c_zone_end, zone_end);\n\t\t\t\t\ti -= 2;\n\t\t\t\t} else {\n\t\t\t\t\tif (!isLast) // do nothing, maybe next current zone will match or will be last\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvar offset = (c_zone_start > zone_start)?0:2;\n\t\t\t\t\tresulting_zones.splice(i+offset, 0, zone_start, zone_end); // last current zone, need to add another\n\t\t\t\t}\n\t\t\t\tzones.splice(k--,2); // zone was merged or added, need to exclude it\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn resulting_zones;\n\t};\n\tscheduler._subtract_timespan_zones = function(current_zones, zones) {\n\t\tvar resulting_zones = current_zones.slice();\n\t\tfor (var i=0; i<resulting_zones.length; i+=2 ) {\n\t\t\tvar c_zone_start = resulting_zones[i];// current_zone_start\n\t\t\tvar c_zone_end = resulting_zones[i+1];\n\t\t\tfor (var k=0; k<zones.length; k+=2) {\n\t\t\t\tvar zone_start = zones[k];\n\t\t\t\tvar zone_end = zones[k+1];\n\t\t\t\tif (zone_end > c_zone_start && zone_start < c_zone_end) {\n\t\t\t\t\tvar is_modified = false;\n\t\t\t\t\tif (c_zone_start >= zone_start && c_zone_end <= zone_end) {\n\t\t\t\t\t\tresulting_zones.splice(i, 2);\n\t\t\t\t\t}\n\t\t\t\t\tif (c_zone_start < zone_start) {\n\t\t\t\t\t\tresulting_zones.splice(i, 2, c_zone_start, zone_start);\n\t\t\t\t\t\tis_modified = true;\n\t\t\t\t\t}\n\t\t\t\t\tif (c_zone_end > zone_end) {\n\t\t\t\t\t\tresulting_zones.splice( (is_modified)?(i+2):i, (is_modified)?0:2, zone_end, c_zone_end);\n\t\t\t\t\t}\n\t\t\t\t\ti -= 2;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resulting_zones;\n\t};\n\tscheduler.invertZones = function(zones) {\n\t\treturn scheduler._subtract_timespan_zones([0, 1440], zones.slice());\n\t};\n\tscheduler._delete_marked_timespan_by_id = function(id) {\n\t\tvar configs = scheduler._marked_timespans_ids[id];\n\t\tif (configs) {\n\t\t\tfor (var i=0; i<configs.length; i++) {\n\t\t\t\tvar config = configs[i];\n\t\t\t\tvar parent_array = config._array;\n\t\t\t\tfor (var k=0; k<parent_array.length; k++) {\n\t\t\t\t\tif (parent_array[k] == config) {\n\t\t\t\t\t\tparent_array.splice(k, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tscheduler._delete_marked_timespan_by_config = function(config) {\n\t\tvar timespans = scheduler._marked_timespans;\n\t\tvar sections = config.sections;\n\t\tvar day = config.days;\n\t\tvar type = config.type||default_timespan_type;\n\t\tvar viewspans;\n\t\tif (sections) {\n\t\t\tfor (var view_key in sections) {\n\t\t\t\tif (sections.hasOwnProperty(view_key) && timespans[view_key]) {\n\t\t\t\t\tvar unit_id = sections[view_key];\n\t\t\t\t\tif (timespans[view_key][unit_id]){\n\t\t\t\t\t\tviewspans = timespans[view_key][unit_id];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tviewspans = timespans.global;\n\t\t}\n\n\t\tif(viewspans) {\n\t\t\tif (day !== undefined) {\n\t\t\t\tif (viewspans[day] && viewspans[day][type]) {\n\t\t\t\t\tscheduler._addMarkerTimespanConfig(config); // register config in order to be able to delete recurring timespan from a specific day\n\t\t\t\t\tscheduler._delete_marked_timespans_list(viewspans[day][type], config);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var d in viewspans) {\n\t\t\t\t\tif (viewspans[d][type]) {\n\t\t\t\t\t\tvar dayConfig = scheduler._lame_clone(config);\n\t\t\t\t\t\tconfig.days = d;\n\t\t\t\t\t\tscheduler._addMarkerTimespanConfig(dayConfig); // register config in order to be able to delete recurring timespan from a specific day\n\t\t\t\t\t\tscheduler._delete_marked_timespans_list(viewspans[d][type], config);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tscheduler._delete_marked_timespans_list = function(day_timespans, config){\n\t\tfor (var i=0; i<day_timespans.length; i++) {\n\t\t\tvar d_t = day_timespans[i];\n\t\t\tvar zones = scheduler._subtract_timespan_zones(d_t.zones, config.zones);\n\t\t\tif (zones.length)\n\t\t\t\td_t.zones = zones;\n\t\t\telse {\n\t\t\t\tday_timespans.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\t// need to update ids collection\n\t\t\t\tvar related_zones = scheduler._marked_timespans_ids[d_t.id];\n\t\t\t\tfor (var k=0; k<related_zones.length; k++) {\n\t\t\t\t\tif (related_zones[k] == d_t) {\n\t\t\t\t\t\trelated_zones.splice(k, 1);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tscheduler.deleteMarkedTimespan = function(configuration) {\n\t\t// delete everything\n\t\tif (!arguments.length) {\n\t\t\tscheduler._marked_timespans = { global: {} };\n\t\t\tscheduler._marked_timespans_ids = {};\n\t\t\tscheduler._marked_timespans_types = {};\n\t\t}\n\n\t\tif (typeof configuration != \"object\") { // id was passed\n\t\t\tscheduler._delete_marked_timespan_by_id(configuration);\n\t\t} else { // normal configuration was passed\n\n\t\t\tif(!(configuration.start_date && configuration.end_date)){\n\t\t\t\tif(configuration.days === undefined && !configuration.type)\n\t\t\t\t\tconfiguration.days = \"fullweek\";\n\t\t\t\tif(!configuration.zones)\n\t\t\t\t\tconfiguration.zones = \"fullday\";\n\t\t\t}\n\n\t\t\tvar types = [];\n\t\t\tif(!configuration.type){\n\t\t\t\t//if type not specified - delete timespans of all types\n\t\t\t\tfor(var type in scheduler._marked_timespans_types){\n\t\t\t\t\ttypes.push(type);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\ttypes.push(configuration.type);\n\t\t\t}\n\n\n\t\t\tvar configs = scheduler._prepare_timespan_options(configuration);\n\n\t\t\tfor (var i=0; i<configs.length; i++) {\n\n\t\t\t\tvar config = configs[i];\n\t\t\t\tfor( var t=0; t < types.length; t++){\n\t\t\t\t\tvar typedConfig = scheduler._lame_clone(config);\n\t\t\t\t\ttypedConfig.type = types[t];\n\t\t\t\t\tscheduler._delete_marked_timespan_by_config(typedConfig);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t};\n\tscheduler._get_types_to_render = function(common, specific) {\n\t\tvar types_to_render = (common) ? scheduler._lame_copy({},common) : {};\n\t\tfor (var type in specific||{} ) {\n\t\t\tif (specific.hasOwnProperty(type)) {\n\t\t\t\ttypes_to_render[type] = specific[type];\n\t\t\t}\n\t\t}\n\t\treturn types_to_render;\n\t};\n\tscheduler._get_configs_to_render = function(types) {\n\t\tvar configs = [];\n\t\tfor (var type in types) {\n\t\t\tif (types.hasOwnProperty(type)) {\n\t\t\t\tconfigs.push.apply(configs, types[type]);\n\t\t\t}\n\t\t}\n\t\treturn configs;\n\t};\n\n\tscheduler._on_scale_add_marker = function(area, day){\n\t\tif (scheduler._table_view && scheduler._mode != \"month\")\n\t\t\treturn;\n\n\t\tvar day_index = day.getDay();\n\t\tvar day_value = day.valueOf();\n\t\tvar mode = this._mode;\n\t\tvar timespans = scheduler._marked_timespans;\n\t\tvar r_configs = [];\n\t\tvar divs = [];\n\t\tif (this._props && this._props[mode]) { // we are in the units view and need to draw it's sections as well\n\t\t\tvar view = this._props[mode]; // units view object\n\t\t\tvar units = view.options;\n\t\t\tvar index = scheduler._get_unit_index(view, day);\n\t\t\tvar unit = units[index]; // key, label\n\n\t\t\tif(!(view.days > 1)){\n\t\t\t\tday = scheduler.date.date_part(new Date(this._date)); // for units view actually only 1 day is displayed yet the day variable will change, need to use this._date for all calls\n\t\t\t}else{\n\t\t\t\tvar dx = 24*60*60*1000;\n\t\t\t\tvar day_ind = Math.round((day - scheduler._min_date)/dx);\n\t\t\t\tvar unitsPerDay = view.size || units.length;\n\t\t\t\tday = scheduler.date.add(scheduler._min_date, Math.floor(day_ind/unitsPerDay), \"day\"); // to the \"same\" day for all sections\n\t\t\t\tday = scheduler.date.date_part(day);\n\t\t\t}\n\t\t\tday_index = day.getDay();\n\t\t\tday_value = day.valueOf();\n\n\t\t\tif (timespans[mode] && timespans[mode][unit.key]) {\n\t\t\t\tvar unit_zones = timespans[mode][unit.key];\n\t\t\t\tvar unit_types = scheduler._get_types_to_render(unit_zones[day_index], unit_zones[day_value]);\n\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(unit_types));\n\t\t\t}\n\t\t}\n\n\t\tvar global_data = timespans[\"global\"];\n\n\t\tif(scheduler.config.overwrite_marked_timespans){\n\t\t\tvar day_types = global_data[day_value]||global_data[day_index];\n\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(day_types));\n\t\t} else {\n\t\t\tif(global_data[day_value]){\n\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(global_data[day_value]));\n\t\t\t}\n\t\t\tif(global_data[day_index]){\n\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(global_data[day_index]));\n\t\t\t}\n\t\t}\n\n\t\tfor (var i=0; i<r_configs.length; i++) {\n\t\t\tdivs.push.apply(divs, (scheduler._render_marked_timespan(r_configs[i], area, day)));\n\t\t}\n\t\treturn divs;\n\t};\n\tscheduler.attachEvent(\"onScaleAdd\", function(){\n\t\tscheduler._on_scale_add_marker.apply(scheduler, arguments);\n\t});\n\n\tscheduler.dblclick_dhx_marked_timespan = function(e,src){\n\t\tscheduler.callEvent(\"onScaleDblClick\",[scheduler.getActionData(e).date,src,e]);\n\n\t\tif (scheduler.config.dblclick_create){\n\t\t\tscheduler.addEventNow(scheduler.getActionData(e).date,null,e);\n\t\t}\n\t};\n\n}","function createMethod(scheduler){\n\tvar methods = {};\n\tvar isActive = false;\n\tfunction disableMethod(methodName, dummyMethod){\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\n\n\t\tif(!methods[methodName]){\n\t\t\tmethods[methodName] = this[methodName];\n\t\t\tthis[methodName] = dummyMethod;\n\t\t}\n\t}\n\tfunction restoreMethod(methodName){\n\t\tif(methods[methodName]){\n\t\t\tthis[methodName] = methods[methodName];\n\t\t\tmethods[methodName] = null;\n\t\t}\n\t}\n\tfunction disableMethods(methodsHash){\n\t\tfor(var i in methodsHash){\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\n\t\t}\n\t}\n\tfunction restoreMethods(){\n\t\tfor(var i in methods){\n\t\t\trestoreMethod.call(this, i);\n\t\t}\n\t}\n\n\tfunction batchUpdatePayload(callback){\n\t\ttry{\n\t\t\tcallback();\n\t\t}catch(e){\n\t\t\twindow.console.error(e);\n\t\t}\n\t}\n\n\tscheduler.$stateProvider.registerProvider(\"batchUpdate\", function(){\n\t\treturn {\n\t\t\tbatch_update: isActive\n\t\t};\n\t}, false);\n\n\treturn function batchUpdate(callback, noRedraw) {\n\t\tif(isActive){\n\t\t\t// batch mode is already active\n\t\t\tbatchUpdatePayload(callback);\n\t\t\treturn;\n\t\t}\n\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\n\t\tvar dp_mode;\n\t\tif (call_dp){\n\t\t\tdp_mode = this._dp.updateMode;\n\t\t\tthis._dp.setUpdateMode(\"off\");\n\t\t}\n\n\t\t// temporary disable some methods while updating multiple events\n\n\t\tconst calls = {\n\t\t\tsetModeDate: {date: null, mode: null},\n\t\t\tneedRender: false,\n\t\t\tneedUpdateView: false,\n\t\t\trepaintEvents: {}\n\n\t\t};\n\n\t\tconst rememberModeDate = (date, mode) => {\n\t\t\tif(date){\n\t\t\t\tcalls.setModeDate.date = date;\n\t\t\t}\n\t\t\tif(mode){\n\t\t\t\tcalls.setModeDate.mode = mode;\n\t\t\t}\n\t\t};\n\n\t\tvar methods = {\n\t\t\trender:(date, mode) => {calls.needRender = true; rememberModeDate(date, mode);},\n\t\t\tsetCurrentView:(date, mode) => {calls.needRender = true; rememberModeDate(date, mode);},\n\t\t\tupdateView:(date, mode) => {calls.needUpdateView = true; rememberModeDate(date, mode);},\n\t\t\trender_data:() => calls.needRender = true,\n\t\t\trender_view_data:(evs) => { \n\t\t\t\tif(evs && evs.length){\n\t\t\t\t\tevs.forEach((e) => calls.repaintEvents[e.id] = true);\n\t\t\t\t}else{\n\t\t\t\t\tcalls.needRender = true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tdisableMethods.call(this, methods);\n\n\t\tisActive = true;\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\n\n\t\tbatchUpdatePayload(callback);\n\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\n\n\t\trestoreMethods.call(this);\n\n\t\tisActive = false;\n\t\tif(!noRedraw){\n\t\t\tif(calls.needRender){\n\t\t\t\tscheduler.render(calls.setModeDate.date, calls.setModeDate.mode);\n\t\t\t}else if(calls.needUpdateView){\n\t\t\t\tscheduler.updateView(calls.setModeDate.date, calls.setModeDate.mode);\n\t\t\t}else{\n\t\t\t\tfor(const i in calls.repaintEvents){\n\t\t\t\t\tscheduler.updateEvent(i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (call_dp) {\n\t\t\tthis._dp.setUpdateMode(dp_mode);\n\t\t\tthis._dp.sendData();\n\t\t}\n\t};\n}\n\nexport default function(scheduler){\n\tscheduler.batchUpdate = createMethod(scheduler);\n}","class t{constructor(t){const{url:e,token:s}=t;this._url=e,this._token=s,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:\"application/json\",\"Content-Type\":\"application/json\",\"Remote-Token\":this._token}}fetch(t,e){const s={credentials:\"include\",headers:this.headers()};return e&&(s.method=\"POST\",s.body=e),fetch(t,s).then(t=>t.json())}load(t){return t&&(this._url=t),this.fetch(this._url).then(t=>this.parse(t))}parse(t){const{key:e,websocket:s}=t;e&&(this._token=t.key);for(const e in t.data)this.data[e]=t.data[e];for(const e in t.api){const s=this.api[e]={},i=t.api[e];for(const t in i)s[t]=this._wrapper(e+\".\"+t)}return s&&this.connect(),this}connect(){const t=this._socket;t&&(this._socket=null,t.onclose=function(){},t.close()),this._mode=2,this._socket=function(t,e,s,i){let n=e;\"/\"===n[0]&&(n=document.location.protocol+\"//\"+document.location.host+e);n=n.replace(/^http(s|):/,\"ws$1:\");const o=-1!=n.indexOf(\"?\")?\"&\":\"?\";n=`${n}${o}token=${s}&ws=1`;const r=new WebSocket(n);return r.onclose=()=>setTimeout(()=>t.connect(),2e3),r.onmessage=e=>{const s=JSON.parse(e.data);switch(s.action){case\"result\":t.result(s.body,[]);break;case\"event\":t.fire(s.body.name,s.body.value);break;case\"start\":i();break;default:t.onError(s.data)}},r}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(t){return function(){const e=[].slice.call(arguments);let s=null;const i=new Promise((i,n)=>{s={data:{id:this._uid(),name:t,args:e},status:1,resolve:i,reject:n},this._queue.push(s)});return this.onCall(s,i),3===this._mode?this._send(s):setTimeout(()=>this._send(),1),i}.bind(this)}_uid(){return(this._seed++).toString()}_send(t){if(2==this._mode)return void setTimeout(()=>this._send(),100);const e=t?[t]:this._queue.filter(t=>1===t.status);if(!e.length)return;const s=e.map(t=>(t.status=2,t.data));3!==this._mode?this.fetch(this._url,JSON.stringify(s)).catch(t=>this.onError(t)).then(t=>this.result(t,s)):this._socket.send(JSON.stringify({action:\"call\",body:s}))}result(t,e){const s={};if(t)for(let e=0;e<t.length;e++)s[t[e].id]=t[e];else for(let t=0;t<e.length;t++)s[e[t].id]={id:e[t].id,error:\"Network Error\",data:null};for(let t=this._queue.length-1;t>=0;t--){const e=this._queue[t],i=s[e.data.id];i&&(this.onResponse(e,i),i.error?e.reject(i.error):e.resolve(i.data),this._queue.splice(t,1))}}on(t,e){const s=this._uid();let i=this._events[t];const n=!!i;return n||(i=this._events[t]=[]),i.push({id:s,handler:e}),n||3!=this._mode||this._socket.send(JSON.stringify({action:\"subscribe\",name:t})),{name:t,id:s}}_resubscribe(){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"subscribe\",name:t}))}detach(t){if(!t){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:\"unsubscribe\",key:t}));return void(this._events={})}const{id:e,name:s}=t,i=this._events[s];if(i){const t=i.filter(t=>t.id!=e);t.length?this._events[s]=t:(delete this._events[s],3==this._mode&&this._socket.send(JSON.stringify({action:\"unsubscribe\",name:s})))}}fire(t,e){const s=this._events[t];if(s)for(let t=0;t<s.length;t++)s[t].handler(e)}onError(t){return null}onCall(t,e){}onResponse(t,e){}}export{t as Client};\n//# sourceMappingURL=remote.es6.js.map\n","import { Client } from \"remote-client\";\n\nexport default class RemoteEvents {\n\tprotected _remote: any;\n\tprotected _ready: Promise<any>;\n\n\tconstructor(url: string, token: string) {\n\t\tconst remote = new Client({\n\t\t\turl,\n\t\t\ttoken,\n\t\t});\n\n\t\t// temporary patch, as we do not want credentials\n\t\tremote.fetch = function (url: string, body?: BodyInit) {\n\t\t\tconst req: RequestInit = {\n\t\t\t\theaders: this.headers(),\n\t\t\t};\n\t\t\tif (body) {\n\t\t\t\treq.method = \"POST\";\n\t\t\t\treq.body = body;\n\t\t\t}\n\n\t\t\treturn fetch(url, req).then(res => res.json());\n\t\t};\n\n\t\tthis._ready = remote.load().then(back => (this._remote = back));\n\t}\n\n\tprotected ready() {\n\t\treturn this._ready;\n\t}\n\n\tprotected on(name: string | any, handler?: any) {\n\t\tthis.ready().then(back => {\n\t\t\tif (typeof name === \"string\") back.on(name, handler);\n\t\t\telse {\n\t\t\t\tfor (const key in name) {\n\t\t\t\t\tback.on(key, name[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n","function createHandlers(scheduler) {\n\n\tfunction remoteUpdates(message) {\n\t\tif (!message || !message.event || !message.event.id) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(\"Invalid message format:\", message);\n\t\t\treturn;\n\t\t}\n\n\t\tconst { type, event } = message;\n\n\t\tif (scheduler._dp._in_progress[event.id]) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (type === \"add-event\") {\n\t\t\tfor (const id in scheduler._dp._in_progress) {\n\t\t\t\tif (scheduler._dp.getState(id) === \"inserted\") {\n\t\t\t\t\tscheduler._dp.attachEvent(\"onFullSync\", function () {\n\t\t\t\t\t\tif (!scheduler.getEvent(event.id)) {\n\t\t\t\t\t\t\tprocessUpdate(type, event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, { once: true });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprocessUpdate(type, event);\n\n\t}\n\n\tfunction processUpdate(type, event) {\n\t\tswitch (type) {\n\t\t\tcase \"add-event\":\n\t\t\t\thandleAddEvent(event);\n\t\t\t\tbreak;\n\t\t\tcase \"update-event\":\n\t\t\t\thandleUpdateEvent(event);\n\t\t\t\tbreak;\n\t\t\tcase \"delete-event\":\n\t\t\t\thandleDeleteEvent(event);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tfunction ignore(code){\n\t\tif(scheduler._dp){\n\t\t\tscheduler._dp.ignore(code);\n\t\t}\n\t\telse {\n\t\t\tcode();\n\t\t}\n\t}\n\n\tfunction handleAddEvent(eventData) {\n\t\tif (scheduler.getEvent(eventData.id)) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn(`Event with ID ${eventData.id} already exists. Skipping add.`);\n\t\t\treturn;\n\t\t}\n\n\t\teventData.start_date = scheduler.templates.parse_date(eventData.start_date);\n\t\teventData.end_date = scheduler.templates.parse_date(eventData.end_date);\n\t\tif (eventData.original_start) {\n\t\t\teventData.original_start = scheduler.templates.parse_date(eventData.original_start);\n\t\t}\n\n\t\tignore(() => {\n\t\t\tscheduler.addEvent(eventData);\n\t\t});\n\n\t}\n\n\tfunction handleUpdateEvent(eventData) {\n\t\tconst sid = eventData.id;\n\n\t\tif (!scheduler.getEvent(sid)) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn(`Event with ID ${sid} does not exist. Skipping update.`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst existingEvent = scheduler.getEvent(sid);\n\n\t\tignore(() => {\n\t\t\tfor (let key in eventData) {\n\t\t\t\tif (key !== \"start_date\" && key !== \"end_date\") {\n\t\t\t\t\texistingEvent[key] = eventData[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\texistingEvent.start_date = scheduler.templates.parse_date(eventData.start_date);\n\t\t\texistingEvent.end_date = scheduler.templates.parse_date(eventData.end_date);\n\t\t\tif (eventData.original_start) {\n\t\t\t\teventData.original_start = scheduler.templates.parse_date(eventData.original_start);\n\t\t\t}\n\t\t\tscheduler.callEvent(\"onEventChanged\", [sid, existingEvent]);\n\t\t\tscheduler.updateEvent(sid);\n\n\t\t\tif (sid !== eventData.id) {\n\t\t\t\tscheduler.changeEventId(sid, eventData.id);\n\t\t\t}\n\t\t});\n\n\t}\n\n\tfunction handleDeleteEvent(eventData) {\n\t\tconst sid = eventData.id;\n\n\t\tif (!scheduler.getEvent(sid)) {\n\n\t\t\tif (eventData.event_pid) {\n\t\t\t\tignore(() => {\n\t\t\t\t\tscheduler.addEvent(eventData);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tignore(() => {\n\t\t\tconst event = scheduler.getEvent(sid);\n\n\t\t\tif (event) {\n\t\t\t\t// handle recurring event markers\n\t\t\t\tif (event.rec_type || event.rrule) {\n\t\t\t\t\tscheduler._roll_back_dates(event);\n\n\t\t\t\t\tconst markers = scheduler._get_rec_markers(sid);\n\t\t\t\t\tfor (const markerId in markers) {\n\t\t\t\t\t\tif (scheduler.getEvent(markerId)) {\n\t\t\t\t\t\t\tscheduler.deleteEvent(markerId, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// handle unsaved edits in the lightbox\n\t\t\t\tif (scheduler.getState().lightbox_id == sid) {\n\t\t\t\t\tthis._new_event = this._lightbox_id;\n\t\t\t\t\teventData.id = this._lightbox_id;\n\t\t\t\t\tthis._events[this._lightbox_id] = eventData;\n\t\t\t\t\tif (scheduler.callEvent(\"onLiveUpdateCollision\", [sid, null, \"delete\", eventData]) === false) {\n\t\t\t\t\t\t// abort deletion if collision handler prevents it\n\t\t\t\t\t\tscheduler.endLightbox(false, scheduler._lightbox);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// delete the event\n\t\t\t\tscheduler.deleteEvent(sid, true);\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\treturn {\n\t\tevents: remoteUpdates\n\t};\n}\n\nexport default createHandlers;","import dragHighlightPos from \"./drag_highlight_pos\";\nimport undoDelete from \"./undo_delete\";\nimport limit from \"./limit\";\nimport batchUpdate from \"./batch_update\";\nimport remoteEvents from \"./remote_events/index.js\";\n\nexport default function initPlugins(scheduler){\n    undoDelete(scheduler);\n    dragHighlightPos(scheduler);\n    limit(scheduler);\n    batchUpdate(scheduler);\n    remoteEvents(scheduler);\n}","export default function undoDelete(scheduler) {\n\tconst undoableDeletes = {};\n\tscheduler.attachEvent(\"onConfirmedBeforeEventDelete\", function (id) {\n\t\tundoableDeletes[id] = true;\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventDeleted\", function (id, ev) {\n\t\tif (undoableDeletes[id]) {\n\t\t\tdelete undoableDeletes[id];\n\t\t} else {\n\t\t\t// ignore 'deleteEvent' calls called with 'silent' flag\n\t\t\treturn;\n\t\t}\n\t\tlet deletedEvent = scheduler.copy(ev);\n\t\tif (scheduler.config.undo_deleted && !scheduler.getState().new_event) {\n\t\t\tscheduler.message({\n\t\t\t\ttext: `<div class=\"dhx_info_message\">\n                            <span class=\"undo_popup_text\">Event deleted</span>\n                            <button class=\"undo_button\" data-deleted-event-id=\"${ev.id}\">Undo</button>\n                        </div>`,\n\t\t\t\texpire: 10000,\n\t\t\t\ttype: \"popup_after_delete\",\n\t\t\t\tcallback: function (e) {\n\t\t\t\t\tlet undoBtn = e.target.closest(\n\t\t\t\t\t\t`[data-deleted-event-id=\"${ev.id}\"]`\n\t\t\t\t\t);\n\t\t\t\t\tif (undoBtn) {\n\t\t\t\t\t\t// GS-2578: case for recurring events with occurences \n\t\t\t\t\t\tif (deletedEvent.rrule && deletedEvent.duration) {\n\t\t\t\t\t\t\tdeletedEvent.end_date = new Date(deletedEvent.start_date.valueOf() + deletedEvent.duration * 1000);\n\t\t\t\t\t\t\tscheduler.addEvent(deletedEvent);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscheduler.addEvent(deletedEvent);\n\t\t\t\t\t\tscheduler.render();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n","import RemoteEvents from \"./remote_events\";\nimport createHandlers from \"./handlers\";\n\nexport default function remoteEvents(scheduler) {\n\tif (!scheduler.ext){\n\t\tscheduler.ext = {};\n\t}\n\n\tscheduler.ext.liveUpdates = {\n\t\tRemoteEvents,\n\t\tremoteUpdates: createHandlers(scheduler)\n\t};\n}\n\n","var uidSeed = Date.now();\nfunction uid () {\n\treturn uidSeed++;\n}\n\n// iframe-safe array type check instead of using instanceof\nfunction isArray(obj){\n\tif(Array.isArray){\n\t\treturn Array.isArray(obj);\n\t}else{\n\t\t// close enough\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\n\t}\n}\n\n// non-primitive string object, e.g. new String(\"abc\")\nfunction isStringObject(obj){\n\treturn obj && typeof obj === \"object\" && \n\t\tFunction.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\n}\n\n// non-primitive number object, e.g. new Number(5)\nfunction isNumberObject(obj){\n\treturn obj && typeof obj === \"object\" && \n\t\tFunction.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\n}\n\n// non-primitive number object, e.g. new Boolean(true)\nfunction isBooleanObject(obj){\n\treturn obj && typeof obj === \"object\" &&\n\t\tFunction.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\n}\n\nfunction isDate(obj) {\n\tif (obj && typeof obj === \"object\") {\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\n\t} else {\n\t\treturn false;\n\t}\n}\n\nfunction defined(obj) {\n\treturn typeof(obj) != \"undefined\";\n}\n\nfunction delay (callback, timeout){\n\tvar timer;\n\n\tvar result = function() {\n\t\tresult.$cancelTimeout();\n\t\tresult.$pending = true;\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\ttimer = setTimeout(function(){\n\t\t\tcallback.apply(this, args);\n\t\t\tresult.$pending = false;\n\t\t}, timeout);\n\t};\n\n\tresult.$pending = false;\n\tresult.$cancelTimeout = function(){\n\t\tclearTimeout(timer);\n\t\tresult.$pending = false;\n\t};\n\tresult.$execute = function(){\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\tcallback.apply(this, args);\n\t\tresult.$cancelTimeout();\n\t};\n\n\treturn result;\n}\n\nexport default {\n\tuid: uid,\n\tmixin: function mixin (target, source, force){\n\t\tfor (var f in source)\n\t\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\n\t\treturn target;\n\t},\n\tcopy: function copy(object) {\n\t\tvar i, result; // iterator, types array, result\n\t\n\t\tif (object && typeof object == \"object\") {\n\t\n\t\t\tswitch (true){\n\t\t\t\tcase (isDate(object)):\n\t\t\t\t\tresult = new Date(object);\n\t\t\t\t\tbreak;\n\t\t\t\tcase (isArray(object)):\n\t\t\t\t\tresult = new Array(object.length);\n\t\t\t\t\tfor(i = 0; i < object.length; i++){\n\t\t\t\t\t\tresult[i] = copy(object[i]);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase (isStringObject(object)):\n\t\t\t\t\tresult = new String(object);// jshint ignore:line\n\t\t\t\t\tbreak;\n\t\t\t\tcase (isNumberObject(object)):\n\t\t\t\t\tresult = new Number(object);// jshint ignore:line\n\t\t\t\t\tbreak;\n\t\t\t\tcase (isBooleanObject(object)):\n\t\t\t\t\tresult = new Boolean(object);// jshint ignore:line\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tresult = {};\n\t\t\t\t\tfor (i in object) {\n\t\t\t\t\t\tconst varType = typeof object[i];\n\n\t\t\t\t\t\tif (varType === \"string\" || varType === \"number\" || varType === \"boolean\" ) {\n\t\t\t\t\t\t\tresult[i] = object[i];\n\t\t\t\t\t\t} else if(isDate(object[i])){\n\t\t\t\t\t\t\tresult[i] = new Date(object[i]);\n\t\t\t\t\t\t}else if (Object.prototype.hasOwnProperty.apply(object, [i]))\n\t\t\t\t\t\t\tresult[i] = copy(object[i]);\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn result || object;\n\t},\n\tdefined,\n\tisDate,\n\tdelay\n};\n","export default function extend(scheduler) {\n\nfunction div(className){\n\tvar element = document.createElement(\"div\");\n\tvar classes = (className || \"\").split(\" \");\n\tclasses.forEach(function(cssClass){\n\t\telement.classList.add(cssClass);\n\t});\n\treturn element;\n}\nvar itemTypes = {\n\trows_container: function(){\n\t\treturn div(\"dhx_cal_navbar_rows_container\");\n\t},\n\trow: function(){\n\t\treturn div(\"dhx_cal_navbar_row\");\n\t},\n\tview: function (config) {\n\t\tvar element = div(\"dhx_cal_tab\");\n\t\telement.setAttribute(\"name\", config.view + \"_tab\");\n\t\telement.setAttribute(\"data-tab\", config.view);\n\t\t// element.setAttribute(\"data-viewname\", config.view); // FIXME: need to remove? not used anywhere\n\t\tif(scheduler.config.fix_tab_position){\n\t\t\tif(config.$firstTab) {\n\t\t\t\telement.classList.add(\"dhx_cal_tab_first\");\n\t\t\t}else if(config.$lastTab) {\n\t\t\t\telement.classList.add(\"dhx_cal_tab_last\");\n\t\t\t} else if(config.view !== \"week\") {\n\t\t\t\telement.classList.add(\"dhx_cal_tab_standalone\");\n\t\t\t}\n\n\t\t\tif(config.$segmentedTab) {\n\t\t\t\telement.classList.add(\"dhx_cal_tab_segmented\");\n\t\t\t}\n\t\t}\n\t\treturn element;\n\t},\n\tdate: function () {\n\t\treturn div(\"dhx_cal_date\");\n\t},\n\tbutton: function (config) {\n\t\treturn div(\"dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab\");\n\t},\n\tbuiltInButton: function (config){\n\t\treturn div(\"dhx_cal_\" + config.view + \"_button dhx_cal_nav_button\");\n\t},\n\tspacer: function () {\n\t\treturn div(\"dhx_cal_line_spacer\");\n\t},\n\tminicalendarButton: function(config){\n\t\tvar minicalendarDiv = div('dhx_minical_icon');\n\t\tif(!config.click && !minicalendarDiv.$_eventAttached){\n\t\t\t\n\t\t\tscheduler.event(minicalendarDiv, \"click\", function () {\n\t\t\t\tif (scheduler.isCalendarVisible()) {\n\t\t\t\t\tscheduler.destroyCalendar();\n\t\t\t\t} else {\n\t\t\t\t\tscheduler.renderCalendar({\n\t\t\t\t\t\tposition: this,\n\t\t\t\t\t\tdate: scheduler.getState().date,\n\t\t\t\t\t\tnavigation: true,\n\t\t\t\t\t\thandler: function (date, calendar) {\n\t\t\t\t\t\t\tscheduler.setCurrentView(date);\n\t\t\t\t\t\t\tscheduler.destroyCalendar();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn minicalendarDiv;\n\t},\n\thtml_element: function (config) {\n\t\treturn div(\"dhx_cal_nav_content\");\n\t}\n};\n\nfunction findRenderer(config) {\n\tvar renderer;\n\tif (config.view) {\n\t\tswitch (config.view){\n\t\t\tcase \"today\":\n\t\t\tcase \"next\":\n\t\t\tcase \"prev\":\n\t\t\t\trenderer = itemTypes.builtInButton;\n\t\t\t\tbreak;\n\t\t\tcase \"date\":\n\t\t\t\trenderer = itemTypes.date;\n\t\t\t\tbreak;\n\t\t\tcase \"spacer\":\n\t\t\t\trenderer = itemTypes.spacer;\n\t\t\t\tbreak;\n\t\t\tcase \"button\":\n\t\t\t\trenderer = itemTypes.button;\n\t\t\t\tbreak;\n\t\t\tcase \"minicalendar\":\n\t\t\t\trenderer = itemTypes.minicalendarButton;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\trenderer = itemTypes.view;\n\t\t\t\tbreak;\n\t\t}\n\t} else if(config.rows) {\n\t\trenderer = itemTypes.rows_container;\n\t} else if(config.cols) {\n\t\trenderer = itemTypes.row;\n\t}\n\treturn renderer;\n}\n\nfunction renderElement(config){\n\tvar renderer = findRenderer(config);\n\tif(!renderer){\n\t\treturn;\n\t}\n\tvar element = renderer(config);\n\tif(config.css){\n\t\telement.classList.add(config.css);\n\t}\n\tif(config.width){\n\t\tvar value = config.width;\n\t\tif(value === value * 1){\n\t\t\tvalue += \"px\";\n\t\t}\n\t\telement.style.width = value;\n\t}\n\tif(config.height){\n\t\tvar value = config.height;\n\t\tif(value === value * 1){\n\t\t\tvalue += \"px\";\n\t\t}\n\t\telement.style.height = value;\n\t}\n\tif (config.click) {\n\t\tscheduler.event(element, \"click\", config.click);\n\t}\n\tif (config.html) {\n\t\telement.innerHTML = config.html;\n\t}\n\n\tif (config.align) {\n\t\tvar value = \"\";\n\t\tif (config.align == \"right\") {\n\t\t\tvalue = \"flex-end\";\n\t\t} else if(config.align == \"left\") {\n\t\t\tvalue = \"flex-start\";\n\t\t}\n\t\telement.style.justifyContent = value;\n\t}\n\treturn element;\n}\n\nfunction prepareConfig(config) {\n\tif (typeof config === \"string\") {\n\t\tconfig = {\n\t\t\tview: config\n\t\t};\n\t}\n\tif (!config.view && !config.rows && !config.cols) {\n\t\tconfig.view = \"button\";\n\t}\n\treturn config;\n}\n\nfunction renderLayout(config) {\n\tvar fragment = document.createDocumentFragment();\n\tvar items;\n\tif(Array.isArray(config)){\n\t\titems = config;\n\t}else{\n\t\titems = [config];\n\t}\n\n\tfor (var i = 0; i < items.length; i++) {\n\t\tvar view = prepareConfig(items[i]);\n\n\t\tif(view.view === \"day\" && items[i + 1]){\n\t\t\tvar next = prepareConfig(items[i + 1]);\n\t\t\tif(next.view === \"week\" || next.view === \"month\"){\n\t\t\t\tview.$firstTab = true;\n\t\t\t\tview.$segmentedTab = true;\n\t\t\t}\n\t\t}\n\n\t\tif(view.view === \"week\" && items[i - 1]){\n\t\t\tvar next = prepareConfig(items[i + 1]);\n\t\t\tif(next.view === \"week\" || next.view === \"month\"){\n\t\t\t\tview.$segmentedTab = true;\n\t\t\t}\n\t\t}\n\n\t\tif(view.view === \"month\" && items[i - 1]){\n\t\t\tvar next = prepareConfig(items[i - 1]);\n\t\t\tif(next.view === \"week\" || next.view === \"day\"){\n\t\t\t\tview.$lastTab = true;\n\t\t\t\tview.$segmentedTab = true;\n\t\t\t}\n\t\t}\n\n\t\tvar element = renderElement(view);\n\n\t\tfragment.appendChild(element);\n\t\tif(view.cols || view.rows){\n\t\t\telement.appendChild(renderLayout(view.cols || view.rows));\n\t\t}\n\t}\n\treturn fragment;\n}\n\nscheduler._init_nav_bar = function (items) {\n\tvar navBar = this.$container.querySelector(\".dhx_cal_navline\");\n\tif (!navBar){\n\t\tnavBar = document.createElement(\"div\");\n\t\tnavBar.className = \"dhx_cal_navline dhx_cal_navline_flex\";\n\t\tscheduler._update_nav_bar(items, navBar);\n\t\treturn navBar;\n\t}\n\treturn navBar;\n};\n\nvar previousNavbar = null;\nvar previousHeight = null;\nscheduler._update_nav_bar = function (config, container) {\n\n\tif(!config){\n\t\treturn;\n\t}\n\tvar heightChanged = false;\n\tvar configChanged = false;\n\n\tvar newHeight = config.height || scheduler.xy.nav_height;\n\n\tif(previousHeight === null ||\n\t\t\t(previousHeight !== newHeight)){\n\t\theightChanged = true;\n\t}\n\tif(!previousNavbar || JSON.stringify(config) !== previousNavbar){\n\t\tconfigChanged = true;\n\t}\n\n\tif(heightChanged){\n\t\tscheduler.xy.nav_height = newHeight;\n\t}\n\tif(configChanged){\n\t\tcontainer.innerHTML = \"\";\n\t\tcontainer.appendChild(renderLayout(config));\n\t}\n\n\tif(heightChanged || configChanged){\n\t\tscheduler.unset_actions();\n\t\tscheduler._els = [];\n\t\tscheduler.get_elements();\n\t\tscheduler.set_actions();\n\t}\n\n\tif(newHeight === 0){\n\t\tcontainer.style.display = \"none\";\n\t}else{\n\t\tcontainer.style.display = \"\";\n\t}\n\n\tpreviousHeight = newHeight;\n};\n\n}","export default function extend(scheduler) {\n\n\tfunction isAttachedNode(container){\n\t\tif(container.isConnected !== undefined){\n\t\t\treturn container.isConnected;\n\t\t}\n\t\treturn document.body.contains(container);\n\t}\n\t\n\tfunction getWindowSize(window){\n\t\treturn {\n\t\t\tw : window.innerWidth || document.documentElement.clientWidth,\n\t\t\th : window.innerHeight || document.documentElement.clientHeight\n\t\t};\n\t}\n\tfunction equals(a,b){\n\t\treturn a.w == b.w && a.h == b.h;\n\t}\n\t\n\tfunction listenWindowResize(scheduler, window){\n\t\tvar oldSize = getWindowSize(window);\n\t\tvar resizeDelay;\n\t\tscheduler.event(window, \"resize\", function(){\n\t\t\tclearTimeout(resizeDelay);\n\t\t\tresizeDelay = setTimeout(function(){\n\n\t\t\t\tif (!isAttachedNode(scheduler.$container) || scheduler.$destroyed){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar newSize = getWindowSize(window);\n\t\t\t\t// element may be resized by container-autoresize exteinsion\n\t\t\t\t// check if the size is actually changed in order to not to get endless loop\n\t\t\t\tif (!equals(oldSize, newSize)) {\n\t\t\t\t\toldSize = newSize;\n\t\t\t\t\ttriggerSchedulerResize(scheduler);\n\t\t\t\t}\n\t\t\t}, 150);\n\t\t});\n\t}\n\t\n\tfunction triggerSchedulerResize(scheduler){\n\t\tif(!scheduler.$initialized || scheduler.$destroyed || !scheduler.$root || !isAttachedNode(scheduler.$root)){\n\t\t\treturn;\t\n\t\t}\n\t\tif (scheduler.callEvent(\"onSchedulerResize\", [])) {\n\t\t\tscheduler.updateView();\n\t\t\tscheduler.callEvent(\"onAfterSchedulerResize\", []);\n\t\t}\n\t}\n\t\n\tfunction watchNodeResize(scheduler){\n\t\tvar previousHeight = scheduler.$root.offsetHeight;\n\t\tvar previousWidth = scheduler.$root.offsetWidth;\n\t\t\n\t\tfunction lowlevelResizeWatcher(){\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn;\t\n\t\t\t}\n\t\t\t\n\t\t\tif(scheduler.$root){\n\t\t\t\tif (scheduler.$root.offsetHeight != previousHeight ||\n\t\t\t\t\tscheduler.$root.offsetWidth != previousWidth){\n\t\t\t\t\ttriggerSchedulerResize(scheduler);\n\t\t\t\t}\n\t\n\t\t\t\tpreviousHeight = scheduler.$root.offsetHeight;\n\t\t\t\tpreviousWidth = scheduler.$root.offsetWidth;\n\t\t\t}\n\t\n\t\t\tsetTimeout(lowlevelResizeWatcher, 200);\n\t\t}\n\t\t\n\t\tlowlevelResizeWatcher();\n\t}\n\t\n\tfunction addResizeListener(scheduler){\n\t\tvar root = scheduler.$container;\n\t\tvar containerStyles = window.getComputedStyle(root);\n\t\tif(containerStyles.getPropertyValue(\"position\") == \"static\"){\n\t\t\troot.style.position = \"relative\";\n\t\t}\n\n\t\tif(window.ResizeObserver){\n\t\t\tlet skipFirst = true;// initial repaint triggers the resize listener\n\t\t\tconst resizeObserver = new ResizeObserver(function(entries){\n\t\t\t\tif(skipFirst){\n\t\t\t\t\tskipFirst = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\ttriggerSchedulerResize(scheduler);\n\t\t\t});\n\t\t\tresizeObserver.observe(root);\n\t\t\tscheduler.attachEvent(\"onDestroy\", function(){\n\t\t\t\tresizeObserver.unobserve(root);\n\t\t\t});\n\t\t}else {\n\t\t\tvar resizeWatcher = document.createElement('iframe');\n\t\t\tresizeWatcher.className = \"scheduler_container_resize_watcher\";\n\t\t\tresizeWatcher.tabIndex = -1;\n\t\t\tif(scheduler.config.wai_aria_attributes){\n\t\t\t\tresizeWatcher.setAttribute(\"role\", \"none\");\n\t\t\t\tresizeWatcher.setAttribute(\"aria-hidden\", true);\n\t\t\t}\n\t\t\n\t\t\t// in some environments (namely, in SalesForce) iframe.contentWindow is not available\n\t\t\tvar salesforce_environment = !!window[\"Sfdc\"] || !!window[\"$A\"] || window[\"Aura\"];\n\t\t\tif(salesforce_environment){\n\t\t\t\twatchNodeResize(scheduler);\n\t\t\t} else {\n\t\t\t\troot.appendChild(resizeWatcher);\n\t\t\t\tif (resizeWatcher.contentWindow) {\n\t\t\t\t\tlistenWindowResize(scheduler, resizeWatcher.contentWindow);\n\t\t\t\t} else {\n\t\t\t\t\t// if so - ditch the iframe and fallback to listening the main window resize\n\t\t\t\t\troot.removeChild(resizeWatcher);\n\t\t\t\t\tlistenWindowResize(scheduler, window);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\n\t}\n\t\n\taddResizeListener(scheduler);\n\n}","class EventHost {\n\tconstructor(){\n\t\tthis._silent_mode = false;\n\t\tthis.listeners = {};\n\t}\n\t_silentStart(){\n\t\tthis._silent_mode = true;\n\t}\n\t_silentEnd() {\n\t\tthis._silent_mode = false;\n\t}\n}\n\nconst createEventStorage = function(obj) {\n\tlet handlers = {};\n\tlet index = 0;\n\tconst eventStorage = function(){\n\t\tlet combinedResult = true;\n\t\tfor(const i in handlers){\n\t\t\tconst handlerResult = handlers[i].apply(obj, arguments);\n\t\t\tcombinedResult=combinedResult && handlerResult;\n\t\t}\n\t\treturn combinedResult;\n\t};\n\teventStorage.addEvent=function(handler, settings){\n\t\tif (typeof (handler) == \"function\"){\n\t\t\tlet handlerId;\n\t\t\tif(settings && settings.id){\n\t\t\t\thandlerId = settings.id;\n\t\t\t}else{\n\t\t\t\thandlerId = index;\n\t\t\t\tindex++;\n\t\t\t}\n\n\t\t\tif(settings && settings.once){\n\t\t\t\tconst originalHandler = handler;\n\t\t\t\thandler = function(){\n\t\t\t\t\toriginalHandler();\n\t\t\t\t\teventStorage.removeEvent(handlerId);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\thandlers[handlerId] = handler;\n\t\t\treturn handlerId;\n\t\t}\n\t\treturn false;\n\t};\n\teventStorage.removeEvent=function(id){\n\t\tdelete handlers[id];\n\t};\n\n\teventStorage.clear = function(){\n\t\thandlers = {};\n\t};\n\n\treturn eventStorage;\n};\n\nfunction makeEventable(obj){\n\n\tconst eventHost = new EventHost();\n\tobj.attachEvent=function(eventName, handler, settings){\n\t\teventName = 'ev_'+eventName.toLowerCase();\n\t\tif (!eventHost.listeners[eventName]){\n\t\t\teventHost.listeners[eventName] = createEventStorage(this);\n\t\t}\n\n\t\tif(settings && settings.thisObject){\n\t\t\thandler = handler.bind(settings.thisObject);\n\t\t}\n\n\t\tconst innerId = eventHost.listeners[eventName].addEvent(handler, settings);\n\n\t\tlet handlerId = (eventName+':'+innerId); //return ID (ev_eventname:1)\n\t\tif(settings && settings.id){\n\t\t\thandlerId = settings.id;\n\t\t}\n\t\treturn handlerId;\n\t};\n\n\tobj.attachAll = function(callback){\n\t\tthis.attachEvent('listen_all', callback);\n\t};\n\n\tobj.callEvent=function(name, eventArguments){\n\t\tif (eventHost._silent_mode) return true;\n\n\t\tconst handlerName = 'ev_'+name.toLowerCase();\n\n\t\tconst listeners = eventHost.listeners;\n\t\tif (listeners['ev_listen_all']){\n\t\t\tlisteners['ev_listen_all'].apply(this, [name].concat(eventArguments));\n\t\t}\n\n\t\tif (listeners[handlerName])\n\t\t\treturn listeners[handlerName].apply(this, eventArguments);\n\t\treturn true;\n\t};\n\n\tobj.checkEvent=function(name){\n\t\tconst listeners = eventHost.listeners;\n\t\treturn (!!listeners['ev_'+name.toLowerCase()]);\n\t};\n\n\tobj.detachEvent=function(id){\n\t\tif (id){\n\t\t\tlet listeners = eventHost.listeners;\n\t\t\tfor(const i in listeners){\n\t\t\t\tlisteners[i].removeEvent(id); //remove event\n\t\t\t}\n\n\t\t\tconst list = id.split(':');//get EventName and ID\n\t\t\tlisteners = eventHost.listeners;\n\t\t\tif(list.length === 2){\n\t\t\t\tconst eventName = list[0];\n\t\t\t\tconst eventId = list[1];\n\t\t\t\tif(listeners[eventName]){\n\t\t\t\t\tlisteners[eventName].removeEvent(eventId); //remove event\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tobj.detachAllEvents = function(){\n\t\tfor (const name in eventHost.listeners) {\n\t\t\teventHost.listeners[name].clear();\n\t\t}\n\t};\n\n}\n\nexport default makeEventable;","export default {\n\tevent: function (el, event, handler){\n\t\tif (el.addEventListener)\n\t\t\tel.addEventListener(event, handler, false);\n\t\n\t\telse if (el.attachEvent)\n\t\t\tel.attachEvent(\"on\"+event, handler);\n\t},\n\teventRemove: function (el, event, handler){\n\t\tif (el.removeEventListener)\n\t\t\tel.removeEventListener(event, handler, false);\n\t\n\t\telse if (el.detachEvent)\n\t\t\tel.detachEvent(\"on\"+event, handler);\n\t}\n};","import createEventScope from './utils/scoped_event';\n\nexport default function extend(scheduler) {\n\n\nvar domEvents = createEventScope();\n\nscheduler.event = domEvents.attach;\nscheduler.eventRemove = domEvents.detach;\nscheduler._eventRemoveAll = domEvents.detachAll;\nscheduler._createDomEventScope = domEvents.extend;\n\n\nscheduler._trim = function(str){\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\n\treturn func.apply(str);\n};\n\nscheduler._isDate = function(obj){\n\tif (obj && typeof obj == \"object\") {\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\n\t} else {\n\t\treturn false;\n\t}\n};\n\nscheduler._isObject = function(obj){\n\treturn (obj && typeof obj == \"object\");\n};\n\n}","import defaultDomEvents from './event';\n\nexport default function(){\n\n\tvar domEvents = function (addEvent, removeEvent) {\n\t\taddEvent = addEvent || defaultDomEvents.event;\n\t\tremoveEvent = removeEvent || defaultDomEvents.eventRemove;\n\t\tvar handlers = [];\n\t\tvar eventScope = {\n\t\t\tattach: function(el, event, callback, capture){\n\t\t\t\thandlers.push({element: el, event:event, callback: callback, capture: capture});\n\t\t\t\taddEvent(el, event, callback, capture);\n\t\t\t},\n\t\t\tdetach: function(el, event, callback, capture){\n\t\t\t\tremoveEvent(el, event, callback, capture);\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\n\t\t\t\t\tvar handler = handlers[i];\n\t\t\t\t\tif (handler.element === el && handler.event === event && handler.callback === callback && handler.capture === capture) {\n\t\t\t\t\t\thandlers.splice(i, 1);\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdetachAll: function () {\n\t\t\t\tvar staticArray = handlers.slice();\n\t\t\t\t// original handlers array can be spliced on every iteration\n\t\t\t\tfor (var i = 0; i < staticArray.length; i++){\n\t\t\t\t\tvar handler = staticArray[i];\n\t\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, handler.capture);\n\t\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, undefined);\n\t\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, false);\n\t\t\t\t\teventScope.detach(handler.element, handler.event, handler.callback, true);\n\t\t\t\t}\n\t\t\t\thandlers.splice(0, handlers.length);\n\t\t\t},\n\t\t\textend: function(){\n\t\t\t\treturn domEvents(this.event, this.eventRemove);\n\t\t\t}\n\t\t};\n\t\treturn eventScope;\n\t};\n\t\n\treturn domEvents();\n}","//returns position of html element on the page\nfunction elementPosition(elem) {\n\tvar top=0, left=0, right=0, bottom=0;\n\tif (elem.getBoundingClientRect) { //HTML5 method\n\t\tvar box = elem.getBoundingClientRect();\n\t\tvar body = document.body;\n\t\tvar docElem = (document.documentElement ||\n\t\t\tdocument.body.parentNode ||\n\t\t\tdocument.body);\n\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\t\ttop  = box.top +  scrollTop - clientTop;\n\t\tleft = box.left + scrollLeft - clientLeft;\n\n\t\tright = document.body.offsetWidth - box.right;\n\t\tbottom = document.body.offsetHeight - box.bottom;\n\t} else { //fallback to naive approach\n\t\twhile(elem) {\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\n\t\t\telem = elem.offsetParent;\n\t\t}\n\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\n\t}\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\n}\n\n/*\nevent position relatively to DOM element\n */\nfunction getRelativeEventPosition(ev, node){\n\tvar d = document.documentElement;\n\tvar box = elementPosition(node);\n\n\treturn {\n\t\tx: ev.clientX - d.clientLeft - box.x + node.scrollLeft,\n\t\ty: ev.clientY - d.clientTop - box.y + node.scrollTop\n\t};\n}\n\nfunction getNodePosition(elem) {\n\tvar top=0, left=0, right=0, bottom=0;\n\tif (elem.getBoundingClientRect) { //HTML5 method\n\t\tvar box = elem.getBoundingClientRect();\n\t\tvar body = document.body;\n\t\tvar docElem = (document.documentElement ||\n\t\t\tdocument.body.parentNode ||\n\t\t\tdocument.body);\n\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\t\ttop  = box.top +  scrollTop - clientTop;\n\t\tleft = box.left + scrollLeft - clientLeft;\n\n\t\tright = document.body.offsetWidth - box.right;\n\t\tbottom = document.body.offsetHeight - box.bottom;\n\t} else { //fallback to naive approach\n\t\twhile(elem) {\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\n\t\t\telem = elem.offsetParent;\n\t\t}\n\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\n\t}\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\n}\n\nfunction getClassName(node){\n\tif(!node) return \"\";\n\n\tvar className = node.className || \"\";\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\n\t\tclassName = className.baseVal;\n\n\tif(!className.indexOf)\n\t\tclassName = '';\n\n\treturn className || \"\";\n}\n\nfunction getTargetNode(e) {\n\tvar trg;\n\tif (e.tagName)\n\t\ttrg = e;\n\telse {\n\t\te = e || window.event;\n\t\ttrg = e.target || e.srcElement;\n\t\tif (trg.shadowRoot && e.composedPath) {\n\t\t\ttrg = e.composedPath()[0];\n\t\t}\n\t}\n\treturn trg;\n}\n\nfunction locateCss(e, classname, strict){\n\tif(strict === undefined)\n\t\tstrict = true;\n\n\tvar trg = e.target || e.srcElement;\n\tvar css = '';\n\n\twhile (trg){\n\t\tcss = getClassName(trg);\n\n\t\tif(css){\n\t\t\tvar ind = css.indexOf(classname);\n\t\t\tif (ind >= 0){\n\t\t\t\tif (!strict)\n\t\t\t\t\treturn trg;\n\n\t\t\t\t//check that we have exact match\n\t\t\t\tvar left = (ind === 0) || (!((css.charAt(ind - 1)||\"\").trim()));\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!((css.charAt(ind + classname.length)).trim()));\n\n\t\t\t\tif (left && right)\n\t\t\t\t\treturn trg;\n\t\t\t}\n\t\t}\n\n\t\ttrg=trg.parentNode;\n\t}\n\treturn null;\n}\n\n\n// get focusable nodes\nfunction isVisible(node){\n\tvar display = false,\n\t\tvisibility = false;\n\tif(window.getComputedStyle){\n\t\tvar style = window.getComputedStyle(node, null);\n\t\tdisplay = style[\"display\"];\n\t\tvisibility = style[\"visibility\"];\n\t}else if(node.currentStyle){\n\t\tdisplay = node.currentStyle[\"display\"];\n\t\tvisibility = node.currentStyle[\"visibility\"];\n\t}\n\n\tvar hiddenSection = false;\n\tvar recurringSection = locateCss({target:node}, \"dhx_form_repeat\", false);\n\tif(recurringSection){\n\t\thiddenSection = !!(recurringSection.style.height == \"0px\");\n\t}\n\thiddenSection = hiddenSection || !(node.offsetHeight);\n\n\treturn (display != \"none\" && visibility != \"hidden\" && !hiddenSection);\n}\n\nfunction hasNonNegativeTabIndex(node){\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\n}\n\nfunction hasHref(node){\n\tvar canHaveHref = {\"a\": true, \"area\": true};\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\n\t\treturn !!node.getAttribute(\"href\");\n\t}\n\treturn true;\n}\n\nfunction isEnabled(node){\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\n\tif(canDisable[node.nodeName.toLowerCase()]){\n\t\treturn !node.hasAttribute(\"disabled\");\n\t}\n\n\treturn true;\n}\n\n\nfunction getFocusableNodes(root){\n\tvar nodes = root.querySelectorAll([\n\t\t\"a[href]\",\n\t\t\"area[href]\",\n\t\t\"input\",\n\t\t\"select\",\n\t\t\"textarea\",\n\t\t\"button\",\n\t\t\"iframe\",\n\t\t\"object\",\n\t\t\"embed\",\n\t\t\"[tabindex]\",\n\t\t\"[contenteditable]\"\n\t].join(\", \"));\n\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\n\t\n\tfor(var i = 0; i < nodesArray.length; i++){\n\t\tnodesArray[i].$position = i;\n\t\t// we remember original nodes order, \n\t\t// so when we sort them by tabindex we ensure order of nodes with same tabindex is preserved, \n\t\t// since some browsers do unstable sort\n\t}\n\t\n\tnodesArray.sort(function(a, b) {\n\t\tif(a.tabIndex === 0 && b.tabIndex !== 0){\n\t\t\treturn 1;\n\t\t}\n\t\tif(a.tabIndex !== 0 && b.tabIndex === 0){\n\t\t\treturn -1;\n\t\t}\n\t\t\n\t\tif (a.tabIndex === b.tabIndex){\n\t\t\t// ensure we do stable sort\n\t\t\treturn a.$position - b.$position;\n\t\t}\n\t\tif (a.tabIndex < b.tabIndex) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\t\n\tfor(var i = 0; i < nodesArray.length; i++){\n\t\tvar node = nodesArray[i];\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\n\t\tif(!isValid){\n\t\t\tnodesArray.splice(i, 1);\n\t\t\ti--;\n\t\t}\n\t}\n\treturn nodesArray;\n}\n\n\nfunction isShadowDomSupported() {\n\treturn document.head.createShadowRoot || document.head.attachShadow;\n}\n\n/**\n * Returns element that has the browser focus, or null if no element has focus.\n * Works with shadow DOM, so it's prefereed to use this function instead of document.activeElement directly.\n * @returns HTMLElement\n */\nfunction getActiveElement(){\n\tvar activeElement = document.activeElement;\n\tif (activeElement.shadowRoot) {\n\t\tactiveElement = activeElement.shadowRoot.activeElement;\n\t}\n\tif (activeElement === document.body && document.getSelection) {\n\t\tactiveElement = document.getSelection().focusNode || document.body;\n\t}\n\n\treturn activeElement;\n}\n\n/**\n * Returns document.body or the host node of the ShadowRoot, if the element is attached to ShadowDom\n * @param {HTMLElement} element \n * @returns HTMLElement\n */\nfunction getRootNode(element) {\n\tif (!element) {\n\t\treturn document.body;\n\t}\n\tif (!isShadowDomSupported()) {\n\t\treturn document.body;\n\t}\n\twhile (element.parentNode && (element = element.parentNode)) {\n\t\tif (element instanceof ShadowRoot) {\n\t\t\treturn element.host;\n\t\t}\n\t}\n\treturn document.body;\n}\n\nfunction hasShadowParent(element) {\n\treturn !!getRootNode(element);\n}\n\nexport default {\n\t/**\n\t *     @desc: Calculate absolute position of html object\n\t *     @type: private\n\t *     @param: htmlObject - html object\n\t *     @topic: 0\n\t */\n\tgetAbsoluteLeft: function getAbsoluteLeft(htmlObject){\n\t\treturn this.getOffset(htmlObject).left;\n\t},\n\t/**\n\t *     @desc: Calculate absolute position of html object\n\t *     @type: private\n\t *     @param: htmlObject - html object\n\t *     @topic: 0\n\t */\n\tgetAbsoluteTop: function getAbsoluteTop(htmlObject){\n\t\treturn this.getOffset(htmlObject).top;\n\t},\n\n\tgetOffsetSum: function getOffsetSum(elem) {\n\t\tvar top=0, left=0;\n\t\twhile(elem) {\n\t\t\ttop = top + parseInt(elem.offsetTop);\n\t\t\tleft = left + parseInt(elem.offsetLeft);\n\t\t\telem = elem.offsetParent;\n\t\t}\n\t\treturn {top: top, left: left};\n\t},\n\n\tgetOffsetRect: function getOffsetRect(elem) {\n\t\tvar box = elem.getBoundingClientRect();\n\n\t\tvar top = 0,\n\t\t\tleft = 0;\n\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent#Mobile_Tablet_or_Desktop\n\t\tif (!/Mobi/.test(navigator.userAgent)) {\n\t\t\tvar body = document.body;\n\t\t\tvar docElem = document.documentElement;\n\t\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n\t\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\n\t\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\n\t\t\ttop  = box.top +  scrollTop - clientTop;\n\t\t\tleft = box.left + scrollLeft - clientLeft;\n\t\t}else {\n\t\t\t// incorrect left coordinate on mobile zoom\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n\n\t\t\tvar dummy = document.createElement(\"div\");\n\t\t\tdummy.style.position=\"absolute\";\n\t\t\tdummy.style.left=\"0px\";\n\t\t\tdummy.style.top=\"0px\";\n\t\t\tdummy.style.width=\"1px\";\n\t\t\tdummy.style.height = \"1px\";\n\n\t\t\tdocument.body.appendChild(dummy);\n\t\t\tvar dummyBox = dummy.getBoundingClientRect();\n\t\t\ttop  = box.top - dummyBox.top;\n\t\t\tleft = box.left - dummyBox.left;\n\n\t\t\tdummy.parentNode.removeChild(dummy);\n\t\t}\n\n\t\treturn { top: Math.round(top), left: Math.round(left) };\n\t},\n\n\tgetOffset: function getOffset(elem) {\n\t\tif (elem.getBoundingClientRect) {\n\t\t\treturn this.getOffsetRect(elem);\n\t\t} else {\n\t\t\treturn this.getOffsetSum(elem);\n\t\t}\n\t},\n\n\tclosest: function(element, selector){\n\t\tif(!element || !selector){\n\t\t\treturn null;\n\t\t}\n\t\treturn closest(element, selector);\n\t},\n\tinsertAfter: function(newNode, referenceNode){\n\t\tif(referenceNode.nextSibling){\n\t\t\treferenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n\t\t}else{\n\t\t\treferenceNode.parentNode.appendChild(newNode);\n\t\t}\n\t},\n\tremove: function(node) {\n\t\tif (node && node.parentNode) {\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\t},\n\tisChildOf: function(child, parent) {\n\t\treturn parent.contains(child);\n\t},\n\tgetFocusableNodes,\n\tgetClassName,\n\tlocateCss,\n\tgetRootNode,\n\thasShadowParent,\n\tisShadowDomSupported,\n\tgetActiveElement,\n\tgetRelativeEventPosition,\n\tgetTargetNode,\n\tgetNodePosition\n};\n\nvar closest;\nif(Element.prototype.closest){\n\tclosest = function(element, selector){\n\t\treturn element.closest(selector);\n\t};\n}else{\n\tvar matches = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\tclosest = function(element, selector) {\n\t\tvar el = element;\n\t\tdo {\n\t\t\tif (matches.call(el, selector)){\n\t\t\t\treturn el;\n\t\t\t}\n\t\t\tel = el.parentElement || el.parentNode;\n\t\t} while (el !== null && el.nodeType === 1);\n\t\treturn null;\n\t};\n}\n","/* eslint-disable no-restricted-globals */\nvar isWindowAwailable = typeof window !== \"undefined\";\n\n/* eslint-enable no-restricted-globals */\n\nexport default {\n\tisIE: isWindowAwailable && (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\n\tisOpera: isWindowAwailable && (navigator.userAgent.indexOf(\"Opera\") >= 0),\n\tisChrome: isWindowAwailable && (navigator.userAgent.indexOf(\"Chrome\") >= 0),\n\tisKHTML: isWindowAwailable && (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\n\tisFF: isWindowAwailable && (navigator.userAgent.indexOf(\"Firefox\") >= 0),\n\tisIPad: isWindowAwailable && (navigator.userAgent.search(/iPad/gi) >= 0),\n\tisEdge: isWindowAwailable && (navigator.userAgent.indexOf(\"Edge\")!=-1),\n\tisNode: (!isWindowAwailable || typeof navigator == \"undefined\")\n};","export default function(data) {\n\tif (typeof data === \"string\" || typeof data === \"number\") {\n\t\treturn data;\n\t}\n\tvar result = \"\";\n\tfor (var key in data) {\n\t\tvar serialized = \"\";\n\t\tif (data.hasOwnProperty(key)) {\n\t\t\tif (typeof data[key] === \"string\") {\n\t\t\t\tserialized = encodeURIComponent(data[key]);\n\t\t\t} else if (typeof data[key] === \"number\") {\n\t\t\t\tserialized = data[key];\n\t\t\t} else {\n\t\t\t\tserialized = encodeURIComponent(JSON.stringify(data[key]));\n\t\t\t}\n\t\t\tserialized = key + \"=\" + serialized;\n\n\t\t\tif (result.length) {\n\t\t\t\tserialized = \"&\" + serialized;\n\t\t\t}\n\t\t\tresult += serialized;\n\t\t}\n\t}\n\treturn result;\n}","export default function extend(scheduler) {\n\nvar generateStringToDate = function (format, utc) {\n\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\n\tvar mask = format.match(/%[a-zA-Z]/g);\n\tfor (var i = 0; i < mask.length; i++) {\n\t\tswitch (mask[i]) {\n\t\t\tcase \"%j\":\n\t\t\tcase \"%d\": splt += \"set[2]=temp[\" + i + \"]||1;\";\n\t\t\t\tbreak;\n\t\t\tcase \"%n\":\n\t\t\tcase \"%m\": splt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\n\t\t\t\tbreak;\n\t\t\tcase \"%y\": splt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\n\t\t\t\tbreak;\n\t\t\tcase \"%g\":\n\t\t\tcase \"%G\":\n\t\t\tcase \"%h\":\n\t\t\tcase \"%H\":\n\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\n\t\t\t\tbreak;\n\t\t\tcase \"%i\":\n\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\n\t\t\t\tbreak;\n\t\t\tcase \"%Y\": splt += \"set[0]=temp[\" + i + \"]||0;\";\n\t\t\t\tbreak;\n\t\t\tcase \"%a\":\n\t\t\tcase \"%A\": splt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\n\t\t\t\tbreak;\n\t\t\tcase \"%s\": splt += \"set[5]=temp[\" + i + \"]||0;\";\n\t\t\t\tbreak;\n\t\t\tcase \"%M\": splt += \"set[1]=this.locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\n\t\t\t\tbreak;\n\t\t\tcase \"%F\": splt += \"set[1]=this.locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\n\tif (utc) code = \" Date.UTC(\" + code + \")\";\n\treturn new Function(\"date\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\n};\nvar csp_date_to_str = function (format, utc) {\n\treturn function(date) {\n\t\treturn format.replace(/%[a-zA-Z]/g, function (a) {\n\t\t\tswitch (a) {\n\t\t\t\tcase \"%d\": return utc ? scheduler.date.to_fixed(date.getUTCDate()) : scheduler.date.to_fixed(date.getDate());\n\t\t\t\tcase \"%m\": return utc ? scheduler.date.to_fixed((date.getUTCMonth() + 1)) : scheduler.date.to_fixed((date.getMonth() + 1));\n\t\t\t\tcase \"%j\": return utc ? date.getUTCDate() : date.getDate();\n\t\t\t\tcase \"%n\": return utc ? (date.getUTCMonth() + 1) : (date.getMonth() + 1);\n\t\t\t\tcase \"%y\": return utc ? scheduler.date.to_fixed(date.getUTCFullYear() % 100) : scheduler.date.to_fixed(date.getFullYear() % 100);\n\t\t\t\tcase \"%Y\": return utc ? date.getUTCFullYear() : date.getFullYear();\n\t\t\t\tcase \"%D\": return utc ? scheduler.locale.date.day_short[date.getUTCDay()] : scheduler.locale.date.day_short[date.getDay()];\n\t\t\t\tcase \"%l\": return utc ? scheduler.locale.date.day_full[date.getUTCDay()] : scheduler.locale.date.day_full[date.getDay()];\n\t\t\t\tcase \"%M\": return utc ? scheduler.locale.date.month_short[date.getUTCMonth()] : scheduler.locale.date.month_short[date.getMonth()];\n\t\t\t\tcase \"%F\": return utc ? scheduler.locale.date.month_full[date.getUTCMonth()] : scheduler.locale.date.month_full[date.getMonth()];\n\t\t\t\tcase \"%h\": return utc ? scheduler.date.to_fixed((date.getUTCHours() + 11) % 12 + 1) : scheduler.date.to_fixed((date.getHours() + 11) % 12 + 1);\n\t\t\t\tcase \"%g\": return utc ? ((date.getUTCHours() + 11) % 12 + 1) : ((date.getHours() + 11) % 12 + 1);\n\t\t\t\tcase \"%G\": return utc ? date.getUTCHours() : date.getHours();\n\t\t\t\tcase \"%H\": return utc ? scheduler.date.to_fixed(date.getUTCHours()) : scheduler.date.to_fixed(date.getHours());\n\t\t\t\tcase \"%i\": return utc ? scheduler.date.to_fixed(date.getUTCMinutes()) : scheduler.date.to_fixed(date.getMinutes());\n\t\t\t\tcase \"%a\": return utc ? (date.getUTCHours() > 11 ? \"pm\" : \"am\") : (date.getHours() > 11 ? \"pm\" : \"am\");\n\t\t\t\tcase \"%A\": return utc ? (date.getUTCHours() > 11 ? \"PM\" : \"AM\") : (date.getHours() > 11 ? \"PM\" : \"AM\");\n\t\t\t\tcase \"%s\": return utc ? scheduler.date.to_fixed(date.getUTCSeconds()) : scheduler.date.to_fixed(date.getSeconds());\n\t\t\t\tcase \"%W\": return utc ? scheduler.date.to_fixed(scheduler.date.getUTCISOWeek(date)) : scheduler.date.to_fixed(scheduler.date.getISOWeek(date));\n\t\t\t\tdefault: return a;\n\t\t\t}\n\t\t});\n\t};\n};\nvar csp_str_to_date = function (format, utc) {\n\tconst mask = format.match(/%[a-zA-Z]/g);\n\treturn function (date){\n\t\tvar set = [0, 0, 1, 0, 0, 0];\n\t\tvar temp = date.match(/[a-zA-Z]+|[0-9]+/g);\n\n\t\tfor (var i = 0; i < mask.length; i++) {\n\t\t\tswitch (mask[i]) {\n\t\t\t\tcase \"%j\":\n\t\t\t\tcase \"%d\":\n\t\t\t\t\tset[2] = temp[i] || 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%n\":\n\t\t\t\tcase \"%m\":\n\t\t\t\t\tset[1] = (temp[i] || 1) - 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%y\":\n\t\t\t\t\tset[0] = temp[i] * 1 + (temp[i] > 50 ? 1900 : 2000);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%g\":\n\t\t\t\tcase \"%G\":\n\t\t\t\tcase \"%h\":\n\t\t\t\tcase \"%H\":\n\t\t\t\t\tset[3] = temp[i] || 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%i\":\n\t\t\t\t\tset[4] = temp[i] || 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%Y\":\n\t\t\t\t\tset[0] = temp[i] || 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%a\":\n\t\t\t\tcase \"%A\":\n\t\t\t\t\tset[3] = set[3] % 12 + ((temp[i] || '').toLowerCase() == 'am' ? 0 : 12);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%s\":\n\t\t\t\t\tset[5] = temp[i] || 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%M\":\n\t\t\t\t\tset[1] = scheduler.locale.date.month_short_hash[temp[i]] || 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%F\":\n\t\t\t\t\tset[1] = scheduler.locale.date.month_full_hash[temp[i]] || 0;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (utc) {\n\t\t\treturn new Date(Date.UTC(set[0], set[1], set[2], set[3], set[4], set[5]));\n\t\t}\n\n\t\treturn new Date(set[0], set[1], set[2], set[3], set[4], set[5]);\n\t};\n};\n\nlet cspEnabled = undefined;\nfunction checkIfCSPEnabled(){\n\ttry {\n\t\tnew Function(\"cspEnabled = false;\");\n\t\tcspEnabled = false;\n\t} catch(e) {\n\t\tcspEnabled = true;\n\t}\n\treturn cspEnabled;\n}\n\nfunction useCsp() {\n\tvar result = false;\n\tif (scheduler.config.csp === \"auto\") {\n\t\tif(cspEnabled === undefined){\n\t\t\tcspEnabled = checkIfCSPEnabled();\n\t\t}\n\t\tresult = cspEnabled;\n\t} else {\n\t\tresult = scheduler.config.csp;\n\t}\n\treturn result;\n}\nscheduler.date = {\n\tinit:function(){\n\t\tvar s = scheduler.locale.date.month_short;\n\t\tvar t = scheduler.locale.date.month_short_hash = {};\n\t\tfor (var i = 0; i < s.length; i++)\n\t\t\tt[s[i]]=i;\n\n\t\tvar s = scheduler.locale.date.month_full;\n\t\tvar t = scheduler.locale.date.month_full_hash = {};\n\t\tfor (var i = 0; i < s.length; i++)\n\t\t\tt[s[i]]=i;\n\t},\n\tdate_part:function(value){\n\t\tconst date = new Date(value);\n\t\tvar old = new Date(date);\n\t\tdate.setHours(0);\n\t\tdate.setMinutes(0);\n\t\tdate.setSeconds(0);\n\t\tdate.setMilliseconds(0);\n\t\tif (date.getHours() && //shift to yesterday on dst\n\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()) )\n\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\n\t\treturn date;\n\t},\n\ttime_part:function(date){\n\t\treturn (date.valueOf()/1000 - date.getTimezoneOffset()*60)%86400;\n\t},\n\tweek_start:function(date){\n\t\tvar shift=date.getDay();\n\t\tif (scheduler.config.start_on_monday){\n\t\t\tif (shift===0) shift=6;\n\t\t\telse shift--;\n\t\t}\n\t\treturn this.date_part(this.add(date,-1*shift,\"day\"));\n\t},\n\tmonth_start:function(value){\n\t\tconst date = new Date(value);\n\t\tdate.setDate(1);\n\t\treturn this.date_part(date);\n\t},\n\tyear_start:function(value){\n\t\tconst date = new Date(value);\n\t\tdate.setMonth(0);\n\t\treturn this.month_start(date);\n\t},\n\tday_start:function(value){\n\t\tconst date = new Date(value);\n\t\treturn this.date_part(date);\n\t},\n\t_add_days:function(date, inc){\n\t\tvar ndate = new Date(date.valueOf());\n\n\t\tndate.setDate(ndate.getDate() + inc);\n\n\t\t// Workaround for Safari/iOS timezone bug, ref:OKZ-149693\n\t\tif(inc == Math.round(inc) && inc > 0){\n\t\t\tvar datesDiff = +ndate - +date,\n\t\t\t\trest = datesDiff % (24*60*60*1000);\n\t\t\tif(rest && date.getTimezoneOffset() == ndate.getTimezoneOffset()){\n\t\t\t\tvar hours = rest / (60* 60 * 1000);\n\t\t\t\tndate.setTime(ndate.getTime() + (24 - hours) * 60 * 60 * 1000);\n\t\t\t}\n\t\t}\n\n\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\n\t\t\t(ndate.getDate() < date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()) )\n\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\n\t\treturn ndate;\n\t},\n\tadd:function(date,inc,mode){\n\t\tvar ndate=new Date(date.valueOf());\n\t\tswitch(mode){\n\t\t\tcase \"day\":\n\t\t\t\tndate = scheduler.date._add_days(ndate, inc);\n\t\t\t\tbreak;\n\t\t\tcase \"week\":\n\t\t\t\tndate = scheduler.date._add_days(ndate, inc * 7);\n\t\t\t\tbreak;\n\t\t\tcase \"month\": ndate.setMonth(ndate.getMonth()+inc); break;\n\t\t\tcase \"year\": ndate.setYear(ndate.getFullYear()+inc); break;\n\t\t\tcase \"hour\":\n\t\t\t\t/*\n\t\t\t\t setHour(getHour() + inc) and setMinutes gives weird result when is applied on a Daylight Saving time switch\n\t\t\t\t setTime seems working as expected\n\t\t\t\t*/\n\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\n\t\t\t\tbreak;\n\t\t\tcase \"minute\":\n\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn scheduler.date[\"add_\"+mode](date,inc,mode);\n\t\t}\n\t\treturn ndate;\n\t},\n\tto_fixed:function(num){\n\t\tif (num<10)\treturn \"0\"+num;\n\t\treturn num;\n\t},\n\tcopy:function(date){\n\t\treturn new Date(date.valueOf());\n\t},\n\tdate_to_str:function(format,utc){\n\t\tif (useCsp()) {\n\t\t\treturn csp_date_to_str(format,utc);\n\t\t}\n\n\t\tformat=format.replace(/%[a-zA-Z]/g,function(a){\n\t\t\tswitch(a){\n\t\t\t\tcase \"%d\": return \"\\\"+this.date.to_fixed(date.getDate())+\\\"\";\n\t\t\t\tcase \"%m\": return \"\\\"+this.date.to_fixed((date.getMonth()+1))+\\\"\";\n\t\t\t\tcase \"%j\": return \"\\\"+date.getDate()+\\\"\";\n\t\t\t\tcase \"%n\": return \"\\\"+(date.getMonth()+1)+\\\"\";\n\t\t\t\tcase \"%y\": return \"\\\"+this.date.to_fixed(date.getFullYear()%100)+\\\"\";\n\t\t\t\tcase \"%Y\": return \"\\\"+date.getFullYear()+\\\"\";\n\t\t\t\tcase \"%D\": return \"\\\"+this.locale.date.day_short[date.getDay()]+\\\"\";\n\t\t\t\tcase \"%l\": return \"\\\"+this.locale.date.day_full[date.getDay()]+\\\"\";\n\t\t\t\tcase \"%M\": return \"\\\"+this.locale.date.month_short[date.getMonth()]+\\\"\";\n\t\t\t\tcase \"%F\": return \"\\\"+this.locale.date.month_full[date.getMonth()]+\\\"\";\n\t\t\t\tcase \"%h\": return \"\\\"+this.date.to_fixed((date.getHours()+11)%12+1)+\\\"\";\n\t\t\t\tcase \"%g\": return \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\n\t\t\t\tcase \"%G\": return \"\\\"+date.getHours()+\\\"\";\n\t\t\t\tcase \"%H\": return \"\\\"+this.date.to_fixed(date.getHours())+\\\"\";\n\t\t\t\tcase \"%i\": return \"\\\"+this.date.to_fixed(date.getMinutes())+\\\"\";\n\t\t\t\tcase \"%a\": return \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\n\t\t\t\tcase \"%A\": return \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\n\t\t\t\tcase \"%s\": return \"\\\"+this.date.to_fixed(date.getSeconds())+\\\"\";\n\t\t\t\tcase \"%W\": return \"\\\"+this.date.to_fixed(this.date.getISOWeek(date))+\\\"\";\n\t\t\t\tdefault: return a;\n\t\t\t}\n\t\t});\n\t\tif (utc) format=format.replace(/date\\.get/g,\"date.getUTC\");\n\t\tvar func = new Function(\"date\",\"return \\\"\"+format+\"\\\";\");\n\n\t\treturn func.bind(scheduler);\n\t},\n\tstr_to_date:function(format, utc, exactFormat){\n\t\tvar stringToDateMethod = useCsp() ? csp_str_to_date : generateStringToDate;\n\t\tvar parseExactFormat = stringToDateMethod(format, utc);\n\t\t// eslint-disable-next-line\n\t\tvar yyyyMMddhhIIss = /^[0-9]{4}(\\-|\\/)[0-9]{2}(\\-|\\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/;\n\n\t\t// MM/dd/yyyy - default old format for xml-date\n\t\t// eslint-disable-next-line\n\t\tvar MMddyyyyhhIIss = /^[0-9]{2}\\/[0-9]{2}\\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/;\n\t\t// dd-MM-yyyy - default old format for api-date\n\t\t// eslint-disable-next-line\n\t\tvar ddMMyyyyhhIIss = /^[0-9]{2}\\-[0-9]{2}\\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/;\n\t\t// eslint-disable-next-line\n\t\tvar ISO8601 = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n\n\t\tvar isYMDDate = function (datestr) {\n\t\t\treturn yyyyMMddhhIIss.test(String(datestr));\n\t\t};\n\n\t\tvar isMDYDate = function (datestr) {\n\t\t\treturn MMddyyyyhhIIss.test(String(datestr));\n\t\t};\n\t\tvar isDMYDate = function (datestr) {\n\t\t\treturn ddMMyyyyhhIIss.test(String(datestr));\n\t\t};\n\t\tvar isISO8601 = function (datestr) {\n\t\t\treturn ISO8601.test(datestr);\n\t\t};\n\n\t\tvar parseYMD = stringToDateMethod(\"%Y-%m-%d %H:%i:%s\", utc);\n\t\tvar parseMDY = stringToDateMethod(\"%m/%d/%Y %H:%i:%s\", utc);\n\t\tvar parseDMY = stringToDateMethod(\"%d-%m-%Y %H:%i:%s\", utc);\n\n\t\treturn function (dateString) {\n\n\t\t\tif (!exactFormat && !scheduler.config.parse_exact_format) {\n\t\t\t\tif (dateString && dateString.getISOWeek) {\n\t\t\t\t\treturn new Date(dateString);\n\t\t\t\t} else if (typeof dateString === \"number\") {\n\t\t\t\t\treturn new Date(dateString);\n\t\t\t\t} else if (isYMDDate(dateString)) {\n\t\t\t\t\treturn parseYMD(dateString);\n\t\t\t\t} else if (isMDYDate(dateString)) {\n\t\t\t\t\treturn parseMDY(dateString);\n\t\t\t\t} else if (isDMYDate(dateString)) {\n\t\t\t\t\treturn parseDMY(dateString);\n\t\t\t\t} else if (isISO8601(dateString)) {\n\t\t\t\t\treturn new Date(dateString);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn parseExactFormat.call(scheduler, dateString);\n\t\t};\n\t},\n\tgetISOWeek: function(ndate) {\n\t\tif(!ndate) return false;\n\t\tndate = this.date_part(new Date(ndate));\n\t\tvar nday = ndate.getDay();\n\t\tif (nday === 0) {\n\t\t\tnday = 7;\n\t\t}\n\t\tvar first_thursday = new Date(ndate.valueOf());\n\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\n\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\n\t\tvar ordinal_date = Math.round( (first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\n\t\tvar week_number = 1 + Math.floor( ordinal_date / 7);\n\t\treturn week_number;\n\t},\n\tgetUTCISOWeek: function(ndate){\n\t\treturn this.getISOWeek(this.convert_to_utc(ndate));\n\t},\n\tconvert_to_utc: function(date) {\n\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\n\t}\n};\n\n}\n\n","export default function(scheduler){\n\treturn (function(){\n\t\tvar res = {};\n\t\tfor (var a in this._events){\n\t\t\tvar ev = this._events[a];\n\t\t\tif (ev.id.toString().indexOf(\"#\") == -1){\n\t\t\t\tres[ev.id] = ev;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}).bind(scheduler);\n}","import xmlLoaded from \"./loaders/xml\";\nimport jsonLoader from \"./loaders/json\";\nimport iCalLoader from \"./loaders/ical\";\nimport createSerializator from \"../core/common/get_serializable_events\";\n\nexport default function extend(scheduler) {\n\nscheduler._loaded = {};\nscheduler._load = function(url, from) {\n\turl = url || this._load_url;\n\n\tif(!url){\n\t\t//if scheduler.setLoadMode is called before scheduler.init, initial rendering will invoke data loading while url is undefined\n\t\treturn;\n\t}\n\n\turl += (url.indexOf(\"?\") == -1 ? \"?\" : \"&\") + \"timeshift=\" + (new Date()).getTimezoneOffset();\n\tif (this.config.prevent_cache)    url += \"&uid=\" + this.uid();\n\tvar to;\n\tfrom = from || this._date;\n\tfunction ajaxCallback(response) {\n\t\tscheduler.on_load(response);\n\t\tscheduler.callEvent(\"onLoadEnd\", []);\n\t}\n\tif (this._load_mode) {\n\t\tvar lf = this.templates.load_format;\n\n\t\tfrom = this.date[this._load_mode + \"_start\"](new Date(from.valueOf()));\n\t\twhile (from > this._min_date) from = this.date.add(from, -1, this._load_mode);\n\t\tto = from;\n\n\t\tvar cache_line = true;\n\t\twhile (to < this._max_date) {\n\t\t\tto = this.date.add(to, 1, this._load_mode);\n\t\t\tif (this._loaded[lf(from)] && cache_line)\n\t\t\t\tfrom = this.date.add(from, 1, this._load_mode); else cache_line = false;\n\t\t}\n\n\t\tvar temp_to = to;\n\t\tdo {\n\t\t\tto = temp_to;\n\t\t\ttemp_to = this.date.add(to, -1, this._load_mode);\n\t\t} while (temp_to > from && this._loaded[lf(temp_to)]);\n\n\t\tif (to <= from)\n\t\t\treturn false; //already loaded\n\n\t\tscheduler.ajax.get(url + \"&from=\" + lf(from) + \"&to=\" + lf(to), ajaxCallback);\n\n\t\twhile (from < to) {\n\t\t\tthis._loaded[lf(from)] = true;\n\t\t\tfrom = this.date.add(from, 1, this._load_mode);\n\t\t}\n\t} else {\n\t\tscheduler.ajax.get(url, ajaxCallback);\n\t}\n\n\t// TODO: remove onXLS\n\tthis.callEvent(\"onXLS\", []);\n\tthis.callEvent(\"onLoadStart\", []);\n\treturn true;\n};\n\nscheduler._parsers = {};\n\n\nxmlLoaded(scheduler);\njsonLoader(scheduler);\niCalLoader(scheduler);\n\nscheduler.on_load = function (loader) {\n\tthis.callEvent(\"onBeforeParse\", []);\n\n\tvar evs;\n\tvar error = false;\n\n\tvar foundParser = false;\n\tfor(var i in this._parsers){\n\t\tvar parser = this._parsers[i];\n\t\tif(parser.canParse(loader.xmlDoc.responseText, loader.xmlDoc)){\n\t\t\ttry{\n\t\t\t\tvar param = loader.xmlDoc.responseText;\n\t\t\t\tif(i === \"xml\"){\n\t\t\t\t\tparam = loader;\n\t\t\t\t}\n\t\t\t\tevs = parser.parse(param);\n\t\t\t\tif(!evs){\n\t\t\t\t\terror = true;\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\terror = true;\n\t\t\t}\n\t\t\tfoundParser = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(!foundParser){\n\t\tif(this._process && this[this._process]){\n\t\t\ttry{\n\t\t\t\tevs = this[this._process].parse(loader.xmlDoc.responseText);\n\t\t\t}catch (e){\n\t\t\t\terror = true;\n\t\t\t}\n\t\t}else{\n\t\t\terror = true;\n\t\t}\n\t}\n\n\tif(error || (loader.xmlDoc.status && loader.xmlDoc.status >= 400)){\n\t\tthis.callEvent(\"onLoadError\", [loader.xmlDoc]);\n\t\tevs = [];\n\t}\n\n\tthis._process_loading(evs);\n\n\t// TODO: remove onXLE\n\tthis.callEvent(\"onXLE\", []);\n\tthis.callEvent(\"onParse\", []);\n};\nscheduler._process_loading = function(evs) {\n\tthis._loading = true;\n\tthis._not_render = true;\n\tfor (var i = 0; i < evs.length; i++) {\n\t\tif (!this.callEvent(\"onEventLoading\", [evs[i]])) continue;\n\t\tthis.addEvent(evs[i]);\n\t}\n\tthis._not_render = false;\n\tif (this._render_wait) this.render_view_data();\n\n\tthis._loading = false;\n\tif (this._after_call) this._after_call();\n\tthis._after_call = null;\n};\nscheduler._init_event = function(event) {\n\tevent.text = (event.text || event._tagvalue) || \"\";\n\tevent.start_date = scheduler._init_date(event.start_date);\n\tevent.end_date = scheduler._init_date(event.end_date);\n};\n\nscheduler._init_date = function(date){\n\tif(!date)\n\t\treturn null;\n\tif (typeof date == \"string\") {\n\t\treturn scheduler._helpers.parseDate(date);\n\t}\n\telse return new Date(date);\n};\n\nconst getSerializableData = createSerializator(scheduler);\nscheduler.serialize = function(){\n\tconst dataset = [];\n\tconst allEvents = getSerializableData();\n\tfor (var a in allEvents){\n\t\t\n\t\tconst exportedEvent = {};\n\t\tvar ev = allEvents[a];\n\n\t\tfor(var key in ev){\n\t\t\tif (key.charAt(0) == \"$\" || key.charAt(0) == \"_\"){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet exportValue;\n\t\t\tconst rawValue = ev[key];\n\t\t\tif(scheduler.utils.isDate(rawValue)){\n\t\t\t\texportValue = scheduler.defined(scheduler.templates.xml_format) ? scheduler.templates.xml_format(rawValue) : scheduler.templates.format_date(rawValue);\n\t\t\t}else{\n\t\t\t\texportValue = rawValue;\n\t\t\t}\n\t\t\t\n\t\t\texportedEvent[key] = exportValue;\n\t\t}\n\n\t\tdataset.push(exportedEvent);\n\t}\n\treturn dataset;\n};\n\n/*\nscheduler.json = {};\nscheduler.json.parse = function(data) {\n\n\tvar events = [];\n\n\tif (typeof data == \"string\") {\n\t\tdata = JSON.parse(data);\n\t}\n\tif (Object.prototype.toString.call(data) === '[object Array]') {\n\t\tevents = data;\n\t} else {\n\t\tif(data){\n\t\t\tif(data.events){\n\t\t\t\tevents = data.events;\n\t\t\t}else if(data.data){\n\t\t\t\tevents = data.data;\n\t\t\t}\n\t\t}\n\t}\n\tevents = events || [];\n\n\tif (data.dhx_security) {\n\t\tif (window.dhtmlx) {\n\t\t\twindow.dhtmlx.security_key = data.dhx_security;\n\t\t}\n\t\tscheduler.security_key = data.dhx_security;\n\t}\n\n\tvar collections = (data && data.collections) ? data.collections : {};\n\tvar collections_loaded = false;\n\tfor (var key in collections) {\n\t\tif (collections.hasOwnProperty(key)) {\n\t\t\tcollections_loaded = true;\n\t\t\tvar collection = collections[key];\n\t\t\tvar arr = scheduler.serverList[key];\n\t\t\tif (!arr) {\n\t\t\t\tscheduler.serverList[key] = arr = [];\n\t\t\t}\n\t\t\tarr.splice(0, arr.length); //clear old options\n\t\t\tfor (var j = 0; j < collection.length; j++) {\n\t\t\t\tvar option = collection[j];\n\t\t\t\tvar obj = { key: option.value, label: option.label }; // resulting option object\n\t\t\t\tfor (var option_key in option) {\n\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\n\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tarr.push(obj);\n\t\t\t}\n\t\t}\n\t}\n\tif (collections_loaded)\n\t\tscheduler.callEvent(\"onOptionsLoad\", []);\n\n\tvar evs = [];\n\tfor (var i = 0; i < events.length; i++) {\n\t\tvar event = events[i];\n\t\tscheduler._init_event(event);\n\t\tevs.push(event);\n\t}\n\treturn evs;\n};*/\nscheduler.parse = function(data, type) {\n\tthis._process = type;\n\tthis.on_load({xmlDoc: {responseText: data}});\n};\nscheduler.load = function(url, call) {\n\tif (typeof call == \"string\") {\n\t\tthis._process = call;\n\t\tcall = arguments[2];\n\t}\n\n\tthis._load_url = url;\n\tthis._after_call = call;\n\tthis._load(url, this._date);\n};\n//possible values - day,week,month,year,all\nscheduler.setLoadMode = function(mode) {\n\tif (mode == \"all\") mode = \"\";\n\tthis._load_mode = mode;\n};\n\nscheduler.serverList = function(name, array) {\n\tif (array) {\n\t\tthis.serverList[name] = array.slice(0);\n\t\treturn this.serverList[name];\n\t}\n\tthis.serverList[name] = (this.serverList[name] || []);\n\treturn this.serverList[name];\n};\nscheduler._userdata = {};\n\nscheduler._xmlNodeToJSON = function(node) {\n\tvar t = {};\n\tfor (var i = 0; i < node.attributes.length; i++)\n\t\tt[node.attributes[i].name] = node.attributes[i].value;\n\n\tfor (var i = 0; i < node.childNodes.length; i++) {\n\t\tvar child = node.childNodes[i];\n\t\tif (child.nodeType == 1)\n\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\n\t}\n\n\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\n\n\treturn t;\n};\nscheduler.attachEvent(\"onXLS\", function() {\n\tif (this.config.show_loading === true) {\n\t\tvar t;\n\t\tt = this.config.show_loading = document.createElement(\"div\");\n\t\tt.className = 'dhx_loading';\n\t\tt.style.left = Math.round((this._x - 128) / 2) + \"px\";\n\t\tt.style.top = Math.round((this._y - 15) / 2) + \"px\";\n\t\tthis._obj.appendChild(t);\n\t}\n});\nscheduler.attachEvent(\"onXLE\", function() {\n\tvar t = this.config.show_loading;\n\tif (t && typeof t == \"object\") {\n\t\tif(t.parentNode) {\n\t\t\tt.parentNode.removeChild(t);\n\t\t}\n\t\tthis.config.show_loading = true;\n\t}\n});\n\n\n}","export default function extend(scheduler) {\n\n\nscheduler._parsers.xml = {\n\tcanParse: function(data, xhr){\n\t\t// IE returns non-empty responseXML type regardless of actual data type\n\t\tif(xhr.responseXML && xhr.responseXML.firstChild){\n\t\t\treturn true;\n\t\t}\n\n\t\ttry{\n\t\t\tvar xmlDoc = scheduler.ajax.parse(xhr.responseText);\n\t\t\tvar topElement = scheduler.ajax.xmltop(\"data\", xmlDoc);\n\t\t\tif(topElement && topElement.tagName === \"data\"){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}catch (e){\n\t\t}\n\t\treturn false;\n\t},\n\tparse: function(loader) {\n\t\tvar xml;\n\n\t\tif (!loader.xmlDoc.responseXML) { //from a string\n\t\t\tloader.xmlDoc.responseXML = scheduler.ajax.parse(loader.xmlDoc.responseText);\n\t\t}\n\t\n\t\txml = scheduler.ajax.xmltop(\"data\", loader.xmlDoc);\n\t\tif (xml.tagName != \"data\") return null;//not an xml\n\t\tvar csrfToken = xml.getAttribute(\"dhx_security\");\n\t\tif (csrfToken) {\n\t\t\tif (window.dhtmlx) {\n\t\t\t\twindow.dhtmlx.security_key = csrfToken;\n\t\t\t}\n\t\t\tscheduler.security_key = csrfToken;\n\t\t}\n\t\n\t\tvar opts = scheduler.ajax.xpath(\"//coll_options\", loader.xmlDoc);\n\t\tfor (var i = 0; i < opts.length; i++) {\n\t\t\tvar bind = opts[i].getAttribute(\"for\");\n\t\t\tvar arr = scheduler.serverList[bind];\n\t\t\tif (!arr) {\n\t\t\t\tscheduler.serverList[bind] = arr = [];\n\t\t\t}\n\t\t\tarr.splice(0, arr.length);\t//clear old options\n\t\t\tvar itms = scheduler.ajax.xpath(\".//item\", opts[i]);\n\t\t\tfor (var j = 0; j < itms.length; j++) {\n\t\t\t\tvar itm = itms[j];\n\t\t\t\tvar attrs = itm.attributes;\n\t\t\t\tvar obj = { key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\n\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\n\t\t\t\t\tvar attr = attrs[k];\n\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\n\t\t\t\t}\n\t\t\t\tarr.push(obj);\n\t\t\t}\n\t\t}\n\t\tif (opts.length)\n\t\t\tscheduler.callEvent(\"onOptionsLoad\", []);\n\t\n\t\tvar ud = scheduler.ajax.xpath(\"//userdata\", loader.xmlDoc);\n\t\tfor (var i = 0; i < ud.length; i++) {\n\t\t\tvar udx = scheduler._xmlNodeToJSON(ud[i]);\n\t\t\tscheduler._userdata[udx.name] = udx.text;\n\t\t}\n\t\n\t\tvar evs = [];\n\t\txml = scheduler.ajax.xpath(\"//event\", loader.xmlDoc);\n\t\n\t\tfor (var i = 0; i < xml.length; i++) {\n\t\t\tvar ev = evs[i] = scheduler._xmlNodeToJSON(xml[i]);\n\t\t\tscheduler._init_event(ev);\n\t\t}\n\t\treturn evs;\n\t}\n};\n\n}","export default function extend(scheduler) {\n\n\nscheduler.json = scheduler._parsers.json = {\n\tcanParse: function(data){\n\t\tif(data && typeof data === \"object\"){\n\t\t\treturn true;\n\t\t} else if(typeof data === \"string\"){\n\t\t\ttry {\n\t\t\t\tvar result = JSON.parse(data);\n\t\t\t\treturn Object.prototype.toString.call(result) === '[object Object]' || \n\t\t\t\t\t\tObject.prototype.toString.call(result) === '[object Array]';\n\t\t\t} catch (err) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tparse: function(data) {\n\t\tvar events = [];\n\n\t\tif (typeof data == \"string\") {\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\tif (Object.prototype.toString.call(data) === '[object Array]') {\n\t\t\tevents = data;\n\t\t} else {\n\t\t\tif(data){\n\t\t\t\tif(data.events){\n\t\t\t\t\tevents = data.events;\n\t\t\t\t}else if(data.data){\n\t\t\t\t\tevents = data.data;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevents = events || [];\n\n\t\tif (data.dhx_security) {\n\t\t\tif (window.dhtmlx) {\n\t\t\t\twindow.dhtmlx.security_key = data.dhx_security;\n\t\t\t}\n\t\t\tscheduler.security_key = data.dhx_security;\n\t\t}\n\n\t\tvar collections = (data && data.collections) ? data.collections : {};\n\t\tvar collections_loaded = false;\n\t\tfor (var key in collections) {\n\t\t\tif (collections.hasOwnProperty(key)) {\n\t\t\t\tcollections_loaded = true;\n\t\t\t\tvar collection = collections[key];\n\t\t\t\tvar arr = scheduler.serverList[key];\n\t\t\t\tif (!arr) {\n\t\t\t\t\tscheduler.serverList[key] = arr = [];\n\t\t\t\t}\n\t\t\t\tarr.splice(0, arr.length); //clear old options\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\n\t\t\t\t\tvar option = collection[j];\n\t\t\t\t\tvar obj = { key: option.value, label: option.label }; // resulting option object\n\t\t\t\t\tfor (var option_key in option) {\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tarr.push(obj);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (collections_loaded)\n\t\t\tscheduler.callEvent(\"onOptionsLoad\", []);\n\n\t\tvar evs = [];\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event = events[i];\n\t\t\tscheduler._init_event(event);\n\t\t\tevs.push(event);\n\t\t}\n\t\treturn evs;\n\t}\n};\n\n}","export default function extend(scheduler) {\n\n\nscheduler.ical = scheduler._parsers.ical = {\n\tcanParse: function(data){\n\t\tif(typeof data === \"string\"){\n\t\t\treturn new RegExp(\"^BEGIN:VCALENDAR\").test(data);\n\t\t}\n\n\t\treturn false;\n\t},\n\tparse:function(str){\n\t\tvar data = str.match(RegExp(this.c_start+\"[^\\f]*\"+this.c_end,\"\"));\n\t\tif (!data.length) return;\n\n\t\t// mpl: handle bad unfolding\n\t\tdata[0]=data[0].replace(/[\\r\\n]+ /g,\"\");\n\n\t\t//unfolding \n\t\tdata[0]=data[0].replace(/[\\r\\n]+(?=[a-z \\t])/g,\" \");\n\t\t//drop property\n\t\tdata[0]=data[0].replace(/;[^:\\r\\n]*:/g,\":\");\n\t\t\n\t\t\n\t\tvar incoming=[];\n\t\tvar match;\n\t\tvar event_r = RegExp(\"(?:\"+this.e_start+\")([^\\f]*?)(?:\"+this.e_end+\")\",\"g\");\n\t\twhile ((match=event_r.exec(data)) !== null){\n\t\t\tvar e={};\n\t\t\tvar param;\n\t\t\tvar param_r = /[^\\r\\n]+[\\r\\n]+/g;\n\t\t\twhile ((param=param_r.exec(match[1])) !== null)\n\t\t\t\tthis.parse_param(param.toString(),e);\n\t\t\tif (e.uid && !e.id) e.id = e.uid; //fallback to UID, when ID is not defined\n\t\t\tincoming.push(e);\t\n\t\t}\n\t\treturn incoming;\n\t},\n\tparse_param:function(str,obj){\n\t\tvar d = str.indexOf(\":\"); \n\t\t\tif (d==-1) return;\n\t\t\n\t\tvar name = str.substr(0,d).toLowerCase();\n\t\tvar value = str.substr(d+1).replace(/\\\\,/g,\",\").replace(/[\\r\\n]+$/,\"\");\n\t\tif (name==\"summary\")\n\t\t\tname=\"text\";\n\t\telse if (name==\"dtstart\"){\n\t\t\tname = \"start_date\";\n\t\t\tvalue = this.parse_date(value,0,0);\n\t\t}\n\t\telse if (name==\"dtend\"){\n\t\t\tname = \"end_date\";\n\t\t\tvalue = this.parse_date(value,0,0);\n\t\t}\n\t\tobj[name]=value;\n\t},\n\tparse_date:function(value,dh,dm){\n\t\tvar t = value.split(\"T\");\n\n\t\tvar utcMark = false;\n\t\tif (t[1]){\n\t\t\tdh=t[1].substr(0,2);\n\t\t\tdm=t[1].substr(2,2);\n\t\t\tutcMark = !!(t[1][6] == \"Z\");\n\t\t}\n\t\tvar dy = t[0].substr(0,4);\n\t\tvar dn = parseInt(t[0].substr(4,2),10)-1;\n\t\tvar dd = t[0].substr(6,2);\n\n\t\tif(scheduler.config.server_utc || utcMark){\n\t\t\treturn new Date(Date.UTC(dy,dn,dd,dh,dm)) ;\n\t\t}else{\n\t\t\treturn new Date(dy,dn,dd,dh,dm);\n\t\t}\n\t},\n\tc_start:\"BEGIN:VCALENDAR\",\n\te_start:\"BEGIN:VEVENT\",\n\te_end:\"END:VEVENT\",\n\tc_end:\"END:VCALENDAR\"\t\n};\n\n}","export default function extend(scheduler) {\n\nscheduler._lightbox_controls = {};\nscheduler.formSection = function(name){\n\tvar config = this.config.lightbox.sections;\n\tvar i = 0;\n\tfor (i; i < config.length; i++) {\n\t\tif (config[i].name == name) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (i === config.length) {\n\t\t// GS-1662 section not found, should exit here instead of throwing an error\n\t\treturn null;\n\t}\n\n\tvar section = config[i];\n\tif (!scheduler._lightbox) {\n\t\tscheduler.getLightbox();\n\t}\n\tvar header = scheduler._lightbox.querySelector(`#${section.id}`);\n\tvar node = header.nextSibling;\n\n\tvar result = {\n\t\tsection: section,\n\t\theader: header,\n\t\tnode: node,\n\t\tgetValue:function(ev){\n\t\t\treturn scheduler.form_blocks[section.type].get_value(node, (ev||{}), section);\n\t\t},\n\t\tsetValue:function(value, ev){\n\t\t\treturn scheduler.form_blocks[section.type].set_value(node, value, (ev||{}), section);\n\t\t}\n\t};\n\n\tvar handler = scheduler._lightbox_controls[\"get_\"+section.type+\"_control\"];\n\treturn handler?handler(result):result;\n};\nscheduler._lightbox_controls.get_template_control = function(result) {\n\tresult.control = result.node;\n\treturn result;\n};\nscheduler._lightbox_controls.get_select_control = function(result) {\n\tresult.control = result.node.getElementsByTagName('select')[0];\n\treturn result;\n};\nscheduler._lightbox_controls.get_textarea_control = function(result) {\n\tresult.control = result.node.getElementsByTagName('textarea')[0];\n\treturn result;\n};\nscheduler._lightbox_controls.get_time_control = function(result) {\n\tresult.control = result.node.getElementsByTagName('select'); // array\n\treturn result;\n};\n\nscheduler._lightbox_controls.defaults = {\n\ttemplate: {\n\t\theight:30\n\t},\n\ttextarea: {\n\t\theight: 200\n\t},\n\tselect: {\n\t\theight: 23\n\t},\n\ttime: {\n\t\theight: 20\n\t}\n};\n\n\nscheduler.form_blocks={\n\ttemplate:{\n\t\trender: function(sns){\n\t\t\tconst sectionHeight = sns.height ? `style='height:${sns.height}px;'` : \"\";\n\t\t\treturn `<div class='dhx_cal_ltext dhx_cal_template' ${sectionHeight}></div>`;\n\t\t},\n\t\tset_value:function(node,value,ev,config){\n\t\t\tnode.innerHTML = value||\"\";\n\t\t},\n\t\tget_value:function(node,ev,config){\n\t\t\treturn node.innerHTML||\"\";\n\t\t},\n\t\tfocus: function(node){\n\t\t}\n\t},\n\ttextarea:{\n\t\trender:function(sns){\n\t\t\tconst sectionHeight = sns.height ? `style='height:${sns.height}px;'` : \"\";\n\t\t\tconst placeholder = sns.placeholder ? `placeholder='${sns.placeholder}'` : \"\";\n\t\t\treturn `<div class='dhx_cal_ltext' ${sectionHeight}><textarea ${placeholder}></textarea></div>`;\n\t\t},\n\t\tset_value:function(node,value,ev){\n\t\t\tscheduler.form_blocks.textarea._get_input(node).value=value||\"\";\n\t\t},\n\t\tget_value:function(node,ev){\n\t\t\treturn scheduler.form_blocks.textarea._get_input(node).value;\n\t\t},\n\t\tfocus:function(node){\n\t\t\tvar a = scheduler.form_blocks.textarea._get_input(node);\n\t\t\tscheduler._focus(a, true);\n\t\t},\n\t\t_get_input: function(node){\n\t\t\treturn node.getElementsByTagName(\"textarea\")[0];\n\t\t}\n\t},\n\tselect:{\n\t\trender:function(sns){\n\t\t\t//var defaults = scheduler._lightbox_controls.defaults.select;\n\t\t\tconst sectionHeight = sns.height ? `style='height:${sns.height}px;'` : \"\";\n\t\t\tvar html=`<div class='dhx_cal_ltext dhx_cal_select' ${sectionHeight}><select style='width:100%;'>`;\n\t\t\tfor (var i=0; i < sns.options.length; i++)\n\t\t\t\thtml+=\"<option value='\"+sns.options[i].key+\"'>\"+sns.options[i].label+\"</option>\";\n\t\t\thtml+=\"</select></div>\";\n\t\t\treturn html;\n\t\t},\n\t\tset_value:function(node,value,ev,sns){\n\t\t\tvar select = node.firstChild;\n\t\t\tif (!select._dhx_onchange && sns.onchange) {\n\t\t\t\tscheduler.event(select, \"change\", sns.onchange);\n\t\t\t\tselect._dhx_onchange = true;\n\t\t\t}\n\t\t\tif (typeof value == \"undefined\")\n\t\t\t\tvalue = (select.options[0]||{}).value;\n\t\t\tselect.value=value||\"\";\n\t\t},\n\t\tget_value:function(node,ev){\n\t\t\treturn node.firstChild.value;\n\t\t},\n\t\tfocus:function(node){\n\t\t\tvar a=node.firstChild; scheduler._focus(a, true);\n\t\t}\n\t},\n\ttime:{\n\t\trender:function(sns) {\n\t\t\tif (!sns.time_format) {\n\t\t\t\t// default order\n\t\t\t\tsns.time_format = [\"%H:%i\", \"%d\", \"%m\", \"%Y\"];\n\t\t\t}\n\t\t\t// map: default order => real one\n\t\t\tsns._time_format_order = {};\n\t\t\tvar time_format = sns.time_format;\n\n\t\t\tvar cfg = scheduler.config;\n\t\t\tvar dt = scheduler.date.date_part(scheduler._currentDate());\n\t\t\tvar last = 24*60, first = 0;\n\t\t\tif(scheduler.config.limit_time_select){\n\t\t\t\tlast = 60*cfg.last_hour+1;\n\t\t\t\tfirst = 60*cfg.first_hour;\n\t\t\t\tdt.setHours(cfg.first_hour);\n\t\t\t}\n\t\t\tvar html = \"\";\n\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\n\t\t\t\tvar time_option = time_format[p];\n\n\t\t\t\t// adding spaces between selects\n\t\t\t\tif (p > 0) {\n\t\t\t\t\thtml += \" \";\n\t\t\t\t}\n\t\t\t\tvar selectBoxClass = \"\";\n\t\t\t\tvar options = \"\";\n\t\t\t\tswitch (time_option) {\n\t\t\t\t\tcase \"%Y\":\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_year_select\";\n\t\t\t\t\t\tsns._time_format_order[3] = p;\n\t\t\t\t\t\t//year\n\t\t\t\t\t\tvar range;\n\t\t\t\t\t\tvar start_year;\n\t\t\t\t\t\tvar end_year;\n\t\t\t\t\t\tif(sns.year_range){\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\n\t\t\t\t\t\t\t\trange = sns.year_range;\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\n\t\t\t\t\t\t\t\t// if\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trange = range || 10;\n\t\t\t\t\t\tvar offset = offset || Math.floor(range / 2);\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\n\t\t\t\t\t\tend_year = end_year || start_year + range;\n\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"%m\":\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_month_select\";\n\t\t\t\t\t\tsns._time_format_order[2] = p;\n\t\t\t\t\t\t//month\n\t\t\t\t\t\tfor (var i=0; i < 12; i++)\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+this.locale.date.month_full[i]+\"</option>\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"%d\":\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_day_select\";\n\t\t\t\t\t\tsns._time_format_order[1] = p;\n\t\t\t\t\t\t//days\n\t\t\t\t\t\tfor (var i=1; i < 32; i++)\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+i+\"</option>\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"%H:%i\":\n\t\t\t\t\t\tselectBoxClass = \"dhx_lightbox_time_select\";\n\t\t\t\t\t\tsns._time_format_order[0] = p;\n\t\t\t\t\t\t//hours\n\t\t\t\t\t\tvar i = first;\n\t\t\t\t\t\tvar tdate = dt.getDate();\n\t\t\t\t\t\tsns._time_values = [];\n\n\t\t\t\t\t\twhile(i<last){\n\t\t\t\t\t\t\tvar time=this.templates.time_picker(dt);\n\t\t\t\t\t\t\toptions+=\"<option value='\"+i+\"'>\"+time+\"</option>\";\n\t\t\t\t\t\t\tsns._time_values.push(i);\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf()+this.config.time_step*60*1000);\n\t\t\t\t\t\t\tvar diff = (dt.getDate()!=tdate)?1:0; // moved or not to the next day\n\t\t\t\t\t\t\ti=diff*24*60+dt.getHours()*60+dt.getMinutes();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif(options){\n\n\t\t\t\t\tvar ariaAttrs = scheduler._waiAria.lightboxSelectAttrString(time_option);\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\n\t\t\t\t\thtml += \"<select class='\"+selectBoxClass+\"' \"+readonly + ariaAttrs+\">\"+options+\"</select> \";\n\t\t\t\t}\n\t\t\t}\n\t\t\t//var defaults = scheduler._lightbox_controls.defaults.select;\n\t\t\tconst sectionHeight = sns.height ? `style='height:${sns.height}px;'` : \"\";\n\t\t\treturn `<div class='dhx_section_time' ${sectionHeight}>${html}<span style='font-weight:normal; font-size:10pt;' class='dhx_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>${html}</div>`;\n\t\t},\n\t\tset_value:function(node,value,ev,config){\n\t\t\tvar cfg = scheduler.config;\n\t\t\tvar s=node.getElementsByTagName(\"select\");\n\t\t\tvar map = config._time_format_order;\n\t\t\tvar start_date, end_date;\n\n\t\t\tif(cfg.full_day) {\n\t\t\t\tif (!node._full_day){\n\t\t\t\t\tvar html = \"<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> \"+scheduler.locale.labels.full_day+\"&nbsp;</label></input>\";\n\t\t\t\t\tif (!scheduler.config.wide_form)\n\t\t\t\t\t\thtml = node.previousSibling.innerHTML+html;\n\t\t\t\t\tnode.previousSibling.innerHTML=html;\n\t\t\t\t\tnode._full_day=true;\n\t\t\t\t}\n\t\t\t\tvar input=node.previousSibling.getElementsByTagName(\"input\")[0];\n\t\t\t\tinput.checked = (scheduler.date.time_part(ev.start_date)===0 && scheduler.date.time_part(ev.end_date)===0);\n\n\t\t\t\ts[map[0]].disabled=input.checked;\n\t\t\t\ts[ map[0] + s.length/2 ].disabled=input.checked;\n\n\t\t\t\tif(!input.$_eventAttached){\n\t\t\t\t\tinput.$_eventAttached = true;\n\n\t\t\t\t\t\tscheduler.event(input, \"click\", function(){\n\t\t\t\t\t\tif(input.checked) {\n\t\t\t\t\t\t\tvar obj = {};\n\t\t\t\t\t\t\tscheduler.form_blocks.time.get_value(node,obj,config);\n\n\t\t\t\t\t\t\tstart_date = scheduler.date.date_part(obj.start_date);\n\t\t\t\t\t\t\tend_date = scheduler.date.date_part(obj.end_date);\n\n\t\t\t\t\t\t\tif (+end_date == +start_date || (+end_date >= +start_date && (ev.end_date.getHours() !== 0 || ev.end_date.getMinutes() !== 0)))\n\t\t\t\t\t\t\t\tend_date = scheduler.date.add(end_date, 1, \"day\");\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tstart_date = null;\n\t\t\t\t\t\t\tend_date = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ts[map[0]].disabled=input.checked;\n\t\t\t\t\t\ts[ map[0] + s.length/2 ].disabled=input.checked;\n\n\t\t\t\t\t\t_fill_lightbox_select(s,0,start_date||ev.start_date);\n\t\t\t\t\t\t_fill_lightbox_select(s,4,end_date||ev.end_date);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(cfg.auto_end_date && cfg.event_duration) {\n\t\t\t\tvar _update_lightbox_select = function () {\n\t\t\t\t\t\n\t\t\t\t\tif (!(cfg.auto_end_date && cfg.event_duration)){\n\t\t\t\t\t\t// setting may be disabled after the handler is attached\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tstart_date = new Date(s[map[3]].value,s[map[2]].value,s[map[1]].value,0,s[map[0]].value);\n\t\t\t\t\tend_date = new Date(start_date.getTime() + (scheduler.config.event_duration * 60 * 1000));\n\t\t\t\t\t_fill_lightbox_select(s, 4, end_date);\n\t\t\t\t};\n\t\t\t\tfor(var i=0; i<4; i++) {\n\t\t\t\t\tif(!s[i].$_eventAttached) {\n\t\t\t\t\t\ts[i].$_eventAttached = true;\n\t\t\t\t\t\tscheduler.event(s[i], \"change\", _update_lightbox_select);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction _fill_lightbox_select(s,i,d) {\n\t\t\t\tvar time_values = config._time_values;\n\t\t\t\tvar direct_value = d.getHours()*60+d.getMinutes();\n\t\t\t\tvar fixed_value = direct_value;\n\t\t\t\tvar value_found = false;\n\t\t\t\tfor (var k=0; k<time_values.length; k++) {\n\t\t\t\t\tvar t_v = time_values[k];\n\t\t\t\t\tif (t_v === direct_value) {\n\t\t\t\t\t\tvalue_found = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (t_v < direct_value)\n\t\t\t\t\t\tfixed_value = t_v;\n\t\t\t\t}\n\n\t\t\t\ts[i+map[0]].value=(value_found)?direct_value:fixed_value;\n\t\t\t\tif(!(value_found || fixed_value)){\n\t\t\t\t\ts[i+map[0]].selectedIndex = -1;//show empty select in FF\n\t\t\t\t}\n\t\t\t\ts[i+map[1]].value=d.getDate();\n\t\t\t\ts[i+map[2]].value=d.getMonth();\n\t\t\t\ts[i+map[3]].value=d.getFullYear();\n\t\t\t}\n\n\t\t\t_fill_lightbox_select(s,0,ev.start_date);\n\t\t\t_fill_lightbox_select(s,4,ev.end_date);\n\t\t},\n\t\tget_value:function(node, ev, config) {\n\t\t\tvar s = node.getElementsByTagName(\"select\");\n\t\t\tvar map = config._time_format_order;\n\n\t\t\tev.start_date=new Date(s[map[3]].value,s[map[2]].value,s[map[1]].value,0,s[map[0]].value);\n\t\t\tev.end_date=new Date(s[map[3]+4].value,s[map[2]+4].value,s[map[1]+4].value,0,s[map[0]+4].value);\n\n\t\t\tif(!(s[map[3]].value && s[map[3]+4].value)){\n\t\t\t\t// use the previous date if start/end years are empty (outside lightbox range)\n\t\t\t\tvar original = scheduler.getEvent(scheduler._lightbox_id);\n\t\t\t\tif(original){\n\t\t\t\t\tev.start_date = original.start_date;\n\t\t\t\t\tev.end_date = original.end_date;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ev.end_date<=ev.start_date)\n\t\t\t\tev.end_date=scheduler.date.add(ev.start_date,scheduler.config.time_step,\"minute\");\n\t\t\treturn {\n\t\t\t\tstart_date: new Date(ev.start_date),\n\t\t\t\tend_date: new Date(ev.end_date)\n\t\t\t};\n\t\t},\n\t\tfocus:function(node){\n\t\t\tscheduler._focus(node.getElementsByTagName(\"select\")[0]);\n\t\t}\n\t}\n\n};\n\n\t// GS-2214. Attaching the lightbox to the BODY element is not considered secure.\n\t// Attach it to Scheduler container for Salesforce and other secure environments\n\tfunction getLightboxRoot(){\n\t\tconst cspEnvironment = scheduler.config.csp === true;\n\t\tconst salesforceEnvironment = !!window[\"Sfdc\"] || !!window[\"$A\"] || window[\"Aura\"] || ('$shadowResolver$' in document.body);\n\t\tif (cspEnvironment || salesforceEnvironment) {\n\t\t\treturn scheduler.$root;\n\t\t} else {\n\t\t\treturn document.body;\n\t\t}\n\t}\n\nscheduler._setLbPosition = function(box) {\n\tif(!box){\n\t\treturn;\n\t}\n\n\tbox.style.top = Math.max(getLightboxRoot().offsetHeight / 2 - box.offsetHeight/2, 0) + \"px\";\n\tbox.style.left = Math.max(getLightboxRoot().offsetWidth / 2 - box.offsetWidth/2, 0) + \"px\";\n\n};\n\nscheduler.showCover=function(box){\n\tif (box){\n\t\tbox.style.display=\"block\";\n\n\t\tthis._setLbPosition(box);\n\t}\n\tif(scheduler.config.responsive_lightbox){\n\t\tdocument.documentElement.classList.add(\"dhx_cal_overflow_container\");\n\t\tgetLightboxRoot().classList.add(\"dhx_cal_overflow_container\");\n\t}\n\tthis.show_cover();\n\tthis._cover.style.display = \"\";\n};\nscheduler.showLightbox=function(id){\n\tif (!id) return;\n\tif (!this.callEvent(\"onBeforeLightbox\",[id])) {\n\t\tif (this._new_event)\n\t\t\tthis._new_event = null;\n\t\treturn;\n\t}\n\tthis.showCover(box);\n\tvar box = this.getLightbox();\n\tthis._setLbPosition(box);\n\tthis._fill_lightbox(id,box);\n\tthis._waiAria.lightboxVisibleAttr(box);\n\t\n\tthis.callEvent(\"onLightbox\",[id]);\n};\nscheduler._fill_lightbox = function(id, box) {\n\tvar ev = this.getEvent(id);\n\tvar s = box.getElementsByTagName(\"span\");\n\tvar lightboxHeader = [];\n\n\tif (scheduler.templates.lightbox_header) {\n\t\tlightboxHeader.push(\"\");\n\t\tvar headerContent = scheduler.templates.lightbox_header(ev.start_date, ev.end_date, ev);\n\t\tlightboxHeader.push(headerContent);\n\t\ts[1].innerHTML = \"\";\n\t\ts[2].innerHTML = headerContent;\n\t} else {\n\t\tvar headerDate = this.templates.event_header(ev.start_date, ev.end_date, ev);\n\t\tvar headerTitle = (this.templates.event_bar_text(ev.start_date, ev.end_date, ev) || \"\").substr(0, 70); //IE6 fix;\n\n\t\tlightboxHeader.push(headerDate);\n\t\tlightboxHeader.push(headerTitle);\n\t\ts[1].innerHTML = headerDate;\n\t\ts[2].innerHTML = headerTitle;\n\t}\n\n\tthis._waiAria.lightboxHeader(box,  lightboxHeader.join(\" \"));\n\n\tvar sns = this.config.lightbox.sections;\n\tfor (var i = 0; i < sns.length; i++) {\n\t\tvar current_sns = sns[i];\n\t\tvar node = scheduler._get_lightbox_section_node(current_sns);\n\t\tvar block = this.form_blocks[current_sns.type];\n\t\tvar value = (ev[current_sns.map_to] !== undefined) ? ev[current_sns.map_to] : current_sns.default_value;\n\t\tblock.set_value.call(this, node, value, ev, current_sns);\n\t\tif (sns[i].focus)\n\t\t\tblock.focus.call(this, node);\n\t}\n\n\tscheduler._lightbox_id = id;\n};\n\nscheduler._get_lightbox_section_node = function(section){\n\treturn scheduler._lightbox.querySelector(`#${section.id}`).nextSibling;\n};\n\nscheduler._lightbox_out=function(ev){\n\tvar sns = this.config.lightbox.sections;\n\tfor (var i=0; i < sns.length; i++) {\n\t\tvar node = scheduler._lightbox.querySelector(`#${sns[i].id}`);\n\t\tnode=(node?node.nextSibling:node);\n\t\tvar block=this.form_blocks[sns[i].type];\n\t\tvar res=block.get_value.call(this,node,ev, sns[i]);\n\t\tif (sns[i].map_to!=\"auto\")\n\t\t\tev[sns[i].map_to]=res;\n\t}\n\treturn ev;\n};\nscheduler._empty_lightbox=function(data){\n\tvar id=scheduler._lightbox_id;\n\tvar ev=this.getEvent(id);\n\t//var box=this.getLightbox();\n\n\tthis._lame_copy(ev, data);\n\n\tthis.setEvent(ev.id,ev);\n\tthis._edit_stop_event(ev,true);\n\tthis.render_view_data();\n};\nscheduler.hide_lightbox=function(id){\n\tscheduler.endLightbox(false, this.getLightbox());\n};\n\nscheduler.hideCover=function(box){\n\tif (box) box.style.display=\"none\";\n\tthis.hide_cover();\n\tif(scheduler.config.responsive_lightbox){\n\t\tdocument.documentElement.classList.remove(\"dhx_cal_overflow_container\");\n\t\tgetLightboxRoot().classList.remove(\"dhx_cal_overflow_container\");\n\t}\n};\nscheduler.hide_cover=function(){\n\tif (this._cover)\n\t\tthis._cover.parentNode.removeChild(this._cover);\n\tthis._cover=null;\n};\n\nscheduler.show_cover=function(){\n\tif(this._cover) {\n\t\treturn;\n\t}\n\n\tthis._cover=document.createElement(\"div\");\n\tthis._cover.className=\"dhx_cal_cover\";\n\tthis._cover.style.display = \"none\";\n\n\tscheduler.event(this._cover, \"mousemove\", scheduler._move_while_dnd);\n\tscheduler.event(this._cover, \"mouseup\", scheduler._finish_dnd);\n\n\tgetLightboxRoot().appendChild(this._cover);\n};\nscheduler.save_lightbox=function(){\n\tvar data = this._lightbox_out({}, this._lame_copy(this.getEvent(this._lightbox_id)));\n\tif (this.checkEvent(\"onEventSave\") && !this.callEvent(\"onEventSave\",[this._lightbox_id, data, this._new_event]))\n\t\treturn;\n\tthis._empty_lightbox(data);\n\tthis.hide_lightbox();\n};\nscheduler.startLightbox = function(id, box){\n\tthis._lightbox_id = id;\n\tthis._custom_lightbox = true;\n\n\tthis._temp_lightbox = this._lightbox;\n\tthis._lightbox = box;\n\tthis.showCover(box);\n};\nscheduler.endLightbox = function(mode, box){\n\tvar box = box || scheduler.getLightbox();\n\n\tvar event = scheduler.getEvent(this._lightbox_id);\n\tif(event)\n\t\tthis._edit_stop_event(event, mode);\n\tif (mode)\n\t\tscheduler.render_view_data();\n\tthis.hideCover(box);\n\n\tif (this._custom_lightbox){\n\t\tthis._lightbox = this._temp_lightbox;\n\t\tthis._custom_lightbox = false;\n\t}\n\tthis._temp_lightbox = this._lightbox_id = null; // in case of custom lightbox user only calls endLightbox so we need to reset _lightbox_id\n\tthis._waiAria.lightboxHiddenAttr(box);\n\tthis.resetLightbox();\n\tthis.callEvent(\"onAfterLightbox\",[]);\n};\nscheduler.resetLightbox = function(){\n\tif (scheduler._lightbox && !scheduler._custom_lightbox)\n\t\tscheduler._lightbox.parentNode.removeChild(scheduler._lightbox);\n\tscheduler._lightbox = null;\n};\nscheduler.cancel_lightbox=function(){\n\tif(this._lightbox_id){\n\t\tthis.callEvent(\"onEventCancel\",[this._lightbox_id, !!this._new_event]);\n\t}\n\n\tthis.hide_lightbox();\n};\nscheduler.hideLightbox = scheduler.cancel_lightbox;// GS-1650 need to use cancel in order to fire onEventCancel event, which is important to refresh the state of recurring series\n\nscheduler._init_lightbox_events=function(){\n\tif(this.getLightbox().$_eventAttached){\n\t\treturn;\t\n\t}\n\tconst lightbox = this.getLightbox();\n\tlightbox.$_eventAttached = true;\n\n\tscheduler.event(lightbox, \"click\", function(e){\n\n\t\tif(e.target.closest(\".dhx_cal_ltitle_close_btn\")){\n\t\t\tscheduler.cancel_lightbox();\n\t\t}\n\t\t\n\t\tconst buttonTarget = scheduler.$domHelpers.closest(e.target, \".dhx_btn_set\");\n\t\tif(!buttonTarget) {\n\t\t\tconst sectionButton = scheduler.$domHelpers.closest(e.target, \".dhx_custom_button[data-section-index]\");\n\t\t\tif(sectionButton){\n\t\t\t\tconst index = Number(sectionButton.getAttribute(\"data-section-index\"));\n\t\t\t\tconst block = scheduler.form_blocks[scheduler.config.lightbox.sections[index].type];\n\t\t\t\tblock.button_click(scheduler.$domHelpers.closest(sectionButton, \".dhx_cal_lsection\"), sectionButton, e);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tconst action = buttonTarget ? buttonTarget.getAttribute(\"data-action\") : null;\n\n\t\tswitch(action){\n\t\t\tcase \"dhx_save_btn\":\n\t\t\tcase \"save\":\n\t\t\t\tif(scheduler.config.readonly_active){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tscheduler.save_lightbox();\n\t\t\t\tbreak;\n\t\t\tcase \"dhx_delete_btn\":\n\t\t\tcase \"delete\":\n\t\t\t\tif(scheduler.config.readonly_active){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar c=scheduler.locale.labels.confirm_deleting;\n\n\t\t\t\tscheduler._dhtmlx_confirm({message: c, title: scheduler.locale.labels.title_confirm_deleting, callback: function(){\n\t\t\t\t\tlet ev = scheduler.getEvent(scheduler._lightbox_id);\n\t\t\t\t\t// GS-2578: case for removing following events\n\t\t\t\t\tif (ev._thisAndFollowing){\n\t\t\t\t\t\tev._removeFollowing = true;\n\t\t\t\t\t\tscheduler.callEvent(\"onEventSave\", [ev.id, ev,scheduler._new_event]);\n\t\t\t\t\t}else {\n\t\t\t\t\t\tscheduler.deleteEvent(scheduler._lightbox_id);\n\t\t\t\t\t}\n\t\t\t\t\tscheduler._new_event = null; //clear flag, if it was unsaved event\n\t\t\t\t\tscheduler.hide_lightbox();\n\t\t\t\t},\n\t\t\t\tconfig: {ok: scheduler.locale.labels.icon_delete}});\n\n\t\t\t\tbreak;\n\t\t\tcase \"dhx_cancel_btn\":\n\t\t\tcase \"cancel\":\n\t\t\t\tscheduler.cancel_lightbox();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tscheduler.callEvent(\"onLightboxButton\", [action, buttonTarget, e]);\n\t\t}\n\t});\n\tscheduler.event(lightbox, \"keydown\", function(e){\n\t\tvar event = e || window.event;\n\t\tvar target = e.target || e.srcElement;\n\t\tvar buttonTarget = target.querySelector(\"[dhx_button]\");\n\n\t\tif(!buttonTarget){\n\t\t\tbuttonTarget = target.parentNode.querySelector(\".dhx_custom_button, .dhx_readonly\");\n\t\t}\n\n\t\tswitch((e||event).keyCode){\n\t\t\tcase 32:{//space\n\t\t\t\tif ((e||event).shiftKey) return;\n\t\t\t\tif(buttonTarget && buttonTarget.click){\n\t\t\t\t\tbuttonTarget.click();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase scheduler.keys.edit_save:\n\t\t\t\tif ((e||event).shiftKey) return;\n\t\t\t\tif(buttonTarget && buttonTarget.click){\n\t\t\t\t\tbuttonTarget.click();\n\t\t\t\t}else{\n\t\t\t\t\tif(scheduler.config.readonly_active){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tscheduler.save_lightbox();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase scheduler.keys.edit_cancel:\n\t\t\t\tscheduler.cancel_lightbox();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t});\n\tfunction getDaysInMonth(year, month){\n\t\treturn new Date(year, month + 1, 0).getDate();\n\t}\n\t// GS-1680: setting the correct number of days in month\n\tscheduler.event(lightbox, \"click\", function(e){\n\t\tif (e.target.closest(\".dhx_lightbox_day_select\") || e.target.closest(\".dhx_lightbox_month_select\")) {\n\t\t\tconst monthSelectNodes = lightbox.querySelectorAll(\".dhx_lightbox_month_select\");\n\t\t\tconst daySelectNodes = lightbox.querySelectorAll(\".dhx_lightbox_day_select\");\n\t\t\tconst yearSelectNodes = lightbox.querySelectorAll(\".dhx_lightbox_year_select\");\n\n\t\t\tif (monthSelectNodes.length && daySelectNodes.length && yearSelectNodes) {\n\t\t\t\tmonthSelectNodes.forEach((select, i) => {\n\t\t\t\t\tconst daySelect = daySelectNodes[i];\n\t\t\t\t\tconst month = parseInt(select.value, 10);\n\t\t\t\t\tlet year = parseInt(yearSelectNodes[i].value, 10);\n\t\t\t\t\tif(!year){\n\t\t\t\t\t\tyear = new Date(scheduler.getState().date).getFullYear(); // case when there is no year selects\n\t\t\t\t\t}\n\t\t\t\t\tconst daysInMonth = getDaysInMonth(year, month);\n\t\t\t\t\tconst maxDays = daysInMonth || 31;\n\t\t\t\t\tlet curDayValue = daySelect.value;\n\t\t\t\t\t// need to remove all options\n\t\t\t\t\tdaySelect.innerHTML = \"\";\n\t\t\t\t\tfor (let day = 1; day <= maxDays; day++) {\n\t\t\t\t\t\tconst option = document.createElement('option');\n\t\t\t\t\t\toption.value = day;\n\t\t\t\t\t\toption.textContent = day;\n\t\t\t\t\t\tdaySelect.appendChild(option);\n\t\t\t\t\t}\n\t\t\t\t\tdaySelect.value = Math.min(curDayValue, maxDays); // set the correct max day\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n};\nscheduler.setLightboxSize=function(){\n\treturn;\n/* TODO: inspect and remove in 7.0\n\tvar d = this._lightbox;\n\tif (!d) return;\n\n\tvar con = d.childNodes[1];\n\tcon.style.height=\"0px\";\n\tcon.style.height=con.scrollHeight+\"px\";\n\td.style.height=con.scrollHeight+scheduler.xy.lightbox_additional_height+\"px\";\n\tcon.style.height=con.scrollHeight+\"px\"; //it is incredible , how ugly IE can be*/\n};\n\nscheduler._init_dnd_events = function(){\n\tscheduler.event(getLightboxRoot(), \"mousemove\", scheduler._move_while_dnd);\n\tscheduler.event(getLightboxRoot(), \"mouseup\", scheduler._finish_dnd);\n\tscheduler._init_dnd_events = function(){};\n };\nscheduler._move_while_dnd = function(e){\n\tif (scheduler._dnd_start_lb){\n\t\tif (!document.dhx_unselectable){\n\t\t\tgetLightboxRoot().classList.add(\"dhx_unselectable\");\n\t\t\tdocument.dhx_unselectable = true;\n\t\t}\n\t\tvar lb = scheduler.getLightbox();\n\t\tvar now = [e.pageX, e.pageY];\n\t\tlb.style.top = scheduler._lb_start[1]+now[1]-scheduler._dnd_start_lb[1]+\"px\";\n\t\tlb.style.left = scheduler._lb_start[0]+now[0]-scheduler._dnd_start_lb[0]+\"px\";\n\t}\n};\nscheduler._ready_to_dnd = function(e){\n\tvar lb = scheduler.getLightbox();\n\tscheduler._lb_start = [lb.offsetLeft, lb.offsetTop];\n\tscheduler._dnd_start_lb = [e.pageX, e.pageY];\n};\nscheduler._finish_dnd = function(){\n\tif (scheduler._lb_start){\n\t\tscheduler._lb_start = scheduler._dnd_start_lb = false;\n\t\tgetLightboxRoot().classList.remove(\"dhx_unselectable\");\n\t\tdocument.dhx_unselectable = false;\n\t}\n};\nscheduler.getLightbox=function(){ //scheduler.config.wide_form=true;\n\tif (!this._lightbox){\n\t\tvar d=document.createElement(\"div\");\n\t\td.className=\"dhx_cal_light\";\n\t\tif (scheduler.config.wide_form)\n\t\t\td.className+=\" dhx_cal_light_wide\";\n\t\tif (scheduler.form_blocks.recurring)\n\t\t\td.className+=\" dhx_cal_light_rec\";\n\t\tif (scheduler.config.rtl)\n\t\t\td.className+=\" dhx_cal_light_rtl\";\n\t\tif (scheduler.config.responsive_lightbox)\n\t\t\td.className += \" dhx_cal_light_responsive\";\n\n\t\td.style.visibility=\"hidden\";\n\t\tvar html = this._lightbox_template;\n\n\t\tvar buttons = this.config.buttons_right;\n\n\n\t\thtml += \"<div class='dhx_cal_lcontrols'>\";\n\t\tvar ariaAttr = \"\";\n\t\tfor (var i = 0; i < buttons.length; i++) {\n\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(buttons[i]);\n\t\t\thtml += \"<div \"+ariaAttr+\" data-action='\"+ buttons[i]+\"' class='dhx_btn_set dhx_\"+(scheduler.config.rtl?\"right\":\"left\")+\"_btn_set \" + buttons[i] + \"_set'><div class='dhx_btn_inner \" + buttons[i] + \"'></div><div>\" + scheduler.locale.labels[buttons[i]] + \"</div></div>\";\n\t\t}\n\n\t\tbuttons = this.config.buttons_left;\n\t\tvar rtl = scheduler.config.rtl;\n\t\tfor (var i = 0; i < buttons.length; i++) {\n\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(buttons[i]);\n\n\t\t\thtml += \"<div class='dhx_cal_lcontrols_push_right'></div>\";\n\n\t\t\thtml += \"<div \"+ariaAttr+\" data-action='\"+ buttons[i]+\"' class='dhx_btn_set dhx_\"+(rtl?\"left\":\"right\")+\"_btn_set \" +\n\t\t\t\t\t\tbuttons[i] + \"_set'><div class='dhx_btn_inner \" +\n\t\t\t\t\t\tbuttons[i] + \"'></div><div>\" + scheduler.locale.labels[buttons[i]] + \"</div></div>\";\n\t\t}\n\t\thtml += \"</div>\";\n\t\thtml+=\"</div>\";\n\t\td.innerHTML=html;\n\t\tif (scheduler.config.drag_lightbox){\n\t\t\tscheduler.event(d.firstChild, \"mousedown\", scheduler._ready_to_dnd);\n\t\t\tscheduler.event(d.firstChild, \"selectstart\", function(e){ \n\t\t\t\te.preventDefault();\n\t\t\t\treturn false; \n\t\t\t});\n\t\t\td.firstChild.style.cursor = \"move\";\n\t\t\tscheduler._init_dnd_events();\n\n\t\t}\n\n\t\tthis._waiAria.lightboxAttr(d);\n\n\t\tthis.show_cover();\n\t\tthis._cover.insertBefore(d,this._cover.firstChild);\n\t\t\n\t\tthis._lightbox=d;\n\n\t\tvar sns=this.config.lightbox.sections;\n\t\thtml=\"\";\n\t\tfor (var i=0; i < sns.length; i++) {\n\t\t\tvar block=this.form_blocks[sns[i].type];\n\t\t\tif (!block) continue; //ignore incorrect blocks\n\t\t\tsns[i].id=\"area_\"+this.uid();\n\t\t\tvar button = \"\";\n\t\t\tif (sns[i].button){\n\t\t\t\tvar ariaAttr = scheduler._waiAria.lightboxSectionButtonAttrString(this.locale.labels[\"button_\"+sns[i].button]);\n\t\t\t\tbutton = \"<div \"+ariaAttr+\" class='dhx_custom_button' data-section-index='\"+i+\"' index='\"+i+\"'><div class='dhx_custom_button_\"+sns[i].button+\"'></div><div>\"+this.locale.labels[\"button_\"+sns[i].button]+\"</div></div>\";\n\t\t\t}\n\n\t\t\tif (this.config.wide_form){\n\t\t\t\thtml+=\"<div class='dhx_wrap_section'>\";\n\t\t\t}\n\n\t\t\tvar label_name = this.locale.labels[\"section_\"+sns[i].name];\n\t\t\tif(typeof label_name !== \"string\"){\n\t\t\t\tlabel_name = sns[i].name;\n\t\t\t}\n\t\t\thtml+=\"<div id='\"+sns[i].id+\"' class='dhx_cal_lsection dhx_cal_lsection_\"+sns[i].name+\"'>\"+button+ \"<label>\"+label_name+\"</label></div>\"+block.render.call(this,sns[i]);\n\t\t\thtml+=\"</div>\";\n\t\t}\n\n\t\tvar ds=d.getElementsByTagName(\"div\");\n\t\tfor (var i=0; i<ds.length; i++) {\n\t\t\tvar t_ds = ds[i];\n\t\t\tvar className = scheduler._getClassName(t_ds);\n\t\t\tif (className == \"dhx_cal_larea\") {\n\t\t\t\tt_ds.innerHTML = html;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// bind labels to lightbox inputs\n\t\tscheduler._bindLightboxLabels(sns);\n\n\t\t//sizes\n\t\tthis.setLightboxSize();\n\n\t\tthis._init_lightbox_events(this);\n\t\t//d.style.display=\"none\";\n\t\td.style.visibility=\"visible\";\n\t}\n\n\n\treturn this._lightbox;\n};\n\nscheduler._bindLightboxLabels = function(sections){\n\t// link section labels to controls using label[for] attribute and label.onclick=control.focus as a fallback\n\t// label[for] is preferable for accessibility reasons\n\n\tfor(var i = 0; i < sections.length; i++){\n\t\tvar section = sections[i];\n\t\tif(!section.id || !scheduler._lightbox.querySelector(`#${section.id}`))\n\t\t\tcontinue;\n\n\t\tvar labelBlock = scheduler._lightbox.querySelector(`#${section.id}`);\n\t\tvar label = labelBlock.querySelector(\"label\");\n\n\t\tvar inputBlock = scheduler._get_lightbox_section_node(section);\n\t\twhile(inputBlock && !inputBlock.querySelector){\n\t\t\tinputBlock = inputBlock.nextSibling;\n\t\t}\n\n\t\tvar fallback = true;\n\n\t\tif(inputBlock) {\n\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\n\t\t\tif(input){\n\t\t\t\tsection.inputId = input.id || \"input_\" + scheduler.uid();\n\t\t\t\tif(!input.id)\n\t\t\t\t\tinput.id = section.inputId;\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\n\t\t\t\tfallback = false;\n\t\t\t}\n\t\t}\n\n\t\t// use control.focus if failed to bind input using label[for]\n\t\tif(fallback){\n\t\t\tvar control = scheduler.form_blocks[section.type];\n\t\t\tif(control.focus){\n\t\t\t\tscheduler.event(label, \"click\", (function(section){\n\t\t\t\t\treturn function(){\n\n\t\t\t\t\t\tvar block = scheduler.form_blocks[section.type];\n\t\t\t\t\t\tvar node = scheduler._get_lightbox_section_node(section);\n\n\t\t\t\t\t\tif(block && block.focus)\n\t\t\t\t\t\t\tblock.focus.call(scheduler, node);\n\t\t\t\t\t};\n\t\t\t\t})(section));\n\t\t\t}\n\t\t}\n\t}\n};\n\nscheduler.attachEvent(\"onEventIdChange\", function(old_id, new_id){\n\tif(this._lightbox_id == old_id)\n\t\tthis._lightbox_id = new_id;\n});\n\nscheduler._lightbox_template= `<div class='dhx_cal_ltitle'><div class=\"dhx_cal_ltitle_descr\"><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span>\n</div>\n<div class=\"dhx_cal_ltitle_controls\">\n<a class=\"dhx_cal_ltitle_close_btn scheduler_icon close\"></a>\n</div></div><div class='dhx_cal_larea'></div>`;\n\n\n}","export default function extend(scheduler) {\n\n\nscheduler._init_touch_events = function(){\n\tvar mobile = this.config.touch  &&\n\t\t( ((navigator.userAgent.indexOf(\"Mobile\")!=-1)   ||\n\t\t\t(navigator.userAgent.indexOf(\"iPad\")!=-1)       ||\n\t\t\t(navigator.userAgent.indexOf(\"Android\")!=-1)    ||\n\t\t\t(navigator.userAgent.indexOf(\"Touch\")!=-1)) && !window.MSStream) ||\n\t\t\t((navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1));\n\n\tif(mobile){\n\t\tthis.xy.scroll_width = 0;\n\t\tthis._mobile = true;\n\t}\n\n\tif(this.config.touch){\n\n\t\tvar touchEventsSupported = true;\n\t\ttry {\n\t\t\tdocument.createEvent(\"TouchEvent\");\n\t\t} catch (e) {\n\t\t\ttouchEventsSupported = false;\n\t\t}\n\n\t\tif (touchEventsSupported) {\n\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\n\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\n\t\t\t\tif (ev.touches[0])\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttarget: ev.target,\n\t\t\t\t\t\tpageX: ev.touches[0].pageX,\n\t\t\t\t\t\tpageY: ev.touches[0].pageY,\n\t\t\t\t\t\tclientX: ev.touches[0].clientX,\n\t\t\t\t\t\tclientY: ev.touches[0].clientY\n\t\t\t\t\t};\n\t\t\t\telse\n\t\t\t\t\treturn ev;\n\t\t\t}, function () {\n\t\t\t\treturn false;\n\t\t\t});\n\t\t} else if (window.PointerEvent || window.navigator.pointerEnabled) {\n\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\n\t\t\t\tif (ev.pointerType == \"mouse\") return null;\n\t\t\t\treturn ev;\n\t\t\t}, function (ev) {\n\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\n\t\t\t});\n\t\t} else if (window.navigator.msPointerEnabled) {\n\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\n\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\n\t\t\t\treturn ev;\n\t\t\t}, function (ev) {\n\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\n\t\t\t});\n\t\t}\n\t}\n};\n\nscheduler._touch_events = function(names, accessor, ignore){\n\t//webkit on android need to be handled separately\n\t//var a_webkit = (navigator.userAgent.indexOf(\"Android\")!=-1) && (navigator.userAgent.indexOf(\"WebKit\")!=-1);\n\tvar source, tracker, timer, drag_mode, scroll_mode, action_mode;\n\tvar dblclicktime = 0;\n\n\tfunction attachTouchEvent(element, name, callback){\n\t\t//touch gestures must be disabled when ligthbox is opened\n\t\tscheduler.event(element, name, function(e){\n\t\t\tif(scheduler._is_lightbox_open()){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tif (ignore(e)) return;\n\t\t\t\treturn callback(e);\n\t\t\t}\n\t\t}, { passive: false });\n\t}\n\n\tfunction check_direction_swipe(s_ev, e_ev, step, max_dy){\n\t\tif (!s_ev || !e_ev) return false;\n\n\t\tvar t = s_ev.target;\n\t\twhile(t && t != scheduler._obj){\n\t\t\tt = t.parentNode;\n\t\t}\n\t\tif(t != scheduler._obj){\n\t\t\t//swipe outside scheduler\n\t\t\treturn false;\n\t\t}\n\n\t\t// ignore swipe in horizontal timeline\n\t\tif(scheduler.matrix && scheduler.matrix[scheduler.getState().mode]){\n\t\t\tvar timeline = scheduler.matrix[scheduler.getState().mode];\n\t\t\tif(timeline.scrollable){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tvar dy = Math.abs(s_ev.pageY - e_ev.pageY);\n\t\tvar dx = Math.abs(s_ev.pageX - e_ev.pageX);\n\t\tif (dy < max_dy && dx>step && (!dy || (dx/dy > 3))){\n\t\t\tif (s_ev.pageX > e_ev.pageX) {\n\t\t\t\tscheduler._click.dhx_cal_next_button();\n\t\t\t}else {\n\t\t\t\tscheduler._click.dhx_cal_prev_button();\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction doMouseMove(e){\n\t\tif (ignore(e)) return;\n\t\tvar dnd = scheduler.getState().drag_mode,\n\t\t\ttimeline = scheduler.matrix ? scheduler.matrix[scheduler._mode] : false;\n\n\t\tvar original_render = scheduler.render_view_data;\n\t\tif(dnd == 'create' && timeline){\n\t\t\t//suppress full redraw of timeline on creating event\n\t\t\tscheduler.render_view_data = function() {\n\t\t\t\tvar id = scheduler.getState().drag_id;\n\t\t\t\tvar ev = scheduler.getEvent(id);\n\t\t\t\tvar property = timeline.y_property;\n\n\t\t\t\tvar evs = scheduler.getEvents(ev.start_date, ev.end_date);\n\t\t\t\tfor(var i = 0; i < evs.length; i++){\n\t\t\t\t\tif(evs[i][property] != ev[property]){\n\t\t\t\t\t\tevs.splice(i, 1);\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tev._sorder = evs.length - 1;\n\t\t\t\tev._count = evs.length;\n\n\t\t\t\tthis.render_data([ev], scheduler.getState().mode);\n\n\t\t\t};\n\t\t}\n\n\t\tscheduler._on_mouse_move(e);\n\n\t\tif(dnd == 'create' && timeline){\n\t\t\tscheduler.render_view_data = original_render;\n\t\t}\n\n\t\tif (e.preventDefault)\n\t\t\te.preventDefault();\n\t\te.cancelBubble = true;\n\t\treturn false;\n\t}\n\n\t// touchmove\n\tattachTouchEvent(document.body, names[0], function(e){\n\t\tif (ignore(e)) return;\n\n\t\tvar acc = accessor(e);\n\t\tif(!acc) return;\n\t\tif (drag_mode){\n\t\t\tdoMouseMove(acc);\n\n\t\t\tif (e.preventDefault)\n\t\t\t\te.preventDefault();\n\t\t\te.cancelBubble = true;\n\t\t\tscheduler._update_global_tip();\n\t\t\treturn false;\n\t\t}\n\t\t//if (tracker && a_webkit){\n\t\t//\tcheck_direction_swipe(tracker, accessor(e), 0);\n\t\t//}\n\n\t\ttracker = accessor(e);\n\t\t//ignore common and scrolling moves\n\t\tif (!action_mode) return;\n\n\t\t//multitouch\n\t\tif (!tracker){\n\t\t\tscroll_mode = true;\n\t\t\treturn;\n\t\t}\n\n\t\t//target changed - probably in scroll mode\n\n\t\tif (source.target != tracker.target || (Math.abs(source.pageX - tracker.pageX) > 5) || (Math.abs(source.pageY - tracker.pageY) > 5)){\n\t\t\tscroll_mode = true;\n\t\t\tclearTimeout(timer);\n\t\t}\n\n\t});\n\n\t//attachTouchEvent(this._els[\"dhx_cal_data\"][0], \"scroll\", drag_cancel);\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], \"touchcancel\", drag_cancel);\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], \"contextmenu\", function(e){\n\t\tif (ignore(e)) return;\n\t\tif (action_mode){\n\t\t\tif (e && e.preventDefault)\n\t\t\t\te.preventDefault();\n\t\t\te.cancelBubble = true;\n\t\t\treturn false;\n\t\t}\n\t});\n\n\t// touchstart\n\tattachTouchEvent(this._obj, names[1], function(e){\n\t\t// block pull-to-refresh\n\t\tif(document && document.body){\n\t\t\tdocument.body.classList.add(\"dhx_cal_touch_active\");\n\t\t}\n\n\t\tif (ignore(e)) return;\n\t\tscheduler._pointerDragId = e.pointerId;\n\n\t\tvar fake_event;\n\t\tdrag_mode = scroll_mode = false;\n\t\taction_mode = true;\n\t\tfake_event = tracker = accessor(e);\n\n\t\tif (!fake_event){\n\t\t\tscroll_mode = true;\n\t\t\treturn;\n\t\t}\n\n\t\t//dbl click\n\t\tvar now = new Date();\n\n\t\tif (!scroll_mode && !drag_mode && now - dblclicktime < 250){\n\t\t\tscheduler._click.dhx_cal_data(fake_event);\n\t\t\twindow.setTimeout(function(){\n\t\t\t\tif(scheduler.$destroyed){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t//fake_event.type = \"dblclick\";\n\t\t\t\tscheduler._on_dbl_click(fake_event);\n\t\t\t}, 50);\n\n\t\t\tif (e.preventDefault)\n\t\t\t\te.preventDefault();\n\t\t\te.cancelBubble = true;\n\t\t\tscheduler._block_next_stop = true;\n\t\t\treturn false;\n\t\t}\n\t\tdblclicktime = now;\n\n\t\t//drag\n\n\t\tif (scroll_mode || drag_mode || !scheduler.config.touch_drag)\n\t\t\treturn;\n\n\t\tvar actTask = scheduler._locate_event(document.activeElement);\n\t\tvar fakeTask = scheduler._locate_event(fake_event.target);\n\t\tvar sourceTask = source? scheduler._locate_event(source.target) : null;\n\n\t\tif(actTask && fakeTask && actTask == fakeTask && actTask != sourceTask)\n\t\t{\n\t\t\tif(e.preventDefault) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\te.cancelBubble = true;\n\t\t\tscheduler._ignore_next_click = false;\n\t\t\tscheduler._click.dhx_cal_data(fake_event);\n\t\t\tsource = fake_event;\n\t\t\treturn false;\n\t\t}\n\t\t//there is no target\n\t\ttimer = setTimeout(function(){\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdrag_mode = true;\n\t\t\tvar target = source.target;\n\t\t\tvar className = scheduler._getClassName(target);\n\t\t\tif (target && className.indexOf(\"dhx_body\") != -1)\n\t\t\t\ttarget = target.previousSibling;\n\n\t\t\tscheduler._on_mouse_down(source, target);\n\t\t\tif (scheduler._drag_mode && scheduler._drag_mode != \"create\"){\n\t\t\t\tscheduler.for_rendered(scheduler._drag_id, function(node, i) {\n\t\t\t\t\tnode.style.display='none';\n\t\t\t\t\tscheduler._rendered.splice(i, 1);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (scheduler.config.touch_tip) {\n\t\t\t\tscheduler._show_global_tip();\n\t\t\t}\n\t\t\tscheduler.updateEvent(scheduler._drag_id);\n\t\t},scheduler.config.touch_drag);\n\n\t\tsource = fake_event;\n\t});\n\tfunction drag_cancel(e){\n\t\tif (ignore(e)) return;\n\t\tscheduler._hide_global_tip();\n\t\tif (drag_mode){\n\t\t\tscheduler._on_mouse_up( accessor(e) );\n\t\t\tscheduler._temp_touch_block = false;\n\t\t}\n\t\tscheduler._drag_id = null;\n\t\tscheduler._drag_mode=null;\n\t\tscheduler._drag_pos=null;\n\t\tscheduler._pointerDragId = null;\n\t\tclearTimeout(timer);\n\t\tdrag_mode = action_mode = false;\n\t\tscroll_mode = true;\n\t}\n\n\t// touch end\n\tattachTouchEvent(this._els[\"dhx_cal_data\"][0], names[2], function(e){\n\t\tif(document && document.body){\n\t\t\tdocument.body.classList.remove(\"dhx_cal_touch_active\");\n\t\t}\n\n\t\tif (ignore(e)) return;\n\n\t\tif(scheduler.config.touch_swipe_dates){\n\t\t\tif (!drag_mode && check_direction_swipe(source, tracker, 200, 100)) {\n\t\t\t\tscheduler._block_next_stop = true;\n\t\t\t}\n\t\t}\n\n\t\tif (drag_mode) {\n\t\t\tscheduler._ignore_next_click = true;\n\t\t\tsetTimeout(function(){\n\t\t\t\tscheduler._ignore_next_click = false;\n\t\t\t}, 100);\n\t\t}\n\n\t\tdrag_cancel(e);\n\t\tif (scheduler._block_next_stop){\n\t\t\tscheduler._block_next_stop = false;\n\t\t\tif (e.preventDefault)\n\t\t\t\te.preventDefault();\n\t\t\te.cancelBubble = true;\n\t\t\treturn false;\n\t\t}\n\t});\n\n\tscheduler.event(document.body, names[2], drag_cancel);\n};\n\nscheduler._show_global_tip = function(){\n\tscheduler._hide_global_tip();\n\n\tvar toptip = scheduler._global_tip = document.createElement(\"div\");\n\ttoptip.className='dhx_global_tip';\n\n\tscheduler._update_global_tip(1);\n\n\tdocument.body.appendChild(toptip);\n};\nscheduler._update_global_tip = function(init){\n\tvar toptip = scheduler._global_tip;\n\tif (toptip){\n\t\tvar time = \"\";\n\t\tif (scheduler._drag_id && !init){\n\t\t\tvar ev = scheduler.getEvent(scheduler._drag_id);\n\t\t\tif (ev)\n\t\t\t\ttime = \"<div>\" + (ev._timed ? scheduler.templates.event_header(ev.start_date, ev.end_date, ev):scheduler.templates.day_date(ev.start_date, ev.end_date, ev)) + \"</div>\";\n\t\t}\n\n\t\tif (scheduler._drag_mode == \"create\" || scheduler._drag_mode == \"new-size\")\n\t\t\ttoptip.innerHTML = (scheduler.locale.labels.drag_to_create || \"Drag to create\")+time;\n\t\telse\n\t\t\ttoptip.innerHTML = (scheduler.locale.labels.drag_to_move || \"Drag to move\")+time;\n\t}\n};\nscheduler._hide_global_tip = function(){\n\tvar toptip = scheduler._global_tip;\n\tif (toptip && toptip.parentNode){\n\t\ttoptip.parentNode.removeChild(toptip);\n\t\tscheduler._global_tip = 0;\n\t}\n};\n\n\n}","export default function extend(scheduler) {\n\n\nscheduler._addThemeClass = function(){\n\tdocument.documentElement.setAttribute(\"data-scheduler-theme\", scheduler.skin);\n};\n\nscheduler._skin_settings = {\n\tfix_tab_position: [1,0],\n\tuse_select_menu_space: [1,0],\n\twide_form: [1,0],\n\n\thour_size_px: [44,42],\n\tdisplayed_event_color: [\"#ff4a4a\", \"ffc5ab\"],\n\tdisplayed_event_text_color: [\"#ffef80\", \"7e2727\"]\n};\n\nscheduler._skin_xy = {\n\tlightbox_additional_height: [90,50],\n\tnav_height: [59,22],\n\tbar_height: [24,20]\n};\n\n// material skin uses a different box sizing model than other skins, and also requires some post-processing.\n// In order to render events correctly, we need to know which box sizing model is used\n// We can detect it by styles applied, taking into account that styles may be loaded after scheduler is rendered\n\nscheduler._is_material_skin = function(){\n\tif(!scheduler.skin){\n\t\treturn checkIfMaterialSkin();\n\t}else{\n\t\treturn ((scheduler.skin + \"\").indexOf(\"material\") > -1);\n\t}\n};\n\nfunction themeNameFromFile(){\n\tvar links = document.getElementsByTagName(\"link\");\n\tfor (var i = 0; i < links.length; i++) {\n\t\tvar res = links[i].href.match(\"dhtmlxscheduler_([a-z]+).css\");\n\t\tif (res){\n\t\t\treturn res[1];\n\t\t}\n\t}\n}\n\nscheduler._build_skin_info = function() {\n\tmonitorThemeChange();\n\tconst styles = getComputedStyle(this.$container);\n\tconst themeVar = styles.getPropertyValue(\"--dhx-scheduler-theme\");\n\n\tlet isCssVarTheme = !!themeVar;\n\tlet themeName;\n\tlet cssValues = {};\n\tlet oldMaterialTheme = false;\n\n\tif(isCssVarTheme){\n\t\tthemeName = themeVar;\n\t\tfor(let i in scheduler.xy){\n\t\t\tcssValues[i] = styles.getPropertyValue(`--dhx-scheduler-xy-${i}`);\n\t\t}\n\n\t\tcssValues.hour_size_px = styles.getPropertyValue(`--dhx-scheduler-config-hour_size_px`);\n\t\tcssValues.wide_form = styles.getPropertyValue(`--dhx-scheduler-config-form_wide`);\n\n\t}else{\n\t\tthemeName = themeNameFromFile();\n\t\toldMaterialTheme = scheduler._is_material_skin();\n\t}\n\n\n\tscheduler._theme_info = {\n\t\ttheme: themeName,\n\t\tcssVarTheme: isCssVarTheme,\n\t\toldMaterialTheme: oldMaterialTheme,\n\t\tvalues: cssValues\n\t};\n\n\tif(scheduler._theme_info.cssVarTheme){\n\t\tconst themeVariables = this._theme_info.values;\n\t\tfor(let i in scheduler.xy){\n\t\t\tif(!isNaN(parseInt(themeVariables[i]))){\n\t\t\t\tscheduler.xy[i] = parseInt(themeVariables[i]);\n\t\t\t}\n\t\t}\n\t}\n};\n\nvar calculatedMaterial;\nfunction checkIfMaterialSkin(){\n\tif(calculatedMaterial === undefined){\n\t\tvar probe = document.createElement(\"div\");\n\t\tprobe.style.position = \"absolute\";\n\t\tprobe.style.left = \"-9999px\";\n\t\tprobe.style.top = \"-9999px\";\n\t\tprobe.innerHTML = \"<div class='dhx_cal_container'>\" +\n\t\t\t\"<div class='dhx_cal_scale_placeholder'>\" +\n\t\t\t\"</div>\"+\n\t\t\"<div>\";\n\t\tdocument.body.appendChild(probe);\n\t\tvar styles = window.getComputedStyle(probe.querySelector(\".dhx_cal_scale_placeholder\"));\n\t\tvar position = styles.getPropertyValue('position');\n\t\tif(position === \"absolute\"){\n\t\t\t// page has skins for placeholder element from material skin\n\t\t\tcalculatedMaterial = true;\n\t\t}else{\n\t\t\tcalculatedMaterial = false;\n\t\t}\n\n\t\tsetTimeout(function(){\n\t\t\tcalculatedMaterial = null;\n\t\t\tif(probe && probe.parentNode){\n\t\t\t\tprobe.parentNode.removeChild(probe);\n\t\t\t}\n\t\t}, 500);\n\t}\n\treturn calculatedMaterial;\n}\n\nvar cachedBorderBoxValue;\nfunction checkIfBorderBoxStyling(){\n\tif(scheduler._is_material_skin()){\n\t\treturn true;\n\t}else{\n\t\tif(cachedBorderBoxValue === undefined){\n\t\t\tvar probe = document.createElement(\"div\");\n\t\t\tprobe.style.position = \"absolute\";\n\t\t\tprobe.style.left = \"-9999px\";\n\t\t\tprobe.style.top = \"-9999px\";\n\t\t\tprobe.innerHTML = \"<div class='dhx_cal_container'>\" +\n\t\t\t\t\"<div class='dhx_cal_data'>\" +\n\t\t\t\t\t\"<div class='dhx_cal_event'><div class='dhx_body'></div>\"+\n\t\t\t\t\"</div>\"+\n\t\t\t\"<div>\";\n\n\t\t\tdocument.body.appendChild(probe);\n\t\t\tvar styles = window.getComputedStyle(probe.querySelector(\".dhx_body\"));\n\t\t\tvar boxSizing = styles.getPropertyValue('box-sizing');\n\t\t\tdocument.body.removeChild(probe);\n\t\t\tcachedBorderBoxValue = !!(boxSizing === \"border-box\");\n\n\t\t\tif(!cachedBorderBoxValue){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tcachedBorderBoxValue = undefined;\n\t\t\t\t}, 1000);// recalculate in case scheduler initialized before skin is loaded\n\t\t\t}\n\t\t}else{\n\t\t\treturn cachedBorderBoxValue;\n\t\t}\n\t}\n}\n\nfunction refreshAfterLoad(){\n\tif(scheduler._is_material_skin() || scheduler._border_box_events()){\n\t\treturn;\n\t}\n\n\tvar oldStyling = cachedBorderBoxValue;\n\tcachedBorderBoxValue = undefined;\n\tcalculatedMaterial = undefined;\n\tvar newStyling = checkIfBorderBoxStyling();\n\n\t// if box styling model changed - means scheduler was rendered before stylesheet was loaded or parsed inline\n\t// repaint scheduler in order to apply new styles\n\tif(oldStyling !== newStyling && scheduler.$container && scheduler.getState().mode){\n\t\tscheduler.setCurrentView();\n\t}\n}\nscheduler.event(window, 'DOMContentLoaded', refreshAfterLoad);\nscheduler.event(window, 'load', refreshAfterLoad);\n\nscheduler._border_box_events = function(){\n\treturn checkIfBorderBoxStyling();\n};\n\nscheduler._configure = function(col, data, skin){\n\tfor (var key in data)\n\t\tif (typeof col[key] == \"undefined\")\n\t\t\tcol[key] = data[key][skin];\n};\n\nscheduler.setSkin = function(value){\n\tthis.skin = value;\n\tscheduler._addThemeClass();\n\tif(scheduler.$container){\n\t\tthis._skin_init();\n\t\tthis.render();\n\t}\n\t\n\t//\n};\n\nfunction flatSkinHourScale(date){\n\tvar min = date.getMinutes();\n\tmin = min < 10 ? \"0\"+min : min;\n\tvar html = \"<span class='dhx_scale_h'>\"+ date.getHours() +\"</span>\"+\n\t\t\"<span class='dhx_scale_m'>&nbsp;\"+ min +\"</span>\";\n\treturn html;\n}\n\nlet monitorIntervalId = null;\nfunction monitorThemeChange(){\n\tconst container = scheduler.$container;\n\t\n\tclearInterval(monitorIntervalId);\n\tif(container){\n\t\tmonitorIntervalId = setInterval(() => {\n\t\t\tconst csstheme = getComputedStyle(container).getPropertyValue('--dhx-scheduler-theme');\n\t\t\tif(csstheme && csstheme !== scheduler.skin){\n\t\t\t\tscheduler.setSkin(csstheme);\n\t\t\t}\n\n\t\t}, 100);\n\t}\n}\nscheduler.attachEvent(\"onDestroy\", function(){\n\tclearInterval(monitorIntervalId);\n});\n\nscheduler._skin_init = function(){\n\tthis._build_skin_info();\n\n\tif (!this.skin){\n\t\tthis.skin = this._theme_info.theme;\n\t}\n\tscheduler._addThemeClass();\n\tif (scheduler.skin === \"flat\"){\n\t\t// scheduler.xy.scale_height = 35;\n\t\tscheduler.templates.hour_scale = flatSkinHourScale;\n\t}else if (scheduler.templates.hour_scale === flatSkinHourScale){\n\t\tscheduler.templates.hour_scale = scheduler.date.date_to_str(scheduler.config.hour_date);\n\t}\n\n\n\n\t//scheduler._lightbox_template=\"<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span><div class='dhx_close_icon'></div></div><div class='dhx_cal_larea'></div>\";\n\tscheduler.attachEvent(\"onTemplatesReady\", function() {\n\n\t\tvar date_to_str = scheduler.date.date_to_str(\"%d\");\n\t\tif(!scheduler.templates._old_month_day){\n\t\t\tscheduler.templates._old_month_day = scheduler.templates.month_day;\n\t\t}\n\t\tvar old_month_day = scheduler.templates._old_month_day;\n\t\tscheduler.templates.month_day = function(date) {\n\t\t\tif (this._mode == \"month\") {\n\t\t\t\tvar label = date_to_str(date);\n\t\t\t\tif (date.getDate() == 1) {\n\t\t\t\t\tlabel = scheduler.locale.date.month_full[date.getMonth()] + \" \" + label;\n\t\t\t\t}\n\t\t\t\tif (+date == +scheduler.date.date_part(this._currentDate())) {\n\t\t\t\t\tlabel = scheduler.locale.labels.dhx_cal_today_button + \" \" + label;\n\t\t\t\t}\n\t\t\t\treturn label;\n\t\t\t} else {\n\t\t\t\treturn old_month_day.call(this, date);\n\t\t\t}\n\t\t};\n\n\t\t// tab classes\n\t\tif(scheduler.config.fix_tab_position){\n\t\t\tconst tabs = scheduler._els[\"dhx_cal_navline\"][0].querySelectorAll('[data-tab]');\n\t\t\ttabs.forEach((tab) => {\n\t\t\t\tconst view = tab.getAttribute(\"data-tab\") || tab.getAttribute(\"name\");\n\n\t\t\t\tswitch (view) {\n\t\t\t\t\tcase \"day\":\n\t\t\t\t\tcase \"day_tab\":\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_first\");\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_segmented\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"week\":\n\t\t\t\t\tcase \"week_tab\":\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_segmented\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"month\":\n\t\t\t\t\tcase \"month_tab\":\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_last\");\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_segmented\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\ttab.classList.add(\"dhx_cal_tab_standalone\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treorderTabs(scheduler._els[\"dhx_cal_navline\"][0]);\n\n\t\t}\n\t}, {once: true});\n\n\tfunction reorderTabs(container) {\n\t\t// segmented tabs should go first\n\n\t\tif(scheduler.config.header){\n\t\t\treturn;\n\t\t\t// don't reorder tabs if header is defined via config\n\t\t}\n\t\tconst tabs = Array.from(container.querySelectorAll('.dhx_cal_tab'));\n\t\n\t\t// segmented tabs\n\t\tconst order = ['day', 'week', 'month'];\n\t\n\t\tconst specialTabs = order.map(tabName => \n\t\t\ttabs.find(tab => tab.getAttribute('data-tab') === tabName)\n\t\t).filter(tab => tab !== undefined);\n\t\n\t\tlet firstTab = tabs.length > 0 ? tabs[0] : null;\n\n\t\tspecialTabs.reverse().forEach(tab => {\n\t\t\tcontainer.insertBefore(tab, firstTab);\n\t\t\tfirstTab = tab;\n\t\t});\n\t}\n\n\t// scheduler._skin_init = function(){\n\t// \tthis._build_skin_info();\n\t// \tthis.skin = this._theme_info.theme;\n\t// };\n};\n\n\n\n}","export default function DataProcessorEvents(scheduler, dp){\n\tthis.$scheduler = scheduler;\n\tthis.$dp = dp;\n\tthis._dataProcessorHandlers = [];\n\n\tthis.attach = function () {\n\t\tvar dp = this.$dp;\n\t\tvar scheduler = this.$scheduler;\n\n\t\tthis._dataProcessorHandlers.push(scheduler.attachEvent(\"onEventAdded\", function(id) {\n\t\t\tif (!this._loading && this._validId(id))\n\t\t\tdp.setUpdated(id,true,\"inserted\");\n\t\t}));\n\n\t\tthis._dataProcessorHandlers.push(scheduler.attachEvent(\"onConfirmedBeforeEventDelete\", function(id) {\n\t\t\tif (!this._validId(id)) return;\n\t\t\tvar z=dp.getState(id);\n\n\t\t\tif (z==\"inserted\" || this._new_event) { dp.setUpdated(id,false); return true; }\n\t\t\tif (z==\"deleted\") return false;\n\t\t\tif (z==\"true_deleted\") return true;\n\n\t\t\tdp.setUpdated(id,true,\"deleted\");\n\t\t\treturn false;\n\t\t}));\n\n\t\tthis._dataProcessorHandlers.push(scheduler.attachEvent(\"onEventChanged\", function(id) { \n\t\t\tif (!this._loading && this._validId(id))\n\t\t\tdp.setUpdated(id,true,\"updated\");\n\t\t}));\n\n\t\tthis._dataProcessorHandlers.push(scheduler.attachEvent(\"onClearAll\", function() { \n\t\t\t// clear dataprocessor state when scheduler is reset\n\t\t\tdp._in_progress={};\n\t\t\tdp._invalid={};\n\t\t\tdp.updatedRows = [];\n\t\t\tdp._waitMode = 0;\n\t\t}));\n\n\t\tdp.attachEvent(\"insertCallback\", scheduler._update_callback);\n\t\tdp.attachEvent(\"updateCallback\", scheduler._update_callback);\n\t\tdp.attachEvent(\"deleteCallback\", function(upd, id) {\n\t\t\tif (scheduler.getEvent(id)){\n\t\t\t\tscheduler.setUserData(id, this.action_param, \"true_deleted\");\n\t\t\t\tscheduler.deleteEvent(id);\n\t\t\t} else if (scheduler._add_rec_marker)\n\t\t\t\tscheduler._update_callback(upd, id);\n\t\t});\n\t};\n\n\tthis.detach = function () {\n\t\tfor (var key in this._dataProcessorHandlers) {\n\t\t\tvar handler = this._dataProcessorHandlers[key];\n\t\t\tthis.$scheduler.detachEvent(handler);\n\t\t}\n\t\tthis._dataProcessorHandlers = [];\n\t};\n}\n\nexport function extendScheduler(scheduler, dp){\n\tscheduler._validId=function(id){\n\t\tif(this._is_virtual_event){\n\t\t\treturn !this._is_virtual_event(id);\n\t\t}\n\t\treturn true;\n\t};\n\tscheduler.setUserData=function(id,name,value){\n\t\tif (id){\n\t\t\tvar ev = this.getEvent(id);\n\t\t\tif(ev) ev[name]=value;\n\t\t}else{\n\t\t\tthis._userdata[name]=value;\n\t\t}\n\t};\n\tscheduler.getUserData=function(id,name){\n\t\tif (id){\n\t\t\tvar ev = this.getEvent(id);\n\t\t\tif(ev)\n\t\t\t\treturn ev[name];\n\t\t\telse\n\t\t\t\treturn null;\n\t\t}else{\n\t\t\treturn this._userdata[name];\n\t\t}\n\t};\n\tscheduler._set_event_text_style=function(id,style){\n\t\tif(!scheduler.getEvent(id))\n\t\t\treturn;\n\t\tthis.for_rendered(id,function(r){\n\t\t\tr.style.cssText+=\";\"+style;\n\t\t});\n\t\tvar ev = this.getEvent(id);\n\t\tev[\"_text_style\"]=style;\n\t\tthis.event_updated(ev);\n\t};\n\tscheduler._update_callback = function(upd,id){\n\t\tvar data = scheduler._xmlNodeToJSON(upd.firstChild);\n\t\t//fix for updates of recurring events\n\t\tif (data.rec_type == \"none\") data.rec_pattern = \"none\";\n\t\tdata.text = data.text||data._tagvalue;\n\t\tdata.start_date = scheduler._helpers.parseDate(data.start_date);\n\t\tdata.end_date = scheduler._helpers.parseDate(data.end_date);\n\t\tscheduler.addEvent(data);\n\t\tif (scheduler._add_rec_marker)\n\t\t\tscheduler.setCurrentView();\n\t};\n\tscheduler._dp_change_event_id = function(id, new_id){\n\t\tif(!scheduler.getEvent(id))\n\t\t\treturn;\n\t\tscheduler.changeEventId(id, new_id);\n\t};\n\tscheduler._dp_hook_delete = function(id, new_id){\n\t\tif(!scheduler.getEvent(id))\n\t\t\treturn;\n\n\t\tif(new_id && id != new_id){\n\t\t\tif(this.getUserData(id, dp.action_param) == \"true_deleted\")\n\t\t\t\tthis.setUserData(id, dp.action_param, \"updated\");\n\n\t\t\tthis.changeEventId(id, new_id);\n\t\t}\n\t\treturn this.deleteEvent(new_id, true);\n\t};\n\n\tscheduler.setDp = function() {\n\t\tthis._dp = dp;\n\t};\n\tscheduler.setDp();\n}","import DataProcessorEvents from \"./dataprocessor_hooks\";\nimport { extendScheduler } from \"./dataprocessor_hooks\";\nimport eventable from \"../../utils/eventable\";\nimport global from \"../../global\";\n\n/**\n *\t@desc: constructor, data processor object\n *\t@param: serverProcessorURL - url used for update\n *\t@type: public\n */\nexport function DataProcessor(serverProcessorURL){\n\tthis.serverProcessor = serverProcessorURL;\n\tthis.action_param = \"!nativeeditor_status\";\n\n\tthis.object = null;\n\tthis.updatedRows = []; // ids of updated rows\n\n\tthis.autoUpdate = true;\n\tthis.updateMode = \"cell\";\n\tthis._tMode = \"GET\";\n\tthis._headers = null;\n\tthis._payload = null;\n\tthis.post_delim = \"_\";\n\n\tthis._waitMode = 0;\n\tthis._in_progress = {};\n\tthis._invalid = {};\n\tthis.messages = [];\n\n\tthis.styles = {\n\t\tupdated: \"font-weight:bold;\",\n\t\tinserted: \"font-weight:bold;\",\n\t\tdeleted: \"text-decoration : line-through;\",\n\t\tinvalid: \"background-color:FFE0E0;\",\n\t\tinvalid_cell: \"border-bottom:2px solid red;\",\n\t\terror: \"color:red;\",\n\t\tclear: \"font-weight:normal;text-decoration:none;\"\n\t};\n\tthis.enableUTFencoding(true);\n\teventable(this); // TODO: need to update\n\n\treturn this;\n}\nDataProcessor.prototype = {\n\tsetTransactionMode: function (mode, total) {\n\t\tif (typeof mode == \"object\") {\n\t\t\tthis._tMode = mode.mode || this._tMode;\n\n\t\t\tif (mode.headers !== undefined) {\n\t\t\t\tthis._headers = mode.headers;\n\t\t\t}\n\n\t\t\tif (mode.payload !== undefined) {\n\t\t\t\tthis._payload = mode.payload;\n\t\t\t}\n\t\t\tthis._tSend = !!total;\n\t\t} else {\n\t\t\tthis._tMode = mode;\n\t\t\tthis._tSend = total;\n\t\t}\n\n\t\tif (this._tMode == \"REST\") {\n\t\t\tthis._tSend = false;\n\t\t\tthis._endnm = true;\n\t\t}\n\n\t\tif (this._tMode === \"JSON\" || this._tMode === \"REST-JSON\") {\n\t\t\tthis._tSend = false;\n\t\t\tthis._endnm = true;\n\t\t\tthis._serializeAsJson = true;\n\t\t\tthis._headers = this._headers || {};\n\t\t\tthis._headers[\"Content-Type\"] = \"application/json\";\n\t\t}else{\n\t\t\tif(this._headers && !this._headers[\"Content-Type\"]){\n\t\t\t\tthis._headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\t\t\t}\n\t\t}\n\n\t\tif (this._tMode === \"CUSTOM\") {\n\t\t\tthis._tSend = false;\n\t\t\tthis._endnm = true;\n\t\t\tthis._router = mode.router;\n\t\t}\n\t},\n\tescape: function (data) {\n\t\tif (this._utf)\n\t\t\treturn encodeURIComponent(data);\n\t\telse\n\t\t\treturn escape(data);\n\t},\n\t/**\n\t *\t@desc: allows to set escaping mode\n\t *\t@param: true - utf based escaping, simple - use current page encoding\n\t *\t@type: public\n\t */\n\tenableUTFencoding: function (mode) {\n\t\tthis._utf = !!mode;\n\t},\n\t/**\n\t *\t@desc: allows to define, which column may trigger update\n\t *\t@param: val - array or list of true/false values\n\t *\t@type: public\n\t */\n\tsetDataColumns: function (val) {\n\t\tthis._columns = (typeof val == \"string\") ? val.split(\",\") : val;\n\t},\n\t/**\n\t *\t@desc: get state of updating\n\t *\t@returns:   true - all in sync with server, false - some items not updated yet.\n\t *\t@type: public\n\t */\n\tgetSyncState: function () {\n\t\treturn !this.updatedRows.length;\n\t},\n\t/**\n\t *\t@desc: enable/disable named field for data syncing, will use column ids for grid\n\t *\t@param:   mode - true/false\n\t *\t@type: public\n\t */\n\tenableDataNames: function (mode) {\n\t\tthis._endnm = !!mode;\n\t},\n\t/**\n\t *\t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\n\t *\t@param:   mode - true/false\n\t *\t@type: public\n\t */\n\tenablePartialDataSend: function (mode) {\n\t\tthis._changed = !!mode;\n\t},\n\t/**\n\t *\t@desc: set if rows should be send to server automatically\n\t *\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\n\t *\t@type: public\n\t */\n\tsetUpdateMode: function (mode, dnd) {\n\t\tthis.autoUpdate = (mode == \"cell\");\n\t\tthis.updateMode = mode;\n\t\tthis.dnd = dnd;\n\t},\n\tignore: function (code, master) {\n\t\tthis._silent_mode = true;\n\t\tcode.call(master || window);\n\t\tthis._silent_mode = false;\n\t},\n\t/**\n\t *\t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\n\t *\t@param: rowId - id of row to set update-status for\n\t *\t@param: state - true for \"updated\", false for \"not updated\"\n\t *\t@param: mode - update mode name\n\t *\t@type: public\n\t */\n\tsetUpdated: function (rowId, state, mode) {\n\t\tif (this._silent_mode) return;\n\t\tvar ind = this.findRow(rowId);\n\n\t\tmode = mode || \"updated\";\n\t\tvar existing = this.$scheduler.getUserData(rowId, this.action_param);\n\t\tif (existing && mode == \"updated\") mode = existing;\n\t\tif (state) {\n\t\t\tthis.set_invalid(rowId, false); //clear previous error flag\n\t\t\tthis.updatedRows[ind] = rowId;\n\t\t\tthis.$scheduler.setUserData(rowId, this.action_param, mode);\n\t\t\tif (this._in_progress[rowId])\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\n\t\t} else {\n\t\t\tif (!this.is_invalid(rowId)) {\n\t\t\t\tthis.updatedRows.splice(ind, 1);\n\t\t\t\tthis.$scheduler.setUserData(rowId, this.action_param, \"\");\n\t\t\t}\n\t\t}\n\n\t\tthis.markRow(rowId, state, mode);\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\n\t},\n\n\tmarkRow: function (id, state, mode) {\n\t\tvar str = \"\";\n\t\tvar invalid = this.is_invalid(id);\n\t\tif (invalid) {\n\t\t\tstr = this.styles[invalid];\n\t\t\tstate = true;\n\t\t}\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\n\t\t\t//default logic\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + str;\n\n\t\t\tthis.$scheduler[this._methods[0]](id, str);\n\n\t\t\tif (invalid && invalid.details) {\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\n\t\t\t\tfor (var i = 0; i < invalid.details.length; i++)\n\t\t\t\t\tif (invalid.details[i])\n\t\t\t\t\t\tthis.$scheduler[this._methods[1]](id, i, str);\n\t\t\t}\n\t\t}\n\t},\n\tgetActionByState: function(state) {\n\t\tif (state === \"inserted\") {\n\t\t\treturn \"create\";\n\t\t}\n\t\tif (state === \"updated\") {\n\t\t\treturn \"update\";\n\t\t}\n\t\tif (state === \"deleted\") {\n\t\t\treturn \"delete\";\n\t\t}\n\t\treturn \"update\";\n\t},\n\n\tgetState: function (id) {\n\t\treturn this.$scheduler.getUserData(id, this.action_param);\n\t},\n\tis_invalid: function (id) {\n\t\treturn this._invalid[id];\n\t},\n\tset_invalid: function (id, mode, details) {\n\t\tif (details) mode = {\n\t\t\tvalue: mode, details: details, toString: function () {\n\t\t\t\treturn this.value.toString();\n\t\t\t}\n\t\t};\n\t\tthis._invalid[id] = mode;\n\t},\n\t/**\n\t *\t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\n\t *\t@param: rowId - id of row to set update-status for\n\t *\t@type: public\n\t */\n\tcheckBeforeUpdate: function (rowId) {\n\t\treturn true;\n\t},\n\t/**\n\t *\t@desc: send row(s) values to server\n\t *\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\n\t *\t@type: public\n\t */\n\tsendData: function (rowId) {\n\t\tif (this.$scheduler.editStop) this.$scheduler.editStop();\n\n\t\tif (typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\n\t\tif (this._in_progress[rowId]) return false;\n\n\t\tthis.messages = [];\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) return false;\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\n\t},\n\t_beforeSendData: function (data, rowId) {\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) return false;\n\t\tthis._sendData(data, rowId);\n\t},\n\tserialize: function (data, id) {\n\t\tif (this._serializeAsJson) {\n\t\t\treturn  this._serializeAsJSON(data);\n\t\t}\n\n\t\tif (typeof data == \"string\")\n\t\t\treturn data;\n\t\tif (typeof id != \"undefined\")\n\t\t\treturn this.serialize_one(data, \"\");\n\t\telse {\n\t\t\tvar stack = [];\n\t\t\tvar keys = [];\n\t\t\tfor (var key in data)\n\t\t\t\tif (data.hasOwnProperty(key)) {\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this.post_delim));\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t}\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\n\t\t\tif (this.$scheduler.security_key)\n\t\t\t\tstack.push(\"dhx_security=\" + (this.$scheduler.security_key));\n\t\t\treturn stack.join(\"&\");\n\t\t}\n\t},\n\tserialize_one: function (data, pref) {\n\t\tif (typeof data == \"string\")\n\t\t\treturn data;\n\t\tvar stack = [];\n\t\tvar serialized = \"\";\n\t\tfor (var key in data)\n\t\t\tif (data.hasOwnProperty(key)) {\n\t\t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\n\t\t\t\tif (typeof data[key] === \"string\" || typeof data[key] === \"number\") {\n\t\t\t\t\tserialized = data[key];\n\t\t\t\t} else {\n\t\t\t\t\tserialized = JSON.stringify(data[key]);\n\t\t\t\t}\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(serialized));\n\t\t\t}\n\t\treturn stack.join(\"&\");\n\t},\n\t_applyPayload: function (url) {\n\t\tvar ajax = this.$scheduler.ajax;\n\t\tif (this._payload)\n\t\t\tfor (var key in this._payload)\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\n\t\treturn url;\n\t},\n\t_sendData: function (dataToSend, rowId) {\n\t\tif (!dataToSend) {\n\t\t\treturn; // nothing to send\n\t\t}\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), dataToSend] : [null, null, dataToSend])) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (rowId) {\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\n\t\t}\n\n\t\tvar self = this;\n\t\tvar ajax = this.$scheduler.ajax;\n\n\t\tif (this._tMode === \"CUSTOM\") {\n\t\t\tvar state = this.getState(rowId);\n\t\t\tvar action = this.getActionByState(state);\n\t\t\tdelete dataToSend[this.action_param]; // do not send !nativeeditor_status parameter in router mode GS-2868\n\t\t\tvar _onResolvedCreateUpdate = function (tag) {\n\t\t\t\tvar resultState = state;\n\t\t\t\tif(tag && tag.responseText && tag.setRequestHeader){\n\t\t\t\t\tif(tag.status !== 200){\n\t\t\t\t\t\tresultState = \"error\";\n\t\t\t\t\t}\n\t\t\t\t\ttry{\n\t\t\t\t\t\ttag = JSON.parse(tag.responseText);\n\t\t\t\t\t} catch (e){}\n\t\t\t\t}\n\n\t\t\t\tresultState = resultState || \"updated\";\n\t\t\t\tvar sid = rowId;\n\t\t\t\tvar tid = rowId;\n\n\t\t\t\tif (tag) {\n\t\t\t\t\tresultState = tag.action || resultState;\n\t\t\t\t\tsid = tag.sid || sid;\n\t\t\t\t\ttid = tag.id || tag.tid || tid;\n\t\t\t\t}\n\t\t\t\tself.afterUpdateCallback(sid, tid, resultState, tag);\n\t\t\t};\n\n\t\t\tconst routerMode = \"event\";\n\t\t\tvar actionPromise;\n\t\t\tif (this._router instanceof Function) {\n\t\t\t\tactionPromise = this._router(routerMode, action, dataToSend, rowId);\n\t\t\t} else {\n\t\t\t\tswitch (state) {\n\t\t\t\t\tcase \"inserted\":\n\t\t\t\t\t\tactionPromise = this._router[routerMode].create(dataToSend);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"deleted\":\n\t\t\t\t\t\tactionPromise = this._router[routerMode].delete(rowId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tactionPromise = this._router[routerMode].update(dataToSend, rowId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(actionPromise){\n\t\t\t\t// neither promise nor {tid: newId} response object\n\t\t\t\tif(!actionPromise.then &&\n\t\t\t\t\t(actionPromise.id === undefined && actionPromise.tid === undefined && actionPromise.action === undefined)){\n\t\t\t\t\tthrow new Error(\"Incorrect router return value. A Promise or a response object is expected\");\n\t\t\t\t}\n\n\t\t\t\tif(actionPromise.then){\n\t\t\t\t\tactionPromise.then(_onResolvedCreateUpdate).catch(function(error) {\n\t\t\t\t\t\tif(error && error.action){\n\t\t\t\t\t\t\t_onResolvedCreateUpdate(error);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t_onResolvedCreateUpdate({ action: \"error\", value: error});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\t// custom method may return a response object in case of sync action\n\t\t\t\t\t_onResolvedCreateUpdate(actionPromise);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t_onResolvedCreateUpdate(null);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tvar queryParams = {\n\t\t\tcallback: function(xml) {\n\t\t\t\tvar ids = [];\n\n\t\t\t\tif (rowId) {\n\t\t\t\t\tids.push(rowId);\n\t\t\t\t} else if (dataToSend) {\n\t\t\t\t\tfor (var key in dataToSend) {\n\t\t\t\t\t\tids.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self.afterUpdate(self, xml, ids);\n\t\t\t},\n\t\t\theaders: self._headers\n\t\t};\n\n\t\tvar urlParams = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + this.$scheduler.getUserData(0, \"version\")].join(\"&\")) : \"\");\n\t\tvar url = this._applyPayload(urlParams);\n\t\tvar data;\n\n\t\tswitch (this._tMode) {\n\t\t\tcase \"GET\":\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\n\t\t\t\tqueryParams.url = url + ajax.urlSeparator(url) + this.serialize(data, rowId);\n\t\t\t\tqueryParams.method = \"GET\";\n\t\t\t\tbreak;\n\t\t\tcase \"POST\":\n\t\t\t\tdata = this._cleanupArgumentsBeforeSend(dataToSend);\n\t\t\t\tqueryParams.url = url;\n\t\t\t\tqueryParams.method = \"POST\";\n\t\t\t\tqueryParams.data = this.serialize(data, rowId);\n\t\t\t\tbreak;\n\t\t\tcase \"JSON\":\n\t\t\t\tdata = {};\n\t\t\t\tvar preprocessedData = this._cleanupItemBeforeSend(dataToSend);\n\t\t\t\tfor (var key in preprocessedData) {\n\t\t\t\t\tif (key === this.action_param || key === \"id\" || key === \"gr_id\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tdata[key] = preprocessedData[key];\n\t\t\t\t}\n\n\t\t\t\tqueryParams.url = url;\n\t\t\t\tqueryParams.method = \"POST\";\n\t\t\t\tqueryParams.data = JSON.stringify({\n\t\t\t\t\tid: rowId,\n\t\t\t\t\taction: dataToSend[this.action_param],\n\t\t\t\t\tdata: data\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"REST\":\n\t\t\tcase \"REST-JSON\":\n\t\t\t\turl = urlParams.replace(/(&|\\?)editing=true/, \"\");\n\t\t\t\tdata = \"\";\n\n\t\t\t\tswitch (this.getState(rowId)) {\n\t\t\t\t\tcase \"inserted\":\n\t\t\t\t\t\tqueryParams.method = \"POST\";\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"deleted\":\n\t\t\t\t\t\tqueryParams.method = \"DELETE\";\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tqueryParams.method = \"PUT\";\n\t\t\t\t\t\tqueryParams.data = this.serialize(dataToSend, rowId);\n\t\t\t\t\t\turl = url + (url.slice(-1) === \"/\" ? \"\" : \"/\") + rowId;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tqueryParams.url = this._applyPayload(url);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis._waitMode++;\n\t\treturn ajax.query(queryParams);\n\t},\n\tsendAllData: function () {\n\t\tif (!this.updatedRows.length || this.updateMode === \"off\") { // FIXME: need to leave checking 'this.updateMode === \"off\"'?\n\t\t\treturn;\n\t\t}\n\n\t\tthis.messages = [];\n\t\tvar valid = true;\n\n\t\tthis._forEachUpdatedRow(function(rowId) {\n\t\t\tvalid = valid && this.checkBeforeUpdate(rowId);\n\t\t});\n\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this._tSend) {\n\t\t\tthis._sendData(this._getAllData());\n\t\t} else {\n\t\t\tthis._forEachUpdatedRow(function(rowId) {\n\t\t\t\tif (!this._in_progress[rowId]) {\n\t\t\t\t\tif (this.is_invalid(rowId)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t_getAllData: function (rowId) {\n\t\tvar out = {};\n\t\tvar has_one = false;\n\t\tthis._forEachUpdatedRow(function(id) {\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar row = this._getRowData(id);\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tout[id] = row;\n\t\t\thas_one = true;\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\n\t\t});\n\t\treturn has_one ? out : null;\n\t},\n\n\tfindRow: function (pattern) {\n\t\tvar i = 0;\n\t\tfor (i = 0; i < this.updatedRows.length; i++)\n\t\t\tif (pattern == this.updatedRows[i]) break;\n\t\treturn i;\n\t},\n\n\t/**\n\t *\t@desc: define custom actions\n\t *\t@param: name - name of action, same as value of action attribute\n\t *\t@param: handler - custom function, which receives a XMl response content for action\n\t *\t@type: private\n\t */\n\tdefineAction: function (name, handler) {\n\t\tif (!this._uActions) this._uActions = {};\n\t\tthis._uActions[name] = handler;\n\t},\n\n\t/**\n\t *\t @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\n\t *\t @param: sid - id of item before update\n\t *\t @param: tid - id of item after up0ate\n\t *\t @param: action - action name\n\t *\t @type: public\n\t *\t @topic: 0\n\t */\n\tafterUpdateCallback: function (sid, tid, action, btag) {\n\t\tif(!this.$scheduler){\n\t\t\t// destructor has been called before the callback\n\t\t\treturn;\n\t\t}\n\n\t\tvar marker = sid;\n\t\tvar correct = (action !== \"error\" && action !== \"invalid\");\n\t\tif (!correct) {\n\t\t\tthis.set_invalid(sid, action);\n\t\t}\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag))) {\n\t\t\treturn (delete this._in_progress[marker]);\n\t\t}\n\n\t\tif (this._in_progress[marker] !== \"wait\") {\n\t\t\tthis.setUpdated(sid, false);\n\t\t}\n\n\t\tvar originalSid = sid;\n\n\t\tswitch (action) {\n\t\t\tcase \"inserted\":\n\t\t\tcase \"insert\":\n\t\t\t\tif (tid != sid) {\n\t\t\t\t\tthis.setUpdated(sid, false);\n\t\t\t\t\tthis.$scheduler[this._methods[2]](sid, tid);\n\t\t\t\t\tsid = tid;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"delete\":\n\t\t\tcase \"deleted\":\n\t\t\t\tthis.$scheduler.setUserData(sid, this.action_param, \"true_deleted\");\n\t\t\t\tthis.$scheduler[this._methods[3]](sid, tid);\n\t\t\t\tdelete this._in_progress[marker];\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\n\t\t}\n\n\t\tif (this._in_progress[marker] !== \"wait\") {\n\t\t\tif (correct) {\n\t\t\t\tthis.$scheduler.setUserData(sid, this.action_param, \"\");\n\t\t\t}\n\t\t\tdelete this._in_progress[marker];\n\t\t} else {\n\t\t\tdelete this._in_progress[marker];\n\t\t\tthis.setUpdated(tid, true, this.$scheduler.getUserData(sid, this.action_param));\n\t\t}\n\n\t\tthis.callEvent(\"onAfterUpdate\", [originalSid, action, tid, btag]);\n\t},\n\n\t_errorResponse: function (xml, id){\n\t\tif(this.$scheduler && this.$scheduler.callEvent){\n\t\t\tthis.$scheduler.callEvent(\"onSaveError\", [id, xml.xmlDoc]);\n\t\t}\n\t\treturn this.cleanUpdate(id);\n\t},\n\n\t_setDefaultTransactionMode: function () {\n\t\tif (this.serverProcessor) {\n\t\t\tthis.setTransactionMode(\"POST\", true);\n\t\t\tthis.serverProcessor += (this.serverProcessor.indexOf(\"?\") !== -1 ? \"&\" : \"?\") + \"editing=true\";\n\t\t\tthis._serverProcessor = this.serverProcessor;\n\t\t}\n\t},\n\t\n\t/**\n\t *\t@desc: response from server\n\t *\t@param: xml - XMLLoader object with response XML\n\t *\t@type: private\n\t */\n\tafterUpdate: function (that, xml, id) {\n\t\tvar ajax = this.$scheduler.ajax;\n\n\t\tif (xml.xmlDoc.status !== 200){\n\t\t\tthis._errorResponse(xml, id);\n\t\t\treturn;\n\t\t}\n\n\t\t// try to use json first\n\t\tvar tag;\n\t\ttry {\n\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\n\t\t} catch (e) {\n\t\t\t// empty response also can be processed by json handler\n\t\t\tif (!xml.xmlDoc.responseText.length) {\n\t\t\t\ttag = {};\n\t\t\t}\n\t\t}\n\n\t\tif (tag) {\n\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\n\t\t\tvar sid = tag.sid || id[0];\n\t\t\tvar tid = tag.tid || id[0];\n\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\n\t\t\tthat.finalizeUpdate();\n\t\t\treturn;\n\t\t}\n\n\t\t// xml response\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); // fix incorrect content type in IE\n\t\tif (!top) {\n\t\t\treturn this._errorResponse(xml, id);\n\t\t}\n\t\tvar atag = ajax.xpath(\"//data/action\", top);\n\t\tif (!atag.length) {\n\t\t\treturn this._errorResponse(xml, id);\n\t\t}\n\n\t\tfor (var i = 0; i < atag.length; i++) {\n\t\t\tvar btag = atag[i];\n\t\t\tvar action = btag.getAttribute(\"type\");\n\t\t\tvar sid = btag.getAttribute(\"sid\");\n\t\t\tvar tid = btag.getAttribute(\"tid\");\n\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag);\n\t\t}\n\t\tthat.finalizeUpdate();\n\t},\n\tcleanUpdate: function (id) {\n\t\tif (id)\n\t\t\tfor (var i = 0; i < id.length; i++)\n\t\t\t\tdelete this._in_progress[id[i]];\n\t},\n\tfinalizeUpdate: function () {\n\t\tif (this._waitMode) this._waitMode--;\n\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\n\t\tif (!this.updatedRows.length)\n\t\t\tthis.callEvent(\"onFullSync\", []);\n\t},\n\n\t/**\n\t *\t@desc: initializes data-processor\n\t *\t@param: scheduler - dhtmlxScheduler object to attach this data-processor to\n\t *\t@type: public\n\t */\n\tinit: function (scheduler) {\n\t\tif (this._initialized) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$scheduler = scheduler;\n\t\tif (this.$scheduler._dp_init) {\n\t\t\tthis.$scheduler._dp_init(this);\n\t\t}\n\n\t\tthis._setDefaultTransactionMode();\n\n\t\tthis._methods=this._methods||[\"_set_event_text_style\",\"\",\"_dp_change_event_id\",\"_dp_hook_delete\"];\n\t\textendScheduler(this.$scheduler, this);\n\t\tvar dataProcessorEvents = new DataProcessorEvents(this.$scheduler, this);\n\t\tdataProcessorEvents.attach();\n\t\tthis.attachEvent(\"onDestroy\", function() {\n\t\t\tdelete this._getRowData;\n\n\t\t\tdelete this.$scheduler._dp;\n\t\t\tdelete this.$scheduler._dataprocessor;\n\t\t\tdelete this.$scheduler._set_event_text_style;\n\t\t\tdelete this.$scheduler._dp_change_event_id;\n\t\t\tdelete this.$scheduler._dp_hook_delete;\n\t\t\tdelete this.$scheduler;\n\t\t\tdataProcessorEvents.detach();\n\t\t});\n\t\tthis.$scheduler.callEvent(\"onDataProcessorReady\", [this]);\n\t\tthis._initialized = true;\n\n\t\tscheduler._dataprocessor=this;\n\t},\n\n\tsetOnAfterUpdate: function (ev) {\n\t\tthis.attachEvent(\"onAfterUpdate\", ev);\n\t},\n\tsetOnBeforeUpdateHandler: function (func) {\n\t\tthis.attachEvent(\"onBeforeDataSending\", func);\n\t},\n\n\t/* starts autoupdate mode\n\t\t@param interval time interval for sending update requests\n\t*/\n\tsetAutoUpdate: function (interval, user) {\n\t\tinterval = interval || 2000;\n\n\t\tthis._user = user || (new Date()).valueOf();\n\t\tthis._need_update = false;\n\t\t//this._loader = null;\n\t\tthis._update_busy = false;\n\n\t\tthis.attachEvent(\"onAfterUpdate\", function (sid, action, tid, xml_node) {\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\n\t\t});\n\t\tthis.attachEvent(\"onFullSync\", function () {\n\t\t\tthis.fullSync();\n\t\t});\n\n\t\tvar self = this;\n\t\tlet intervalId = global.setInterval(function () {\n\t\t\tself.loadUpdate();\n\t\t}, interval);\n\t\tthis.attachEvent(\"onDestroy\", function(){\n\t\t\tclearInterval(intervalId);\n\t\t});\n\t},\n\n\t/* process updating request answer\n\t\tif status == collision version is deprecated\n\t\tset flag for autoupdating immediately\n\t*/\n\tafterAutoUpdate: function (sid, action, tid, xml_node) {\n\t\tif (action == 'collision') {\n\t\t\tthis._need_update = true;\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/* callback function for onFillSync event\n\t\tcall update function if it's need\n\t*/\n\tfullSync: function () {\n\t\tif (this._need_update) {\n\t\t\tthis._need_update = false;\n\t\t\tthis.loadUpdate();\n\t\t}\n\t\treturn true;\n\t},\n\n\t/* sends query to the server and call callback function\n\t*/\n\tgetUpdates: function (url, callback) {\n\t\tvar ajax = this.$scheduler.ajax;\n\t\tif (this._update_busy)\n\t\t\treturn false;\n\t\telse\n\t\t\tthis._update_busy = true;\n\n\t\tajax.get(url, callback);\n\t},\n\n\t/* returns xml node value\n\t\t@param node\n\t\t\txml node\n\t*/\n\t_getXmlNodeValue: function(node) {\n\t\tif (node.firstChild) {\n\t\t\treturn node.firstChild.nodeValue;\n\t\t}\n\t\treturn \"\";\n\t},\n\n\t/* loads updates and processes them\n\t*/\n\tloadUpdate: function () {\n\t\tvar self = this;\n\t\tvar ajax = this.$scheduler.ajax;\n\t\tvar version = this.$scheduler.getUserData(0, \"version\");\n\t\tvar url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\n\t\turl = url.replace(\"editing=true&\", \"\");\n\t\tthis.getUpdates(url, function (xml) {\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\n\t\t\tself.$scheduler.setUserData(0, \"version\", self._getXmlNodeValue(vers[0]));\n\n\t\t\tvar updates = ajax.xpath(\"//update\", xml);\n\t\t\tif (updates.length) {\n\t\t\t\tself._silent_mode = true;\n\n\t\t\t\tfor (var i = 0; i < updates.length; i++) {\n\t\t\t\t\tvar status = updates[i].getAttribute(\"status\");\n\t\t\t\t\tvar id = updates[i].getAttribute(\"id\");\n\t\t\t\t\tvar parent = updates[i].getAttribute(\"parent\");\n\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\tcase \"inserted\":\n\t\t\t\t\t\t\tthis.callEvent(\"insertCallback\", [updates[i], id, parent]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"updated\":\n\t\t\t\t\t\t\tthis.callEvent(\"updateCallback\", [updates[i], id, parent]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"deleted\":\n\t\t\t\t\t\t\tthis.callEvent(\"deleteCallback\", [updates[i], id, parent]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself._silent_mode = false;\n\t\t\t}\n\t\t\tself._update_busy = false;\n\t\t\tself = null;\n\t\t});\n\t},\n\n\tdestructor: function() {\n\t\tthis.callEvent(\"onDestroy\", []);\n\t\tthis.detachAllEvents();\n\n\t\tthis.updatedRows = [];\n\t\tthis._in_progress = {};\n\t\tthis._invalid = {};\n\t\tthis._headers = null;\n\t\tthis._payload = null;\n\t\tdelete this._initialized;\n\t},\n\n\turl: function(url) {\n\t\tthis.serverProcessor = this._serverProcessor = url;\n\t},\n\n\t_serializeAsJSON: function(data) {\n\t\tif (typeof data === \"string\") {\n\t\t\treturn data;\n\t\t}\n\n\t\tvar copy = this.$scheduler.utils.copy(data);\n\t\tif (this._tMode === \"REST-JSON\") {\n\t\t\tdelete copy.id;\n\t\t\tdelete copy[this.action_param];\n\t\t}\n\n\t\treturn JSON.stringify(copy);\n\t},\n\n\t// GET/POST/JSON modes of the dataProcessor didn't send the whole data items in 'delete' requests\n\t// clear extra info from the data in order not to change the request format\n\t_cleanupArgumentsBeforeSend: function(dataToSend) {\n\t\tvar processedData;\n\t\tif(dataToSend[this.action_param] === undefined){// hash of updated items, and not an individual item\n\t\t\tprocessedData = {};\n\t\t\tfor(var i in dataToSend) {\n\t\t\t\tprocessedData[i] = this._cleanupArgumentsBeforeSend(dataToSend[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tprocessedData = this._cleanupItemBeforeSend(dataToSend);\n\t\t}\n\t\treturn processedData;\n\t},\n\t_cleanupItemBeforeSend: function(updatedItem) {\n\t\tvar output = null;\n\t\tif(updatedItem){\n\t\t\tif(updatedItem[this.action_param] === \"deleted\"){\n\t\t\t\toutput = {};\n\t\t\t\toutput.id = updatedItem.id;\n\t\t\t\toutput[this.action_param] = updatedItem[this.action_param];\n\t\t\t}else{\n\t\t\t\toutput = updatedItem;\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t},\n\n\t_forEachUpdatedRow: function(code) {\n\t\tvar updatedRows = this.updatedRows.slice();\n\t\tfor (var i = 0; i < updatedRows.length; i++) {\n\t\t\tvar rowId = updatedRows[i];\n\t\t\tif (this.$scheduler.getUserData(rowId, this.action_param)) {\n\t\t\t\tcode.call(this, rowId);\n\t\t\t}\n\t\t}\n\t},\n\t_prepareItemForJson(item){\n\t\tconst processedItem = {};\n\t\tconst scheduler = this.$scheduler;\n\t\tconst copy = scheduler.utils.copy(item);\n\t\tfor (let i in copy) {\n\t\t\tlet prop = copy[i];\n\t\t\tif (i.indexOf(\"_\") === 0) {\n\t\t\t\tcontinue;\n\t\t\t} else if (prop){\n\t\t\t\tif(prop.getUTCFullYear){\n\t\t\t\t\tprocessedItem[i] = scheduler._helpers.formatDate(prop);\n\t\t\t\t} else if(typeof prop == \"object\") {\n\t\t\t\t\tprocessedItem[i] = this._prepareItemForJson(prop);\n\t\t\t\t} else {\n\t\t\t\t\tprocessedItem[i] = prop; \n\t\t\t\t}\n\t\t\t} else if (prop !== undefined){\n\t\t\t\tprocessedItem[i] = prop; \n\t\t\t}\n\t\t}\n\t\tprocessedItem[this.action_param] = scheduler.getUserData(item.id, this.action_param);\n\t\treturn processedItem;\n\t},\n\t_prepareItemForForm(item){\n\t\tconst processedItem = {};\n\t\tconst scheduler = this.$scheduler;\n\t\tconst copy = scheduler.utils.copy(item);\n\t\tfor (var i in copy) {\n\t\t\tlet prop = copy[i];\n\t\t\tif (i.indexOf(\"_\") === 0) {\n\t\t\t\tcontinue;\n\t\t\t} else if (prop) {\n\t\t\t\tif(prop.getUTCFullYear){\n\t\t\t\t\tprocessedItem[i] = scheduler._helpers.formatDate(prop);\n\t\t\t\t} else if(typeof prop == \"object\") {\n\t\t\t\t\tprocessedItem[i] = this._prepareItemForForm(prop);\n\t\t\t\t} else {\n\t\t\t\t\tprocessedItem[i] = prop;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tprocessedItem[i] = \"\"; // for all falthy values\n\t\t\t}\n\t\t}\n\t\tprocessedItem[this.action_param] = scheduler.getUserData(item.id, this.action_param);\n\t\treturn processedItem;\n\t},\n\t_prepareDataItem: function(item) {\n\t\tif(this._serializeAsJson){\n\t\t\treturn this._prepareItemForJson(item);\n\t\t}else {\n\t\t\treturn this._prepareItemForForm(item);\n\t\t}\n\t},\n\t_getRowData: function(id) {\n\t\tvar dataItem = this.$scheduler.getEvent(id);\n\t\tif (!dataItem) {\n\t\t\tdataItem = { id: id };\n\t\t}\n\t\treturn this._prepareDataItem(dataItem);\n\t}\n};\n\n\nexport default function extend(scheduler) {\n\nscheduler.createDataProcessor = function(config) {\n\tvar router;\n\tvar tMode;\n\tif (config instanceof Function) {\n\t\trouter = config;\n\t} else if (config.hasOwnProperty(\"router\")) {\n\t\trouter = config.router;\n\t} else if(config.hasOwnProperty(\"event\")){\n\t\trouter = config;\n\t}\n\n\tif (router) {\n\t\ttMode = \"CUSTOM\";\n\t} else {\n\t\ttMode = config.mode || \"REST-JSON\";\n\t}\n\n\tvar dp = new DataProcessor(config.url);\n\tdp.init(scheduler);\n\tdp.setTransactionMode({\n\t\tmode: tMode,\n\t\trouter: router\n\t}, config.batchUpdate); // FIXME: config.batchUpdate where it is explained?\n\treturn dp;\n};\n\nscheduler.DataProcessor = DataProcessor;\n\n}\n\n//var dataProcessor = global.dataProcessor = DataProcessor; // for old","import utils from \"./utils/utils\";\nimport domHelpers from \"./utils/dom_helpers\";\n\n\nexport default function(scheduler) {\n\n\tvar boxAttribute = \"data-dhxbox\";\n\n\tvar _dhx_msg_cfg = null;\n\n\tfunction callback(config, result, event) {\n\t\tvar usercall = config.callback;\n\t\tif (usercall)\n\t\t\tusercall(result, event);\n\n\t\tmodalBox.hide(config.box);\n\t\t_dhx_msg_cfg = config.box = null;\n\t}\n\n\tfunction modal_key(event) {\n\t\tif (_dhx_msg_cfg) {\n\n\t\t\tvar code = event.which || event.keyCode;\n\t\t\tvar preventDefault = false;\n\n\t\t\tif (messageBox.keyboard) {\n\t\t\t\tif (code == 13 || code == 32) {\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\n\t\t\t\t\tvar target = event.target || event.srcElement;\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"scheduler_popup_button\") > -1 && target.click) {\n\t\t\t\t\t\ttarget.click();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\n\t\t\t\t\t\tpreventDefault = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (code == 27) {\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\n\t\t\t\t\tpreventDefault = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (preventDefault) {\n\t\t\t\tif (event.preventDefault){\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t\treturn !(event.cancelBubble = true);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t}\n\n\tscheduler.event(document, \"keydown\", modal_key, true);\n\n\tfunction modality(mode) {\n\t\tif (!modality.cover) {\n\t\t\tmodality.cover = document.createElement(\"div\");\n\t\t\t//necessary for IE only\n\t\t\tscheduler.event(modality.cover, \"keydown\", modal_key);\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\n\t\t\tdocument.body.appendChild(modality.cover);\n\t\t}\n\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\n\t}\n\n\tfunction button(text, classValue, result) {\n\t\tvar buttonAriaAttrs = scheduler._waiAria.messageButtonAttrString(text);\n\t\tvar name = (classValue || \"\").toLowerCase().replace(/ /g, \"_\");\n\t\tvar buttonCss = `scheduler_${name}_button dhtmlx_${name}_button`; \n\t\treturn `<div ${buttonAriaAttrs} class='scheduler_popup_button dhtmlx_popup_button ${buttonCss}' data-result='${result}' result='${result}' ><div>${text}</div></div>`;\n\t}\n\n\tfunction info(text) {\n\t\tif (!messageBox.area) {\n\t\t\tmessageBox.area = document.createElement(\"div\");\n\t\t\tmessageBox.area.className = \"scheduler_message_area dhtmlx_message_area\";\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\n\t\t\tdocument.body.appendChild(messageBox.area);\n\t\t}\n\n\t\tmessageBox.hide(text.id);\n\t\tvar message = document.createElement(\"div\");\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\n\t\tmessage.className = \"scheduler-info dhtmlx-info scheduler-\" + text.type + \" dhtmlx-\" + text.type;\n\t\tscheduler.event(message, \"click\",function (e) {\n            if(text.callback) {\n                text.callback.call(this, e);\n            }\n\t\t\tmessageBox.hide(text.id);\n\t\t\ttext = null;\n\t\t});\n\n\t\tscheduler._waiAria.messageInfoAttr(message);\n\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\n\t\telse\n\t\t\tmessageBox.area.appendChild(message);\n\n\t\tif (text.expire > 0)\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\n\t\t\t\t// GS-1213: We need that when Scheduler is destroyed\n\t\t\t\tif (messageBox) messageBox.hide(text.id);\n\t\t\t}, text.expire);\n\n\t\tmessageBox.pull[text.id] = message;\n\t\tmessage = null;\n\n\t\treturn text.id;\n\t}\n\n\tfunction getFirstDefined() {\n\t\tvar values = [].slice.apply(arguments, [0]);\n\n\t\tfor (var i = 0; i < values.length; i++) {\n\t\t\tif (values[i]) {\n\t\t\t\treturn values[i];\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction _boxStructure(config, ok, cancel) {\n\t\tvar box = document.createElement(\"div\");\n\n\t\tvar contentId = utils.uid();\n\t\tscheduler._waiAria.messageModalAttr(box, contentId);\n\n\n\t\tbox.className = \" scheduler_modal_box dhtmlx_modal_box scheduler-\" + config.type + \" dhtmlx-\" + config.type;\n\t\tbox.setAttribute(boxAttribute, 1);\n\n\t\tvar inner = '';\n\n\t\tif (config.width)\n\t\t\tbox.style.width = config.width;\n\t\tif (config.height)\n\t\t\tbox.style.height = config.height;\n\t\tif (config.title)\n\t\t\tinner += '<div class=\"scheduler_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\n\t\tinner += '<div class=\"scheduler_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"scheduler_popup_controls dhtmlx_popup_controls\">';\n\t\tif (ok)\n\t\t\tinner += button(getFirstDefined(config.ok, scheduler.locale.labels.message_ok, \"OK\"), \"ok\", true);\n\t\tif (cancel)\n\t\t\tinner += button(getFirstDefined(config.cancel, scheduler.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\n\n\t\tif (config.buttons) {\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\n\t\t\t\tvar btn = config.buttons[i];\n\t\t\t\tif (typeof btn == \"object\") {\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\n\t\t\t\t\tvar label = btn.label;\n\t\t\t\t\tvar css = btn.css || (\"scheduler_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\n\t\t\t\t\tvar value = btn.value || i;\n\t\t\t\t\tinner += button(label, css, value);\n\t\t\t\t} else {\n\t\t\t\t\tinner += button(btn, btn, i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tinner += '</div>';\n\t\tbox.innerHTML = inner;\n\n\t\tif (config.content) {\n\t\t\tvar node = config.content;\n\t\t\tif (typeof node == \"string\")\n\t\t\t\tnode = document.getElementById(node);\n\t\t\tif (node.style.display == 'none')\n\t\t\t\tnode.style.display = \"\";\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\n\t\t}\n\n\t\tscheduler.event(box, \"click\", function (event) {\n\t\t\tvar source = event.target || event.srcElement;\n\t\t\tif (!source.className) source = source.parentNode;\n\t\t\tif (domHelpers.closest(source, \".scheduler_popup_button\")) {\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\n\t\t\t\tcallback(config, result, event);\n\t\t\t}\n\t\t});\n\t\tconfig.box = box;\n\t\tif (ok || cancel)\n\t\t\t_dhx_msg_cfg = config;\n\n\t\treturn box;\n\t}\n\n\tfunction _createBox(config, ok, cancel) {\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\n\n\t\tif (!config.hidden)\n\t\t\tmodality(true);\n\t\tdocument.body.appendChild(box);\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\n\t\tif (config.position == \"top\")\n\t\t\tbox.style.top = \"-3px\";\n\t\telse\n\t\t\tbox.style.top = y + 'px';\n\t\tbox.style.left = x + 'px';\n\t\t//necessary for IE only\n\t\tscheduler.event(box, \"keydown\", modal_key);\n\n\t\tmodalBox.focus(box);\n\n\t\tif (config.hidden)\n\t\t\tmodalBox.hide(box);\n\n\t\tscheduler.callEvent(\"onMessagePopup\", [box]);\n\t\treturn box;\n\t}\n\n\tfunction alertPopup(config) {\n\t\treturn _createBox(config, true, false);\n\t}\n\n\tfunction confirmPopup(config) {\n\t\treturn _createBox(config, true, true);\n\t}\n\n\tfunction boxPopup(config) {\n\t\treturn _createBox(config);\n\t}\n\n\tfunction box_params(text, type, callback) {\n\t\tif (typeof text != \"object\") {\n\t\t\tif (typeof type == \"function\") {\n\t\t\t\tcallback = type;\n\t\t\t\ttype = \"\";\n\t\t\t}\n\t\t\ttext = {text: text, type: type, callback: callback};\n\t\t}\n\t\treturn text;\n\t}\n\n\tfunction params(text, type, expire, id, callback) {\n\t\tif (typeof text != \"object\")\n\t\t\ttext = {text: text, type: type, expire: expire, id: id, callback: callback};\n\t\ttext.id = text.id || utils.uid();\n\t\ttext.expire = text.expire || messageBox.expire;\n\t\treturn text;\n\t}\n\n\tvar alertBox = function () {\n\t\tvar text = box_params.apply(this, arguments);\n\t\ttext.type = text.type || \"confirm\";\n\t\treturn alertPopup(text);\n\t};\n\tvar confirmBox = function () {\n\t\tvar text = box_params.apply(this, arguments);\n\t\ttext.type = text.type || \"alert\";\n\t\treturn confirmPopup(text);\n\t};\n\tvar modalBox = function () {\n\t\tvar text = box_params.apply(this, arguments);\n\t\ttext.type = text.type || \"alert\";\n\t\treturn boxPopup(text);\n\t};\n\tmodalBox.hide = function (node) {\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\n\t\t\tnode = node.parentNode;\n\t\tif (node) {\n\t\t\tnode.parentNode.removeChild(node);\n\t\t\tmodality(false);\n\n\t\t\tscheduler.callEvent(\"onAfterMessagePopup\", [node]);\n\t\t}\n\t};\n\n\tmodalBox.focus = function (node) {\n\t\tsetTimeout(function () {\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\n\t\t\tif (focusable.length) {\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\n\t\t\t}\n\t\t}, 1);\n\t};\n\n\tvar messageBox = function (text, type, expire, id) {\n\t\ttext = params.apply(this, arguments);\n\t\ttext.type = text.type || \"info\";\n\n\t\tvar subtype = text.type.split(\"-\")[0];\n\t\tswitch (subtype) {\n\t\t\tcase \"alert\":\n\t\t\t\treturn alertPopup(text);\n\t\t\tcase \"confirm\":\n\t\t\t\treturn confirmPopup(text);\n\t\t\tcase \"modalbox\":\n\t\t\t\treturn boxPopup(text);\n\t\t\tdefault:\n\t\t\t\treturn info(text);\n\t\t}\n\t};\n\n\tmessageBox.seed = (new Date()).valueOf();\n\tmessageBox.uid = utils.uid;\n\tmessageBox.expire = 4000;\n\tmessageBox.keyboard = true;\n\tmessageBox.position = \"top\";\n\tmessageBox.pull = {};\n\tmessageBox.timers = {};\n\n\tmessageBox.hideAll = function () {\n\t\tfor (var key in messageBox.pull)\n\t\t\tmessageBox.hide(key);\n\t};\n\tmessageBox.hide = function (id) {\n\t\tvar obj = messageBox.pull[id];\n\t\tif (obj && obj.parentNode) {\n\t\t\twindow.setTimeout(function () {\n\t\t\t\tobj.parentNode.removeChild(obj);\n\t\t\t\tobj = null;\n\t\t\t}, 2000);\n\t\t\tobj.className += \" hidden\";\n\n\t\t\tif (messageBox.timers[id])\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\n\t\t\tdelete messageBox.pull[id];\n\t\t}\n\t};\n\n\tvar popups = [];\n\tscheduler.attachEvent(\"onMessagePopup\", function(box){\n\t\tpopups.push(box);\n\t});\n\tscheduler.attachEvent(\"onAfterMessagePopup\", function(box){\n\t\tfor(var i = 0; i < popups.length; i++){\n\t\t\tif(popups[i] === box){\n\t\t\t\tpopups.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t});\n\n\tscheduler.attachEvent(\"onDestroy\", function(){\n\t\tif(modality.cover && modality.cover.parentNode){\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\n\t\t}\n\n\t\tfor(var i = 0; i < popups.length; i++){\n\t\t\tif(popups[i].parentNode){\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\n\t\t\t}\n\t\t}\n\t\tpopups = null;\n\n\t\tif(messageBox.area && messageBox.area.parentNode){\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\n\t\t}\n\t\tmessageBox = null;\n\t});\n\n\treturn {\n\t\talert: alertBox,\n\t\tconfirm: confirmBox,\n\t\tmessage: messageBox,\n\t\tmodalbox: modalBox\n\t};\n}","export default {\n\tdate: {\n\t\tmonth_full: [\" \", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \" \", \" \", \" \"],\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"\",\n\t\tday_tab: \"\",\n\t\tweek_tab: \"\",\n\t\tmonth_tab: \"\",\n\t\tnew_event: \" \",\n\t\ticon_save: \"\",\n\t\ticon_cancel: \"\",\n\t\ticon_details: \"\",\n\t\ticon_edit: \"\",\n\t\ticon_delete: \"\",\n\t\tconfirm_closing: \"  ,   \", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"       \",\n\t\tsection_description: \"\",\n\t\tsection_time: \" \",\n\t\tfull_day: \" \",\n\n\t\tconfirm_recurring: \"       \",\n\t\tsection_recurring: \" \",\n\t\tbutton_recurring: \"\",\n\t\tbutton_recurring_open: \"\",\n\t\tbutton_edit_series: \" \",\n\t\tbutton_edit_occurrence: \" \",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create: \"Drag to create\",\n\t\tdrag_to_move: \"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok: \"OK\",\n\t\tmessage_cancel: \"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour: \"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"\", //name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"\", //name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"\",\n\t\trepeat_radio_year: \"\",\n\t\trepeat_radio_day_type: \"\",\n\t\trepeat_text_day_count: \"\",\n\t\trepeat_radio_day_type2: \"  \",\n\t\trepeat_week: \"  \",\n\t\trepeat_text_week_count: \"   :\",\n\t\trepeat_radio_month_type: \"\",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \" \",\n\t\trepeat_text_month_count: \"\",\n\t\trepeat_text_month_count2_before: \"\",\n\t\trepeat_text_month_count2_after: \"\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"  \",\n\t\trepeat_text_occurrences_count: \"\",\n\t\trepeat_radio_end2: \"\",\n\t\trepeat_radio_end3: \" \",\n\n\t\trepeat_never: \"\",\n\t\trepeat_daily: \" \",\n\t\trepeat_workdays: \"  \",\n\t\trepeat_weekly: \" \",\n\t\trepeat_monthly: \" \",\n\t\trepeat_yearly: \" \",\n\t\trepeat_custom: \"\",\n\t\trepeat_freq_day: \"\",\n\t\trepeat_freq_week: \"\",\n\t\trepeat_freq_month: \"\",\n\t\trepeat_freq_year: \"\",\n\t\trepeat_on_date: \" \",\n\t\trepeat_ends: \"\",\n\n\t\tmonth_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t}\n};\n\n\n","/*\n Translation by Sofya Morozova\n */\nexport default {\n\tdate: {\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_full: [ \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"\",\n\t\tday_tab: \"\",\n\t\tweek_tab: \"\",\n\t\tmonth_tab: \"\",\n\t\tnew_event: \" \",\n\t\ticon_save: \"\",\n\t\ticon_cancel: \"\",\n\t\ticon_details: \"\",\n\t\ticon_edit: \"\",\n\t\ticon_delete: \"\",\n\t\tconfirm_closing: \"\", //   , ?\n\t\tconfirm_deleting: \"   , ?\",\n\t\tsection_description: \"\",\n\t\tsection_time: \" \",\n\t\tfull_day: \" \",\n\n\t\tconfirm_recurring: \"      ?\",\n\t\tsection_recurring: \"\",\n\t\tbutton_recurring: \"\",\n\t\tbutton_recurring_open: \"\",\n\t\tbutton_edit_series: \" \",\n\t\tbutton_edit_occurrence: \" \",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"\",\n\t\tdate: \"\",\n\t\tdescription: \"\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"ic\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"\",\n\t\trepeat_radio_week: \"\",\n\t\trepeat_radio_month: \"\",\n\t\trepeat_radio_year: \"\",\n\t\trepeat_radio_day_type: \"\",\n\t\trepeat_text_day_count: \"\",\n\t\trepeat_radio_day_type2: \"  \",\n\t\trepeat_week: \"  \",\n\t\trepeat_text_week_count: \"\",\n\t\trepeat_radio_month_type: \"\",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \"  \",\n\t\trepeat_text_month_count: \"\",\n\t\trepeat_text_month_count2_before: \" \",\n\t\trepeat_text_month_count2_after: \"\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"  \",\n\t\trepeat_text_occurrences_count: \"\",\n\t\trepeat_radio_end2: \"\",\n\t\trepeat_radio_end3: \" \",\n\n\t\trepeat_never: \"\",\n\t\trepeat_daily: \" \",\n\t\trepeat_workdays: \"  \",\n\t\trepeat_weekly: \" \",\n\t\trepeat_monthly: \" \",\n\t\trepeat_yearly: \" \",\n\t\trepeat_custom: \"\",\n\t\trepeat_freq_day: \"\",\n\t\trepeat_freq_week: \"\",\n\t\trepeat_freq_month: \"\",\n\t\trepeat_freq_year: \"\",\n\t\trepeat_on_date: \" \",\n\t\trepeat_ends: \"\",\n\n\t\tmonth_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"e\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t}\n};\n","/*\n @Traducido por Vicente Adria Bohigues - vicenteadria@hotmail.com\n */\nexport default {\n\tdate: {\n\t\tmonth_full: [\"Gener\", \"Febrer\", \"Mar\", \"Abril\", \"Maig\", \"Juny\", \"Juliol\", \"Agost\", \"Setembre\", \"Octubre\", \"Novembre\", \"Desembre\"],\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Oct\", \"Nov\", \"Des\"],\n\t\tday_full: [\"Diumenge\", \"Dilluns\", \"Dimarts\", \"Dimecres\", \"Dijous\", \"Divendres\", \"Dissabte\"],\n\t\tday_short: [\"Dg\", \"Dl\", \"Dm\", \"Dc\", \"Dj\", \"Dv\", \"Ds\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Hui\",\n\t\tday_tab: \"Dia\",\n\t\tweek_tab: \"Setmana\",\n\t\tmonth_tab: \"Mes\",\n\t\tnew_event: \"Nou esdeveniment\",\n\t\ticon_save: \"Guardar\",\n\t\ticon_cancel: \"Cancellar\",\n\t\ticon_details: \"Detalls\",\n\t\ticon_edit: \"Editar\",\n\t\ticon_delete: \"Esborrar\",\n\t\tconfirm_closing: \"\", //\"Els seus canvis es perdrn, continuar ?\"\n\t\tconfirm_deleting: \"L'esdeveniment s'esborrar definitivament, continuar ?\",\n\t\tsection_description: \"Descripci\",\n\t\tsection_time: \"Periode de temps\",\n\t\tfull_day: \"Tot el dia\",\n\n\t\tconfirm_recurring: \"Desitja modificar el conjunt d'esdeveniments repetits?\",\n\t\tsection_recurring: \"Repeteixca l'esdeveniment\",\n\t\tbutton_recurring: \"Impedit\",\n\t\tbutton_recurring_open: \"Perms\",\n\t\tbutton_edit_series: \"Edit srie\",\n\t\tbutton_edit_occurrence: \"Edita Instncia\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Agenda\",\n\t\tdate: \"Data\",\n\t\tdescription: \"Descripci\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Any\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Taula\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create: \"Drag to create\",\n\t\tdrag_to_move: \"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok: \"OK\",\n\t\tmessage_cancel: \"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour: \"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Diari\", //name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"Setmanal\", //name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"Mensual\",\n\t\trepeat_radio_year: \"Anual\",\n\t\trepeat_radio_day_type: \"Cada\",\n\t\trepeat_text_day_count: \"dia\",\n\t\trepeat_radio_day_type2: \"Cada dia laborable\",\n\t\trepeat_week: \" Repetir cada\",\n\t\trepeat_text_week_count: \"setmana els dies segents:\",\n\t\trepeat_radio_month_type: \"Repetir\",\n\t\trepeat_radio_month_start: \"El\",\n\t\trepeat_text_month_day: \"dia cada\",\n\t\trepeat_text_month_count: \"mes\",\n\t\trepeat_text_month_count2_before: \"cada\",\n\t\trepeat_text_month_count2_after: \"mes\",\n\t\trepeat_year_label: \"El\",\n\t\tselect_year_day2: \"de\",\n\t\trepeat_text_year_day: \"dia\",\n\t\tselect_year_month: \"mes\",\n\t\trepeat_radio_end: \"Sense data de finalitzaci\",\n\t\trepeat_text_occurrences_count: \"ocurrncies\",\n\t\trepeat_radio_end2: \"Desprs\",\n\t\trepeat_radio_end3: \"Finalitzar el\",\n\n\t\trepeat_never: \"Mai\",\n\t\trepeat_daily: \"Cada dia\",\n\t\trepeat_workdays: \"Cada dia laborable\",\n\t\trepeat_weekly: \"Cada setmana\",\n\t\trepeat_monthly: \"Cada mes\",\n\t\trepeat_yearly: \"Cada any\",\n\t\trepeat_custom: \"Personalitzat\",\n\t\trepeat_freq_day: \"Dia\",\n\t\trepeat_freq_week: \"Setmana\",\n\t\trepeat_freq_month: \"Mes\",\n\t\trepeat_freq_year: \"Any\",\n\t\trepeat_on_date: \"En la data\",\n\t\trepeat_ends: \"Finalitza\",\n\n\t\tmonth_for_recurring: [\"Gener\", \"Febrer\", \"Mar\", \"Abril\", \"Maig\", \"Juny\", \"Juliol\", \"Agost\", \"Setembre\", \"Octubre\", \"Novembre\", \"Desembre\"],\n\t\tday_for_recurring: [\"Diumenge\", \"Dilluns\", \"Dimarts\", \"Dimecres\", \"Dijous\", \"Divendres\", \"Dissabte\"]\n\t}\n};","/*\nTranslation by FreezeSoul\n*/\n//scheduler.config.day_date=\"%M %d %D\";\n//scheduler.config.default_date=\"%Y %M %d\";\n//scheduler.config.month_date=\"%Y %M\";\n\nexport default {\n\tdate: {\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tmonth_short: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"\",\n\t\tday_tab: \"\",\n\t\tweek_tab: \"\",\n\t\tmonth_tab: \"\",\n\t\tnew_event: \"\",\n\t\ticon_save: \"\",\n\t\ticon_cancel: \"\",\n\t\ticon_details: \"\",\n\t\ticon_edit: \"\",\n\t\ticon_delete: \"\",\n\t\tconfirm_closing: \"!\", //Your changes will be lost, are your sure?\n\t\tconfirm_deleting: \"?\",\n\t\tsection_description: \"\",\n\t\tsection_time: \"\",\n\t\tfull_day: \"\",\n\n\t\tconfirm_recurring:\"?\",\n\t\tsection_recurring:\"\",\n\t\tbutton_recurring:\"\",\n\t\tbutton_recurring_open:\"\",\n\t\tbutton_edit_series: \"\",\n\t\tbutton_edit_occurrence: \"\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab:\"\",\n\t\tdate:\"\",\n\t\tdescription:\"\",\n\t\t\n\t\t/*year view extension*/\n\t\tyear_tab:\"\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab:\"\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"\",\n\t\trepeat_radio_week: \"\",\n\t\trepeat_radio_month: \"\",\n\t\trepeat_radio_year: \"\",\n\t\trepeat_radio_day_type: \"\",\n\t\trepeat_text_day_count: \"\",\n\t\trepeat_radio_day_type2: \"\",\n\t\trepeat_week: \"  \",\n\t\trepeat_text_week_count: \":\",\n\t\trepeat_radio_month_type: \"\",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \" \",\n\t\trepeat_text_month_count: \"\",\n\t\trepeat_text_month_count2_before: \"\",\n\t\trepeat_text_month_count2_after: \"\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"\",\n\t\trepeat_text_occurrences_count: \"\",\n\t\trepeat_radio_end2: \"\",\n\t\trepeat_radio_end3: \"\",\n\t\t\n\t\trepeat_never: \"\",\n\t\trepeat_daily: \"\",\n\t\trepeat_workdays: \"\",\n\t\trepeat_weekly: \"\",\n\t\trepeat_monthly: \"\",\n\t\trepeat_yearly: \"\",\n\t\trepeat_custom: \"\",\n\t\trepeat_freq_day: \"\",\n\t\trepeat_freq_week: \"\",\n\t\trepeat_freq_month: \"\",\n\t\trepeat_freq_year: \"\",\n\t\trepeat_on_date: \"\",\n\t\trepeat_ends: \"\",\n\n\t\tmonth_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Leden\", \"nor\", \"Bezen\", \"Duben\", \"Kvten\", \"erven\", \"ervenec\", \"Srpen\", \"Z\", \"jen\", \"Listopad\", \"Prosinec\"],\n\t\tmonth_short: [\"Led\", \"n\", \"Be\", \"Dub\", \"Kv\", \"er\", \"ec\", \"Srp\", \"Z\", \"j\", \"List\", \"Pro\"],\n\t\tday_full: [\"Nedle\", \"Pondl\", \"ter\", \"Steda\", \"tvrtek\", \"Ptek\", \"Sobota\"],\n\t\tday_short: [\"Ne\", \"Po\", \"t\", \"St\", \"t\", \"P\", \"So\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Dnes\",\n\t\tday_tab: \"Den\",\n\t\tweek_tab: \"Tden\",\n\t\tmonth_tab: \"Msc\",\n\t\tnew_event: \"Nov udlost\",\n\t\ticon_save: \"Uloit\",\n\t\ticon_cancel: \"Zpt\",\n\t\ticon_details: \"Detail\",\n\t\ticon_edit: \"Edituj\",\n\t\ticon_delete: \"Smazat\",\n\t\tconfirm_closing: \"\", //Vae zmny budou ztraceny, opravdu ?\n\t\tconfirm_deleting: \"Udlost bude trvale smazna, opravdu?\",\n\t\tsection_description: \"Poznmky\",\n\t\tsection_time: \"Doba platnosti\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Pejete si upravit celou adu opakovanch udlost?\",\n\t\tsection_recurring: \"Opakovn udlosti\",\n\t\tbutton_recurring: \"Vypnuto\",\n\t\tbutton_recurring_open: \"Zapnuto\",\n\t\tbutton_edit_series: \"Edit series\",\n\t\tbutton_edit_occurrence: \"Upravit instance\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Program\",\n\t\tdate: \"Datum\",\n\t\tdescription: \"Poznmka\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Rok\",\n\t\tfull_day: \"Full day\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Program\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Mka\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Denn\",\n\t\trepeat_radio_week: \"Tdn\",\n\t\trepeat_radio_month: \"Msn\",\n\t\trepeat_radio_year: \"Ron\",\n\t\trepeat_radio_day_type: \"kad\",\n\t\trepeat_text_day_count: \"Den\",\n\t\trepeat_radio_day_type2: \"pracovn dny\",\n\t\trepeat_week: \"Opakuje kadch\",\n\t\trepeat_text_week_count: \"Tdn na:\",\n\t\trepeat_radio_month_type: \"u kadho\",\n\t\trepeat_radio_month_start: \"na\",\n\t\trepeat_text_month_day: \"Den kadho\",\n\t\trepeat_text_month_count: \"Msc\",\n\t\trepeat_text_month_count2_before: \"kad\",\n\t\trepeat_text_month_count2_after: \"Msc\",\n\t\trepeat_year_label: \"na\",\n\t\tselect_year_day2: \"v\",\n\t\trepeat_text_year_day: \"Den v\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"bez data ukonen\",\n\t\trepeat_text_occurrences_count: \"Udlosti\",\n\t\trepeat_radio_end2: \"po\",\n\t\trepeat_radio_end3: \"Konec\",\n\n\t\trepeat_never: \"Nikdy\",\n\t\trepeat_daily: \"Kad den\",\n\t\trepeat_workdays: \"Kad pracovn den\",\n\t\trepeat_weekly: \"Kad tden\",\n\t\trepeat_monthly: \"Kad msc\",\n\t\trepeat_yearly: \"Kad rok\",\n\t\trepeat_custom: \"Vlastn\",\n\t\trepeat_freq_day: \"Den\",\n\t\trepeat_freq_week: \"Tden\",\n\t\trepeat_freq_month: \"Msc\",\n\t\trepeat_freq_year: \"Rok\",\n\t\trepeat_on_date: \"Na datum\",\n\t\trepeat_ends: \"Kon\",\n\n\t\tmonth_for_recurring: [\"Leden\", \"nor\", \"Bezen\", \"Duben\", \"Kvten\", \"erven\", \"ervenec\", \"Srpen\", \"Z\", \"jen\", \"Listopad\", \"Prosinec\"],\n\t\tday_for_recurring: [\"Nedle \", \"Pondl\", \"ter\", \"Steda\", \"tvrtek\", \"Ptek\", \"Sobota\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marts\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"December\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\n\t\tday_short: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Idag\",\n\t\tday_tab: \"Dag\",\n\t\tweek_tab: \"Uge\",\n\t\tmonth_tab: \"Mned\",\n\t\tnew_event: \"Ny begivenhed\",\n\t\ticon_save: \"Gem\",\n\t\ticon_cancel: \"Fortryd\",\n\t\ticon_details: \"Detaljer\",\n\t\ticon_edit: \"Tilret\",\n\t\ticon_delete: \"Slet\",\n\t\tconfirm_closing: \"Dine rettelser vil g tabt.. Er dy sikker?\", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"Bigivenheden vil blive slettet permanent. Er du sikker?\",\n\t\tsection_description: \"Beskrivelse\",\n\t\tsection_time: \"Tidsperiode\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Vil du tilrette hele serien af gentagne begivenheder?\",\n\t\tsection_recurring: \"Gentag begivenhed\",\n\t\tbutton_recurring: \"Frakoblet\",\n\t\tbutton_recurring_open: \"Tilkoblet\",\n\t\tbutton_edit_series: \"Rediger serien\",\n\t\tbutton_edit_occurrence: \"Rediger en kopi\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Dagsorden\",\n\t\tdate: \"Dato\",\n\t\tdescription: \"Beskrivelse\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"r\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Dagsorden\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Grid\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Daglig\",\n\t\trepeat_radio_week: \"Ugenlig\",\n\t\trepeat_radio_month: \"Mnedlig\",\n\t\trepeat_radio_year: \"rlig\",\n\t\trepeat_radio_day_type: \"Hver\",\n\t\trepeat_text_day_count: \"dag\",\n\t\trepeat_radio_day_type2: \"P hver arbejdsdag\",\n\t\trepeat_week: \" Gentager sig hver\",\n\t\trepeat_text_week_count: \"uge p flgende dage:\",\n\t\trepeat_radio_month_type: \"Hver den\",\n\t\trepeat_radio_month_start: \"Den\",\n\t\trepeat_text_month_day: \" i hver\",\n\t\trepeat_text_month_count: \"mned\",\n\t\trepeat_text_month_count2_before: \"hver\",\n\t\trepeat_text_month_count2_after: \"mned\",\n\t\trepeat_year_label: \"Den\",\n\t\tselect_year_day2: \"i\",\n\t\trepeat_text_year_day: \"dag i\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"Ingen slutdato\",\n\t\trepeat_text_occurrences_count: \"gentagelse\",\n\t\trepeat_radio_end2: \"Efter\",\n\t\trepeat_radio_end3: \"Slut\",\n\n\t\trepeat_never: \"Aldrig\",\n\t\trepeat_daily: \"Hver dag\",\n\t\trepeat_workdays: \"Hver hverdag\",\n\t\trepeat_weekly: \"Hver uge\",\n\t\trepeat_monthly: \"Hver mned\",\n\t\trepeat_yearly: \"Hvert r\",\n\t\trepeat_custom: \"Brugerdefineret\",\n\t\trepeat_freq_day: \"Dag\",\n\t\trepeat_freq_week: \"Uge\",\n\t\trepeat_freq_month: \"Mned\",\n\t\trepeat_freq_year: \"r\",\n\t\trepeat_on_date: \"P dato\",\n\t\trepeat_ends: \"Slutter\",\n\n\t\tmonth_for_recurring: [\"Januar\", \"Februar\", \"Mrz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n\t\tday_for_recurring: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\" Januar\", \" Februar\", \" Mrz \", \" April\", \" Mai\", \" Juni\", \" Juli\", \" August\", \" September \", \" Oktober\", \" November \", \" Dezember\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mr\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dez\"],\n\t\tday_full: [ \"Sonntag\", \"Montag\", \"Dienstag\", \" Mittwoch\", \" Donnerstag\", \"Freitag\", \"Samstag\"],\n\t\tday_short: [\"So\", \"Mo\", \"Di\", \"Mi\", \"Do\", \"Fr\", \"Sa\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Heute\",\n\t\tday_tab: \"Tag\",\n\t\tweek_tab: \"Woche\",\n\t\tmonth_tab: \"Monat\",\n\t\tnew_event: \"neuer Eintrag\",\n\t\ticon_save: \"Speichern\",\n\t\ticon_cancel: \"Abbrechen\",\n\t\ticon_details: \"Details\",\n\t\ticon_edit: \"ndern\",\n\t\ticon_delete: \"Lschen\",\n\t\tconfirm_closing: \"\", //\"Ihre Vernderungen werden verloren sein, wollen Sie ergnzen? \"\n\t\tconfirm_deleting: \"Der Eintrag wird gelscht\",\n\t\tsection_description: \"Beschreibung\",\n\t\tsection_time: \"Zeitspanne\",\n\t\tfull_day: \"Ganzer Tag\",\n\n\t\tconfirm_recurring: \"Wollen Sie alle Eintrge bearbeiten oder nur diesen einzelnen Eintrag?\",\n\t\tsection_recurring: \"Wiederholung\",\n\t\tbutton_recurring: \"Aus\",\n\t\tbutton_recurring_open: \"An\",\n\t\tbutton_edit_series: \"Bearbeiten Sie die Serie\",\n\t\tbutton_edit_occurrence: \"Bearbeiten Sie eine Kopie\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Agenda\",\n\t\tdate: \"Datum\",\n\t\tdescription: \"Beschreibung\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Jahre\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Grid\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Tglich\",\n\t\trepeat_radio_week: \"Wchentlich\",\n\t\trepeat_radio_month: \"Monatlich\",\n\t\trepeat_radio_year: \"Jhrlich\",\n\t\trepeat_radio_day_type: \"jeden\",\n\t\trepeat_text_day_count: \"Tag\",\n\t\trepeat_radio_day_type2: \"an jedem Arbeitstag\",\n\t\trepeat_week: \" Wiederholt sich jede\",\n\t\trepeat_text_week_count: \"Woche am:\",\n\t\trepeat_radio_month_type: \"an jedem\",\n\t\trepeat_radio_month_start: \"am\",\n\t\trepeat_text_month_day: \"Tag eines jeden\",\n\t\trepeat_text_month_count: \"Monats\",\n\t\trepeat_text_month_count2_before: \"jeden\",\n\t\trepeat_text_month_count2_after: \"Monats\",\n\t\trepeat_year_label: \"am\",\n\t\tselect_year_day2: \"im\",\n\t\trepeat_text_year_day: \"Tag im\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"kein Enddatum\",\n\t\trepeat_text_occurrences_count: \"Ereignissen\",\n\t\trepeat_radio_end3: \"Schlu\",\n\t\trepeat_radio_end2: \"nach\",\n\n\t\trepeat_never: \"Nie\",\n\t\trepeat_daily: \"Jeden Tag\",\n\t\trepeat_workdays: \"Jeden Werktag\",\n\t\trepeat_weekly: \"Jede Woche\",\n\t\trepeat_monthly: \"Jeden Monat\",\n\t\trepeat_yearly: \"Jedes Jahr\",\n\t\trepeat_custom: \"Benutzerdefiniert\",\n\t\trepeat_freq_day: \"Tag\",\n\t\trepeat_freq_week: \"Woche\",\n\t\trepeat_freq_month: \"Monat\",\n\t\trepeat_freq_year: \"Jahr\",\n\t\trepeat_on_date: \"Am Datum\",\n\t\trepeat_ends: \"Endet\",\n\n\t\tmonth_for_recurring: [\"Januar\", \"Februar\", \"Mrz\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n\t\tday_for_recurring: [\"Sonntag\", \"Montag\", \"Dienstag\", \"Mittwoch\", \"Donnerstag\", \"Freitag\", \"Samstag\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"\",\n\t\tday_tab: \"\",\n\t\tweek_tab: \"\",\n\t\tmonth_tab: \"\",\n\t\tnew_event: \" \",\n\t\ticon_save: \"\",\n\t\ticon_cancel: \"\",\n\t\ticon_details: \"\",\n\t\ticon_edit: \"\",\n\t\ticon_delete: \"\",\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"    .   ;\",\n\t\tsection_description: \"\",\n\t\tsection_time: \" \",\n\t\tfull_day: \" \",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"        ;\",\n\t\tsection_recurring: \" \",\n\t\tbutton_recurring: \"\",\n\t\tbutton_recurring_open: \"\",\n\t\tbutton_edit_series: \"  \",\n\t\tbutton_edit_occurrence: \"  \",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \" \",\n\t\tdate: \"\",\n\t\tdescription: \"\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \" \",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"\",\n\t\trepeat_radio_week: \"\",\n\t\trepeat_radio_month: \"\",\n\t\trepeat_radio_year: \"\",\n\t\trepeat_radio_day_type: \"\",\n\t\trepeat_text_day_count: \"\",\n\t\trepeat_radio_day_type2: \" \",\n\t\trepeat_week: \"  \",\n\t\trepeat_text_week_count: \"   :\",\n\t\trepeat_radio_month_type: \"\",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \" \",\n\t\trepeat_text_month_count: \"\",\n\t\trepeat_text_month_count2_before: \"\",\n\t\trepeat_text_month_count2_after: \"\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"  \",\n\t\trepeat_text_occurrences_count: \"\",\n\t\trepeat_radio_end3: \" \",\n\t\trepeat_radio_end2: \" \",\n\n\t\trepeat_never: \"\",\n\t\trepeat_daily: \" \",\n\t\trepeat_workdays: \"  \",\n\t\trepeat_weekly: \" \",\n\t\trepeat_monthly: \" \",\n\t\trepeat_yearly: \" \",\n\t\trepeat_custom: \"\",\n\t\trepeat_freq_day: \"\",\n\t\trepeat_freq_week: \"\",\n\t\trepeat_freq_month: \"\",\n\t\trepeat_freq_year: \"\",\n\t\trepeat_on_date: \" \",\n\t\trepeat_ends: \"\",\n\n\t\tmonth_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t}\n};\n\n","export default {\n\tdate:{\n\t\tmonth_full:[\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\tmonth_short:[\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\tday_full:[\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n\t\tday_short:[\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\n\t},\n\tlabels:{\n\t\tdhx_cal_today_button:\"Today\",\n\t\tday_tab:\"Day\",\n\t\tweek_tab:\"Week\",\n\t\tmonth_tab:\"Month\",\n\t\tnew_event:\"New event\",\n\t\ticon_save:\"Save\",\n\t\ticon_cancel:\"Cancel\",\n\t\ticon_details:\"Details\",\n\t\ticon_edit:\"Edit\",\n\t\ticon_delete:\"Delete\",\n\t\tconfirm_closing:\"\",//Your changes will be lost, are your sure ?\n\t\tconfirm_deleting:\"Event will be deleted permanently, are you sure?\",\n\t\tsection_description:\"Description\",\n\t\tsection_time:\"Time period\",\n\t\tfull_day:\"Full day\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring:\"Edit recurring event\",\n\t\tsection_recurring:\"Repeat event\",\n\t\tbutton_recurring:\"Disabled\",\n\t\tbutton_recurring_open:\"Enabled\",\n\t\tbutton_edit_series: \"All events\",\n\t\tbutton_edit_occurrence: \"This event\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\n\t\t/*agenda view extension*/\n\t\tagenda_tab:\"Agenda\",\n\t\tdate:\"Date\",\n\t\tdescription:\"Description\",\n\n\t\t/*year view extension*/\n\t\tyear_tab:\"Year\",\n\n\t\t/* week agenda extension */\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Grid\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Daily\",//name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"Weekly\",//name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"Monthly\",\n\t\trepeat_radio_year: \"Yearly\",\n\t\trepeat_radio_day_type: \"Every\",\n\t\trepeat_text_day_count: \"day\",\n\t\trepeat_radio_day_type2: \"Every workday\",\n\t\trepeat_week: \" Repeat every\",\n\t\trepeat_text_week_count: \"week next days:\",\n\t\trepeat_radio_month_type: \"Repeat\",\n\t\trepeat_radio_month_start: \"On\",\n\t\trepeat_text_month_day: \"day every\",\n\t\trepeat_text_month_count: \"month\",\n\t\trepeat_text_month_count2_before: \"every\",\n\t\trepeat_text_month_count2_after: \"month\",\n\t\trepeat_year_label: \"On\",\n\t\tselect_year_day2: \"of\",\n\t\trepeat_text_year_day: \"day\",\n\t\tselect_year_month: \"month\",\n\t\trepeat_radio_end: \"No end date\",\n\t\trepeat_text_occurrences_count: \"occurrences\",\n\t\trepeat_radio_end2: \"After\",\n\t\trepeat_radio_end3: \"End by\",\n\n\t\trepeat_never: \"Never\",\n\t\trepeat_daily: \"Every day\",\n\t\trepeat_workdays: \"Every weekday\",\n\t\trepeat_weekly: \"Every week\",\n\t\trepeat_monthly: \"Every month\",\n\t\trepeat_yearly: \"Every year\",\n\t\trepeat_custom: \"Custom\",\n\t\trepeat_freq_day: \"Day\",\n\t\trepeat_freq_week: \"Week\",\n\t\trepeat_freq_month: \"Month\",\n\t\trepeat_freq_year: \"Year\",\n\t\trepeat_on_date: \"On date\",\n\t\trepeat_ends: \"Ends\",\n\n\t\tmonth_for_recurring: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n\t\tday_for_recurring: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]//\n\t}\n};\n\n","/*\n @Autor Manuel Fernandez Panzuela - www.mfernandez.es\n */\nexport default {\n\tdate: {\n\t\tmonth_full: [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\n\t\tmonth_short: [\"Ene\", \"Feb\", \"Mar\", \"Abr\", \"May\", \"Jun\", \"Jul\", \"Ago\", \"Sep\", \"Oct\", \"Nov\", \"Dic\"],\n\t\tday_full: [\"Domingo\", \"Lunes\", \"Martes\", \"Mircoles\", \"Jueves\", \"Viernes\", \"Sbado\"],\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mi\", \"Jue\", \"Vie\", \"Sb\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Hoy\",\n\t\tday_tab: \"Da\",\n\t\tweek_tab: \"Semana\",\n\t\tmonth_tab: \"Mes\",\n\t\tnew_event: \"Nuevo evento\",\n\t\ticon_save: \"Guardar\",\n\t\ticon_cancel: \"Cancelar\",\n\t\ticon_details: \"Detalles\",\n\t\ticon_edit: \"Editar\",\n\t\ticon_delete: \"Eliminar\",\n\t\tconfirm_closing: \"\", //\"Sus cambios se perdern, continuar ?\"\n\t\tconfirm_deleting: \"El evento se borrar definitivamente, continuar?\",\n\t\tsection_description: \"Descripcin\",\n\t\tsection_time: \"Perodo\",\n\t\tfull_day: \"Todo el da\",\n\n\t\tconfirm_recurring: \"Desea modificar el conjunto de eventos repetidos?\",\n\t\tsection_recurring: \"Repita el evento\",\n\t\tbutton_recurring: \"Impedido\",\n\t\tbutton_recurring_open: \"Permitido\",\n\t\tbutton_edit_series: \"Editar la serie\",\n\t\tbutton_edit_occurrence: \"Editar este evento\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Da\",\n\t\tdate: \"Fecha\",\n\t\tdescription: \"Descripcin\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Ao\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Da\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Reja\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Diariamente\",\n\t\trepeat_radio_week: \"Semanalmente\",\n\t\trepeat_radio_month: \"Mensualmente\",\n\t\trepeat_radio_year: \"Anualmente\",\n\t\trepeat_radio_day_type: \"Cada\",\n\t\trepeat_text_day_count: \"dia\",\n\t\trepeat_radio_day_type2: \"Cada jornada de trabajo\",\n\t\trepeat_week: \" Repetir cada\",\n\t\trepeat_text_week_count: \"semana:\",\n\t\trepeat_radio_month_type: \"Repita\",\n\t\trepeat_radio_month_start: \"El\",\n\t\trepeat_text_month_day: \"dia cada \",\n\t\trepeat_text_month_count: \"mes\",\n\t\trepeat_text_month_count2_before: \"cada\",\n\t\trepeat_text_month_count2_after: \"mes\",\n\t\trepeat_year_label: \"El\",\n\t\tselect_year_day2: \"del\",\n\t\trepeat_text_year_day: \"dia\",\n\t\tselect_year_month: \"mes\",\n\t\trepeat_radio_end: \"Sin fecha de finalizacin\",\n\t\trepeat_text_occurrences_count: \"ocurrencias\",\n\t\trepeat_radio_end3: \"Fin\",\n\t\trepeat_radio_end2: \"Despus de\",\n\n\t\trepeat_never: \"Nunca\",\n\t\trepeat_daily: \"Cada da\",\n\t\trepeat_workdays: \"Cada da laborable\",\n\t\trepeat_weekly: \"Cada semana\",\n\t\trepeat_monthly: \"Cada mes\",\n\t\trepeat_yearly: \"Cada ao\",\n\t\trepeat_custom: \"Personalizado\",\n\t\trepeat_freq_day: \"Da\",\n\t\trepeat_freq_week: \"Semana\",\n\t\trepeat_freq_month: \"Mes\",\n\t\trepeat_freq_year: \"Ao\",\n\t\trepeat_on_date: \"En la fecha\",\n\t\trepeat_ends: \"Termina\",\n\n\t\tmonth_for_recurring: [\"Enero\", \"Febrero\", \"rzo\", \"bril\", \"Mayo\", \"Junio\", \"Julio\", \"gosto\", \"Setiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"],\n\t\tday_for_recurring: [\"Domingo\", \"Lunes\", \"Martes\", \"Mircoles\", \"Jeuves\", \"Viernes\", \"Sabado\"]\n\t}\n};\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\n\t\tmonth_short: [\"Tam\", \"Hel\", \"Maa\", \"Huh\", \"Tou\", \"Kes\", \"Hei\", \"Elo\", \"Syy\", \"Lok\", \"Mar\", \"Jou\"],\n\t\tday_full: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"],\n\t\tday_short: [\"Su\", \"Ma\", \"Ti\", \"Ke\", \"To\", \"Pe\", \"La\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Tnn\",\n\t\tday_tab: \"Piv\",\n\t\tweek_tab: \"Viikko\",\n\t\tmonth_tab: \"Kuukausi\",\n\t\tnew_event: \"Uusi tapahtuma\",\n\t\ticon_save: \"Tallenna\",\n\t\ticon_cancel: \"Peru\",\n\t\ticon_details: \"Tiedot\",\n\t\ticon_edit: \"Muokkaa\",\n\t\ticon_delete: \"Poista\",\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"Haluatko varmasti poistaa tapahtuman?\",\n\t\tsection_description: \"Kuvaus\",\n\t\tsection_time: \"Aikajakso\",\n\t\tfull_day: \"Koko piv\",\n\n\t\tconfirm_recurring: \"Haluatko varmasti muokata toistuvan tapahtuman kaikkia jaksoja?\",\n\t\tsection_recurring: \"Toista tapahtuma\",\n\t\tbutton_recurring: \"Ei k&auml;yt&ouml;ss&auml;\",\n\t\tbutton_recurring_open: \"K&auml;yt&ouml;ss&auml;\",\n\t\tbutton_edit_series: \"Muokkaa sarja\",\n\t\tbutton_edit_occurrence: \"Muokkaa kopio\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Esityslista\",\n\t\tdate: \"Pivmr\",\n\t\tdescription: \"Kuvaus\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Vuoden\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Esityslista\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Ritil\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Luo uusi vetmll\",\n\t\tdrag_to_move:\"Siirr vetmll\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"P&auml;ivitt&auml;in\",\n\t\trepeat_radio_week: \"Viikoittain\",\n\t\trepeat_radio_month: \"Kuukausittain\",\n\t\trepeat_radio_year: \"Vuosittain\",\n\t\trepeat_radio_day_type: \"Joka\",\n\t\trepeat_text_day_count: \"p&auml;iv&auml;\",\n\t\trepeat_radio_day_type2: \"Joka arkip&auml;iv&auml;\",\n\t\trepeat_week: \"Toista joka\",\n\t\trepeat_text_week_count: \"viikko n&auml;in&auml; p&auml;ivin&auml;:\",\n\t\trepeat_radio_month_type: \"Toista\",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \"p&auml;iv&auml;n&auml; joka\",\n\t\trepeat_text_month_count: \"kuukausi\",\n\t\trepeat_text_month_count2_before: \"joka\",\n\t\trepeat_text_month_count2_after: \"kuukausi\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"p&auml;iv&auml;\",\n\t\tselect_year_month: \"kuukausi\",\n\t\trepeat_radio_end: \"Ei loppumisaikaa\",\n\t\trepeat_text_occurrences_count: \"Toiston j&auml;lkeen\",\n\t\trepeat_radio_end3: \"Loppuu\",\n\t\trepeat_radio_end2: \"\",\n\n\t\trepeat_never: \"Ei koskaan\",\n\t\trepeat_daily: \"Joka piv\",\n\t\trepeat_workdays: \"Joka arkipiv\",\n\t\trepeat_weekly: \"Joka viikko\",\n\t\trepeat_monthly: \"Joka kuukausi\",\n\t\trepeat_yearly: \"Joka vuosi\",\n\t\trepeat_custom: \"Mukautettu\",\n\t\trepeat_freq_day: \"Piv\",\n\t\trepeat_freq_week: \"Viikko\",\n\t\trepeat_freq_month: \"Kuukausi\",\n\t\trepeat_freq_year: \"Vuosi\",\n\t\trepeat_on_date: \"Tiettyn pivn\",\n\t\trepeat_ends: \"Pttyy\",\n\n\t\tmonth_for_recurring: [\"Tammikuu\", \"Helmikuu\", \"Maaliskuu\", \"Huhtikuu\", \"Toukokuu\", \"Kes&auml;kuu\", \"Hein&auml;kuu\", \"Elokuu\", \"Syyskuu\", \"Lokakuu\", \"Marraskuu\", \"Joulukuu\"],\n\t\tday_for_recurring: [\"Sunnuntai\", \"Maanantai\", \"Tiistai\", \"Keskiviikko\", \"Torstai\", \"Perjantai\", \"Lauantai\"]\n\t}\n};\n\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Janvier\", \"Fvrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Aot\", \"Septembre\", \"Octobre\", \"Novembre\", \"Dcembre\"],\n\t\tmonth_short: [\"Jan\", \"Fv\", \"Mar\", \"Avr\", \"Mai\", \"Juin\", \"Juil\", \"Ao\", \"Sep\", \"Oct\", \"Nov\", \"Dc\"],\n\t\tday_full: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"],\n\t\tday_short: [\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Aujourd'hui\",\n\t\tday_tab: \"Jour\",\n\t\tweek_tab: \"Semaine\",\n\t\tmonth_tab: \"Mois\",\n\t\tnew_event: \"Nouvel vnement\",\n\t\ticon_save: \"Enregistrer\",\n\t\ticon_cancel: \"Annuler\",\n\t\ticon_details: \"Dtails\",\n\t\ticon_edit: \"Modifier\",\n\t\ticon_delete: \"Effacer\",\n\t\tconfirm_closing: \"\", //Vos modifications seront perdus, tes-vous sr ?\n\t\tconfirm_deleting: \"L'vnement sera effac sans appel, tes-vous sr ?\",\n\t\tsection_description: \"Description\",\n\t\tsection_time: \"Priode\",\n\t\tfull_day: \"Journe complte\",\n\n\t\tconfirm_recurring: \"Voulez-vous diter toute une srie d'vnements rpts?\",\n\t\tsection_recurring: \"Priodicit\",\n\t\tbutton_recurring: \"Dsactiv\",\n\t\tbutton_recurring_open: \"Activ\",\n\t\tbutton_edit_series: \"Modifier la srie\",\n\t\tbutton_edit_occurrence: \"Modifier une copie\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Jour\",\n\t\tdate: \"Date\",\n\t\tdescription: \"Description\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Anne\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Jour\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Grille\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Quotidienne\",\n\t\trepeat_radio_week: \"Hebdomadaire\",\n\t\trepeat_radio_month: \"Mensuelle\",\n\t\trepeat_radio_year: \"Annuelle\",\n\t\trepeat_radio_day_type: \"Chaque\",\n\t\trepeat_text_day_count: \"jour\",\n\t\trepeat_radio_day_type2: \"Chaque journe de travail\",\n\t\trepeat_week: \" Rpter toutes les\",\n\t\trepeat_text_week_count: \"semaine:\",\n\t\trepeat_radio_month_type: \"Rpter\",\n\t\trepeat_radio_month_start: \"Le\",\n\t\trepeat_text_month_day: \"jour chaque\",\n\t\trepeat_text_month_count: \"mois\",\n\t\trepeat_text_month_count2_before: \"chaque\",\n\t\trepeat_text_month_count2_after: \"mois\",\n\t\trepeat_year_label: \"Le\",\n\t\tselect_year_day2: \"du\",\n\t\trepeat_text_year_day: \"jour\",\n\t\tselect_year_month: \"mois\",\n\t\trepeat_radio_end: \"Pas de date d&quot;achvement\",\n\t\trepeat_text_occurrences_count: \"occurrences\",\n\t\trepeat_radio_end3: \"Fin\",\n\t\trepeat_radio_end2: \"Aprs\",\n\n\t\trepeat_never: \"Jamais\",\n\t\trepeat_daily: \"Chaque jour\",\n\t\trepeat_workdays: \"Chaque jour ouvrable\",\n\t\trepeat_weekly: \"Chaque semaine\",\n\t\trepeat_monthly: \"Chaque mois\",\n\t\trepeat_yearly: \"Chaque anne\",\n\t\trepeat_custom: \"Personnalis\",\n\t\trepeat_freq_day: \"Jour\",\n\t\trepeat_freq_week: \"Semaine\",\n\t\trepeat_freq_month: \"Mois\",\n\t\trepeat_freq_year: \"Anne\",\n\t\trepeat_on_date: \" la date\",\n\t\trepeat_ends: \"Se termine\",\n\n\t\tmonth_for_recurring: [\"Janvier\", \"Fvrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Aot\", \"Septembre\", \"Octobre\", \"Novembre\", \"Dcembre\"],\n\t\tday_for_recurring: [\"Dimanche\", \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\"]\n\t}\n};\n","export default {\n\tdate: {\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"\",\n\t\tday_tab: \"\",\n\t\tweek_tab: \"\",\n\t\tmonth_tab: \"\",\n\t\tnew_event: \" \",\n\t\ticon_save: \"\",\n\t\ticon_cancel: \"\",\n\t\ticon_details: \"\",\n\t\ticon_edit: \"\",\n\t\ticon_delete: \"\",\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"  .?\",\n\t\tsection_description: \"\",\n\t\tsection_time: \"\",\n\n\t\tconfirm_recurring: \"      ?\",\n\t\tsection_recurring: \" \",\n\t\tbutton_recurring: \" \",\n\t\tbutton_recurring_open: \"\",\n\t\tfull_day: \" \",\n\t\tbutton_edit_series: \"  \",\n\t\tbutton_edit_occurrence: \" \",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \" \",\n\t\tdate: \"\",\n\t\tdescription: \"\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \" \",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"  \",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"\",\n\t\tprev: \"\",\n\t\tyear: \"\",\n\t\tmonth: \"\",\n\t\tday: \"\",\n\t\thour:\"\",\n\t\tminute: \"\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"\",\n\t\trepeat_radio_week: \"\",\n\t\trepeat_radio_month: \"\",\n\t\trepeat_radio_year: \"\",\n\t\trepeat_radio_day_type: \" \",\n\t\trepeat_text_day_count: \"\",\n\t\trepeat_radio_day_type2: \"   \",\n\t\trepeat_week: \"  \",\n\t\trepeat_text_week_count: \"  :\",\n\t\trepeat_radio_month_type: \" \",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \" \",\n\t\trepeat_text_month_count: \"\",\n\t\trepeat_text_month_count2_before: \" \",\n\t\trepeat_text_month_count2_after: \"\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"  \",\n\t\trepeat_text_occurrences_count: \"\",\n\t\trepeat_radio_end3: \" \",\n\t\trepeat_radio_end2: \"\",\n\n\t\trepeat_never: \" \",\n\t\trepeat_daily: \" \",\n\t\trepeat_workdays: \"  \",\n\t\trepeat_weekly: \" \",\n\t\trepeat_monthly: \" \",\n\t\trepeat_yearly: \" \",\n\t\trepeat_custom: \" \",\n\t\trepeat_freq_day: \"\",\n\t\trepeat_freq_week: \"\",\n\t\trepeat_freq_month: \"\",\n\t\trepeat_freq_year: \"\",\n\t\trepeat_on_date: \"\",\n\t\trepeat_ends: \"\",\n\n\t\tmonth_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t}\n};\n\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Janur\", \"Februr\", \"Mrcius\", \"prilis\", \"Mjus\", \"Jnius\", \"Jlius\", \"Augusztus\", \"Szeptember\", \"Oktber\", \"November\", \"December\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mr\", \"pr\", \"Mj\", \"Jn\", \"Jl\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n\t\tday_full: [\"Vasrnap\", \"Htf\", \"Kedd\", \"Szerda\", \"Cstrtk\", \"Pntek\", \"szombat\"],\n\t\tday_short: [\"Va\", \"H\", \"Ke\", \"Sze\", \"Cs\", \"P\", \"Szo\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Ma\",\n\t\tday_tab: \"Nap\",\n\t\tweek_tab: \"Ht\",\n\t\tmonth_tab: \"Hnap\",\n\t\tnew_event: \"j esemny\",\n\t\ticon_save: \"Ments\",\n\t\ticon_cancel: \"Mgse\",\n\t\ticon_details: \"Rszletek\",\n\t\ticon_edit: \"Szerkeszts\",\n\t\ticon_delete: \"Trls\",\n\t\tconfirm_closing: \"\", //A vltozsok elvesznek, biztosan folytatja? \"\n\t\tconfirm_deleting: \"Az esemny trlve lesz, biztosan folytatja?\",\n\t\tsection_description: \"Lers\",\n\t\tsection_time: \"Idszak\",\n\t\tfull_day: \"Egesz napos\",\n\n\t\t/*ismtld esemnyek*/\n\t\tconfirm_recurring: \"Biztosan szerkeszteni akarod az sszes ismtld esemny belltst?\",\n\t\tsection_recurring: \"Esemny ismtlse\",\n\t\tbutton_recurring: \"Tilts\",\n\t\tbutton_recurring_open: \"Engedlyezs\",\n\t\tbutton_edit_series: \"Edit series\",\n\t\tbutton_edit_occurrence: \"Szerkeszts brsg\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*napirendi nzet*/\n\t\tagenda_tab: \"Napirend\",\n\t\tdate: \"Dtum\",\n\t\tdescription: \"Lers\",\n\n\t\t/*ves nzet*/\n\t\tyear_tab: \"v\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Napi\", //name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"Heti\", //name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"Havi\",\n\t\trepeat_radio_year: \"ves\",\n\t\trepeat_radio_day_type: \"Minden\",\n\t\trepeat_text_day_count: \"nap\",\n\t\trepeat_radio_day_type2: \"Minden munkanap\",\n\t\trepeat_week: \" Ismtelje meg minden\",\n\t\trepeat_text_week_count: \"hten a kvetkez napokon:\",\n\t\trepeat_radio_month_type: \"Ismtls\",\n\t\trepeat_radio_month_start: \"Ekkor\",\n\t\trepeat_text_month_day: \"nap minden\",\n\t\trepeat_text_month_count: \"hnapban\",\n\t\trepeat_text_month_count2_before: \"minden\",\n\t\trepeat_text_month_count2_after: \"hnapban\",\n\t\trepeat_year_label: \"Ekkor\",\n\t\tselect_year_day2: \"-n/-n\",\n\t\trepeat_text_year_day: \"nap\",\n\t\tselect_year_month: \"hnap\",\n\t\trepeat_radio_end: \"Nincs befejezsi dtum\",\n\t\trepeat_text_occurrences_count: \"esemny\",\n\t\trepeat_radio_end2: \"Utn\",\n\t\trepeat_radio_end3: \"Befejez dtum\",\n\n\t\trepeat_never: \"Soha\",\n\t\trepeat_daily: \"Minden nap\",\n\t\trepeat_workdays: \"Minden munkanap\",\n\t\trepeat_weekly: \"Minden hten\",\n\t\trepeat_monthly: \"Minden hnapban\",\n\t\trepeat_yearly: \"Minden vben\",\n\t\trepeat_custom: \"Egyedi\",\n\t\trepeat_freq_day: \"Nap\",\n\t\trepeat_freq_week: \"Ht\",\n\t\trepeat_freq_month: \"Hnap\",\n\t\trepeat_freq_year: \"v\",\n\t\trepeat_on_date: \"Dtum szerint\",\n\t\trepeat_ends: \"Befejezdik\",\n\n\t\tmonth_for_recurring: [\"Janur\", \"Februr\", \"Mrcius\", \"prilis\", \"Mjus\", \"Jnius\", \"Jlius\", \"Augusztus\", \"Szeptember\", \"Oktber\", \"November\", \"December\"],\n\t\tday_for_recurring: [\"Vasrnap\", \"Htf\", \"Kedd\", \"Szerda\", \"Cstrtk\", \"Pntek\", \"Szombat\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Ags\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\n\t\tday_full: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"],\n\t\tday_short: [\"Ming\", \"Sen\", \"Sel\", \"Rab\", \"Kam\", \"Jum\", \"Sab\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Hari Ini\",\n\t\tday_tab: \"Hari\",\n\t\tweek_tab: \"Minggu\",\n\t\tmonth_tab: \"Bulan\",\n\t\tnew_event: \"Acara Baru\",\n\t\ticon_save: \"Simpan\",\n\t\ticon_cancel: \"Batal\",\n\t\ticon_details: \"Detail\",\n\t\ticon_edit: \"Edit\",\n\t\ticon_delete: \"Hapus\",\n\t\tconfirm_closing: \"\", /*Perubahan tidak akan disimpan ?*/\n\t\tconfirm_deleting: \"Acara akan dihapus\",\n\t\tsection_description: \"Keterangan\",\n\t\tsection_time: \"Periode\",\n\t\tfull_day: \"Hari penuh\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Apakah acara ini akan berulang?\",\n\t\tsection_recurring: \"Acara Rutin\",\n\t\tbutton_recurring: \"Tidak Difungsikan\",\n\t\tbutton_recurring_open: \"Difungsikan\",\n\t\tbutton_edit_series: \"Mengedit seri\",\n\t\tbutton_edit_occurrence: \"Mengedit salinan\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Agenda\",\n\t\tdate: \"Tanggal\",\n\t\tdescription: \"Keterangan\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Tahun\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Tabel\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Harian\", //name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"Mingguan\", //name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"Bulanan\",\n\t\trepeat_radio_year: \"Tahunan\",\n\t\trepeat_radio_day_type: \"Setiap\",\n\t\trepeat_text_day_count: \"hari\",\n\t\trepeat_radio_day_type2: \"Setiap hari kerja\",\n\t\trepeat_week: \" Ulangi setiap\",\n\t\trepeat_text_week_count: \"minggu pada hari berikut:\",\n\t\trepeat_radio_month_type: \"Ulangi\",\n\t\trepeat_radio_month_start: \"Pada\",\n\t\trepeat_text_month_day: \"hari setiap\",\n\t\trepeat_text_month_count: \"bulan\",\n\t\trepeat_text_month_count2_before: \"setiap\",\n\t\trepeat_text_month_count2_after: \"bulan\",\n\t\trepeat_year_label: \"Pada\",\n\t\tselect_year_day2: \"dari\",\n\t\trepeat_text_year_day: \"hari\",\n\t\tselect_year_month: \"bulan\",\n\t\trepeat_radio_end: \"Tanpa tanggal akhir\",\n\t\trepeat_text_occurrences_count: \"kejadian\",\n\t\trepeat_radio_end2: \"Setelah\",\n\t\trepeat_radio_end3: \"Berakhir pada\",\n\n\t\trepeat_never: \"Tidak pernah\",\n\t\trepeat_daily: \"Setiap hari\",\n\t\trepeat_workdays: \"Setiap hari kerja\",\n\t\trepeat_weekly: \"Setiap minggu\",\n\t\trepeat_monthly: \"Setiap bulan\",\n\t\trepeat_yearly: \"Setiap tahun\",\n\t\trepeat_custom: \"Kustom\",\n\t\trepeat_freq_day: \"Hari\",\n\t\trepeat_freq_week: \"Minggu\",\n\t\trepeat_freq_month: \"Bulan\",\n\t\trepeat_freq_year: \"Tahun\",\n\t\trepeat_on_date: \"Pada tanggal\",\n\t\trepeat_ends: \"Berakhir\",\n\n\t\tmonth_for_recurring: [\"Januari\", \"Februari\", \"Maret\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Agustus\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n\t\tday_for_recurring: [\"Minggu\", \"Senin\", \"Selasa\", \"Rabu\", \"Kamis\", \"Jumat\", \"Sabtu\"]\n\t}\n};","export default {\n\tdate: {\n\t\tmonth_full: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Giugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\n\t\tmonth_short: [\"Gen\", \"Feb\", \"Mar\", \"Apr\", \"Mag\", \"Giu\", \"Lug\", \"Ago\", \"Set\", \"Ott\", \"Nov\", \"Dic\"],\n\t\tday_full: [\"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Gioved\", \"Venerd\", \"Sabato\"],\n\t\tday_short: [\"Dom\", \"Lun\", \"Mar\", \"Mer\", \"Gio\", \"Ven\", \"Sab\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Oggi\",\n\t\tday_tab: \"Giorno\",\n\t\tweek_tab: \"Settimana\",\n\t\tmonth_tab: \"Mese\",\n\t\tnew_event: \"Nuovo evento\",\n\t\ticon_save: \"Salva\",\n\t\ticon_cancel: \"Chiudi\",\n\t\ticon_details: \"Dettagli\",\n\t\ticon_edit: \"Modifica\",\n\t\ticon_delete: \"Elimina\",\n\t\tconfirm_closing: \"\", //Le modifiche apportate saranno perse, siete sicuri?\n\t\tconfirm_deleting: \"L'evento sar eliminato, siete sicuri?\",\n\t\tsection_description: \"Descrizione\",\n\t\tsection_time: \"Periodo di tempo\",\n\t\tfull_day: \"Intera giornata\",\n\n\t\tconfirm_recurring: \"Vuoi modificare l'intera serie di eventi?\",\n\t\tsection_recurring: \"Ripetere l'evento\",\n\t\tbutton_recurring: \"Disattivato\",\n\t\tbutton_recurring_open: \"Attivato\",\n\t\tbutton_edit_series: \"Modificare la serie\",\n\t\tbutton_edit_occurrence: \"Modificare una copia\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Agenda\",\n\t\tdate: \"Data\",\n\t\tdescription: \"Descrizione\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Anno\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Griglia\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Quotidiano\",\n\t\trepeat_radio_week: \"Settimanale\",\n\t\trepeat_radio_month: \"Mensile\",\n\t\trepeat_radio_year: \"Annuale\",\n\t\trepeat_radio_day_type: \"Ogni\",\n\t\trepeat_text_day_count: \"giorno\",\n\t\trepeat_radio_day_type2: \"Ogni giornata lavorativa\",\n\t\trepeat_week: \" Ripetere ogni\",\n\t\trepeat_text_week_count: \"settimana:\",\n\t\trepeat_radio_month_type: \"Ripetere\",\n\t\trepeat_radio_month_start: \"Il\",\n\t\trepeat_text_month_day: \"giorno ogni\",\n\t\trepeat_text_month_count: \"mese\",\n\t\trepeat_text_month_count2_before: \"ogni\",\n\t\trepeat_text_month_count2_after: \"mese\",\n\t\trepeat_year_label: \"Il\",\n\t\tselect_year_day2: \"del\",\n\t\trepeat_text_year_day: \"giorno\",\n\t\tselect_year_month: \"mese\",\n\t\trepeat_radio_end: \"Senza data finale\",\n\t\trepeat_text_occurrences_count: \"occorenze\",\n\t\trepeat_radio_end3: \"Fine\",\n\t\trepeat_radio_end2: \"Dopo\",\n\n\t\trepeat_never: \"Mai\",\n\t\trepeat_daily: \"Ogni giorno\",\n\t\trepeat_workdays: \"Ogni giorno feriale\",\n\t\trepeat_weekly: \"Ogni settimana\",\n\t\trepeat_monthly: \"Ogni mese\",\n\t\trepeat_yearly: \"Ogni anno\",\n\t\trepeat_custom: \"Personalizzato\",\n\t\trepeat_freq_day: \"Giorno\",\n\t\trepeat_freq_week: \"Settimana\",\n\t\trepeat_freq_month: \"Mese\",\n\t\trepeat_freq_year: \"Anno\",\n\t\trepeat_on_date: \"Alla data\",\n\t\trepeat_ends: \"Finisce\",\n\n\t\tmonth_for_recurring: [\"Gennaio\", \"Febbraio\", \"Marzo\", \"Aprile\", \"Maggio\", \"Jiugno\", \"Luglio\", \"Agosto\", \"Settembre\", \"Ottobre\", \"Novembre\", \"Dicembre\"],\n\t\tday_for_recurring: [\"Domenica\", \"Luned\", \"Marted\", \"Mercoled\", \"Joved\", \"Venerd\", \"Sabato\"]\n\t}\n};\n","/*\n Translation by Genexus Japan Inc.\n */\nexport default {\n\tdate: {\n\t\tmonth_full: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\n\t\tmonth_short: [ \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"\",\n\t\tday_tab: \"\",\n\t\tweek_tab: \"\",\n\t\tmonth_tab: \"\",\n\t\tnew_event: \"\",\n\t\ticon_save: \"\",\n\t\ticon_cancel: \"\",\n\t\ticon_details: \"\",\n\t\ticon_edit: \"\",\n\t\ticon_delete: \"\",\n\t\tconfirm_closing: \"\", //\n\t\tconfirm_deleting: \"\",\n\t\tsection_description: \"\",\n\t\tsection_time: \"\",\n\t\tconfirm_recurring: \"\",\n\t\tsection_recurring: \"\",\n\t\tbutton_recurring: \"\",\n\t\tbutton_recurring_open: \"\",\n\t\tfull_day: \"\",\n\t\tbutton_edit_series: \"\",\n\t\tbutton_edit_occurrence: \"\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"\",\n\t\tdate: \"\",\n\t\tdescription: \"\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"\", //name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"\", //name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"\",\n\t\trepeat_radio_year: \"\",\n\t\trepeat_radio_day_type: \"\",\n\t\trepeat_text_day_count: \"\",\n\t\trepeat_radio_day_type2: \"\",\n\t\trepeat_week: \" \",\n\t\trepeat_text_week_count: \" :\",\n\t\trepeat_radio_month_type: \"\",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \"\",\n\t\trepeat_text_month_count: \"\",\n\t\trepeat_text_month_count2_before: \"\",\n\t\trepeat_text_month_count2_after: \"\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"\",\n\t\trepeat_text_occurrences_count: \"\",\n\t\trepeat_radio_end2: \"\",\n\t\trepeat_radio_end3: \"\",\n\n\t\trepeat_never: \"\",\n\t\trepeat_daily: \"\",\n\t\trepeat_workdays: \"\",\n\t\trepeat_weekly: \"\",\n\t\trepeat_monthly: \"\",\n\t\trepeat_yearly: \"\",\n\t\trepeat_custom: \"\",\n\t\trepeat_freq_day: \"\",\n\t\trepeat_freq_week: \"\",\n\t\trepeat_freq_month: \"\",\n\t\trepeat_freq_year: \"\",\n\t\trepeat_on_date: \"\",\n\t\trepeat_ends: \"\",\n\n\t\tmonth_for_recurring: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\"],\n\t\tday_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t}\n};\n\n\n","export default class LocaleManager{\n\tconstructor(config){\n\t\tthis._locales = {};\n\t\tfor(const i in config){\n\t\t\tthis._locales[i] = config[i];\n\t\t}\n\t}\n\n\taddLocale(name, locale) {\n\t\tthis._locales[name] = locale;\n\t}\n\n\tgetLocale(name) {\n\t\treturn this._locales[name];\n\t}\n}","export default {\n\tdate: {\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\n\t\tday_short: [\"Sn\", \"Mon\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"I dag\",\n\t\tday_tab: \"Dag\",\n\t\tweek_tab: \"Uke\",\n\t\tmonth_tab: \"Mned\",\n\t\tnew_event: \"Ny hendelse\",\n\t\ticon_save: \"Lagre\",\n\t\ticon_cancel: \"Avbryt\",\n\t\ticon_details: \"Detaljer\",\n\t\ticon_edit: \"Rediger\",\n\t\ticon_delete: \"Slett\",\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"Hendelsen vil bli slettet permanent. Er du sikker?\",\n\t\tsection_description: \"Beskrivelse\",\n\t\tsection_time: \"Tidsperiode\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Vil du forandre hele dette settet av repeterende hendelser?\",\n\t\tsection_recurring: \"Repeter hendelsen\",\n\t\tbutton_recurring: \"Av\",\n\t\tbutton_recurring_open: \"P\",\n\t\tbutton_edit_series: \"Rediger serien\",\n\t\tbutton_edit_occurrence: \"Redigere en kopi\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Agenda\",\n\t\tdate: \"Dato\",\n\t\tdescription: \"Beskrivelse\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"r\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Grid\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Daglig\",\n\t\trepeat_radio_week: \"Ukentlig\",\n\t\trepeat_radio_month: \"Mnedlig\",\n\t\trepeat_radio_year: \"rlig\",\n\t\trepeat_radio_day_type: \"Hver\",\n\t\trepeat_text_day_count: \"dag\",\n\t\trepeat_radio_day_type2: \"Alle hverdager\",\n\t\trepeat_week: \" Gjentas hver\",\n\t\trepeat_text_week_count: \"uke p:\",\n\t\trepeat_radio_month_type: \"P hver\",\n\t\trepeat_radio_month_start: \"P\",\n\t\trepeat_text_month_day: \"dag hver\",\n\t\trepeat_text_month_count: \"mned\",\n\t\trepeat_text_month_count2_before: \"hver\",\n\t\trepeat_text_month_count2_after: \"mned\",\n\t\trepeat_year_label: \"p\",\n\t\tselect_year_day2: \"i\",\n\t\trepeat_text_year_day: \"dag i\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"Ingen sluttdato\",\n\t\trepeat_text_occurrences_count: \"forekomst\",\n\t\trepeat_radio_end3: \"Stop den\",\n\t\trepeat_radio_end2: \"Etter\",\n\n\t\trepeat_never: \"Aldri\",\n\t\trepeat_daily: \"Hver dag\",\n\t\trepeat_workdays: \"Hver ukedag\",\n\t\trepeat_weekly: \"Hver uke\",\n\t\trepeat_monthly: \"Hver mned\",\n\t\trepeat_yearly: \"Hvert r\",\n\t\trepeat_custom: \"Tilpasset\",\n\t\trepeat_freq_day: \"Dag\",\n\t\trepeat_freq_week: \"Uke\",\n\t\trepeat_freq_month: \"Mned\",\n\t\trepeat_freq_year: \"r\",\n\t\trepeat_on_date: \"P dato\",\n\t\trepeat_ends: \"Slutter\",\n\n\t\tmonth_for_recurring: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n\t\tday_for_recurring: [\"Sondag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"]\n\t}\n};\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"mrt\", \"Apr\", \"Mei\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n\t\tday_full: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"],\n\t\tday_short: [\"Zo\", \"Ma\", \"Di\", \"Wo\", \"Do\", \"Vr\", \"Za\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Vandaag\",\n\t\tday_tab: \"Dag\",\n\t\tweek_tab: \"Week\",\n\t\tmonth_tab: \"Maand\",\n\t\tnew_event: \"Nieuw item\",\n\t\ticon_save: \"Opslaan\",\n\t\ticon_cancel: \"Annuleren\",\n\t\ticon_details: \"Details\",\n\t\ticon_edit: \"Bewerken\",\n\t\ticon_delete: \"Verwijderen\",\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"Item zal permanent worden verwijderd, doorgaan?\",\n\t\tsection_description: \"Beschrijving\",\n\t\tsection_time: \"Tijd periode\",\n\t\tfull_day: \"Hele dag\",\n\n\t\tconfirm_recurring: \"Wilt u alle terugkerende items bijwerken?\",\n\t\tsection_recurring: \"Item herhalen\",\n\t\tbutton_recurring: \"Uit\",\n\t\tbutton_recurring_open: \"Aan\",\n\t\tbutton_edit_series: \"Bewerk de serie\",\n\t\tbutton_edit_occurrence: \"Bewerk een kopie\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Agenda\",\n\t\tdate: \"Datum\",\n\t\tdescription: \"Omschrijving\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Jaar\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Tabel\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Dagelijks\",\n\t\trepeat_radio_week: \"Wekelijks\",\n\t\trepeat_radio_month: \"Maandelijks\",\n\t\trepeat_radio_year: \"Jaarlijks\",\n\t\trepeat_radio_day_type: \"Elke\",\n\t\trepeat_text_day_count: \"dag(en)\",\n\t\trepeat_radio_day_type2: \"Elke werkdag\",\n\t\trepeat_week: \" Herhaal elke\",\n\t\trepeat_text_week_count: \"week op de volgende dagen:\",\n\t\trepeat_radio_month_type: \"Herhaal\",\n\t\trepeat_radio_month_start: \"Op\",\n\t\trepeat_text_month_day: \"dag iedere\",\n\t\trepeat_text_month_count: \"maanden\",\n\t\trepeat_text_month_count2_before: \"iedere\",\n\t\trepeat_text_month_count2_after: \"maanden\",\n\t\trepeat_year_label: \"Op\",\n\t\tselect_year_day2: \"van\",\n\t\trepeat_text_year_day: \"dag\",\n\t\tselect_year_month: \"maand\",\n\t\trepeat_radio_end: \"Geen eind datum\",\n\t\trepeat_text_occurrences_count: \"keren\",\n\t\trepeat_radio_end3: \"Eindigd per\",\n\t\trepeat_radio_end2: \"Na\",\n\n\t\trepeat_never: \"Nooit\",\n\t\trepeat_daily: \"Elke dag\",\n\t\trepeat_workdays: \"Elke werkdag\",\n\t\trepeat_weekly: \"Elke week\",\n\t\trepeat_monthly: \"Elke maand\",\n\t\trepeat_yearly: \"Elk jaar\",\n\t\trepeat_custom: \"Aangepast\",\n\t\trepeat_freq_day: \"Dag\",\n\t\trepeat_freq_week: \"Week\",\n\t\trepeat_freq_month: \"Maand\",\n\t\trepeat_freq_year: \"Jaar\",\n\t\trepeat_on_date: \"Op datum\",\n\t\trepeat_ends: \"Eindigt\",\n\n\t\tmonth_for_recurring: [\"Januari\", \"Februari\", \"Maart\", \"April\", \"Mei\", \"Juni\", \"Juli\", \"Augustus\", \"September\", \"Oktober\", \"November\", \"December\"],\n\t\tday_for_recurring: [\"Zondag\", \"Maandag\", \"Dinsdag\", \"Woensdag\", \"Donderdag\", \"Vrijdag\", \"Zaterdag\"]\n\t}\n};\n\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Des\"],\n\t\tday_full: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\n\t\tday_short: [\"Sn\", \"Man\", \"Tir\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Idag\",\n\t\tday_tab: \"Dag\",\n\t\tweek_tab: \"Uke\",\n\t\tmonth_tab: \"Mned\",\n\t\tnew_event: \"Ny\",\n\t\ticon_save: \"Lagre\",\n\t\ticon_cancel: \"Avbryt\",\n\t\ticon_details: \"Detaljer\",\n\t\ticon_edit: \"Endre\",\n\t\ticon_delete: \"Slett\",\n\t\tconfirm_closing: \"Endringer blir ikke lagret, er du sikker?\", //Endringer blir ikke lagret, er du sikker?\n\t\tconfirm_deleting: \"Oppfringen vil bli slettet, er du sikker?\",\n\t\tsection_description: \"Beskrivelse\",\n\t\tsection_time: \"Tidsperiode\",\n\t\tfull_day: \"Full dag\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Vil du endre hele settet med repeterende oppfringer?\",\n\t\tsection_recurring: \"Repeterende oppfring\",\n\t\tbutton_recurring: \"Ikke aktiv\",\n\t\tbutton_recurring_open: \"Aktiv\",\n\t\tbutton_edit_series: \"Rediger serien\",\n\t\tbutton_edit_occurrence: \"Redigere en kopi\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Agenda\",\n\t\tdate: \"Dato\",\n\t\tdescription: \"Beskrivelse\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"r\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Grid\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Daglig\", //name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"Ukentlig\", //name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"Mnedlig\",\n\t\trepeat_radio_year: \"rlig\",\n\t\trepeat_radio_day_type: \"Hver\",\n\t\trepeat_text_day_count: \"dag\",\n\t\trepeat_radio_day_type2: \"Hver arbeidsdag\",\n\t\trepeat_week: \" Gjenta hver\",\n\t\trepeat_text_week_count: \"uke neste dager:\",\n\t\trepeat_radio_month_type: \"Gjenta\",\n\t\trepeat_radio_month_start: \"P\",\n\t\trepeat_text_month_day: \"dag hver\",\n\t\trepeat_text_month_count: \"mned\",\n\t\trepeat_text_month_count2_before: \"hver\",\n\t\trepeat_text_month_count2_after: \"mned\",\n\t\trepeat_year_label: \"P\",\n\t\tselect_year_day2: \"av\",\n\t\trepeat_text_year_day: \"dag\",\n\t\tselect_year_month: \"mned\",\n\t\trepeat_radio_end: \"Ingen sluttdato\",\n\t\trepeat_text_occurrences_count: \"forekomster\",\n\t\trepeat_radio_end2: \"Etter\",\n\t\trepeat_radio_end3: \"Slutt innen\",\n\n\t\trepeat_never: \"Aldri\",\n\t\trepeat_daily: \"Hver dag\",\n\t\trepeat_workdays: \"Hver ukedag\",\n\t\trepeat_weekly: \"Hver uke\",\n\t\trepeat_monthly: \"Hver mned\",\n\t\trepeat_yearly: \"Hvert r\",\n\t\trepeat_custom: \"Tilpasset\",\n\t\trepeat_freq_day: \"Dag\",\n\t\trepeat_freq_week: \"Uke\",\n\t\trepeat_freq_month: \"Mned\",\n\t\trepeat_freq_year: \"r\",\n\t\trepeat_on_date: \"P dato\",\n\t\trepeat_ends: \"Slutter\",\n\n\t\tmonth_for_recurring: [\"Januar\", \"Februar\", \"Mars\", \"April\", \"Mai\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Desember\"],\n\t\tday_for_recurring: [\"Sndag\", \"Mandag\", \"Tirsdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Stycze\", \"Luty\", \"Marzec\", \"Kwiecie\", \"Maj\", \"Czerwiec\", \"Lipiec\", \"Sierpie\", \"Wrzesie\", \"Padziernik\", \"Listopad\", \"Grudzie\"],\n\t\tmonth_short: [\"Sty\", \"Lut\", \"Mar\", \"Kwi\", \"Maj\", \"Cze\", \"Lip\", \"Sie\", \"Wrz\", \"Pa\", \"Lis\", \"Gru\"],\n\t\tday_full: [\"Niedziela\", \"Poniedziaek\", \"Wtorek\", \"roda\", \"Czwartek\", \"Pitek\", \"Sobota\"],\n\t\tday_short: [\"Nie\", \"Pon\", \"Wto\", \"ro\", \"Czw\", \"Pi\", \"Sob\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Dzi\",\n\t\tday_tab: \"Dzie\",\n\t\tweek_tab: \"Tydzie\",\n\t\tmonth_tab: \"Miesic\",\n\t\tnew_event: \"Nowe zdarzenie\",\n\t\ticon_save: \"Zapisz\",\n\t\ticon_cancel: \"Anuluj\",\n\t\ticon_details: \"Szczegy\",\n\t\ticon_edit: \"Edytuj\",\n\t\ticon_delete: \"Usu\",\n\t\tconfirm_closing: \"\", //Zmiany zostan usunite, jeste pewien?\n\t\tconfirm_deleting: \"Zdarzenie zostanie usunite na zawsze, kontynuowa?\",\n\t\tsection_description: \"Opis\",\n\t\tsection_time: \"Okres czasu\",\n\t\tfull_day: \"Cay dzie\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Czy chcesz edytowa cay zbir powtarzajcych si zdarze?\",\n\t\tsection_recurring: \"Powtrz zdarzenie\",\n\t\tbutton_recurring: \"Nieaktywne\",\n\t\tbutton_recurring_open: \"Aktywne\",\n\t\tbutton_edit_series: \"Edytuj seri\",\n\t\tbutton_edit_occurrence: \"Edytuj kopi\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Agenda\",\n\t\tdate: \"Data\",\n\t\tdescription: \"Opis\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Rok\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Tabela\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Codziennie\",\n\t\trepeat_radio_week: \"Co tydzie\",\n\t\trepeat_radio_month: \"Co miesic\",\n\t\trepeat_radio_year: \"Co rok\",\n\t\trepeat_radio_day_type: \"Kadego\",\n\t\trepeat_text_day_count: \"dnia\",\n\t\trepeat_radio_day_type2: \"Kadego dnia roboczego\",\n\t\trepeat_week: \" Powtarzaj kadego\",\n\t\trepeat_text_week_count: \"tygodnia w dni:\",\n\t\trepeat_radio_month_type: \"Powtrz\",\n\t\trepeat_radio_month_start: \"W\",\n\t\trepeat_text_month_day: \"dnia kadego\",\n\t\trepeat_text_month_count: \"miesica\",\n\t\trepeat_text_month_count2_before: \"kadego\",\n\t\trepeat_text_month_count2_after: \"miesica\",\n\t\trepeat_year_label: \"W\",\n\t\tselect_year_day2: \"miesica\",\n\t\trepeat_text_year_day: \"dnia miesica\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"Bez daty kocowej\",\n\t\trepeat_text_occurrences_count: \"wystpieniu/ach\",\n\t\trepeat_radio_end3: \"Zakocz w\",\n\t\trepeat_radio_end2: \"Po\",\n\n\t\trepeat_never: \"Nigdy\",\n\t\trepeat_daily: \"Codziennie\",\n\t\trepeat_workdays: \"Kady dzie roboczy\",\n\t\trepeat_weekly: \"Co tydzie\",\n\t\trepeat_monthly: \"Co miesic\",\n\t\trepeat_yearly: \"Co rok\",\n\t\trepeat_custom: \"Niestandardowy\",\n\t\trepeat_freq_day: \"Dzie\",\n\t\trepeat_freq_week: \"Tydzie\",\n\t\trepeat_freq_month: \"Miesic\",\n\t\trepeat_freq_year: \"Rok\",\n\t\trepeat_on_date: \"W dniu\",\n\t\trepeat_ends: \"Koczy si\",\n\n\t\tmonth_for_recurring: [\"Stycznia\", \"Lutego\", \"Marca\", \"Kwietnia\", \"Maja\", \"Czerwca\", \"Lipca\", \"Sierpnia\", \"Wrzenia\", \"Padziernka\", \"Listopada\", \"Grudnia\"],\n\t\tday_for_recurring: [\"Niedziela\", \"Poniedziaek\", \"Wtorek\", \"roda\", \"Czwartek\", \"Pitek\", \"Sobota\"]\n\t}\n};\n\n","/*\n\n TRANSLATION BY MATTHEUS PIROVANI RORIZ GONALVES\n\n mattheusroriz@hotmail.com / mattheus.pirovani@gmail.com /\n\n www.atrixian.com.br\n\n */\n\nexport default {\n\tdate: {\n\t\tmonth_full: [\"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n\t\tmonth_short: [\"Jan\", \"Fev\", \"Mar\", \"Abr\", \"Mai\", \"Jun\", \"Jul\", \"Ago\", \"Set\", \"Out\", \"Nov\", \"Dez\"],\n\t\tday_full: [\"Domingo\", \"Segunda\", \"Tera\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sbado\"],\n\t\tday_short: [\"Dom\", \"Seg\", \"Ter\", \"Qua\", \"Qui\", \"Sex\", \"Sab\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Hoje\",\n\t\tday_tab: \"Dia\",\n\t\tweek_tab: \"Semana\",\n\t\tmonth_tab: \"Ms\",\n\t\tnew_event: \"Novo evento\",\n\t\ticon_save: \"Salvar\",\n\t\ticon_cancel: \"Cancelar\",\n\t\ticon_details: \"Detalhes\",\n\t\ticon_edit: \"Editar\",\n\t\ticon_delete: \"Deletar\",\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"Tem certeza que deseja excluir?\",\n\t\tsection_description: \"Descrio\",\n\t\tsection_time: \"Perodo de tempo\",\n\t\tfull_day: \"Dia inteiro\",\n\n\t\tconfirm_recurring: \"Deseja editar todos esses eventos repetidos?\",\n\t\tsection_recurring: \"Repetir evento\",\n\t\tbutton_recurring: \"Desabilitar\",\n\t\tbutton_recurring_open: \"Habilitar\",\n\t\tbutton_edit_series: \"Editar a srie\",\n\t\tbutton_edit_occurrence: \"Editar uma cpia\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Dia\",\n\t\tdate: \"Data\",\n\t\tdescription: \"Descrio\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Ano\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Dia\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Grade\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Dirio\",\n\t\trepeat_radio_week: \"Semanal\",\n\t\trepeat_radio_month: \"Mensal\",\n\t\trepeat_radio_year: \"Anual\",\n\t\trepeat_radio_day_type: \"Cada\",\n\t\trepeat_text_day_count: \"dia(s)\",\n\t\trepeat_radio_day_type2: \"Cada trabalho dirio\",\n\t\trepeat_week: \" Repita cada\",\n\t\trepeat_text_week_count: \"semana:\",\n\t\trepeat_radio_month_type: \"Repetir\",\n\t\trepeat_radio_month_start: \"Em\",\n\t\trepeat_text_month_day: \"todo dia\",\n\t\trepeat_text_month_count: \"ms\",\n\t\trepeat_text_month_count2_before: \"todo\",\n\t\trepeat_text_month_count2_after: \"ms\",\n\t\trepeat_year_label: \"Em\",\n\t\tselect_year_day2: \"of\",\n\t\trepeat_text_year_day: \"dia\",\n\t\tselect_year_month: \"ms\",\n\t\trepeat_radio_end: \"Sem data final\",\n\t\trepeat_text_occurrences_count: \"ocorrncias\",\n\t\trepeat_radio_end3: \"Fim\",\n\t\trepeat_radio_end2: \"Depois\",\n\n\t\trepeat_never: \"Nunca\",\n\t\trepeat_daily: \"Todos os dias\",\n\t\trepeat_workdays: \"Todos os dias teis\",\n\t\trepeat_weekly: \"Toda semana\",\n\t\trepeat_monthly: \"Todo ms\",\n\t\trepeat_yearly: \"Todo ano\",\n\t\trepeat_custom: \"Personalizado\",\n\t\trepeat_freq_day: \"Dia\",\n\t\trepeat_freq_week: \"Semana\",\n\t\trepeat_freq_month: \"Ms\",\n\t\trepeat_freq_year: \"Ano\",\n\t\trepeat_on_date: \"Na data\",\n\t\trepeat_ends: \"Termina\",\n\n\t\tmonth_for_recurring: [\"Janeiro\", \"Fevereiro\", \"Maro\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n\t\tday_for_recurring: [\"Domingo\", \"Segunda\", \"Tera\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sbado\"]\n\t}\n};\n\n\n","/*\n\tTraducere de Ovidiu Lixandru: http://www.madball.ro\n */\n\nexport default {\n\tdate:{\n\t\tmonth_full:[\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"November\", \"December\"],\n\t\tmonth_short:[\"Ian\", \"Feb\", \"Mar\", \"Apr\", \"Mai\", \"Iun\", \"Iul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n\t\tday_full:[\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"],\n\t\tday_short:[\"Du\", \"Lu\", \"Ma\", \"Mi\", \"Jo\", \"Vi\", \"Sa\"]\n\t},\n\tlabels:{\n\t\tdhx_cal_today_button:\"Astazi\",\n\t\tday_tab:\"Zi\",\n\t\tweek_tab:\"Saptamana\",\n\t\tmonth_tab:\"Luna\",\n\t\tnew_event:\"Eveniment nou\",\n\t\ticon_save:\"Salveaza\",\n\t\ticon_cancel:\"Anuleaza\",\n\t\ticon_details:\"Detalii\",\n\t\ticon_edit:\"Editeaza\",\n\t\ticon_delete:\"Sterge\",\n\t\tconfirm_closing:\"Schimbarile nu vor fi salvate, esti sigur?\",//Your changes will be lost, are your sure ?\n\t\tconfirm_deleting:\"Evenimentul va fi sters permanent, esti sigur?\",\n\t\tsection_description:\"Descriere\",\n\t\tsection_time:\"Interval\",\n\t\tfull_day:\"Toata ziua\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring:\"Vrei sa editezi toata seria de evenimente repetate?\",\n\t\tsection_recurring:\"Repetare\",\n\t\tbutton_recurring:\"Dezactivata\",\n\t\tbutton_recurring_open:\"Activata\",\n\t\tbutton_edit_series: \"Editeaza serie\",\n\t\tbutton_edit_occurrence: \"Editeaza doar intrare\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab:\"Agenda\",\n\t\tdate:\"Data\",\n\t\tdescription:\"Descriere\",\n\n\t\t/*year view extension*/\n\t\tyear_tab:\"An\",\n\n\t\t/* week agenda extension */\n\t\tweek_agenda_tab: \"Agenda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Lista\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Zilnic\",\n\t\trepeat_radio_week: \"Saptamanal\",\n\t\trepeat_radio_month: \"Lunar\",\n\t\trepeat_radio_year: \"Anual\",\n\t\trepeat_radio_day_type: \"La fiecare\",\n\t\trepeat_text_day_count: \"zi(le)\",\n\t\trepeat_radio_day_type2: \"Fiecare zi lucratoare\",\n\t\trepeat_week: \" Repeta la fiecare\",\n\t\trepeat_text_week_count: \"saptamana in urmatoarele zile:\",\n\t\trepeat_radio_month_type: \"Repeta in\",\n\t\trepeat_radio_month_start: \"In a\",\n\t\trepeat_text_month_day: \"zi la fiecare\",\n\t\trepeat_text_month_count: \"luni\",\n\t\trepeat_text_month_count2_before: \"la fiecare\",\n\t\trepeat_text_month_count2_after: \"luni\",\n\t\trepeat_year_label: \"In\",\n\t\tselect_year_day2: \"a lunii\",\n\t\trepeat_text_year_day: \"zi a lunii\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"Fara data de sfarsit\",\n\t\trepeat_text_occurrences_count: \"evenimente\",\n\t\trepeat_radio_end3: \"La data\",\n\t\trepeat_radio_end2: \"Dupa\",\n\n\t\trepeat_never: \"Niciodat\",\n\t\trepeat_daily: \"n fiecare zi\",\n\t\trepeat_workdays: \"n fiecare zi lucrtoare\",\n\t\trepeat_weekly: \"n fiecare sptmn\",\n\t\trepeat_monthly: \"n fiecare lun\",\n\t\trepeat_yearly: \"n fiecare an\",\n\t\trepeat_custom: \"Personalizat\",\n\t\trepeat_freq_day: \"Zi\",\n\t\trepeat_freq_week: \"Sptmn\",\n\t\trepeat_freq_month: \"Lun\",\n\t\trepeat_freq_year: \"An\",\n\t\trepeat_on_date: \"La data\",\n\t\trepeat_ends: \"Se termin\",\n\n\t\tmonth_for_recurring: [\"Ianuarie\", \"Februarie\", \"Martie\", \"Aprilie\", \"Mai\", \"Iunie\", \"Iulie\", \"August\", \"Septembrie\", \"Octombrie\", \"Noiembrie\", \"Decembrie\"],\n\t\tday_for_recurring: [\"Duminica\", \"Luni\", \"Marti\", \"Miercuri\", \"Joi\", \"Vineri\", \"Sambata\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"Ma\", \"\", \"\", \"\", \"\", \"O\", \"\", \"\"],\n\t\tmonth_short: [\"\", \"\", \"Ma\", \"A\", \"Ma\", \"\", \"\", \"A\", \"\", \"\", \"\", \"\"],\n\t\tday_full: [ \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"\",\n\t\tday_tab: \"\",\n\t\tweek_tab: \"\",\n\t\tmonth_tab: \"\",\n\t\tnew_event: \" \",\n\t\ticon_save: \"\",\n\t\ticon_cancel: \"\",\n\t\ticon_details: \"\",\n\t\ticon_edit: \"\",\n\t\ticon_delete: \"\",\n\t\tconfirm_closing: \"\", //   , ?\n\t\tconfirm_deleting: \"   , ?\",\n\t\tsection_description: \"\",\n\t\tsection_time: \" \",\n\t\tfull_day: \" \",\n\n\t\tconfirm_recurring: \"      ?\",\n\t\tsection_recurring: \"\",\n\t\tbutton_recurring: \"\",\n\t\tbutton_recurring_open: \"\",\n\t\tbutton_edit_series: \" \",\n\t\tbutton_edit_occurrence: \" \",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"\",\n\t\tdate: \"\",\n\t\tdescription: \"\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"\",\n\t\trepeat_radio_week: \"\",\n\t\trepeat_radio_month: \"\",\n\t\trepeat_radio_year: \"\",\n\t\trepeat_radio_day_type: \"\",\n\t\trepeat_text_day_count: \"\",\n\t\trepeat_radio_day_type2: \"  \",\n\t\trepeat_week: \"  \",\n\t\trepeat_text_week_count: \" , :\",\n\t\trepeat_radio_month_type: \"\",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \"   \",\n\t\trepeat_text_month_count: \"\",\n\t\trepeat_text_month_count2_before: \" \",\n\t\trepeat_text_month_count2_after: \"\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"  \",\n\t\trepeat_text_occurrences_count: \"\",\n\t\trepeat_radio_end3: \" \",\n\t\trepeat_radio_end2: \"\",\n\n\t\trepeat_never: \"\",\n\t\trepeat_daily: \" \",\n\t\trepeat_workdays: \"  \",\n\t\trepeat_weekly: \" \",\n\t\trepeat_monthly: \" \",\n\t\trepeat_yearly: \" \",\n\t\trepeat_custom: \"\",\n\t\trepeat_freq_day: \"\",\n\t\trepeat_freq_week: \"\",\n\t\trepeat_freq_month: \"\",\n\t\trepeat_freq_year: \"\",\n\t\trepeat_on_date: \" \",\n\t\trepeat_ends: \"\",\n\n\t\tmonth_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t}\n};\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n\t\tday_full: [\"Nedelja\", \"Ponedeljek\", \"Torek\", \"Sreda\", \"etrtek\", \"Petek\", \"Sobota\"],\n\t\tday_short: [\"Ned\", \"Pon\", \"Tor\", \"Sre\", \"et\", \"Pet\", \"Sob\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Danes\",\n\t\tday_tab: \"Dan\",\n\t\tweek_tab: \"Teden\",\n\t\tmonth_tab: \"Mesec\",\n\t\tnew_event: \"Nov dogodek\",\n\t\ticon_save: \"Shrani\",\n\t\ticon_cancel: \"Preklii\",\n\t\ticon_details: \"Podrobnosti\",\n\t\ticon_edit: \"Uredi\",\n\t\ticon_delete: \"Izbrii\",\n\t\tconfirm_closing: \"\", //Spremembe ne bodo shranjene. elite nadaljevati ?\n\t\tconfirm_deleting: \"Dogodek bo izbrisan. elite nadaljevati?\",\n\t\tsection_description: \"Opis\",\n\t\tsection_time: \"asovni okvir\",\n\t\tfull_day: \"Ves dan\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"elite urediti celoten set ponavljajoih dogodkov?\",\n\t\tsection_recurring: \"Ponovi dogodek\",\n\t\tbutton_recurring: \"Onemogoeno\",\n\t\tbutton_recurring_open: \"Omogoeno\",\n\t\tbutton_edit_series: \"Edit series\",\n\t\tbutton_edit_occurrence: \"Edit occurrence\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Zadeva\",\n\t\tdate: \"Datum\",\n\t\tdescription: \"Opis\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Leto\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Zadeva\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Miza\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Dnevno\", //name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"Tedensko\", //name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"Meseno\",\n\t\trepeat_radio_year: \"Letno\",\n\t\trepeat_radio_day_type: \"Vsak\",\n\t\trepeat_text_day_count: \"dan\",\n\t\trepeat_radio_day_type2: \"Vsak delovni dan\",\n\t\trepeat_week: \" Ponavljaj vsak\",\n\t\trepeat_text_week_count: \"teden na naslednje dni:\",\n\t\trepeat_radio_month_type: \"Ponavljaj\",\n\t\trepeat_radio_month_start: \"Na\",\n\t\trepeat_text_month_day: \"dan vsak\",\n\t\trepeat_text_month_count: \"mesec\",\n\t\trepeat_text_month_count2_before: \"vsak\",\n\t\trepeat_text_month_count2_after: \"mesec\",\n\t\trepeat_year_label: \"Na\",\n\t\tselect_year_day2: \"od\",\n\t\trepeat_text_year_day: \"dan\",\n\t\tselect_year_month: \"mesec\",\n\t\trepeat_radio_end: \"Brez konnega datuma\",\n\t\trepeat_text_occurrences_count: \"pojavitve\",\n\t\trepeat_radio_end2: \"Po\",\n\t\trepeat_radio_end3: \"Konaj do\",\n\n\t\trepeat_never: \"Nikoli\",\n\t\trepeat_daily: \"Vsak dan\",\n\t\trepeat_workdays: \"Vsak delovni dan\",\n\t\trepeat_weekly: \"Vsak teden\",\n\t\trepeat_monthly: \"Vsak mesec\",\n\t\trepeat_yearly: \"Vsako leto\",\n\t\trepeat_custom: \"Po meri\",\n\t\trepeat_freq_day: \"Dan\",\n\t\trepeat_freq_week: \"Teden\",\n\t\trepeat_freq_month: \"Mesec\",\n\t\trepeat_freq_year: \"Leto\",\n\t\trepeat_on_date: \"Na datum\",\n\t\trepeat_ends: \"Kona se\",\n\n\t\tmonth_for_recurring: [\"Januar\", \"Februar\", \"Marec\", \"April\", \"Maj\", \"Junij\", \"Julij\", \"Avgust\", \"September\", \"Oktober\", \"November\", \"December\"],\n\t\tday_for_recurring: [\"Nedelja\", \"Ponedeljek\", \"Torek\", \"Sreda\", \"etrtek\", \"Petek\", \"Sobota\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Janur\", \"Februr\", \"Marec\", \"Aprl\", \"Mj\", \"Jn\", \"Jl\", \"August\", \"September\", \"Oktber\", \"November\", \"December\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Mj\", \"Jn\", \"Jl\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dec\"],\n\t\tday_full: [\"Nedea\", \"Pondelok\", \"Utorok\", \"Streda\", \"tvrtok\", \"Piatok\", \"Sobota\"],\n\t\tday_short: [\"Ne\", \"Po\", \"Ut\", \"St\", \"t\", \"Pi\", \"So\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Dnes\",\n\t\tday_tab: \"De\",\n\t\tweek_tab: \"Tde\",\n\t\tmonth_tab: \"Mesiac\",\n\t\tnew_event: \"Nov udalos\",\n\t\ticon_save: \"Uloi\",\n\t\ticon_cancel: \"Sp\",\n\t\ticon_details: \"Detail\",\n\t\ticon_edit: \"Edituj\",\n\t\ticon_delete: \"Zmaza\",\n\t\tconfirm_closing: \"Vae zmeny nebud uloen. Skutone?\", //Vae zmny budou ztraceny, opravdu ?\n\t\tconfirm_deleting: \"Udalos bude natrvalo vymazan. Skutone?\",\n\t\tsection_description: \"Poznmky\",\n\t\tsection_time: \"Doba platnosti\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Prajete si upravi cel radu opakovanch udalost?\",\n\t\tsection_recurring: \"Opakovanie udalosti\",\n\t\tbutton_recurring: \"Vypnut\",\n\t\tbutton_recurring_open: \"Zapnut\",\n\t\tbutton_edit_series: \"Upravi opakovania\",\n\t\tbutton_edit_occurrence: \"Upravi intancie\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Program\",\n\t\tdate: \"Dtum\",\n\t\tdescription: \"Poznmka\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Rok\",\n\t\tfull_day: \"Cel de\", // Full day\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Program\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Mrieka\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Denne\",\n\t\trepeat_radio_week: \"Tdenne\",\n\t\trepeat_radio_month: \"Mesane\",\n\t\trepeat_radio_year: \"Rone\",\n\t\trepeat_radio_day_type: \"Kad\",\n\t\trepeat_text_day_count: \"de\",\n\t\trepeat_radio_day_type2: \"Kad prac. de\",\n\t\trepeat_week: \"Opakova kad\",\n\t\trepeat_text_week_count: \"tde v doch:\",\n\t\trepeat_radio_month_type: \"Opakova\",\n\t\trepeat_radio_month_start: \"On\",\n\t\trepeat_text_month_day: \"de kad\",\n\t\trepeat_text_month_count: \"mesiac\",\n\t\trepeat_text_month_count2_before: \"kad\",\n\t\trepeat_text_month_count2_after: \"mesiac\",\n\t\trepeat_year_label: \"On\",\n\t\tselect_year_day2: \"poas\",\n\t\trepeat_text_year_day: \"de\",\n\t\tselect_year_month: \"mesiac\",\n\t\trepeat_radio_end: \"Bez dtumu ukonenia\",\n\t\trepeat_text_occurrences_count: \"udalostiach\",\n\t\trepeat_radio_end3: \"Ukoni\",\n\t\trepeat_radio_end2: \"Po\",\n\n\t\trepeat_never: \"Nikdy\",\n\t\trepeat_daily: \"Kad de\",\n\t\trepeat_workdays: \"Kad pracovn de\",\n\t\trepeat_weekly: \"Kad tde\",\n\t\trepeat_monthly: \"Kad mesiac\",\n\t\trepeat_yearly: \"Kad rok\",\n\t\trepeat_custom: \"Vlastn\",\n\t\trepeat_freq_day: \"De\",\n\t\trepeat_freq_week: \"Tde\",\n\t\trepeat_freq_month: \"Mesiac\",\n\t\trepeat_freq_year: \"Rok\",\n\t\trepeat_on_date: \"Na dtum\",\n\t\trepeat_ends: \"Koniec\",\n\n\t\tmonth_for_recurring: [\"Janur\", \"Februr\", \"Marec\", \"Aprl\", \"Mj\", \"Jn\", \"Jl\", \"August\", \"September\", \"Oktber\", \"November\", \"December\"],\n\t\tday_for_recurring: [\"Nedea\", \"Pondelok\", \"Utorok\", \"Streda\", \"tvrtok\", \"Piatok\", \"Sobota\"]\n\t}\n};\n\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\n\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Maj\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Okt\", \"Nov\", \"Dec\"],\n\t\tday_full: [\"Sndag\", \"Mndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"],\n\t\tday_short: [\"Sn\", \"Mn\", \"Tis\", \"Ons\", \"Tor\", \"Fre\", \"Lr\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Idag\",\n\t\tday_tab: \"Dag\",\n\t\tweek_tab: \"Vecka\",\n\t\tmonth_tab: \"Mnad\",\n\t\tnew_event: \"Ny hndelse\",\n\t\ticon_save: \"Spara\",\n\t\ticon_cancel: \"ngra\",\n\t\ticon_details: \"Detaljer\",\n\t\ticon_edit: \"ndra\",\n\t\ticon_delete: \"Ta bort\",\n\t\tconfirm_closing: \"\", //Dina frndingar kommer g frlorade, r du sker?\n\t\tconfirm_deleting: \"r du sker p att du vill ta bort hndelsen permanent?\",\n\t\tsection_description: \"Beskrivning\",\n\t\tsection_time: \"Tid\",\n\t\tfull_day: \"Hela dagen\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Vill du redigera hela serien med repeterande hndelser?\",\n\t\tsection_recurring: \"Upprepa hndelse\",\n\t\tbutton_recurring: \"Inaktiverat\",\n\t\tbutton_recurring_open: \"Aktiverat\",\n\t\tbutton_edit_series: \"Redigera serien\",\n\t\tbutton_edit_occurrence: \"Redigera en kopia\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Dagordning\",\n\t\tdate: \"Datum\",\n\t\tdescription: \"Beskrivning\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"r\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Dagordning\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Galler\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Dra fr att skapa ny\",\n\t\tdrag_to_move:\"Dra fr att flytta\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Dagligen\",\n\t\trepeat_radio_week: \"Veckovis\",\n\t\trepeat_radio_month: \"Mnadsvis\",\n\t\trepeat_radio_year: \"rligen\",\n\t\trepeat_radio_day_type: \"Var\",\n\t\trepeat_text_day_count: \"dag\",\n\t\trepeat_radio_day_type2: \"Varje arbetsdag\",\n\t\trepeat_week: \" Upprepa var\",\n\t\trepeat_text_week_count: \"vecka dessa dagar:\",\n\t\trepeat_radio_month_type: \"Upprepa\",\n\t\trepeat_radio_month_start: \"Den\",\n\t\trepeat_text_month_day: \"dagen var\",\n\t\trepeat_text_month_count: \"mnad\",\n\t\trepeat_text_month_count2_before: \"var\",\n\t\trepeat_text_month_count2_after: \"mnad\",\n\t\trepeat_year_label: \"Den\",\n\t\tselect_year_day2: \"i\",\n\t\trepeat_text_year_day: \"dag i\",\n\t\tselect_year_month: \"mnad\",\n\t\trepeat_radio_end: \"Inget slutdatum\",\n\t\trepeat_text_occurrences_count: \"upprepningar\",\n\t\trepeat_radio_end3: \"Sluta efter\",\n\t\trepeat_radio_end2: \"Efter\",\n\n\t\trepeat_never: \"Aldrig\",\n\t\trepeat_daily: \"Varje dag\",\n\t\trepeat_workdays: \"Varje vardag\",\n\t\trepeat_weekly: \"Varje vecka\",\n\t\trepeat_monthly: \"Varje mnad\",\n\t\trepeat_yearly: \"Varje r\",\n\t\trepeat_custom: \"Anpassad\",\n\t\trepeat_freq_day: \"Dag\",\n\t\trepeat_freq_week: \"Vecka\",\n\t\trepeat_freq_month: \"Mnad\",\n\t\trepeat_freq_year: \"r\",\n\t\trepeat_on_date: \"P datum\",\n\t\trepeat_ends: \"Slutar\",\n\n\t\tmonth_for_recurring: [\"Januari\", \"Februari\", \"Mars\", \"April\", \"Maj\", \"Juni\", \"Juli\", \"Augusti\", \"September\", \"Oktober\", \"November\", \"December\"],\n\t\tday_for_recurring: [\"Sndag\", \"Mndag\", \"Tisdag\", \"Onsdag\", \"Torsdag\", \"Fredag\", \"Lrdag\"]\n\t}\n};\n","export default {\n\tdate: {\n\t\tmonth_full: [\"Ocak\", \"ubat\", \"Mart\", \"Nisan\", \"Mays\", \"Haziran\", \"Temmuz\", \"Austos\", \"Eyll\", \"Ekim\", \"Kasm\", \"Aralk\"],\n\t\tmonth_short: [\"Oca\", \"ub\", \"Mar\", \"Nis\", \"May\", \"Haz\", \"Tem\", \"Au\", \"Eyl\", \"Eki\", \"Kas\", \"Ara\"],\n\t\tday_full: [\"Pazar\", \"Pazartes,\", \"Sal\", \"aramba\", \"Perembe\", \"Cuma\", \"Cumartesi\"],\n\t\tday_short: [\"Paz\", \"Pts\", \"Sal\", \"ar\", \"Per\", \"Cum\", \"Cts\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"Bugn\",\n\t\tday_tab: \"Gn\",\n\t\tweek_tab: \"Hafta\",\n\t\tmonth_tab: \"Ay\",\n\t\tnew_event: \"Uygun\",\n\t\ticon_save: \"Kaydet\",\n\t\ticon_cancel: \"ptal\",\n\t\ticon_details: \"Detaylar\",\n\t\ticon_edit: \"Dzenle\",\n\t\ticon_delete: \"Sil\",\n\t\tconfirm_closing: \"\", //Your changes will be lost, are your sure ?\n\t\tconfirm_deleting: \"Etkinlik silinecek, devam?\",\n\t\tsection_description: \"Aklama\",\n\t\tsection_time: \"Zaman aral\",\n\t\tfull_day: \"Tam gn\",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"Tm tekrar eden etkinlikler silinecek, devam?\",\n\t\tsection_recurring: \"Etkinlii tekrarla\",\n\t\tbutton_recurring: \"Pasif\",\n\t\tbutton_recurring_open: \"Aktif\",\n\t\tbutton_edit_series: \"Dizi dzenleme\",\n\t\tbutton_edit_occurrence: \"Bir kopyasn dzenleyin\",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"Ajanda\",\n\t\tdate: \"Tarih\",\n\t\tdescription: \"Aklama\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"Yl\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"Ajanda\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"Izgara\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"Gnlk\", //name=\"repeat\" value=\"day\"\n\t\trepeat_radio_week: \"Haftalk\", //name=\"repeat\" value=\"week\n\t\trepeat_radio_month: \"Aylk\",\n\t\trepeat_radio_year: \"Yllk\",\n\t\trepeat_radio_day_type: \"Her\",\n\t\trepeat_text_day_count: \"gn\",\n\t\trepeat_radio_day_type2: \"Her i gn\",\n\t\trepeat_week: \" Tekrar her\",\n\t\trepeat_text_week_count: \"hafta u gnlerde:\",\n\t\trepeat_radio_month_type: \"Tekrar et\",\n\t\trepeat_radio_month_start: \"Tarihinde\",\n\t\trepeat_text_month_day: \"gn her\",\n\t\trepeat_text_month_count: \"ay\",\n\t\trepeat_text_month_count2_before: \"her\",\n\t\trepeat_text_month_count2_after: \"ay\",\n\t\trepeat_year_label: \"Tarihinde\",\n\t\tselect_year_day2: \"ayn\",\n\t\trepeat_text_year_day: \"gn\",\n\t\tselect_year_month: \"ay\",\n\t\trepeat_radio_end: \"Biti tarihi yok\",\n\t\trepeat_text_occurrences_count: \"olay\",\n\t\trepeat_radio_end2: \"Sonra\",\n\t\trepeat_radio_end3: \"Tarihinde bitir\",\n\n\t\trepeat_never: \"Asla\",\n\t\trepeat_daily: \"Her gn\",\n\t\trepeat_workdays: \"Her i gn\",\n\t\trepeat_weekly: \"Her hafta\",\n\t\trepeat_monthly: \"Her ay\",\n\t\trepeat_yearly: \"Her yl\",\n\t\trepeat_custom: \"zel\",\n\t\trepeat_freq_day: \"Gn\",\n\t\trepeat_freq_week: \"Hafta\",\n\t\trepeat_freq_month: \"Ay\",\n\t\trepeat_freq_year: \"Yl\",\n\t\trepeat_on_date: \"Tarihinde\",\n\t\trepeat_ends: \"Biter\",\n\n\t\tmonth_for_recurring: [\"Ocak\", \"ubat\", \"Mart\", \"Nisan\", \"Mays\", \"Haziran\", \"Temmuz\", \"Austos\", \"Eyll\", \"Ekim\", \"Kasm\", \"Aralk\"],\n\t\tday_for_recurring: [\"Pazar\", \"Pazartesi\", \"Sal\", \"aramba\", \"Perembe\", \"Cuma\", \"Cumartesi\"]\n\t}\n};","export default {\n\tdate: {\n\t\tmonth_full: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tmonth_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_full: [\"\", \"\", \"\", \"\", \"\", \"'\", \"\"],\n\t\tday_short: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"]\n\t},\n\tlabels: {\n\t\tdhx_cal_today_button: \"\",\n\t\tday_tab: \"\",\n\t\tweek_tab: \"\",\n\t\tmonth_tab: \"\",\n\t\tnew_event: \" \",\n\t\ticon_save: \"\",\n\t\ticon_cancel: \"\",\n\t\ticon_details: \"\",\n\t\ticon_edit: \"\",\n\t\ticon_delete: \"\",\n\t\tconfirm_closing: \"\", //  .   ?\n\t\tconfirm_deleting: \"  .  ?\",\n\t\tsection_description: \"\",\n\t\tsection_time: \" \",\n\t\tfull_day: \" \",\n\n\t\t/*recurring events*/\n\t\tconfirm_recurring: \"     ?\",\n\t\tsection_recurring: \" \",\n\t\tbutton_recurring: \"\",\n\t\tbutton_recurring_open: \"\",\n\t\tbutton_edit_series: \" \",\n\t\tbutton_edit_occurrence: \" \",\n\t\tbutton_edit_occurrence_and_following: \"This and following events\",\n\t\t\n\t\t/*agenda view extension*/\n\t\tagenda_tab: \"\",\n\t\tdate: \"\",\n\t\tdescription: \"\",\n\n\t\t/*year view extension*/\n\t\tyear_tab: \"\",\n\n\t\t/*week agenda view extension*/\n\t\tweek_agenda_tab: \"\",\n\n\t\t/*grid view extension*/\n\t\tgrid_tab: \"\",\n\n\t\t/* touch tooltip*/\n\t\tdrag_to_create:\"Drag to create\",\n\t\tdrag_to_move:\"Drag to move\",\n\n\t\t/* dhtmlx message default buttons */\n\t\tmessage_ok:\"OK\",\n\t\tmessage_cancel:\"Cancel\",\n\n\t\t/* wai aria labels for non-text controls */\n\t\tnext: \"Next\",\n\t\tprev: \"Previous\",\n\t\tyear: \"Year\",\n\t\tmonth: \"Month\",\n\t\tday: \"Day\",\n\t\thour:\"Hour\",\n\t\tminute: \"Minute\",\n\n\t\t/* recurring event components */\n\t\trepeat_radio_day: \"\",\n\t\trepeat_radio_week: \"\",\n\t\trepeat_radio_month: \"\",\n\t\trepeat_radio_year: \"\",\n\t\trepeat_radio_day_type: \"\",\n\t\trepeat_text_day_count: \"\",\n\t\trepeat_radio_day_type2: \"  \",\n\t\trepeat_week: \"  \",\n\t\trepeat_text_week_count: \" , :\",\n\t\trepeat_radio_month_type: \"\",\n\t\trepeat_radio_month_start: \"\",\n\t\trepeat_text_month_day: \"   \",\n\t\trepeat_text_month_count: \"\",\n\t\trepeat_text_month_count2_before: \" \",\n\t\trepeat_text_month_count2_after: \"\",\n\t\trepeat_year_label: \"\",\n\t\tselect_year_day2: \"\",\n\t\trepeat_text_year_day: \"\",\n\t\tselect_year_month: \"\",\n\t\trepeat_radio_end: \"  \",\n\t\trepeat_text_occurrences_count: \"\",\n\t\trepeat_radio_end3: \" \",\n\t\trepeat_radio_end2: \"\",\n\n\t\trepeat_never: \"\",\n\t\trepeat_daily: \"\",\n\t\trepeat_workdays: \"   \",\n\t\trepeat_weekly: \"\",\n\t\trepeat_monthly: \"\",\n\t\trepeat_yearly: \"\",\n\t\trepeat_custom: \"\",\n\t\trepeat_freq_day: \"\",\n\t\trepeat_freq_week: \"\",\n\t\trepeat_freq_month: \"\",\n\t\trepeat_freq_year: \"\",\n\t\trepeat_on_date: \" \",\n\t\trepeat_ends: \"\",\n\n\t\tmonth_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n\t\tday_for_recurring: [\"\", \"\", \"\", \"\", \"\", \"'\", \"\"]\n\t}\n};\n","import eventable from \"../utils/eventable\";\n\nexport class DatePicker {\n\tconstructor(scheduler, container, state = {}) {\n\t\tthis.state = {\n\t\t\tdate: new Date(),\n\t\t\tmodes: ['days', 'months', 'years'],\n\t\t\tcurrentRange: [],\n\t\t\teventDates: [],\n\t\t\tfilterDays: null,\n\t\t\tcurrentModeIndex: 0,\n\t\t\t...state\n\t\t};\n\t\tthis.container = null;\n\t\tthis.element = null;\n\t\tthis.onStateChangeHandlers = [];\n\t\tthis.scheduler = scheduler;\n\t\tthis._domEvents = scheduler._createDomEventScope();\n\t\tthis.state = this.getState();\n\t\teventable(this);\n\t\tif(container){\n\n\t\t\tthis.container = container;\n\t\t\tthis.render(this.container);\n\t\t}\n\n\t\tthis.onStateChange((oldState, newState) => {\n\t\t\tthis.callEvent(\"onStateChange\", [newState, oldState]);\n\t\t});\n\t}\n\n\tgetState() {\n\t\treturn { \n\t\t\t...this.state,\n\t\t\tmode: this.state.modes[this.state.currentModeIndex]\n\t\t};\n\t}\n\n\tsetState(newState) {\n\t\tconst oldState = { ...this.state };\n\t\tif(newState.mode){\n\t\t\tnewState.currentModeIndex = this.state.modes.indexOf(newState.mode);\n\t\t}\n\t\tthis.state = { ...this.state, ...newState };\n\n\t\tthis._notifyStateChange(oldState, this.state);\n\n\t\tif (this.container) {\n\t\t\tthis.render(this.container);\n\t\t}\n\t}\n\n\tonStateChange(handler) {\n\t\tthis.onStateChangeHandlers.push(handler);\n\n\t\t// function to remove the handler\n\t\treturn () => {\n\t\t\tconst index = this.onStateChangeHandlers.indexOf(handler);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.onStateChangeHandlers.splice(index, 1);\n\t\t\t}\n\t\t};\n\t}\n\n\t_notifyStateChange(oldState, newState) {\n\t\tthis.onStateChangeHandlers.forEach(handler => handler(oldState, newState));\n\t}\n\n\t_adjustDate(direction) {\n\n\t\tconst {mode, date} = this.getState();\n\t\tconst newDate = new Date(date);\n\t\tif (mode === 'days') {\n\t\t\tnewDate.setMonth(date.getMonth() + direction);\n\t\t} else if (mode === 'months') {\n\t\t\tnewDate.setFullYear(date.getFullYear() + direction);\n\t\t} else {\n\t\t\tnewDate.setFullYear(date.getFullYear() + direction * 10);\n\t\t}\n\t\tthis.setState({ date: newDate });\n\t}\n\n\t_toggleMode() {\n\t\tconst newIndex = (this.state.currentModeIndex + 1) % this.state.modes.length;\n\t\tthis.setState({ currentModeIndex: newIndex });\n\t}\n\n\t_renderCalendarHeader(container) {\n\t\tconst {mode, date} = this.getState();\n\n\t\tconst header = document.createElement('div');\n\t\theader.classList.add('dhx_cal_datepicker_header');\n\n\t\tconst backwardArrow = document.createElement('button');\n\n\t\tbackwardArrow.classList.add(\"dhx_cal_datepicker_arrow\", \"scheduler_icon\", \"arrow_left\");\n\t\theader.appendChild(backwardArrow);\n\n\t\tconst monthLabel = document.createElement('div');\n\t\tmonthLabel.classList.add('dhx_cal_datepicker_title');\n\n\t\tif (mode === 'days') {\n\t\t\tmonthLabel.innerText = date.toLocaleString('default', { month: 'long' }) + ' ' + date.getFullYear();\n\t\t} else if (mode === 'months') {\n\t\t\tmonthLabel.innerText = date.getFullYear();\n\t\t} else {\n\t\t\tconst startYear = Math.floor(date.getFullYear() / 10) * 10;\n\t\t\tmonthLabel.innerText = `${startYear} - ${startYear + 9}`;\n\t\t}\n\n\t\tthis._domEvents.attach(monthLabel, \"click\", this._toggleMode.bind(this));\n\t\theader.appendChild(monthLabel);\n\n\t\tconst forwardArrow = document.createElement('button');\n\n\t\tforwardArrow.classList.add(\"dhx_cal_datepicker_arrow\", \"scheduler_icon\", \"arrow_right\");\n\t\theader.appendChild(forwardArrow);\n\n\t\tcontainer.appendChild(header);\n\n\t\tthis._domEvents.attach(backwardArrow, \"click\", this._adjustDate.bind(this, -1));\n\t\tthis._domEvents.attach(forwardArrow, \"click\", this._adjustDate.bind(this, 1));\n\t}\n\n\trender(container) {\n\t\tthis._domEvents.detachAll();\n\t\tthis.container = container || this.container; \n\t\tthis.container.innerHTML = '';\n\n\t\tif(!this.element){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"dhx_cal_datepicker\");\n\t\t}\n\t\tthis.element.innerHTML = '';\n\t\tthis.container.appendChild(this.element);\n\n\t\tthis._renderCalendarHeader(this.element);\n\t\tconst dataContainer = document.createElement(\"div\");\n\t\tdataContainer.classList.add(\"dhx_cal_datepicker_data\");\n\t\tthis.element.appendChild(dataContainer);\n\n\t\tconst {mode} = this.getState();\n\t\tif (mode === 'days') {\n\t\t\tthis._renderDayGrid(dataContainer);\n\t\t} else if (mode === 'months') {\n\t\t\tthis._renderMonthGrid(dataContainer);\n\t\t} else {\n\t\t\tthis._renderYearGrid(dataContainer);\n\t\t}\n\t}\n\n\t_renderDayGridHeader(daysOfWeekContainer) {\n\t\tconst {date, filterDays} = this.getState();\n\t\tconst scheduler = this.scheduler;\n\n\t\tlet currentDate = scheduler.date.week_start(new Date(date));\n\t\tconst maxDate = scheduler.date.add(scheduler.date.week_start(new Date(date)), 1, 'week');\n\n\t\tdaysOfWeekContainer.classList.add('dhx_cal_datepicker_days');\n\n\t\tconst labelFormat = scheduler.date.date_to_str(\"%D\");\n\n\t\twhile (currentDate.valueOf() < maxDate.valueOf()) {\n\t\t\tif(!(filterDays && filterDays(currentDate))){\n\t\t\t\tconst label = labelFormat(currentDate);\n\n\t\t\t\tconst dayElement = document.createElement('div');\n\t\t\t\tdayElement.setAttribute(\"data-day\", currentDate.getDay());\n\t\t\t\tdayElement.classList.add('dhx_cal_datepicker_dayname');\n\t\t\t\tdayElement.innerText = label;\n\t\t\t\tdaysOfWeekContainer.appendChild(dayElement);\n\t\t\t}\n\n\t\t\tcurrentDate = scheduler.date.add(currentDate, 1, 'day');\n\t\t}\n\t}\n\n\t_weeksBetween(min, max) {\n\t\tconst scheduler = this.scheduler;\n\t\tlet weeks = 0;\n\t\tlet currWeek = new Date(min);\n\t\twhile(currWeek.valueOf() < max.valueOf()){\n\t\t\tweeks += 1;\n\t\t\tcurrWeek = scheduler.date.week_start(scheduler.date.add(currWeek, 1, \"week\"));\n\t\t}\n\t\treturn weeks;\n\t}\n\n\t_renderDayGrid(container) {\n\t\tconst {date, currentRange, eventDates, minWeeks, filterDays} = this.getState();\n\n\t\tlet minSchedulerDate = currentRange[0];\n\t\tlet maxSchedulerDate = currentRange[1];\n\n\t\tconst eventDaysTable = eventDates.reduce((acc, date) => {\n\t\t\tconst dayStart = this.scheduler.date.day_start(new Date(date));\n\t\t\tacc[dayStart.valueOf()] = true;\n\t\t\treturn acc;\n\t\t}, {});\n\n\n\t\t// Render Days of the Week\n\t\tconst daysOfWeekContainer = document.createElement('div');\n\t\tthis._renderDayGridHeader(daysOfWeekContainer);\n\t\tconst weekLength = daysOfWeekContainer.children.length;\n\t\tcontainer.appendChild(daysOfWeekContainer);\n\t\tif(weekLength !== 7){\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-week-length\", weekLength);\n\t\t}\n\n\t\tconst scheduler = this.scheduler;\n\t\tconst firstDate = scheduler.date.week_start(scheduler.date.month_start(new Date(date)));\n\t\tconst monthStart = scheduler.date.month_start(new Date(date));\n\t\tconst monthEnd = scheduler.date.add(scheduler.date.month_start(new Date(date)), 1, 'month');\n\t\tlet lastDate = scheduler.date.add(scheduler.date.month_start(new Date(date)), 1, 'month');\n\t\tconst currentCalDate = scheduler.date.date_part(scheduler._currentDate());\n\t\tif(lastDate.getDay() !== 0){\n\t\t\tlastDate = scheduler.date.add(scheduler.date.week_start(lastDate), 1, \"week\");\n\t\t}\n\n\t\tlet weeks = this._weeksBetween(firstDate, lastDate);\n\t\tif(minWeeks && weeks < minWeeks){\n\t\t\tlastDate = scheduler.date.add(lastDate, (minWeeks - weeks), \"week\");\n\t\t}\n\n\t\tlet currDate = firstDate;\n\n\t\tconst dayGridContainer = document.createElement('div');\n\t\tdayGridContainer.classList.add('dhx_cal_datepicker_days');\n\n\t\tthis._domEvents.attach(dayGridContainer, \"click\", (event) => {\n\t\t\tconst dateCell = event.target.closest(\"[data-cell-date]\");\n\t\t\tconst date = new Date(dateCell.getAttribute(\"data-cell-date\"));\n\t\t\tthis.callEvent(\"onDateClick\", [date, event]);\n\t\t});\n\n\t\twhile(currDate.valueOf() < lastDate.valueOf()){\n\t\t\tif(!(filterDays && filterDays(currDate))){\n\n\t\t\t\tconst dayElement = document.createElement('div');\n\t\t\t\tdayElement.setAttribute(\"data-cell-date\", scheduler.templates.format_date(currDate));\n\t\t\t\tdayElement.setAttribute(\"data-day\", currDate.getDay());\n\t\t\t\t// GS-2615: apply month template to year view\n\t\t\t\tdayElement.innerHTML = scheduler.templates.month_day(currDate);\n\n\t\t\t\tif(currDate.valueOf() < monthStart.valueOf()){\n\t\t\t\t\tdayElement.classList.add('dhx_before');\n\t\t\t\t}else if(currDate.valueOf() >= monthEnd.valueOf()){\t\n\t\t\t\t\tdayElement.classList.add('dhx_after');\n\t\t\t\t}\n\n\t\t\t\tif(currDate.getDay() === 0 || currDate.getDay() === 6){\n\t\t\t\t\tdayElement.classList.add(\"dhx_cal_datepicker_weekend\");\n\t\t\t\t}\n\n\t\t\t\tif(currDate.valueOf() == currentCalDate.valueOf()){\n\t\t\t\t\tdayElement.classList.add(\"dhx_now\");\n\t\t\t\t}\n\n\t\t\t\tif(minSchedulerDate && maxSchedulerDate){\n\t\t\t\t\tif(currDate.valueOf() >= minSchedulerDate.valueOf() && currDate.valueOf() < maxSchedulerDate.valueOf()){\n\t\t\t\t\t\tdayElement.classList.add('dhx_cal_datepicker_current');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(eventDaysTable[currDate.valueOf()]){\n\t\t\t\t\tdayElement.classList.add('dhx_cal_datepicker_event');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdayElement.classList.add('dhx_cal_datepicker_date');\n\n\t\t\t\tdayGridContainer.appendChild(dayElement);\n\t\t\t}\n\t\t\tcurrDate = scheduler.date.add(currDate, 1, 'day');\n\t\t}\n\n\t\tcontainer.appendChild(dayGridContainer);\n\n\t}\n\n\t_renderMonthGrid(container) {\n\t\tconst {date} = this.getState();\n\n\t\tconst wrapper = document.createElement('div');\n\t\twrapper.classList.add(\"dhx_cal_datepicker_months\");\n\n\t\tconst months = [];\n\t\tfor(let i = 0; i < 12; i++){\n\t\t\tmonths.push(new Date(date.getFullYear(), i, 1));\n\t\t}\n\n\t\tconst formatLabel = this.scheduler.date.date_to_str(\"%M\");\n\t\tmonths.forEach(month => {\n\t\t\tconst monthElement = document.createElement('div');\n\t\t\tmonthElement.classList.add('dhx_cal_datepicker_month');\n\t\t\tif(date.getMonth() === month.getMonth()){\n\t\t\t\tmonthElement.classList.add('dhx_cal_datepicker_current');\n\t\t\t}\n\t\t\tmonthElement.setAttribute(\"data-month\", month.getMonth());\n\t\t\tmonthElement.innerHTML = formatLabel(month);\n\t\t\tthis._domEvents.attach(monthElement, \"click\", () => {\n\t\t\t\tconst newDate = new Date(month);\n\t\t\t\tthis.setState({\n\t\t\t\t\tdate: newDate,\n\t\t\t\t\tmode: 'days'\n\t\t\t\t});\n\t\t\t});\n\t\t\twrapper.appendChild(monthElement);\n\t\t});\n\t\tcontainer.appendChild(wrapper);\n\n\t\tconst doneArea = document.createElement(\"div\");\n\t\tdoneArea.classList.add(\"dhx_cal_datepicker_done\");\n\t\tconst doneBtn = document.createElement(\"button\");\n\t\tdoneBtn.innerText = \"Done\";\n\t\tdoneBtn.classList.add(\"dhx_cal_datepicker_done_btn\");\n\t\tthis._domEvents.attach(doneBtn, \"click\", () => {\n\t\t\tthis.setState({\n\t\t\t\tmode: 'days'\n\t\t\t});\n\t\t});\n\t\tdoneArea.appendChild(doneBtn);\n\t\tcontainer.appendChild(doneArea);\n\t}\n\n\t_renderYearGrid(container) {\n\t\tconst {date} = this.getState();\n\t\tconst startYear = Math.floor(date.getFullYear() / 10) * 10;\n\t\t\n\t\tconst wrapper = document.createElement('div');\n\t\twrapper.classList.add(\"dhx_cal_datepicker_years\");\n\t\tfor (let i = startYear - 1; i <= startYear + 10; i++) {\n\t\t\tconst yearElement = document.createElement('div');\n\t\t\tyearElement.innerText = i;\n\t\t\tyearElement.classList.add('dhx_cal_datepicker_year');\n\t\t\tyearElement.setAttribute(\"data-year\", i);\n\t\t\tif(date.getFullYear() === i){\n\t\t\t\tyearElement.classList.add('dhx_cal_datepicker_current');\n\t\t\t}\n\t\t\tthis._domEvents.attach(yearElement, \"click\", () => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tdate: new Date(i, date.getMonth(), 1),\n\t\t\t\t\tmode: 'months'\n\t\t\t\t});\n\t\t\t});\n\t\t\twrapper.appendChild(yearElement);\n\t\t\t\n\t\t}\n\t\tcontainer.appendChild(wrapper);\n\n\t\tconst doneArea = document.createElement(\"div\");\n\t\tdoneArea.classList.add(\"dhx_cal_datepicker_done\");\n\t\tconst doneBtn = document.createElement(\"button\");\n\t\tdoneBtn.innerText = \"Done\";\n\t\tdoneBtn.classList.add(\"dhx_cal_datepicker_done_btn\");\n\t\tthis._domEvents.attach(doneBtn, \"click\", () => {\n\t\t\tthis.setState({\n\t\t\t\tmode: 'months'\n\t\t\t});\n\t\t});\n\t\tdoneArea.appendChild(doneBtn);\n\t\tcontainer.appendChild(doneArea);\n\t}\n\n\tdestructor(){\n\t\tthis.onStateChangeHandlers = [];\n\t\tif(this.element){\n\t\t\tthis.element.innerHTML = '';\n\t\t\tthis.element.remove();\n\t\t}\n\n\t\tthis._domEvents.detachAll();\n\t\tthis.callEvent(\"onDestroy\", []);\n\t\tthis.detachAllEvents();\n\n\t\tthis.scheduler = null;\n\t}\n}","// import \"./css/dhtmlxscheduler_terrace\";\n// import \"./css/dhtmlxscheduler_material\";\n// import \"./css/dhtmlxscheduler_material_nofont\";\n// import \"./css/dhtmlxscheduler_flat\";\n// import \"./css/dhtmlxscheduler_contrast_black\";\n// import \"./css/dhtmlxscheduler_contrast_white\";\n\nimport addPlugins from \"./plugins\";\nimport stateProvider from \"./core/state\";\nimport assert from \"./core/common/assert\";\nimport common_errors from \"./core/common_errors\";\nimport connector from \"./core/connector\";\nimport schedulerCore from \"./core/scheduler\";\nimport common from \"./core/common\";\nimport wai_aria from \"./core/wai_aria\";\nimport utils from \"./core/utils/utils\";\nimport dom_helpers from \"./core/utils/dom_helpers\";\nimport env from \"./utils/env\";\nimport destructor from \"./core/destructor\";\nimport ajax from \"./core/utils/ajax\";\nimport base from \"./core/base\";\nimport config from \"./core/config\";\nimport event from \"./core/event\";\nimport event_highlight from \"./core/event_highlight\";\nimport load from \"./core/load\";\nimport lightbox from \"./core/lightbox\";\nimport touch from \"./core/touch\";\nimport dhtmlx_suite_hooks from \"./core/dhtmlx/dhtmlx_suite_hooks\";\nimport skins from \"./core/skins\";\nimport jquery from \"./core/jquery\";\nimport delay_render from \"./core/delay_render\";\nimport dataProcessorExtend from \"./core/dataprocessor/dataprocessor\";\nimport message from \"./core/message\";\nimport i18nFactory from \"./locale\";\n\nimport voidFirst from \"./publish_helpers/void_script_first\";\nimport voidSecond from \"./publish_helpers/void_script_second\";\nimport voidThird from \"./publish_helpers/void_script_third\";\n\n//import datepickerHeader from \"./core/clickable_header\";\n\nimport { DatePicker } from \"./core/datepicker\";\n\nexport default function(extensionManager) {\n\n\tconst scheduler = { version: VERSION };\n\t\n\tscheduler.$stateProvider = stateProvider();\n\n\tscheduler.getState = scheduler.$stateProvider.getState;\n\tcommon_errors(scheduler);\n\tcommon(scheduler);\n\tschedulerCore(scheduler);\n\twai_aria(scheduler);\n\t//utils(scheduler);\n\n\tscheduler.utils = utils;\n\tscheduler.$domHelpers = dom_helpers;\n\tscheduler.utils.dom = dom_helpers;\n\tscheduler.uid = utils.uid;\n\tscheduler.mixin = utils.mixin;\n\tscheduler.defined = utils.defined;\n\tscheduler.assert = assert(scheduler);\n\tscheduler.copy = utils.copy;\n\n\tscheduler._createDatePicker = function(container, config){\n\t\treturn new DatePicker(scheduler, container, config);\n\t};\n\n\t//datepickerHeader(scheduler);\n\n\n\t//old api compatibility\n\tscheduler._getFocusableNodes = dom_helpers.getFocusableNodes;\n\tscheduler._getClassName = dom_helpers.getClassName;\n\tscheduler._locate_css = dom_helpers.locateCss;\n\n\tconst messageApi = message(scheduler);\n\tscheduler.utils.mixin(scheduler, messageApi);\n\n\tscheduler.env = scheduler.$env = env;\n\tscheduler.Promise = window.Promise;\n\tdestructor(scheduler);\n\tajax(scheduler);\n\tvoidFirst(scheduler);\n\tbase(scheduler);\n\tconfig(scheduler);\n\tevent(scheduler);\n\tevent_highlight(scheduler);\n\tload(scheduler);\n\tlightbox(scheduler);\n\ttouch(scheduler);\n\tdhtmlx_suite_hooks(scheduler);\n\tvoidSecond(scheduler);\n\tskins(scheduler);\n\tjquery(scheduler);\n\tdelay_render(scheduler);\n\tdataProcessorExtend(scheduler);\n\tvoidThird(scheduler);\n\tconnector(scheduler);\n\tconst i18n = i18nFactory();\n\tscheduler.i18n = {\n\t\taddLocale: i18n.addLocale,\n\t\tsetLocale: function(locale){\n\t\t\tif(typeof locale === \"string\"){\n\t\t\t\tvar localeObject = i18n.getLocale(locale);\n\t\t\t\tif(!localeObject){\n\t\t\t\t\tlocaleObject = i18n.getLocale(\"en\");\n\t\t\t\t}\n\n\t\t\t\tscheduler.locale = localeObject;\n\t\t\t}else if(locale){\n\t\t\t\tif(!scheduler.locale){\n\t\t\t\t\tscheduler.locale = locale;\n\t\t\t\t}else{\n\t\t\t\t\tfor(var i in locale){\n\t\t\t\t\t\tif(locale[i] && typeof locale[i] === \"object\"){\n\t\t\t\t\t\t\tif(!scheduler.locale[i]){\n\t\t\t\t\t\t\t\tscheduler.locale[i] = {};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tscheduler.mixin(scheduler.locale[i], locale[i], true);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tscheduler.locale[i] = locale[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar labels = scheduler.locale.labels;\n\t\t\tlabels.dhx_save_btn \t= labels.icon_save;\n\t\t\tlabels.dhx_cancel_btn \t= labels.icon_cancel;\n\t\t\tlabels.dhx_delete_btn \t= labels.icon_delete;\n\n\t\t\tif(scheduler.$container){\n\t\t\t\tscheduler.get_elements();\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tgetLocale: i18n.getLocale\n\t};\n\tscheduler.i18n.setLocale(\"en\");\n\tscheduler.ext = {};\n\taddPlugins(scheduler);\n\t\n\n\tconst activePlugins = {};\n\tscheduler.plugins = function(config){\n\t\tconst extensionList = getExtensionList(config, {\n\t\t\t\ttreetimeline: [\"timeline\"],\n\t\t\t\tdaytimeline: [\"timeline\"],\n\t\t\t\touterdrag: [\"legacy\"]\n\t\t\t}, {\n\t\t\t\tlegacy: 1,\n\t\t\t\tlimit: 1,\n\t\t\t\ttimeline: 2,\n\t\t\t\tdaytimeline: 3,\n\t\t\t\ttreetimeline: 3,\n\t\t\t\touterdrag:6\n\t\t\t});\n\n\t\textensionList.forEach(function(name){\n\t\t\tif(!activePlugins[name]){\n\t\t\t\tconst plugin = extensionManager.getExtension(name);\n\t\t\t\tif(plugin){\n\t\t\t\t\tplugin(scheduler);\n\t\t\t\t\tactivePlugins[name] = true;\n\t\t\t\t}else{\n\t\t\t\t\tthrow new Error(\"unknown plugin \" + name);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tfunction getExtensionList(config, dependencies, priorities){\n\t\tconst result = [];\n\n\t\tfor(const i in config){\n\t\t\tif(config[i]){\n\t\t\t\tconst extension = i.toLowerCase();\n\t\t\t\tif(dependencies[extension]){\n\t\t\t\t\tdependencies[extension].forEach(function(dep){\n\t\t\t\t\t\tconst dependencyName = dep.toLowerCase();\n\t\t\t\t\t\tif(!config[dependencyName]){\n\t\t\t\t\t\t\tresult.push(dependencyName);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresult.push(extension);\n\t\t\t}\n\t\t}\n\t\t\n\t\tresult.sort(function(a, b){\n\t\t\tconst orderA = priorities[a] || 0;\n\t\t\tconst orderB = priorities[b] || 0;\n\t\t\tif(orderA > orderB){\n\t\t\t\treturn 1;\n\t\t\t}else if(orderA < orderB){\n\t\t\t\treturn -1;\n\t\t\t}else{\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tscheduler.plugins({\n\t\tall_timed: \"short\"\n\t});\n\n\treturn scheduler;\n\n}","import utils from \"./utils/utils\";\n\nconst StateService = (function(){\n\tconst stateProviders = {};\n\n\tfunction getState(name){\n\t\tconst provider = stateProviders[name];\n\t\tif(provider){\n\t\t\treturn stateProviders[name].method();\n\t\t}else{\n\t\t\tconst res = {};\n\t\t\tfor(const i in stateProviders){\n\t\t\t\tif(!stateProviders[i].internal)\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\t}\n\n\tfunction registerProvider(name, provider, internal){\n\t\tstateProviders[name] = { method: provider, internal: internal};\n\t}\n\n\tfunction unregisterProvider(name){\n\t\tdelete stateProviders[name];\n\t}\n\n\treturn {\n\t\tgetState: getState,\n\t\tregisterProvider: registerProvider,\n\t\tunregisterProvider: unregisterProvider\n\t};\n});\n\nexport default StateService;\n\n","export default function extend(scheduler) {\n\nvar commonViews = {\n\tagenda: \"https://docs.dhtmlx.com/scheduler/agenda_view.html\",\n\tgrid: \"https://docs.dhtmlx.com/scheduler/grid_view.html\",\n\tmap: \"https://docs.dhtmlx.com/scheduler/map_view.html\",\n\tunit: \"https://docs.dhtmlx.com/scheduler/units_view.html\",\n\ttimeline: \"https://docs.dhtmlx.com/scheduler/timeline_view.html\",\n\tweek_agenda: \"https://docs.dhtmlx.com/scheduler/weekagenda_view.html\",\n\tyear: \"https://docs.dhtmlx.com/scheduler/year_view.html\",\n\tanythingElse: \"https://docs.dhtmlx.com/scheduler/views.html\"\n};\n\nvar requiredExtensions = {\n\tagenda: \"ext/dhtmlxscheduler_agenda_view.js\",\n\tgrid: \"ext/dhtmlxscheduler_grid_view.js\",\n\tmap: \"ext/dhtmlxscheduler_map_view.js\",\n\tunit: \"ext/dhtmlxscheduler_units.js\",\n\ttimeline: \"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js\",\n\tweek_agenda: \"ext/dhtmlxscheduler_week_agenda.js\",\n\tyear: \"ext/dhtmlxscheduler_year_view.js\",\n\tlimit: \"ext/dhtmlxscheduler_limit.js\"\n};\n\nscheduler._commonErrorMessages = {\n\tunknownView: function(view){\n\t\tvar relatedDoc = \"Related docs: \" + (commonViews[view] || commonViews.anythingElse); \n\t\tvar relatedExtension = requiredExtensions[view] ? (\"You're probably missing \" + requiredExtensions[view] + \".\") : \"\";\n\t\treturn (\n\t\t\t\"`\"+view+\"` view is not defined. \\n\" +\n\t\t\t\"Please check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \\n\" + \n\t\t\trelatedDoc + \"\\n\" + (relatedExtension ? (relatedExtension + \"\\n\") : \"\"));\n\t},\n\tcollapsedContainer: function(div){\n\t\treturn \"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \\n\"+\n\t\t\"Make sure that the container has some initial height or use different units. For example:\\n\" +\n\t\t\"<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \\n\";\n\t}\n};\n\nscheduler.createTimelineView = function() {\n\tthrow new Error(\"scheduler.createTimelineView is not implemented. Be sure to add the required extension: \" + requiredExtensions.timeline + \n\t\"\\n\" +\n\t\"Related docs: \" + commonViews.timeline);\n};\n\nscheduler.createUnitsView = function() {\n\tthrow new Error(\"scheduler.createUnitsView is not implemented. Be sure to add the required extension: \" + requiredExtensions.unit + \n\t\"\\n\" +\n\t\"Related docs: \" + commonViews.unit);\n};\n\nscheduler.createGridView = function() {\n\tthrow new Error(\"scheduler.createGridView is not implemented. Be sure to add the required extension: \" + requiredExtensions.grid + \n\t\"\\n\" +\n\t\"Related docs: \" + commonViews.grid);\n};\n\nscheduler.addMarkedTimespan = function() {\n\tthrow new Error(\"scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\" + \n\t\"\\n\" +\n\t\"Related docs: https://docs.dhtmlx.com/scheduler/limits.html\");\n};\n\nscheduler.renderCalendar = function() {\n\tthrow new Error(\"scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\" + \n\t\"\\n\" +\n\t\"https://docs.dhtmlx.com/scheduler/minicalendar.html\");\n};\n\nscheduler.exportToPNG = function() {\n\tthrow new Error([\n\t\t\"scheduler.exportToPNG is not implemented.\",\n\t\t\"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html\",\n\t\t\"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"\n\t].join(\"\\n\"));\n};\n\nscheduler.exportToPDF = function() {\n\tthrow new Error([\n\t\t\"scheduler.exportToPDF is not implemented.\",\n\t\t\"This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html\",\n\t\t\"Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml\"\n\t].join(\"\\n\"));\n};\n\n\n}","\nimport nav_bar from \"./nav_bar\";\nimport scheduler_resize_listener from \"./scheduler_resize_listener\";\nimport eventable from \"../utils/eventable\";\n\n\nexport default function extend(scheduler) {\n\neventable(scheduler);\n\nnav_bar(scheduler);\n\nscheduler._detachDomEvent = function(el, event, handler){\n\tif (el.removeEventListener){\n\t\tel.removeEventListener(event, handler, false);\n\n\t}else if (el.detachEvent){\n\t\tel.detachEvent(\"on\"+event, handler);\n\t}\n};\n\n\nscheduler._init_once = function(){\n\tscheduler_resize_listener(scheduler);\n\n\tscheduler._init_once = function(){};\n};\n\nconst layout = {\n\t\"navbar\": {\n\t\trender: function (config) {\n\t\t\treturn scheduler._init_nav_bar(config);\n\t\t}\n\t},\n\t\"header\": {\n\t\trender: function (config) {\n\t\t\tconst element = document.createElement(\"div\");\n\t\t\telement.className = \"dhx_cal_header\";\n\t\t\treturn element;\n\t\t}\n\t},\n\t\"dataArea\": {\n\t\trender: function (config) {\n\t\t\tconst element = document.createElement(\"div\");\n\t\t\telement.className = \"dhx_cal_data\";\n\t\t\treturn element;\n\t\t}\n\t},\n\t\"html_element\": {\n\t\trender: function (config) {\n\t\t\treturn config.html;\n\t\t}\n\t}\n};\n\nfunction hasSchedulerMarkup(element){\n\treturn !!(\n\t\telement.querySelector(\".dhx_cal_header\") &&\n\t\telement.querySelector(\".dhx_cal_data\") &&\n\t\telement.querySelector(\".dhx_cal_navline\")\n\t\t);\n}\n\nfunction createDefaultHeader(scheduler){\n\tconst views = [\n\t\t\"day\",\n\t\t\"week\",\n\t\t\"month\"\n\t];\n\tconst date = [\n\t\t\"date\"\n\t];\n\tconst nav = [\n\t\t\"prev\",\n\t\t\"today\",\n\t\t\"next\"\n\t];\n\n\tif(scheduler.matrix){\n\t\tfor(const i in scheduler.matrix){\n\t\t\tviews.push(i);\n\t\t}\n\t}\n\tif(scheduler._props){\n\t\tfor(const i in scheduler._props){\n\t\t\tviews.push(i);\n\t\t}\n\t}\n\n\tif(scheduler._grid && scheduler._grid.names){\n\t\tfor(const i in scheduler._grid.names){\n\t\t\tviews.push(i);\n\t\t}\n\t}\n\n\tconst optionalViews = [\n\t\t\"map\",\n\t\t\"agenda\",\n\t\t\"week_agenda\",\n\t\t\"year\"\n\t];\n\n\toptionalViews.forEach(function(viewName){\n\t\tif(scheduler[viewName + \"_view\"]){\n\t\t\tviews.push(viewName);\n\t\t}\n\t});\n\n\treturn views.concat(date).concat(nav);\n}\n\nscheduler.init=function(id,date,mode){\n\tif(this.$destroyed){\n\t\treturn; // not have errors when try to reinit destroyed scheduler\n\t}\n\tdate=date||(scheduler._currentDate());\n\tmode=mode||\"week\";\n\n\tif(this._obj){\n\t\tthis.unset_actions();\n\t}\n\n\tthis._obj=(typeof id == \"string\")?document.getElementById(id):id;\n\tthis.$container = this._obj;\n\tthis.$root = this._obj;\n\n\tif(!this.$container.offsetHeight && this.$container.offsetWidth && this.$container.style.height === \"100%\"){\n\t\t// scheduler container has zero height and non-zero width\n\t\twindow.console.error(scheduler._commonErrorMessages.collapsedContainer(), this.$container);\n\t}\n\n\tif(this.config.wai_aria_attributes && this.config.wai_aria_application_role){\n\t\tthis.$container.setAttribute(\"role\", \"application\");\n\t}\n\n\tif(!this.config.header && !hasSchedulerMarkup(this.$container)){\n\t\t// if no header config and no required markup - use the default header\n\t\t// so the scheduler could be initialized in an empty div\n\t\tthis.config.header = createDefaultHeader(this);\n\t\twindow.console.log([// jshint ignore:line\n\t\t\t\"Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.\",\n\t\t\t\"Using a default header configuration: \",\n\t\t\t\"scheduler.config.header = \" + JSON.stringify(this.config.header, null, 2),\n\t\t\t\"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html\"\n\t\t].join(\"\\n\"));// jshint ignore:line\n\t}\n\n\tif (this.config.header) {\n\t\tthis.$container.innerHTML = \"\";\n\t\tthis.$container.classList.add(\"dhx_cal_container\");\n\t\tif(this.config.header.height){\n\t\t\tthis.xy.nav_height = this.config.header.height;\n\t\t}\n\t\tthis.$container.appendChild(layout.navbar.render(this.config.header));\n\t\tthis.$container.appendChild(layout.header.render());\n\t\tthis.$container.appendChild(layout.dataArea.render());\n\t} else {\n\t\t// if no header config provided - make sure scheduler container has all necessary elements\n\t\tif(!hasSchedulerMarkup(this.$container)){\n\t\t\tthrow new Error([\n\t\t\t\t\"Required DOM elements are missing from the scheduler container.\",\n\t\t\t\t\"Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup\",\n\t\t\t\t\"Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig\"\n\t\t\t].join(\"\\n\"));\n\t\t}\n\t}\n\n\tif (this.config.rtl) this.$container.className += \" dhx_cal_container_rtl\";\n\n\t//hook for terrace skin\n\tif (this._skin_init)\n\t\tscheduler._skin_init();\n\n\tscheduler.date.init();\n\n\tthis._scroll=true;\n\n\tthis._els=[];\n\tthis.get_elements();\n\tthis.init_templates();\n\tthis.set_actions();\n\n\tthis._init_once();\n\tthis._init_touch_events();\n\n\tthis.set_sizes();\n\tscheduler.callEvent('onSchedulerReady', []);\n\tscheduler.$initialized = true;\n\tthis.setCurrentView(date,mode);\n\n};\n\nscheduler.xy={\n\tmin_event_height:20,\n\tbar_height: 24,\n\tscale_width:50,\n\tscroll_width:18,\n\tscale_height:20,\n\tmonth_scale_height:20,\n\tmenu_width:25,\n\tmargin_top:0,\n\tmargin_left:0,\n\teditor_width:140,\n\tmonth_head_height:22,\n\tevent_header_height: 14\n};\nscheduler.keys={\n\tedit_save:13,\n\tedit_cancel:27\n};\n\nscheduler.bind = function bind(functor, object){\n\tif(functor.bind)\n\t\treturn functor.bind(object);\n\telse\n\t\treturn function(){ return functor.apply(object,arguments); };\n};\n\nscheduler.set_sizes=function(){\n\n\tvar w = this._x = this._obj.clientWidth-this.xy.margin_left;\n\n\t//not-table mode always has scroll - need to be fixed in future\n\tvar scale_x=this._table_view?0:(this.xy.scale_width+this.xy.scroll_width);\n\n\tvar materialScalePlaceholder = this.$container.querySelector(\".dhx_cal_scale_placeholder\");\n\tif(scheduler._is_material_skin()){\n\t\tif(!materialScalePlaceholder) {\n\t\t\tmaterialScalePlaceholder = document.createElement(\"div\");\n\t\t\tmaterialScalePlaceholder.className = \"dhx_cal_scale_placeholder\";\n\t\t\tthis.$container.insertBefore(materialScalePlaceholder, this._els[\"dhx_cal_header\"][0]);\n\t\t}\n\t\tmaterialScalePlaceholder.style.display = \"block\";\n\n\t\tthis.set_xy(materialScalePlaceholder,w,this.xy.scale_height + 1,0, this._els[\"dhx_cal_header\"][0].offsetTop);\n\n\t}else{\n\t\tif(materialScalePlaceholder){\n\t\t\tmaterialScalePlaceholder.parentNode.removeChild(materialScalePlaceholder);\n\t\t}\n\t}\n\n\tif (this._lightbox) {\n\t\tif (scheduler.$container.offsetWidth  < 1200) {\n\t\t} else {\n\t\t\tthis._setLbPosition(document.querySelector(\".dhx_cal_light\"));\n\t\t}\n\t}\n\n\tthis._data_width = w-scale_x;\n\n\tthis._els[\"dhx_cal_navline\"][0].style.width = w + \"px\";\n\tconst header = this._els[\"dhx_cal_header\"][0];\n\tthis.set_xy(header, this._data_width, this.xy.scale_height);\n\t// this._els[\"dhx_cal_header\"][0].style.marginLeft = `${scheduler.xy.scale_width}px`;\n\theader.style.left = ``;\n\theader.style.right = ``;\n\tif(!this._table_view){\n\t\tif(this.config.rtl){\n\t\t\theader.style.right = `${this.xy.scale_width}px`;\n\t\t}else{\n\t\t\theader.style.left = `${this.xy.scale_width}px`;\n\t\t}\n\t} else {\n\t\tif(!this.config.rtl){\n\t\t\theader.style.left = `-1px`;\n\t\t} else {\n\t\t\theader.style.right = `-1px`;\n\t\t}\n\t}\n};\nscheduler.set_xy=function(node,w,h,x,y){\n\tfunction prepareValue(val){\n\t\tlet prepared = val;\n\t\tif(!isNaN(Number(prepared))){\n\t\t\tprepared = Math.max(0,prepared) + \"px\";\n\t\t}\n\t\treturn prepared;\n\t}\n\n\tvar direction = 'left';\n\n\tif(w !== undefined) {\n\t\tnode.style.width = prepareValue(w);\n\t}\n\n\tif(h !== undefined){\n\t\tnode.style.height = prepareValue(h);\n\t}\n\n\tif (arguments.length>3){\n\n\t\tif(x !== undefined){\n\t\t\tif (this.config.rtl) direction = 'right';\n\t\t\tnode.style[direction]=x+\"px\";\n\t\t}\n\t\tif(y !== undefined){\n\t\t\tnode.style.top=y+\"px\";\n\t\t}\n\t}\n};\nscheduler.get_elements=function(){\n\t//get all child elements as named hash\n\tconst els=this._obj.getElementsByTagName(\"DIV\");\n\tfor (let i=0; i < els.length; i++){\n\t\tlet class_name= scheduler._getClassName(els[i]);\n\t\tconst attr_value = els[i].getAttribute(\"data-tab\") || els[i].getAttribute(\"name\") || \"\";\n\t\tif (class_name) class_name = class_name.split(\" \")[0];\n\t\tif (!this._els[class_name]) this._els[class_name]=[];\n\t\tthis._els[class_name].push(els[i]);\n\n\t\t//check if name need to be changed\n\t\t// scheduler.locale.labels[attr_value+\"_tab\"] - to fix getting labels for data-tab\n\t\tlet label = scheduler.locale.labels[attr_value+\"_tab\"] || scheduler.locale.labels[attr_value||class_name];\n\t\tif (typeof label !== \"string\" && attr_value && !els[i].innerHTML)\n\t\t\tlabel = attr_value.split(\"_\")[0];\n\t\tif (label) {\n\t\t\tthis._waiAria.labelAttr(els[i], label);\n\t\t\tels[i].innerHTML = label;\n\t\t}\n\t}\n};\n\n\nconst domEventsScope = scheduler._createDomEventScope();\n\nscheduler.unset_actions = function(){\n\tdomEventsScope.detachAll();\n};\n\nscheduler.set_actions=function(){\n\tfor (const a in this._els){\n\t\tif (this._click[a]){\n\t\t\tfor (let i=0; i < this._els[a].length; i++){\n\t\t\t\tconst element = this._els[a][i];\n\t\t\t\tconst handler = this._click[a].bind(element);\n\t\t\t\tdomEventsScope.attach(element, \"click\", handler);\n\t\t\t}\n\t\t}\n\t}\n\n\tdomEventsScope.attach(this._obj, \"selectstart\", function(e){\n\t\te.preventDefault();\n\t\treturn false;\n\t});\n\t//this._obj.onselectstart=function(e){ return false; };\n\tdomEventsScope.attach(this._obj, \"mousemove\", function(e){\n\t\tif (!scheduler._temp_touch_block)\n\t\t\tscheduler._on_mouse_move(e);\n\t});\n\tdomEventsScope.attach(this._obj, \"mousedown\", function(e){\n\t\tif (!scheduler._ignore_next_click)\n\t\t\tscheduler._on_mouse_down(e);\n\t});\n\tdomEventsScope.attach(this._obj, \"mouseup\", function(e){\n\t\tif (!scheduler._ignore_next_click)\n\t\t\tscheduler._on_mouse_up(e);\n\t});\n\tdomEventsScope.attach(this._obj, \"dblclick\", function(e){\n\t\tscheduler._on_dbl_click(e);\n\t});\n\tdomEventsScope.attach(this._obj, \"contextmenu\", function(event) {\n\t\tif(scheduler.checkEvent(\"onContextMenu\")){\n\t\t\t// block the default browser context menu \n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tconst returnValue = scheduler.callEvent(\"onContextMenu\", [scheduler._locate_event(event.target), event]);\n\t\treturn returnValue;\n\t});\n};\nscheduler.select=function(id){\n\tif (this._select_id==id) return;\n\tscheduler._close_not_saved();\n\tthis.editStop(false);\n\tif(this._select_id){\n\t\tthis.unselect();\n\t}\n\tthis._select_id = id;\n\tthis.updateEvent(id);\n\tthis.callEvent(\"onEventSelected\", [id]);\n};\nscheduler.unselect=function(id){\n\tif (id && id!=this._select_id) {\n\t\treturn;\n\t}\n\tconst previousSelection = this._select_id;\n\tthis._select_id = null;\n\tif (previousSelection && this.getEvent(previousSelection)) {\n\t\tthis.updateEvent(previousSelection);\n\t}\n\tthis.callEvent(\"onEventUnselected\", [previousSelection]);\n};\nscheduler.$stateProvider.registerProvider(\"global\", (function(){\n\treturn {\n\t\tmode: this._mode,\n\t\tdate: new Date(this._date),\n\t\tmin_date: new Date(this._min_date),\n\t\tmax_date: new Date(this._max_date),\n\t\teditor_id: this._edit_id,\n\t\tlightbox_id: this._lightbox_id,\n\t\tnew_event: this._new_event,\n\t\tselect_id: this._select_id,\n\t\texpanded: this.expanded,\n\t\tdrag_id: this._drag_id,\n\t\tdrag_mode: this._drag_mode\n\t};\n}).bind(scheduler));\n\nscheduler._click={\n\tdhx_cal_data:function(e){\n\t\t//in case of touch disable click processing\n\t\tif (scheduler._ignore_next_click){\n\t\t\tif (e.preventDefault)\n\t\t\t\te.preventDefault();\n\t\t\te.cancelBubble = true;\n\t\t\tscheduler._ignore_next_click = false;\n\t\t\treturn false;\n\t\t}\n\n\n\t\tconst id = scheduler._locate_event(e.target);\n\n\t\tif (!id) {\n\t\t\tscheduler.callEvent(\"onEmptyClick\",[scheduler.getActionData(e).date, e]);\n\t\t} else {\n\t\t\tif ( !scheduler.callEvent(\"onClick\",[id,e]) || scheduler.config.readonly ) return;\n\t\t}\n\n\t\tif (id && scheduler.config.select) {\n\n\t\t\tscheduler.select(id);\n\t\t\tconst icon = e.target.closest(\".dhx_menu_icon\");\n\n\t\t\tconst mask = scheduler._getClassName(icon);\n\t\t\tif (mask.indexOf(\"_icon\")!=-1)\n\t\t\t\tscheduler._click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\n\t\t} else{\n\t\t\tscheduler._close_not_saved();\n\t\t\tif (scheduler.getState().select_id && new Date().valueOf()-(scheduler._new_event||0) > 500){\n\t\t\t\tscheduler.unselect();\n\t\t\t}\n\t\t}\n\t},\n\tdhx_cal_prev_button:function(){\n\t\tscheduler._click.dhx_cal_next_button(0,-1);\n\t},\n\tdhx_cal_next_button:function(dummy,step){\n\t\tlet def_step = 1;\n\t\tif (scheduler.config.rtl){\n\t\t\tstep = -step;\n\t\t\tdef_step = -def_step;\n\t\t}\n\t\tscheduler.setCurrentView(scheduler.date.add( //next line changes scheduler._date , but seems it has not side-effects\n\t\t\tscheduler.date[scheduler._mode+\"_start\"](new Date(scheduler._date)),(step||def_step),scheduler._mode));\n\t},\n\tdhx_cal_today_button:function(){\n\t\tif (scheduler.callEvent(\"onBeforeTodayDisplayed\", [])) {\n\t\t\tscheduler.setCurrentView(scheduler._currentDate());\n\t\t}\n\t},\n\tdhx_cal_tab:function(){\n\t\tconst name = this.getAttribute(\"data-tab\");\n\t\tconst deprecated_name = this.getAttribute(\"name\");\n\t\tconst mode = name || deprecated_name.substring(0, deprecated_name.search(\"_tab\"));\n\t\tscheduler.setCurrentView(scheduler._date,mode);\n\t},\n\tbuttons:{\n\t\t\"delete\":function(id){\n\t\t\tconst c = scheduler.locale.labels.confirm_deleting;\n\t\t\tscheduler._dhtmlx_confirm({message: c, title: scheduler.locale.labels.title_confirm_deleting, callback:function(){ scheduler.deleteEvent(id); },\n\t\t\tconfig: {ok: scheduler.locale.labels.icon_delete}\n\t\t});\n\t\t},\n\t\tedit:function(id){ scheduler.edit(id); },\n\t\tsave:function(id){ scheduler.editStop(true); },\n\t\tdetails:function(id){ scheduler.showLightbox(id); },\n\t\tform:function(id){ scheduler.showLightbox(id); },\n\t\tcancel:function(id){ scheduler.editStop(false); }\n\t}\n};\nscheduler._dhtmlx_confirm = function({message, title, callback, config}) {\n\tif (!message)\n\t\treturn callback();\n\n\tconfig = config || {};\n\tconst opts = { ...config, text: message };\n\tif (title) {\n\t\topts.title = title;\n\t}\n\tif (callback) {\n\t\topts.callback = function(result) {\n\t\t\tif (result) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t}\n\tscheduler.confirm(opts);\n};\nscheduler.addEventNow=function(start,end,e){\n\tlet base = {};\n\tif (scheduler._isObject(start) && !scheduler._isDate(start)){\n\t\tbase = start;\n\t\tstart = null;\n\t}\n\n\tconst duration = (this.config.event_duration||this.config.time_step)*60000;\n\tif (!start) start = base.start_date||Math.round((scheduler._currentDate()).valueOf()/duration)*duration;\n\tlet start_date = new Date(start);\n\tif (!end){\n\t\tlet start_hour = this.config.first_hour;\n\t\tif (start_hour > start_date.getHours()){\n\t\t\tstart_date.setHours(start_hour);\n\t\t\tstart = start_date.valueOf();\n\t\t}\n\t\tend = start.valueOf()+duration;\n\t}\n\tlet end_date = new Date(end);\n\n\t// scheduler.addEventNow(new Date(), new Date()) + collision though get_visible events defect (such event was not retrieved)\n\tif(start_date.valueOf() == end_date.valueOf())\n\t\tend_date.setTime(end_date.valueOf()+duration);\n\tbase.start_date = base.start_date||start_date;\n\tbase.end_date =  base.end_date||end_date;\n\tbase.text = base.text||this.locale.labels.new_event;\n\tbase.id = this._drag_id = base.id || this.uid();\n\tthis._drag_mode=\"new-size\";\n\tthis._loading=true;\n\tconst eventId = this.addEvent(base);\n\tthis.callEvent(\"onEventCreated\",[this._drag_id,e]);\n\tthis._loading=false;\n\n\tthis._drag_event={}; //dummy , to trigger correct event updating logic\n\tthis._on_mouse_up(e);\n\treturn eventId;\n};\nscheduler._on_dbl_click=function(e,src){\n\tsrc = src || e.target;\n\tif (this.config.readonly) return;\n\tconst name = scheduler._getClassName(src).split(\" \")[0];\n\tswitch(name){\n\t\tcase \"dhx_scale_holder\":\n\t\tcase \"dhx_scale_holder_now\":\n\t\tcase \"dhx_month_body\":\n\t\tcase \"dhx_wa_day_data\":\n\t\t\tif (!scheduler.config.dblclick_create) break;\n\t\t\tthis.addEventNow(this.getActionData(e).date,null,e);\n\t\t\tbreak;\n\t\tcase \"dhx_cal_event\":\n\t\tcase \"dhx_wa_ev_body\":\n\t\tcase \"dhx_agenda_line\":\n\t\tcase \"dhx_cal_agenda_event_line\":\n\t\tcase \"dhx_grid_event\":\n\t\tcase \"dhx_cal_event_line\":\n\t\tcase \"dhx_cal_event_clear\": {\n\t\t\tconst id = this._locate_event(src);\n\t\t\tif (!this.callEvent(\"onDblClick\",[id,e])) return;\n\t\t\tif (this.config.details_on_dblclick || this._table_view || !this.getEvent(id)._timed || !this.config.select)\n\t\t\t\tthis.showLightbox(id);\n\t\t\telse\n\t\t\t\tthis.edit(id);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"dhx_time_block\":\n\t\tcase \"dhx_cal_container\":\n\t\t\treturn;\n\t\tdefault: {\n\t\t\tconst viewHandler = this[\"dblclick_\"+name];\n\t\t\tif (viewHandler) {\n\t\t\t\tviewHandler.call(this,e);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (src.parentNode && src != this)\n\t\t\t\t\treturn scheduler._on_dbl_click(e,src.parentNode);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n};\n//column index by mouse x-coordinate\nscheduler._get_column_index = function(x_pos){\n\tlet column = 0;\n\tif (this._cols){\n\t\tlet width = 0;\n\t\tlet i = 0;\n\t\twhile (width + this._cols[i] < x_pos && i < this._cols.length){\n\t\t\twidth += this._cols[i];\n\t\t\ti++;\n\t\t}\n\t\tcolumn = i + (this._cols[i] ? ((x_pos - width)/ this._cols[i]) : 0);\n\n\t\tif (this._ignores){\n\t\t\tif(column >= this._cols.length){\n\t\t\t\twhile(column >= 1 && this._ignores[Math.floor(column)]){\n\t\t\t\t\tcolumn--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\treturn column;\n};\n\n//transform mouse coordinates to day-time indexes of week based view\nscheduler._week_indexes_from_pos = function(pos){\n\t//\"get position\" can be invoked before columns are loaded into the units view(e.g. by onMouseMove handler in key_nav.js)\n\tif(!this._cols){\n\t\treturn pos;\n\t}else{\n\t\tconst column = this._get_column_index(pos.x);\n\n\t\tpos.x=Math.min(this._cols.length-1, Math.max(0,Math.ceil(column)-1));\n\t\tpos.y=Math.max(0,Math.ceil(pos.y*60/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step);\n\t\treturn pos;\n\t}\n};\n\nscheduler._mouse_coords=function(ev){\n\tlet pos;\n\tconst body = document.body;\n\tconst documentElement = document.documentElement;\n\tif (!this.$env.isIE && (ev.pageX || ev.pageY))\n\t\tpos={x:ev.pageX, y:ev.pageY};\n\telse pos={\n\t\tx:ev.clientX + (body.scrollLeft||documentElement.scrollLeft||0) - body.clientLeft,\n\t\ty:ev.clientY + (body.scrollTop||documentElement.scrollTop||0) - body.clientTop\n\t};\n\t//apply layout\n\tif (this.config.rtl && this._colsS) {\n\t\tpos.x = this.$container.querySelector(\".dhx_cal_data\").offsetWidth - pos.x;\n\t\tpos.x += this.$domHelpers.getAbsoluteLeft(this._obj);\n\t\tif (this._mode !== \"month\") {\n\t\t\tpos.x -= this.xy.scale_width;\n\t\t}\n\t} else {\n\t\tpos.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width);\n\t}\n\n\tconst dataArea = this.$container.querySelector(\".dhx_cal_data\");\n\t//pos.y-=this.$domHelpers.getAbsoluteTop(this._obj)+this.xy.nav_height+(this._dy_shift||0)+this.xy.scale_height-this._els[\"dhx_cal_data\"][0].scrollTop;\n\tpos.y-=this.$domHelpers.getAbsoluteTop(dataArea)-this._els[\"dhx_cal_data\"][0].scrollTop;\n\tpos.ev = ev;\n\tconst handler = this[\"mouse_\"+this._mode];\n\tif (handler){\n\t\tpos = handler.call(this,pos);\n\t}else{\n\t\t//transform to date\n\t\tif (!this._table_view) {\n\t\t\tpos = this._week_indexes_from_pos(pos);\n\t\t} else {\n\t\t\tconst column = this._get_column_index(pos.x);\n\t\t\tif (!this._cols || !this._colsS) // agenda/map views\n\t\t\t\treturn pos;\n\t\t\tlet dy=0;\n\t\t\tfor (dy=1; dy < this._colsS.heights.length; dy++)\n\t\t\t\tif (this._colsS.heights[dy]>pos.y) break;\n\n\t\t\tpos.y=Math.ceil( (Math.max(0, column)+Math.max(0,dy-1)*7)*24*60/this.config.time_step );\n\n\t\t\tif (scheduler._drag_mode || this._mode == \"month\")\n\t\t\t\tpos.y=(Math.max(0,Math.ceil(column)-1)+Math.max(0,dy-1)*7)*24*60/this.config.time_step;\n\n\t\t\t//we care about ignored days only during event moving in month view\n\t\t\tif (this._drag_mode == \"move\"){\n\t\t\t\tif (scheduler._ignores_detected && scheduler.config.preserve_length){\n\t\t\t\t\tpos._ignores = true;\n\t\t\t\t\t//get real lengtn of event\n\t\t\t\t\tif (!this._drag_event._event_length)\n\t\t\t\t\t\tthis._drag_event._event_length = this._get_real_event_length(this._drag_event.start_date, this._drag_event.end_date, { x_step:1, x_unit:\"day\"});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpos.x=0;\n\t\t}\n\t}\n\tpos.timestamp = +new Date();\n\treturn pos;\n};\nscheduler._close_not_saved=function(){\n\tif (new Date().valueOf()-(scheduler._new_event||0) > 500 && scheduler._edit_id){\n\t\tconst confirmationText=scheduler.locale.labels.confirm_closing;\n\n\t\tscheduler._dhtmlx_confirm({\n\t\t\tmessage: confirmationText, \n\t\t\ttitle: scheduler.locale.labels.title_confirm_closing, \n\t\t\tcallback: function() { \n\t\t\t\tscheduler.editStop(scheduler.config.positive_closing);\n\t\t\t}\n\t\t});\n\t\tif(confirmationText){\n\t\t\tthis._drag_id = this._drag_pos = this._drag_mode = null;\n\t\t}\n\t}\n};\nscheduler._correct_shift=function(start, back){\n\treturn start-=((new Date(scheduler._min_date)).getTimezoneOffset()-(new Date(start)).getTimezoneOffset())*60000*(back?-1:1);\n};\n\nscheduler._is_pos_changed = function(old_pos, new_pos){\n\tfunction diff(old_val, new_val, acc){\n\t\treturn !!(Math.abs(old_val - new_val) > acc);\n\t}\n\n\tif(!(old_pos && this._drag_pos)){\n\t\treturn true;\n\t}\n\tconst delay = 100;\n\tconst d_pos = 5;\n\n\t// start drag only if passed some time since mouse down, or if mouse position changed sufficiently\n\treturn !!(this._drag_pos.has_moved || !this._drag_pos.timestamp || (new_pos.timestamp - this._drag_pos.timestamp > delay) || diff(old_pos.ev.clientX, new_pos.ev.clientX, d_pos) || diff(old_pos.ev.clientY, new_pos.ev.clientY, d_pos));\n};\n\nscheduler._correct_drag_start_date = function(start){\n\tlet obj;\n\tif (scheduler.matrix)\n\t\tobj = scheduler.matrix[scheduler._mode];\n\tobj = obj  || { x_step:1, x_unit:\"day\" };\n\n\tstart = new Date(start);\n\tlet len = 1;\n\tif(obj._start_correction || obj._end_correction)\n\t\tlen = (obj.last_hour||0)*60 - (start.getHours()*60+start.getMinutes()) || 1;\n\n\treturn start*1 + (scheduler._get_fictional_event_length(start, len, obj)  - len);\n};\nscheduler._correct_drag_end_date = function(start, duration){\n\tlet obj;\n\tif (scheduler.matrix) {\n\t\tobj = scheduler.matrix[scheduler._mode];\n\t}\n\tobj = obj  || { x_step:1, x_unit:\"day\" };\n\n\tconst end = start*1 + scheduler._get_fictional_event_length(start, duration, obj);\n\treturn new Date(end*1 - (scheduler._get_fictional_event_length(end, -1, obj, -1) + 1));\n};\n\nscheduler._on_mouse_move=function(e){\n\tif (this._drag_mode){\n\t\tvar pos=this._mouse_coords(e);\n\t\tif (this._is_pos_changed(this._drag_pos, pos)){\n\t\t\tvar start, end;\n\t\t\tif (this._edit_id!=this._drag_id)\n\t\t\t\tthis._close_not_saved();\n\n\t\t\tif(!this._drag_mode)\n\t\t\t\treturn;\n\n\t\t\tvar mousedownPos = null;\n\t\t\tif(this._drag_pos && !this._drag_pos.has_moved){\n\t\t\t\tmousedownPos = this._drag_pos;\n\t\t\t\tmousedownPos.has_moved = true;\n\t\t\t}\n\n\t\t\tthis._drag_pos = pos;\n\n\t\t\tthis._drag_pos.has_moved = true;\n\n\t\t\tif (this._drag_mode==\"create\"){\n\n\t\t\t\t// use mouse down position as a starting point for drag-create\n\t\t\t\tif(mousedownPos){\n\t\t\t\t\tpos = mousedownPos;\n\t\t\t\t}\n\n\t\t\t\tthis._close_not_saved();\n\t\t\t\tthis.unselect(this._select_id);\n\t\t\t\tthis._loading=true; //will be ignored by dataprocessor\n\n\t\t\t\tstart = this._get_date_from_pos(pos).valueOf();\n\n\t\t\t\tif (!this._drag_start) {\n\t\t\t\t\tvar res = this.callEvent(\"onBeforeEventCreated\", [e, this._drag_id]);\n\t\t\t\t\tif (!res){\n\t\t\t\t\t\tthis._loading=false;\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loading=false;\n\t\t\t\t\tthis._drag_start=start;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tend = start;\n\t\t\t\tif (end == this._drag_start) {\n\t\t\t\t}\n\n\t\t\t\tvar start_date = new Date(this._drag_start);\n\t\t\t\tvar end_date = new Date(end);\n\t\t\t\tif ( (this._mode == \"day\" || this._mode == \"week\") &&\n\t\t\t\t\t(start_date.getHours() == end_date.getHours() &&\n\t\t\t\t\tstart_date.getMinutes() == end_date.getMinutes()) ) {\n\t\t\t\t\t\tend_date = new Date(this._drag_start+1000);\n\t\t\t\t}\n\n\n\t\t\t\tthis._drag_id=this.uid();\n\t\t\t\tthis.addEvent(start_date, end_date, this.locale.labels.new_event, this._drag_id, pos.fields);\n\n\t\t\t\tthis.callEvent(\"onEventCreated\",[this._drag_id,e]);\n\t\t\t\tthis._loading=false;\n\t\t\t\tthis._drag_mode=\"new-size\";\n\n\t\t\t}\n\n\t\t\tvar timeStep = this.config.time_step;\n\t\t\tvar ev=this.getEvent(this._drag_id);\n\t\t\tvar obj;\n\t\t\tif (scheduler.matrix)\n\t\t\t\tobj = scheduler.matrix[scheduler._mode];\n\t\t\tobj = obj  || { x_step:1, x_unit:\"day\" };\n\n\t\t\tif (this._drag_mode==\"move\"){\n\t\t\t\tstart = this._min_date.valueOf()+(pos.y*this.config.time_step+pos.x*24*60)*60000;\n\t\t\t\tif (!pos.custom && this._table_view) {\n\t\t\t\t\tstart += this.date.time_part(ev.start_date) * 1000;\n\t\t\t\t}\n\n\t\t\t\tif (!this._table_view && this._dragEventBody && this._drag_event._move_event_shift === undefined) {\n\t\t\t\t\tthis._drag_event._move_event_shift = start - ev.start_date;\n\t\t\t\t}\n\n\t\t\t\tif (this._drag_event._move_event_shift) {\n\t\t\t\t\tstart -= this._drag_event._move_event_shift;\n\t\t\t\t}\n\n\t\t\t\tstart = this._correct_shift(start);\n\n\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view && obj){\n\n\t\t\t\t\tstart = scheduler._correct_drag_start_date(start);\n\t\t\t\t\tend = scheduler._correct_drag_end_date(start,this._drag_event._event_length);\n\n\t\t\t\t} else\n\t\t\t\t\tend = ev.end_date.valueOf()-(ev.start_date.valueOf()-start);\n\t\t\t} else { // resize\n\t\t\t\tstart = ev.start_date.valueOf();\n\t\t\t\tend = ev.end_date.valueOf();\n\t\t\t\tif (this._table_view) {\n\t\t\t\t\tvar resize_date = this._min_date.valueOf()+pos.y*this.config.time_step*60000 + (pos.custom?0:24*60*60000);\n\t\t\t\t\tif (this._mode == \"month\") {\n\t\t\t\t\t\tresize_date = this._correct_shift(resize_date, false);\n\t\t\t\t\t\tif( this._drag_from_start ) {\n\t\t\t\t\t\t\tvar day = 24*60*60000;\n\t\t\t\t\t\t\tif( resize_date <= scheduler.date.date_part(new Date(end+day-1)).valueOf() ) // to get end time as 23:59:59 and then the day start\n\t\t\t\t\t\t\t\tstart = resize_date - day;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tend = resize_date;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(this.config.preserve_length) {\n\t\t\t\t\t\t\tif (pos.resize_from_start) {\n\t\t\t\t\t\t\t\tstart = scheduler._correct_drag_start_date(resize_date);\n\t\t\t\t\t\t\t\t// GS-2759: workaround for timeline with round_position and first and last hours\n\t\t\t\t\t\t\t\tif(obj.round_position && obj.first_hour && obj.last_hour && obj.x_unit == \"day\"){\n\t\t\t\t\t\t\t\t\tstart = new Date(start*1 + obj._start_correction);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tend = scheduler._correct_drag_end_date(resize_date, 0);\n\t\t\t\t\t\t\t\t// GS-2759: workaround for timeline with round_position and first and last hours\n\t\t\t\t\t\t\t\tif(obj.round_position && obj.first_hour && obj.last_hour && obj.x_unit == \"day\"){\n\t\t\t\t\t\t\t\t\tend = scheduler.date.date_part(new Date(end));\n\t\t\t\t\t\t\t\t\tend = new Date(end*1 - obj._end_correction);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// GS-2159: workaround for timeline with round_position and ignore_timeline\n\t\t\t\t\t\t\t\tif(obj.round_position && scheduler[\"ignore_\"+scheduler._mode] && obj.x_unit == \"day\"){\n\t\t\t\t\t\t\t\t\tconst ignore = this[\"ignore_\"+this._mode];\n\t\t\t\t\t\t\t\t\tlet tempEnd = scheduler.date.add(new Date(end), -obj.x_step, obj.x_unit);\n\t\t\t\t\t\t\t\t\tif(ignore(tempEnd)){\n\t\t\t\t\t\t\t\t\t\tend = tempEnd;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (pos.resize_from_start) {\n\t\t\t\t\t\t\t\tstart = resize_date;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tend = resize_date;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar end_day_start = this.date.date_part(new Date(ev.end_date.valueOf() - 1)).valueOf();\n\t\t\t\t\tvar end_day_date = new Date(end_day_start);\n\t\t\t\t\tvar firstHour = this.config.first_hour;\n\t\t\t\t\tvar lastHour = this.config.last_hour;\n\t\t\t\t\tvar maxY = (lastHour - firstHour) * (60/timeStep);\n\n\t\t\t\t\tthis.config.time_step = 1;\n\t\t\t\t\tvar precisePos = this._mouse_coords(e);\n\t\t\t\t\tthis.config.time_step = timeStep;\n\n\t\t\t\t\tvar minDate = pos.y*timeStep*60000;\n\t\t\t\t\tvar maxDate = Math.min(pos.y + 1, maxY)*timeStep*60000;\n\t\t\t\t\tvar preciseDate = precisePos.y*60000;\n\n\t\t\t\t\t// rounding end date to the closest time step\n\t\t\t\t\tif(Math.abs(minDate - preciseDate) > Math.abs(maxDate - preciseDate)){\n\t\t\t\t\t\tend = end_day_start + maxDate;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tend = end_day_start + minDate;\n\t\t\t\t\t}\n\t\t\t\t\tend = end + ((new Date(end)).getTimezoneOffset() - end_day_date.getTimezoneOffset()) * 60000;\n\t\t\t\t\tthis._els[\"dhx_cal_data\"][0].style.cursor=\"s-resize\";\n\t\t\t\t\tif (this._mode == \"week\" || this._mode == \"day\")\n\t\t\t\t\t\tend = this._correct_shift(end);\n\t\t\t\t}\n\t\t\t\tif (this._drag_mode == \"new-size\") {\n\t\t\t\t\tif (end <= this._drag_start){\n\t\t\t\t\t\tvar shift = pos.shift||((this._table_view && !pos.custom)?24*60*60000:0);\n\t\t\t\t\t\tstart = end-(pos.shift?0:shift);\n\t\t\t\t\t\tend = this._drag_start+(shift||(timeStep*60000));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstart = this._drag_start;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (end<=start){\n\t\t\t\t\t\t//GS-2811: resizing the event with round_position from the right to the left\n\t\t\t\t\t\tif(obj && obj.round_position){\n\t\t\t\t\t\t\tif(obj.x_unit == \"hour\" || obj.x_unit == \"minute\"){\n\t\t\t\t\t\t\t\tend=scheduler.date.add(start, obj.x_step, obj.x_unit);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tend=scheduler.date.add(scheduler.date.date_part(new Date(start)), 1, obj.x_unit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tend=start+timeStep*60000;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar new_end = new Date(end-1);\n\t\t\tvar new_start = new Date(start);\n\t\t\t//deny drag out of visible scheduler scale in timeline view\n\t\t\tif(this._drag_mode==\"move\" && scheduler.config.limit_drag_out &&\n\t\t\t\t(+new_start < +scheduler._min_date || +end > +scheduler._max_date)){\n\n\t\t\t\tif(+ev.start_date < +scheduler._min_date || +ev.end_date > +scheduler._max_date){\n\t\t\t\t\t// not move event if it's already outside time scale\n\t\t\t\t\tnew_start = new Date(ev.start_date);\n\t\t\t\t\tend = new Date(ev.end_date);\n\t\t\t\t}else{\n\n\t\t\t\t\tvar duration = end - new_start;\n\n\t\t\t\t\tif(+new_start < +scheduler._min_date){\n\t\t\t\t\t\tnew_start = new Date(scheduler._min_date);\n\t\t\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view){\n\t\t\t\t\t\t\tnew_start = new Date(scheduler._correct_drag_start_date(new_start));\n\t\t\t\t\t\t\tif(obj._start_correction)\n\t\t\t\t\t\t\t\tnew_start = new Date(new_start.valueOf() + obj._start_correction);\n\t\t\t\t\t\t\tend = new Date(new_start*1 + this._get_fictional_event_length(new_start, this._drag_event._event_length, obj));\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tend = new Date(+new_start + duration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tend = new Date(scheduler._max_date);\n\n\t\t\t\t\t\tif (pos._ignores && this.config.preserve_length && this._table_view){\n\t\t\t\t\t\t\tif(obj._end_correction)\n\t\t\t\t\t\t\t\tend = new Date(end.valueOf() - obj._end_correction);\n\t\t\t\t\t\t\tend = new Date(end*1 - this._get_fictional_event_length(end, 0, obj, true));\n\t\t\t\t\t\t\tnew_start = new Date(end*1 - this._get_fictional_event_length(end, this._drag_event._event_length, obj, true));\n\t\t\t\t\t\t\tif(this._ignores_detected){\n\t\t\t\t\t\t\t\tnew_start = scheduler.date.add(new_start, obj.x_step, obj.x_unit);\n\t\t\t\t\t\t\t\tend = new Date(end*1 - this._get_fictional_event_length(end, 0, obj, true));\n\t\t\t\t\t\t\t\tend = scheduler.date.add(end, obj.x_step, obj.x_unit);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnew_start = new Date(+end - duration);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tvar new_end = new Date(end-1);\n\t\t\t}\n\n\n\n\t\t\t// fix event dates when resized to bottom of the column (day/week views)\n\t\t\tif(!this._table_view && this._dragEventBody &&\n\t\t\t\t!scheduler.config.all_timed &&\n\t\t\t\t((!scheduler._get_section_view() && pos.x != this._get_event_sday({start_date: new Date(start), end_date:new Date(start)})) || new Date(start).getHours() < this.config.first_hour)){\n\t\t\t\tvar duration = end - new_start;\n\t\t\t\tif (this._drag_mode == \"move\") {\n\t\t\t\t\tvar day = this._min_date.valueOf() + (pos.x * 24 * 60) * 60000;\n\t\t\t\t\tnew_start = new Date(day);\n\t\t\t\t\tnew_start.setHours(this.config.first_hour);\n\t\t\t\t\t//GS-2646: binding to duration\n\t\t\t\t\tif(+new_start <= +ev.start_date){\n\t\t\t\t\t\tend = new Date(+new_start + duration);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnew_start = new Date(+end - duration);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// fix event dates when resized to bottom of the column (day/week views)\n\t\t\tif(!this._table_view &&\n\t\t\t\t!scheduler.config.all_timed &&\n\t\t\t\t((!scheduler.getView() && pos.x != this._get_event_sday({start_date: new Date(end), end_date:new Date(end)})) || new Date(end).getHours() >= this.config.last_hour)){\n\t\t\t\tvar duration = end - new_start;\n\t\t\t\tvar day = this._min_date.valueOf()+(pos.x*24*60)*60000;\n\t\t\t\tend = scheduler.date.date_part(new Date(day));\n\t\t\t\tend.setHours(this.config.last_hour);\n\t\t\t\tnew_end = new Date(end-1);\n\t\t\t\tif(this._drag_mode == \"move\"){\n\t\t\t\t\t//GS-2646: binding to duration\n\t\t\t\t\tif(+new_start <= +ev.start_date){\n\t\t\t\t\t\tend = new Date(+new_start + duration);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnew_start = new Date(+end - duration);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//GS-2649: fix event dates when resized to bottom of the column (all_timed + day/week views)\n\t\t\tif(!this._table_view && scheduler.config.all_timed){\n\t\t\t\tlet day = this._min_date.valueOf()+(pos.x*24*60)*60000;\n\t\t\t\tif(new Date(scheduler._drag_start).getDay() != new Date(day)){\n\t\t\t\t\tday = new Date(scheduler._drag_start);\n\t\t\t\t}\n\t\t\t\tlet tempBorderBottomDate = new Date(day).setHours(this.config.last_hour);\n\t\t\t\tif (scheduler._drag_start && this._drag_mode == \"new-size\" && tempBorderBottomDate < new Date(end)){\n\t\t\t\t\tend = scheduler.date.date_part(new Date(day));\n\t\t\t\t\tend.setHours(this.config.last_hour);\n\t\t\t\t\tnew_end = new Date(end-1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//GS-2225: prevent out-of-borders situation for timeline with ignore_timeline\n\t\t\tif(this._table_view && scheduler[\"ignore_\"+this._mode] && (this._drag_mode==\"resize\" || this._drag_mode==\"new-size\") && +end > +scheduler._max_date){\n\t\t\t\tend = new Date(scheduler._max_date);\n\t\t\t\tconst ignore = this[\"ignore_\"+this._mode];\n\t\t\t\twhile (ignore(end)){\n\t\t\t\t\tend = scheduler.date.add(end, -obj.x_step, obj.x_unit);\n\t\t\t\t}\n\t\t\t\tend = scheduler.date.add(end, obj.x_step, obj.x_unit);\n\t\t\t}\n\n\t\t\t//prevent out-of-borders situation for day|week view\n\t\t\tif ( this._table_view || (new_end.getDate()==new_start.getDate() && new_end.getHours()<this.config.last_hour) || scheduler._allow_dnd ){\n\t\t\t\tev.start_date=new_start;\n\t\t\t\tev.end_date=new Date(end);\n\t\t\t\tif (this.config.update_render){\n\t\t\t\t\t//fix for repaint after dnd and scroll issue, #231\n\t\t\t\t\tvar sx = scheduler._els[\"dhx_cal_data\"][0].scrollTop;\n\t\t\t\t\tthis.update_view();\n\t\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = sx;\n\t\t\t\t} else\n\t\t\t\t\tthis.updateEvent(this._drag_id);\n\t\t\t}\n\t\t\tif (this._table_view) {\n\t\t\t\tthis.for_rendered(this._drag_id,function(r){\n\t\t\t\t\tr.className+=\" dhx_in_move dhx_cal_event_drag\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.callEvent(\"onEventDrag\", [this._drag_id, this._drag_mode, e]);\n\t\t}\n\t}  else {\n\t\tif (scheduler.checkEvent(\"onMouseMove\")){\n\t\t\tvar id = this._locate_event(e.target||e.srcElement);\n\t\t\tthis.callEvent(\"onMouseMove\",[id,e]);\n\t\t}\n\t}\n};\nscheduler._on_mouse_down=function(e,src) {\n\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\n\t// let's ignore right mouse button then\n\tif (e.button == 2)\n\t\treturn;\n\n\tif (this.config.readonly || this._drag_mode) return;\n\tsrc = src||(e.target||e.srcElement);\n\tvar classname = scheduler._getClassName(src).split(\" \")[0];\n\n\tif (this.config.drag_event_body && classname == \"dhx_body\") {\n\t\tif(src.parentNode && src.parentNode.className.indexOf(\"dhx_cal_select_menu\") === -1){\n\t\t\tclassname = \"dhx_event_move\";\n\t\t\tthis._dragEventBody = true;\n\t\t}\n\t}\n\n\tswitch (classname) {\n\t\tcase \"dhx_cal_event_line\":\n\t\tcase \"dhx_cal_event_clear\":\n\t\t\tif (this._table_view)\n\t\t\t\tthis._drag_mode=\"move\"; //item in table mode\n\t\t\tbreak;\n\t\tcase \"dhx_event_move\":\n\t\tcase \"dhx_wa_ev_body\":\n\t\t\tthis._drag_mode=\"move\";\n\t\t\tbreak;\n\t\tcase \"dhx_event_resize\":\n\t\t\tthis._drag_mode=\"resize\";\n\t\t\tvar fullClass = scheduler._getClassName(src);\n\t\t\tif((fullClass).indexOf(\"dhx_event_resize_end\") < 0){\n\t\t\t\tscheduler._drag_from_start = true;\n\t\t\t}else{\n\t\t\t\tscheduler._drag_from_start = false;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"dhx_scale_holder\":\n\t\tcase \"dhx_scale_holder_now\":\n\t\tcase \"dhx_month_body\":\n\t\tcase \"dhx_matrix_cell\":\n\t\tcase \"dhx_marked_timespan\":\n\t\t\tthis._drag_mode=\"create\";\n\t\t\tbreak;\n\t\tcase \"\":\n\t\t\tif (src.parentNode)\n\t\t\t\treturn scheduler._on_mouse_down(e,src.parentNode);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (!scheduler.checkEvent(\"onMouseDown\") || scheduler.callEvent(\"onMouseDown\", [classname, e])) {\n\t\t\t\tif (src.parentNode && src != this && classname != \"dhx_body\") {\n\t\t\t\t\treturn scheduler._on_mouse_down(e,src.parentNode);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._drag_mode=null;\n\t\t\tthis._drag_id=null;\n\t\t\tbreak;\n\t}\n\tif (this._drag_mode){\n\t\tvar id = this._locate_event(src);\n\t\tif (!this.config[\"drag_\"+this._drag_mode] || !this.callEvent(\"onBeforeDrag\",[id, this._drag_mode, e]))\n\t\t\tthis._drag_mode=this._drag_id=0;\n\t\telse {\n\t\t\tthis._drag_id= id;\n\n\t\t\tif (this._edit_id!=this._drag_id || (this._edit_id && this._drag_mode == \"create\"))\n\t\t\t\tthis._close_not_saved();\n\t\t\tif(!this._drag_mode)\n\t\t\t\treturn;\n\n\t\t\tthis._drag_event = scheduler._lame_clone(this.getEvent(this._drag_id) || {});\n\t\t\tthis._drag_pos = this._mouse_coords(e);\n\t\t}\n\t}\n\tthis._drag_start=null;\n};\n\n\nscheduler._get_private_properties = function(event){\n\tvar fields = {};\n\tfor(var i in event){\n\t\tif(i.indexOf(\"_\") === 0){\n\t\t\tfields[i] = true;\n\t\t}\n\t}\n\treturn fields;\n};\nscheduler._clear_temporary_properties = function(clean, flagged_event){\n\tvar initial = this._get_private_properties(clean);\n\tvar current_state = this._get_private_properties(flagged_event);\n\tfor(var i in current_state){\n\t\tif(!initial[i]){\n\t\t\tdelete flagged_event[i];\n\t\t}\n\t}\n};\n\n\nscheduler._on_mouse_up=function(e){\n\tif (e && e.button == 2 && this._mobile) return;\n\tif (this._drag_mode && this._drag_id){\n\t\tthis._els[\"dhx_cal_data\"][0].style.cursor=\"default\";\n\t\t//drop\n\n\t\tvar drag_id = this._drag_id;\n\t\tvar mode = this._drag_mode;\n\n\t\tvar moved = !this._drag_pos || this._drag_pos.has_moved;\n\t\tdelete this._drag_event._move_event_shift;\n\n\t\tvar ev=this.getEvent(this._drag_id);\n\t\tif (moved && (this._drag_event._dhx_changed || !this._drag_event.start_date || ev.start_date.valueOf()!=this._drag_event.start_date.valueOf() || ev.end_date.valueOf()!=this._drag_event.end_date.valueOf())){\n\t\t\tvar is_new=(this._drag_mode==\"new-size\");\n\t\t\tif (!this.callEvent(\"onBeforeEventChanged\",[ev, e, is_new, this._drag_event])){\n\t\t\t\tif (is_new)\n\t\t\t\t\tthis.deleteEvent(ev.id, true);\n\t\t\t\telse {\n\t\t\t\t\tthis._drag_event._dhx_changed = false;\n\t\t\t\t\tthis._clear_temporary_properties(ev, this._drag_event);\n\t\t\t\t\tscheduler._lame_copy(ev, this._drag_event);\n\t\t\t\t\tthis.updateEvent(ev.id);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tthis._drag_id = this._drag_mode = null;\n\t\t\t\tif (is_new && this.config.edit_on_create){\n\t\t\t\t\tthis.unselect();\n\t\t\t\t\tthis._new_event=new Date();//timestamp of creation\n\t\t\t\t\t//if selection disabled - force lightbox usage\n\t\t\t\t\tif (this._table_view || this.config.details_on_create || !this.config.select || !this.isOneDayEvent(this.getEvent(drag_id))) {\n\t\t\t\t\t\tscheduler.callEvent(\"onDragEnd\", [drag_id, mode, e]);\n\t\t\t\t\t\treturn this.showLightbox(drag_id);\n\t\t\t\t\t}\n\t\t\t\t\tthis._drag_pos = true; //set flag to trigger full redraw\n\t\t\t\t\tthis._select_id = this._edit_id = drag_id;\n\t\t\t\t} else {\n\t\t\t\t\tif (!this._new_event)\n\t\t\t\t\t\tthis.callEvent(is_new?\"onEventAdded\":\"onEventChanged\",[drag_id,this.getEvent(drag_id)]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this._drag_pos && (this._drag_pos.has_moved || this._drag_pos === true)) {\n\t\t\tthis._drag_id = this._drag_mode = null; // set null to prevent _sorder recalculation for drag event\n\t\t\tthis.render_view_data(); //redraw even if there is no real changes - necessary for correct positioning item after drag\n\t\t}\n\t\tscheduler.callEvent(\"onDragEnd\", [drag_id, mode, e]);\n\t}\n\tthis._drag_id = null;\n\tthis._drag_mode=null;\n\tthis._drag_pos=null;\n\tthis._drag_event = null;\n\tthis._drag_from_start = null;\n};\n\nscheduler._trigger_dyn_loading = function(){\n\tif (this._load_mode && this._load()){\n\t\tthis._render_wait = true;\n\t\treturn true;\n\t}else{\n\t\treturn false;\n\t}\n};\nscheduler.update_view=function(){\n\tthis._reset_ignores();\n\tthis._update_nav_bar(\n\t\tthis.config.header,\n\t\tthis.$container.querySelector(\".dhx_cal_navline\"));\n\n\tvar view = this[this._mode + \"_view\"];\n\tif(view){\n\t\tview.call(this, true);\n\t}else{\n\t\tthis._reset_scale();\n\t}\n\n\tif (this._trigger_dyn_loading()){\n\t\treturn true;\n\t}\n\tthis.render_view_data();\n};\n\nscheduler.isViewExists = function(mode){\n\treturn !!(scheduler[mode+ \"_view\"] ||\n\t\t(scheduler.date[mode+ \"_start\"] && scheduler.templates[mode+ \"_date\"] && scheduler.templates[mode+ \"_scale_date\"]));\n};\n\nscheduler._set_aria_buttons_attrs = function(){\n\tvar buttonGroups = [\"dhx_cal_next_button\", \"dhx_cal_prev_button\", \"dhx_cal_tab\", \"dhx_cal_today_button\"];\n\tfor(var i = 0; i < buttonGroups.length; i++){\n\t\tvar group = this._els[buttonGroups[i]];\n\t\tfor(var j = 0; group && j < group.length; j++ ){\n\t\t\tvar name = group[j].getAttribute(\"data-tab\") || group[j].getAttribute(\"name\");\n\t\t\tvar label = this.locale.labels[buttonGroups[i]];\n\t\t\tif(name){\n\t\t\t\tlabel = this.locale.labels[name + \"_tab\"] || this.locale.labels[name] || label;\n\t\t\t}\n\t\t\tif(buttonGroups[i] == \"dhx_cal_next_button\"){\n\t\t\t\tlabel = this.locale.labels.next;\n\t\t\t}else if(buttonGroups[i] == \"dhx_cal_prev_button\"){\n\t\t\t\tlabel = this.locale.labels.prev;\n\t\t\t}\n\t\t\tthis._waiAria.headerButtonsAttributes(group[j], label || \"\");\n\t\t}\n\t}\n};\n\nscheduler.updateView = function(date, mode) {\n\n\tif (!this.$container) {\n\t\tthrow new Error(\"The scheduler is not initialized. \\n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**\");\n\t}\n\n\tdate = date || this._date;\n\tmode = mode || this._mode;\n\tvar dhx_cal_data = 'dhx_cal_data';\n\n\tif(!this.locale.labels.icon_form){\n\t\tthis.locale.labels.icon_form = this.locale.labels.icon_edit;\n\t}\n\n\tvar container = this._obj;\n\tvar oldClass = \"dhx_scheduler_\" + this._mode;\n\tvar newClass = \"dhx_scheduler_\" + mode;\n\n\tif (!this._mode || (container.className.indexOf(oldClass) == -1)){\n\t\tcontainer.className += \" \" + newClass;\n\t} else {\n\t\tcontainer.className = container.className.replace(oldClass, newClass);\n\t}\n\n\tvar dhx_multi_day = 'dhx_multi_day';\n\n\tvar prev_scroll = (this._mode == mode && this.config.preserve_scroll) ? this._els[dhx_cal_data][0].scrollTop : false; // saving current scroll\n\n\tvar multidayScroll;\n\tif(this._els[dhx_multi_day] && this._els[dhx_multi_day][0]){\n\t\tmultidayScroll = this._els[dhx_multi_day][0].scrollTop;\n\t}\n\n\t//hide old custom view\n\tif (this[this._mode + \"_view\"] && mode && this._mode != mode)\n\t\tthis[this._mode + \"_view\"](false);\n\n\tthis._close_not_saved();\n\n\tif (this._els[dhx_multi_day]) {\n\t\tthis._els[dhx_multi_day][0].parentNode.removeChild(this._els[dhx_multi_day][0]);\n\t\tthis._els[dhx_multi_day] = null;\n\t}\n\n\tthis._mode = mode;\n\tthis._date = date;\n\tthis._table_view = (this._mode == \"month\");\n\n\tthis._dy_shift = 0;//correction for multiday section in week/day views\n\n\t//show new view\n\tthis.update_view();\n\n\tthis._set_aria_buttons_attrs();\n\n\tvar tabs = this._els[\"dhx_cal_tab\"];\n\tif(tabs){//calendar can work without view tabs\n\t\tfor (var i = 0; i < tabs.length; i++) {\n\t\t\tvar tab = tabs[i];\n\n\t\t\tif (tab.getAttribute(\"data-tab\") == this._mode || tab.getAttribute(\"name\") == this._mode + \"_tab\"){\n\t\t\t\ttab.classList.add(\"active\");\n\t\t\t\tthis._waiAria.headerToggleState(tab, true);\n\t\t\t}else{\n\t\t\t\ttab.classList.remove(\"active\");\n\t\t\t\tthis._waiAria.headerToggleState(tab, false);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (typeof prev_scroll == \"number\") // if we are updating or working with the same view scrollTop should be saved\n\t\tthis._els[dhx_cal_data][0].scrollTop = prev_scroll; // restoring original scroll\n\n\tif(typeof multidayScroll == \"number\" && this._els[dhx_multi_day] && this._els[dhx_multi_day][0]){\n\t\tthis._els[dhx_multi_day][0].scrollTop = multidayScroll;\n\t}\n\n};\nscheduler.setCurrentView = function(date, mode) {\n\tif (!this.callEvent(\"onBeforeViewChange\", [this._mode, this._date, mode || this._mode, date || this._date])) return;\n\tthis.updateView(date, mode);\n\tthis.callEvent(\"onViewChange\", [this._mode, this._date]);\n};\n\nscheduler.render = function(date, mode){\n\tscheduler.setCurrentView(date, mode);\n};\n\nscheduler._render_x_header = function(i,left,date,container, offset_top){\n\toffset_top = offset_top || 0;\n\t//header scale\n\tvar head=document.createElement(\"div\");\n\thead.className = \"dhx_scale_bar\";\n\n\tif(this.templates[this._mode+\"_scalex_class\"]){\n\t\t//GS-2314: '_scalex_class' - timeline has similar template, use the same name\n\t\thead.className += ' ' + this.templates[this._mode+\"_scalex_class\"](date);\n\t}\n\n\tvar width = this._cols[i];\n\n\tif (this._mode == \"month\" && i === 0 && this.config.left_border) {\n\t\thead.className += \" dhx_scale_bar_border\";\n\t\tleft = left+1;\n\t}\n\n\tthis.set_xy(head, width, this.xy.scale_height-1, left, offset_top);\n\n\tvar columnHeaderText = this.templates[this._mode+\"_scale_date\"](date,this._mode); //TODO - move in separate method\n\thead.innerHTML = columnHeaderText;\n\n\tthis._waiAria.dayHeaderAttr(head, columnHeaderText);\n\n\tcontainer.appendChild(head);\n};\n\nscheduler._get_columns_num = function(from, to){\n\tvar count = 7;\n\tif (!scheduler._table_view){\n\t\tvar count_n = scheduler.date[\"get_\"+scheduler._mode+\"_end\"];\n\t\tif (count_n) to = count_n(from);\n\t\tcount = Math.round((to.valueOf()-from.valueOf())/(1000*60*60*24));\n\t}\n\treturn count;\n};\nscheduler._get_timeunit_start = function(){\n\t//start date of currently displayed time unit(day, week,...)\n\treturn this.date[this._mode+\"_start\"](new Date(this._date.valueOf()));\n};\n\nscheduler._get_view_end = function(){\n\tvar dd = this._get_timeunit_start();\n\tvar ed = scheduler.date.add(dd, 1, this._mode);\n\tif (!scheduler._table_view){\n\t\tvar count_n = scheduler.date[\"get_\"+scheduler._mode+\"_end\"];\n\t\tif (count_n) ed = count_n(dd);\n\t}\n\treturn ed;\n};\nscheduler._calc_scale_sizes = function(width, from, to){//\n\t//calculates number of displayed columns(days/units/month view cols) and their widths\n\tvar rtl = this.config.rtl;\n\tvar summ = width; //border delta\n\tvar count = this._get_columns_num(from, to);\n\t//if (this.config.rtl) this._process_ignores(scheduler.date.add(to, -1, \"day\"), count, \"day\", -1);\n\t//else\n\tthis._process_ignores(from, count, \"day\", 1);\n\tvar realcount = count - this._ignores_detected;\n\tfor (var i=0; i<count; i++){\n\t\tif (this._ignores[i]){\n\t\t\tthis._cols[i] = 0;\n\t\t\trealcount++;\n\t\t} else {\n\t\t\tthis._cols[i]=Math.floor(summ/(realcount-i));\n\t\t}\n\t\tsumm-=this._cols[i];\n\t\tthis._colsS[i]=(this._cols[i-1]||0)+(this._colsS[i-1]||(this._table_view?0:(rtl ? this.xy.scroll_width : this.xy.scale_width)));\n\t\t//this._colsS[j]=(this._cols[rtl ? j+1 : (i-1)]||0)+(this._colsS[rtl ? j+1 : (i-1)]||(this._table_view?0:(rtl?this.xy.scroll_width:this.xy.scale_width)+2));\n\t}\n\tthis._colsS['col_length'] = count;\n\tthis._colsS[count] = (this._cols[count-1]+this._colsS[count-1]) || 0;\n\t//this._colsS[count] = (this._cols[rtl ? 0 : count-1]+this._colsS[rtl ? 0 : count-1]) || 0;\n};\n\nscheduler._set_scale_col_size = function(div, width, left){\n\tvar c = this.config;\n\tthis.set_xy(div, width, c.hour_size_px*(c.last_hour-c.first_hour), left+this.xy.scale_width + 1, 0);//-1 for border\n};\n\nscheduler._render_scales = function(header, data_area){\n\t//render columns in week/units view, or header in month view\n\tvar sd = new Date(scheduler._min_date),\n\t\ted = new Date(scheduler._max_date),\n\t\ttoday = this.date.date_part( scheduler._currentDate());\n\n\tvar summ = parseInt(header.style.width,10) - 1;\n\tvar d = new Date(this._min_date);\n\t// if (this.config.rtl) {\n\t// \td = new Date(scheduler.date.add(this._max_date, -1, \"day\"));\n\t// }\n\tvar count = this._get_columns_num(sd, ed);\n\tthis._calc_scale_sizes(summ, sd, ed);\n\tvar left=0;\n\n\theader.innerHTML = \"\";\n\tfor (var i=0; i<count; i++){\n\t\tif (!this._ignores[i]){\n\t\t\tthis._render_x_header(i,left,d,header);\n\t\t}\n\t\tif (!this._table_view){\n\t\t\tvar scales=document.createElement(\"div\");\n\t\t\tvar cls = \"dhx_scale_holder\";\n\t\t\tif (d.valueOf() == today.valueOf()) cls += \" dhx_scale_holder_now\";\n\n\t\t\tscales.setAttribute(\"data-column-index\", i);\n\t\t\tif (this._ignores_detected && this._ignores[i]){\n\t\t\t\tcls += \" dhx_scale_ignore\";\n\t\t\t}\n\n\t\t\tfor (let i=this.config.first_hour*1; i < this.config.last_hour; i++) {\n\t\t\t\tconst firstHalf = document.createElement(\"div\");\n\t\t\t\tfirstHalf.className=\"dhx_scale_time_slot dhx_scale_time_slot_hour_start\";\n\t\t\t\tfirstHalf.style.height=this.config.hour_size_px/2+\"px\";\n\t\t\t\t\n\t\t\t\tlet slotDate = new Date(d.getFullYear(), d.getMonth(), d.getDate(), i, 0);\n\t\t\t\tfirstHalf.setAttribute('data-slot-date', this.templates.format_date(slotDate));\n\n\t\t\t\tlet htmlContent = this.templates.time_slot_text(slotDate);\n\t\t\t\tif(htmlContent){\n\t\t\t\t\tfirstHalf.innerHTML = htmlContent;\n\t\t\t\t}\n\t\t\t\tlet cssClass = this.templates.time_slot_class(slotDate);\n\t\t\t\tif(cssClass){\n\t\t\t\t\tfirstHalf.classList.add(cssClass);\n\t\t\t\t}\n\n\t\t\t\tscales.appendChild(firstHalf);\n\n\t\t\t\tconst secondHalf = document.createElement(\"div\");\n\t\t\t\tsecondHalf.className=\"dhx_scale_time_slot\";\n\t\t\t\tslotDate = new Date(d.getFullYear(), d.getMonth(), d.getDate(), i, 30);\n\t\t\t\tsecondHalf.setAttribute('data-slot-date', this.templates.format_date(slotDate));\n\t\t\t\tsecondHalf.style.height=this.config.hour_size_px/2+\"px\";\n\t\t\t\thtmlContent = this.templates.time_slot_text(slotDate);\n\t\t\t\tif(htmlContent){\n\t\t\t\t\tsecondHalf.innerHTML = htmlContent;\n\t\t\t\t}\n\t\t\t\tcssClass = this.templates.time_slot_class(slotDate);\n\t\t\t\tif(cssClass){\n\t\t\t\t\tsecondHalf.classList.add(cssClass);\n\t\t\t\t}\n\t\t\t\tscales.appendChild(secondHalf);\n\t\t\t}\n\n\t\t\tscales.className = cls+\" \"+this.templates.week_date_class(d,today);\n\t\t\tthis._waiAria.dayColumnAttr(scales, d);\n\t\t\tthis._set_scale_col_size(scales, this._cols[i], left);\n\n\t\t\tdata_area.appendChild(scales);\n\t\t\tthis.callEvent(\"onScaleAdd\",[scales, d]);\n\t\t}\n\t\tleft+=this._cols[i];\n\t\t//if (this.config.rtl) d=this.date.add(d,-1,\"day\");\n\t\t//else\n\t\td=this.date.add(d,1,\"day\");\n\t\td = this.date.day_start(d);\n\t}\n};\n\nscheduler._getNavDateElement = function(){\n\treturn this.$container.querySelector(\".dhx_cal_date\");\n};\n\nscheduler._reset_scale=function(){\n\t//current mode doesn't support scales\n\t//we mustn't call reset_scale for such modes, so it just to be sure\n\tif (!this.templates[this._mode + \"_date\"]) return;\n\n\tvar header = this._els[\"dhx_cal_header\"][0];\n\tvar data_area = this._els[\"dhx_cal_data\"][0];\n\tvar c = this.config;\n\n\theader.innerHTML = \"\";\n\t//data_area.scrollTop = 0; //fix flickering in FF; makes IE8 flicker instead\n\tdata_area.innerHTML = \"\";\n\n\tvar str = ((c.readonly || (!c.drag_resize)) ? \" dhx_resize_denied\" : \"\") + ((c.readonly || (!c.drag_move)) ? \" dhx_move_denied\" : \"\");\n\tdata_area.className = \"dhx_cal_data\" + str;\n\n\tthis._scales = {};\n\tthis._cols = [];\t//store for data section\n\tthis._colsS = {height: 0};\n\tthis._dy_shift = 0;\n\n\tthis.set_sizes();\n\n\tvar d,sd;\n\tvar dd = this._get_timeunit_start(),\n\t\ted = scheduler._get_view_end();\n\n\td = sd = this._table_view ? scheduler.date.week_start(dd) : dd;\n\n\n\tthis._min_date=d;\n\n\tvar navBarDateStr = this.templates[this._mode+\"_date\"](dd,ed,this._mode);\n\n\tvar scaleElement = this._getNavDateElement();\n\tif(scaleElement){\n\t\tscaleElement.innerHTML = navBarDateStr;\n\t\tthis._waiAria.navBarDateAttr(scaleElement, navBarDateStr);\n\t}\n\n\tthis._max_date = ed;\n\tscheduler._render_scales(header, data_area);\n\n\tif (this._table_view) // month view\n\t\tthis._reset_month_scale(data_area,dd,sd);\n\telse{\n\t\tthis._reset_hours_scale(data_area,dd,sd);\n\t\tif (c.multi_day) {\n\t\t\tvar dhx_multi_day = 'dhx_multi_day';\n\n\t\t\tif(this._els[dhx_multi_day]) {\n\t\t\t\tthis._els[dhx_multi_day][0].parentNode.removeChild(this._els[dhx_multi_day][0]);\n\t\t\t\tthis._els[dhx_multi_day] = null;\n\t\t\t}\n\n\t\t\tvar c1 = document.createElement(\"div\");\n\t\t\tc1.className = dhx_multi_day;\n\t\t\tc1.style.visibility=\"hidden\";\n\t\t\tc1.style.display=\"none\";\n\t\t\tvar totalWidth = this._colsS[this._colsS.col_length];\n\t\t\tvar offset = c.rtl ? this.xy.scale_width : this.xy.scroll_width;\n\t\t\tvar hiddenWidth = Math.max(totalWidth + offset, 0);\n\t\t\tthis.set_xy(c1, hiddenWidth, 0, 0); // 2 extra borders, dhx_header has -1 bottom margin\n\t\t\tdata_area.parentNode.insertBefore(c1,data_area);\n\n\t\t\tvar c2 = c1.cloneNode(true);\n\t\t\tc2.className = dhx_multi_day+\"_icon\";\n\t\t\tc2.style.visibility=\"hidden\";\n\t\t\tc2.style.display=\"none\";\n\t\t\tthis.set_xy(c2, this.xy.scale_width + 1, 0, 0); // dhx_header has -1 bottom margin\n\n\t\t\tc1.appendChild(c2);\n\t\t\tthis._els[dhx_multi_day]=[c1,c2];\n\t\t\tscheduler.event(this._els[dhx_multi_day][0], \"click\", this._click.dhx_cal_data);\n\t\t}\n\t}\n};\nscheduler._reset_hours_scale=function(b,dd,sd){\n\tvar c=document.createElement(\"div\");\n\tc.className=\"dhx_scale_holder\";\n\n\tvar date = new Date(1980,1,1,this.config.first_hour,0,0);\n\tfor (var i=this.config.first_hour*1; i < this.config.last_hour; i++) {\n\t\tvar cc=document.createElement(\"div\");\n\t\tcc.className=\"dhx_scale_hour\";\n\t\tcc.style.height=this.config.hour_size_px+\"px\";\n\t\tvar width = this.xy.scale_width;\n\t\tif (this.config.left_border) {\n\t\t\tcc.className += \" dhx_scale_hour_border\";\n\t\t}\n\t\tcc.style.width = width + \"px\";\n\n\t\tvar content = scheduler.templates.hour_scale(date);\n\t\tcc.innerHTML = content;\n\t\tthis._waiAria.hourScaleAttr(cc, content);\n\n\t\tc.appendChild(cc);\n\t\tdate=this.date.add(date,1,\"hour\");\n\t}\n\tb.appendChild(c);\n\tif (this.config.scroll_hour)\n\t\tb.scrollTop = this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour);\n};\n\nscheduler._currentDate = function(){\n\tif(scheduler.config.now_date){\n\t\treturn new Date(scheduler.config.now_date);\n\t}\n\treturn new Date();\n};\n\nscheduler._reset_ignores = function(){\n\tthis._ignores={};\n\tthis._ignores_detected = 0;\n};\n\nscheduler._process_ignores = function(sd, n, mode, step, preserve){\n\tthis._reset_ignores();\n\tvar ignore = scheduler[\"ignore_\"+this._mode];\n\tif (ignore){\n\t\tvar ign_date = new Date(sd);\n\t\tfor (var i=0; i<n; i++){\n\t\t\tif (ignore(ign_date)){\n\t\t\t\tthis._ignores_detected += 1;\n\t\t\t\tthis._ignores[i] = true;\n\t\t\t\tif (preserve)\n\t\t\t\t\tn++;\n\t\t\t}\n\t\t\tign_date = scheduler.date.add(ign_date, step, mode);\n\t\t\tif(scheduler.date[mode + '_start'])\n\t\t\t\tign_date = scheduler.date[mode + '_start'](ign_date);\n\t\t}\n\t}\n};\n\nscheduler._render_month_scale = function(div, dd/*month start*/, sd/*view start*/, rows ){\n\t//renders month view layout\n\n\tvar ed=scheduler.date.add(dd,1,\"month\"),\n\t\tview_start = new Date(sd);\n\tvar cd = scheduler._currentDate();\n\t// GS-2801: since v7.2 date functions are now non-mutating \n\tcd = this.date.date_part(cd);\n\tsd = this.date.date_part(sd);\n\n\trows = rows || Math.ceil(Math.round((ed.valueOf()-sd.valueOf()) / (60*60*24*1000) ) / 7);\n\tvar tdwidths=[];\n\n\tfor (var i=0; i<=7; i++) {\n\t\tvar cell_width = this._cols[i] || 0;\n\t\tif(!isNaN(Number(cell_width))){\n\t\t\tcell_width = cell_width + \"px\";\n\t\t}\n\t\ttdwidths[i] = cell_width;\n\t}\n\n\tfunction getCellHeight(row){\n\t\tvar h = scheduler._colsS.height;\n\t\tif(scheduler._colsS.heights[row + 1] !== undefined ){\n\t\t\th = scheduler._colsS.heights[row + 1] - (scheduler._colsS.heights[row]||0);\n\t\t}\n\t\treturn h;\n\t}\n\n\n\tvar cellheight = 0;\n\n\tconst table = document.createElement(\"div\");\n\ttable.classList.add(\"dhx_cal_month_table\");\n\n\tvar rendered_dates = [];\n\tfor (var i=0; i<rows; i++){\n\t\tvar row = document.createElement(\"div\");\n\t\trow.classList.add(\"dhx_cal_month_row\");\n\t\trow.style.height = getCellHeight(i) + \"px\";\n\t\ttable.appendChild(row);\n\t\t// var row_height = Math.max(getCellHeight(i) - scheduler.xy.month_head_height, 0);\n\t\tfor (var j=0; j<7; j++) {\n\t\t\tvar cell = document.createElement(\"div\");\n\t\t\trow.appendChild(cell);\n\n\t\t\tvar cls = \"dhx_cal_month_cell\";\n\t\t\tif (sd<dd)\n\t\t\t\tcls += ' dhx_before';\n\t\t\telse if (sd>=ed)\n\t\t\t\tcls += ' dhx_after';\n\t\t\telse if (sd.valueOf()==cd.valueOf())\n\t\t\t\tcls += ' dhx_now';\n\n\t\t\tif (this._ignores_detected && this._ignores[j]){\n\t\t\t\tcls += \" dhx_scale_ignore\";\n\t\t\t}\n\n\t\t\tcell.className = cls + \" \" + this.templates.month_date_class(sd, cd);\n\n\t\t\tcell.setAttribute(\"data-cell-date\", scheduler.templates.format_date(sd));\n\t\t\tvar body_class = \"dhx_month_body\";\n\t\t\tvar head_class = \"dhx_month_head\";\n\t\t\tif (j === 0 && this.config.left_border) {\n\t\t\t\tbody_class += \" dhx_month_body_border\";\n\t\t\t\thead_class += \" dhx_month_head_border\";\n\t\t\t}\n\t\t\tif (!this._ignores_detected || !this._ignores[j]){\n\t\t\t\tcell.style.width = tdwidths[j];\n\t\t\t\tthis._waiAria.monthCellAttr(cell, sd);\n\n\t\t\t\tvar cellHead = document.createElement(\"div\");\n\t\t\t\tcellHead.style.height = scheduler.xy.month_head_height + \"px\";\n\t\t\t\tcellHead.className = head_class;\n\t\t\t\tcellHead.innerHTML = this.templates.month_day(sd);\n\t\t\t\tcell.appendChild(cellHead);\n\n\t\t\t\tvar cellBody = document.createElement(\"div\");\n\t\t\t\tcellBody.className = body_class;\n\t\t\t\t// cellBody.style.height = row_height + \"px\";\n\t\t\t\t// cellBody.style.width = tdwidths[j];\n\t\t\t\tcell.appendChild(cellBody);\n\n\t\t\t} else {\n\t\t\t\tcell.appendChild(document.createElement(\"div\"));\n\t\t\t\tcell.appendChild(document.createElement(\"div\"));\n\t\t\t}\n\t\t\trendered_dates.push(sd);\n\t\t\tvar bf1 = sd.getDate();\n\t\t\tsd=this.date.add(sd,1,\"day\");\n\t\t\tif (sd.getDate() - bf1 > 1)\n\t\t\t\tsd = new Date(sd.getFullYear(), sd.getMonth(), bf1 + 1, 12, 0);\n\t\t}\n\n\t\tscheduler._colsS.heights[i] = cellheight;\n\t\tcellheight += getCellHeight(i);\n\t}\n\n\tthis._min_date = view_start;\n\tthis._max_date = sd;\n\n\tdiv.innerHTML = \"\";\n\tdiv.appendChild(table);\n\n\tthis._scales = {};\n\tvar cells = div.querySelectorAll('[data-cell-date]');\n\tcells.forEach((cell) => {\n\t\tconst date = scheduler.templates.parse_date(cell.getAttribute(\"data-cell-date\"));\n\t\tconst body = cell.querySelector(\".dhx_month_body\");\n\t\tthis._scales[+date] = body;\n\t\tthis.callEvent(\"onScaleAdd\", [this._scales[+date], date]);\n\t});\n\n\treturn this._max_date;\n};\n\nscheduler._reset_month_scale=function(b,dd,sd,rows){\n\t//recalculates rows height and redraws month layout\n\tvar ed=scheduler.date.add(dd,1,\"month\");\n\t// GS-2801: since v7.2 date functions are now non-mutating \n\tsd = this.date.date_part(sd);\n\n\trows = rows || Math.ceil(Math.round((ed.valueOf()-sd.valueOf()) / (60*60*24*1000) ) / 7);\n\n\tvar height = (Math.floor(b.clientHeight/rows) - this.xy.month_head_height);\n\n\tthis._colsS.height = height + this.xy.month_head_height;\n\tthis._colsS.heights = [];\n\n\treturn scheduler._render_month_scale(b, dd, sd, rows);\n\n};\n\nscheduler.getView = function (viewName) {\n\tif (!viewName) {\n\t\tviewName = scheduler.getState().mode;\n\t}\n\tif (scheduler.matrix && scheduler.matrix[viewName]) {\n\t\treturn scheduler.matrix[viewName];\n\t}\n\n\tif (scheduler._props && scheduler._props[viewName]) {\n\t\treturn scheduler._props[viewName];\n\t}\n\n\treturn null;\n};\n\nscheduler.getLabel = function(property, key) {\n\tvar sections = this.config.lightbox.sections;\n\tfor (var i=0; i<sections.length; i++) {\n\t\tif(sections[i].map_to == property) {\n\t\t\tvar options = sections[i].options;\n\t\t\tfor (var j=0; j<options.length; j++) {\n\t\t\t\tif(options[j].key == key) {\n\t\t\t\t\treturn options[j].label;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn \"\";\n};\nscheduler.updateCollection = function(list_name, collection) {\n\tvar list = scheduler.serverList(list_name);\n\tif (!list) return false;\n\tlist.splice(0, list.length);\n\tlist.push.apply(list, collection || []);\n\tscheduler.callEvent(\"onOptionsLoad\", []);\n\tscheduler.resetLightbox();\n\tscheduler.hideCover();\n\treturn true;\n};\nscheduler._lame_clone = function(object, cache) {\n\tvar i, t, result; // iterator, types array, result\n\n\tcache = cache || [];\n\n\tfor (i=0; i<cache.length; i+=2)\n\t\tif(object === cache[i])\n\t\t\treturn cache[i+1];\n\n\tif (object && typeof object == \"object\") {\n\t\tresult = Object.create(object); // preserve prototype methods\n\t\tt = [Array,Date,Number,String,Boolean];\n\t\tfor (i=0; i<t.length; i++) {\n\t\t\tif (object instanceof t[i])\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\n\t\t}\n\t\tcache.push(object, result);\n\t\tfor (i in object) {\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\n\t\t\t\tresult[i] = scheduler._lame_clone(object[i], cache);\n\t\t}\n\t}\n\treturn result || object;\n};\nscheduler._lame_copy = function(target, source) {\n\tfor (var key in source) {\n\t\tif (source.hasOwnProperty(key)) {\n\t\t\ttarget[key] = source[key];\n\t\t}\n\t}\n\treturn target;\n};\nscheduler._get_date_from_pos = function(pos) {\n\tvar start=this._min_date.valueOf()+(pos.y*this.config.time_step+(this._table_view?0:pos.x)*24*60)*60000;\n\t//if (this.config.rtl) start=scheduler.date.add(this._max_date, -1, \"day\").valueOf()+(pos.y*this.config.time_step-(this._table_view?0:pos.x)*24*60)*60000;\n\treturn new Date(this._correct_shift(start));\n};\n// n_ev - native event\nscheduler.getActionData = function(n_ev) {\n\tvar pos = this._mouse_coords(n_ev);\n\treturn {\n\t\tdate:this._get_date_from_pos(pos),\n\t\tsection:pos.section\n\t};\n};\nscheduler._focus = function(node, select){\n\tif (node && node.focus){\n\t\tif (this._mobile){\n\t\t\twindow.setTimeout(function(){\n\t\t\t\tnode.focus();\n\t\t\t},10);\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tif (select && node.select && node.offsetWidth) {\n\t\t\t\t\tnode.select();\n\t\t\t\t}\n\t\t\t\tnode.focus();\n\t\t\t} catch (e) {\n\t\t\t}\n\t\t}\n\t}\n};\n\nfunction getDaysDifference(startDate, endDate) {\n\tconst start = new Date(startDate);\n\tconst end = new Date(endDate);\n\tconst differenceInTime = end.getTime() - start.getTime();\n\tconst differenceInDays = differenceInTime / (1000 * 3600 * 24);\n\treturn Math.abs(differenceInDays);\n}\n\n//non-linear scales\nscheduler._get_real_event_length=function(startDate, endDate, config){ // config may be a timeline view or a configuration object\n\tvar eventLength = endDate - startDate;\n\n\t// excludedDuration - duration between [00:00, first_hour] and [last_hour, 23:59]\n\t// var excludedDuration = (config._start_correction + config._end_correction)||0;\n\tvar ignore = this[\"ignore_\"+this._mode];\n\n\tvar startColumnIndex = 0,\n\t\tendColumnIndex;\n\tif (config.render){\n\t\tstartColumnIndex = this._get_date_index(config, startDate);\n\t\tendColumnIndex = this._get_date_index(config, endDate);\n\n\t\tif(startDate.valueOf() < scheduler.getState().min_date.valueOf()){\n\t\t\tstartColumnIndex = -getDaysDifference(startDate, scheduler.getState().min_date);\n\t\t}\n\t\tif(endDate.valueOf() > scheduler.getState().max_date.valueOf()){\n\t\t\tendColumnIndex += getDaysDifference(endDate, scheduler.getState().max_date);\n\t\t}\n\t} else{\n\t\tendColumnIndex = Math.round(eventLength/60/60/1000/24);\n\t}\n\n\tvar last_column = true;\n\twhile (startColumnIndex < endColumnIndex){\n\t\tvar check = scheduler.date.add(endDate, -config.x_step, config.x_unit);\n\t\tif (ignore && ignore(endDate) && (!last_column || (last_column && ignore(check) ))){\n\t\t\teventLength -= (endDate-check);\n\n\t\t}else{\n\t\t\tlet excludedDuration = 0;\n\t\t\tconst intervalStart = new Date(Math.max(check.valueOf(), startDate.valueOf()));\n\t\t\tconst intervalEnd = endDate;\n\t\t\tconst leftCellCutOffStart = new Date(intervalStart.getFullYear(), intervalStart.getMonth(), intervalStart.getDate(), config.first_hour || 0);\n\t\t\tconst leftCellCutOffEnd = new Date(intervalStart.getFullYear(), intervalStart.getMonth(), intervalStart.getDate(), config.last_hour || 24);\n\t\t\tconst rightCellCutOffStart = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate(), config.first_hour || 0);\n\t\t\tconst rightCellCutOffEnd = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate(), config.last_hour || 24);\n\n\t\t\tif(intervalEnd.valueOf() > rightCellCutOffEnd.valueOf()){\n\t\t\t\texcludedDuration += intervalEnd - rightCellCutOffEnd;\n\t\t\t}\n\n\t\t\tif(intervalEnd.valueOf() > rightCellCutOffStart.valueOf()){\n\t\t\t\texcludedDuration += config._start_correction;\n\t\t\t} else {\n\t\t\t\texcludedDuration += intervalEnd.getHours()*60*60*1000 + intervalEnd.getMinutes()*60*1000;\n\t\t\t}\n\t\t\t// GS-2580: if the end date of the events is quals to the last_hour config, need to include that date\n\t\t\tif(intervalStart.valueOf() <= leftCellCutOffEnd.valueOf()){\n\t\t\t\texcludedDuration += config._end_correction;\n\t\t\t}\n\n\t\t\tif(intervalStart.valueOf() < leftCellCutOffStart.valueOf()){\n\t\t\t\texcludedDuration += (leftCellCutOffStart.valueOf() - intervalStart.valueOf());\n\t\t\t}\n\t\t\t\n\n\t\t\teventLength -= excludedDuration;\n\t\t\tlast_column = false;\n\t\t}\n\t\tendDate = check;\n\t\tendColumnIndex--;\n\t}\n\treturn eventLength;\n};\nscheduler._get_fictional_event_length=function(end_date, ev_length, obj, back){\n\tvar sd = new Date(end_date);\n\tvar dir = back ? -1 : 1;\n\n\t//get difference caused by first|last hour\n\tif (obj._start_correction || obj._end_correction){\n\t\tvar today;\n\t\tif (back)\n\t\t\ttoday = (sd.getHours()*60+sd.getMinutes()) - (obj.first_hour||0)*60;\n\t\telse\n\t\t\ttoday = (obj.last_hour||0)*60 - (sd.getHours()*60+sd.getMinutes());\n\t\tvar per_day = (obj.last_hour - obj.first_hour)*60;\n\t\tvar days = Math.ceil( (ev_length / (60*1000) - today ) / per_day);\n\t\tif(days < 0) days = 0;\n\t\tev_length += days * (24*60 - per_day) * 60 * 1000;\n\t}\n\n\tvar fd = new Date(end_date*1+ev_length*dir);\n\tvar ignore = this[\"ignore_\"+this._mode];\n\n\tvar start_slot = 0,\n\t\tend_slot;\n\tif (obj.render){\n\t\tstart_slot = this._get_date_index(obj, sd);\n\t\tend_slot = this._get_date_index(obj, fd);\n\t} else{\n\t\tend_slot = Math.round(ev_length/60/60/1000/24);\n\t}\n\t// GS-2159: workaround for timeline with round_position and ignore_timeline\n\tfunction condition() {\n\t\tconst isDayUnit = obj.x_unit === \"day\";\n    return isDayUnit ? start_slot * dir < end_slot * dir : start_slot * dir <= end_slot * dir ;\n\t}\n\twhile (condition()){\n\t\tvar check = scheduler.date.add(sd, obj.x_step*dir, obj.x_unit);\n\t\tif (ignore && ignore(sd)){\n\t\t\tev_length += (check-sd)*dir;\n\t\t\tend_slot += dir;\n\t\t}\n\n\t\tsd = check;\n\t\tstart_slot+=dir;\n\t}\n\n\treturn ev_length;\n};\n\nscheduler._get_section_view = function(){\n\treturn this.getView();\n};\n\nscheduler._get_section_property = function(){\n\tif(this.matrix && this.matrix[this._mode]){\n\t\treturn this.matrix[this._mode].y_property;\n\t}else if(this._props && this._props[this._mode]){\n\t\treturn this._props[this._mode].map_to;\n\t}\n\treturn null;\n};\n\nscheduler._is_initialized = function(){\n\tvar state = this.getState();\n\treturn (this._obj && state.date && state.mode);\n};\nscheduler._is_lightbox_open = function(){\n\tvar state = this.getState();\n\treturn state.lightbox_id !== null && state.lightbox_id !== undefined;\n};\n\n}","export default function extend(scheduler) {\n\n(function(){\n\n\t// eslint-disable-next-line no-control-regex\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\n\n\tfunction stripHTMLLite(htmlText){\n\t\treturn (htmlText + \"\")\n\t\t\t.replace(htmlTags, \" \").\n\t\t\treplace(extraSpaces, \" \");\n\t}\n\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\n\tfunction escapeQuotes(text){\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\n\t}\n\n\tscheduler._waiAria = {\n\t\tgetAttributeString: function(attr){\n\t\t\tvar attributes = [\" \"];\n\t\t\tfor(var i in attr){\n\t\t\t\tif(typeof attr[i] != \"function\" && typeof attr[i] != \"object\") {\n\t\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\n\t\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tattributes.push(\" \");\n\t\t\treturn attributes.join(\" \");\n\t\t},\n\t\tsetAttributes: function(div, values){\n\t\t\tfor(var i in values){\n\t\t\t\tdiv.setAttribute(i, stripHTMLLite(values[i]));\n\t\t\t}\n\t\t\treturn div;\n\t\t},\n\n\t\tlabelAttr: function(div, content){\n\t\t\treturn this.setAttributes(div, {\"aria-label\": content});\n\t\t},\n\t\tlabel: function(label){\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": label});\n\t\t},\n\n\t\t// day/week/units\n\n\t\thourScaleAttr: function(div, content){\n\t\t\tthis.labelAttr(div, content);\n\n\t\t},\n\t\tmonthCellAttr: function(div, date){\n\t\t\tthis.labelAttr(div, scheduler.templates.day_date(date));\n\t\t},\n\n\t\tnavBarDateAttr: function(div, content){\n\t\t\tthis.labelAttr(div, content);\n\t\t},\n\t\tdayHeaderAttr: function(div, content){\n\t\t\tthis.labelAttr(div, content);\n\t\t},\n\n\t\tdayColumnAttr: function(div, date){\n\t\t\tthis.dayHeaderAttr(div, scheduler.templates.day_date(date));\n\t\t},\n\n\t\theaderButtonsAttributes: function(div, label){\n\t\t\treturn this.setAttributes(div, {\"role\":\"button\", \"aria-label\":label});\n\t\t},\n\n\t\theaderToggleState: function(div, isActive){\n\t\t\treturn this.setAttributes(div, {\"aria-pressed\": isActive ? \"true\" : \"false\"});\n\t\t},\n\n\n\t\tgetHeaderCellAttr:function(dateString){\n\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": dateString});\n\t\t},\n\n\n\t\teventAttr: function(event, div){\n\t\t\tthis._eventCommonAttr(event, div);\n\t\t},\n\n\n\t\t_eventCommonAttr: function(event, div){\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(scheduler.templates.event_text(event.start_date, event.end_date, event)));\n\n\t\t\tif(scheduler.config.readonly){\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\n\n\t\t\t}\n\n\t\t\tif(event.$dataprocessor_class){\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\n\t\t\t}\n\n\n\t\t\tdiv.setAttribute(\"aria-selected\",\n\t\t\t\t(scheduler.getState().select_id == event.id) ? \"true\" : \"false\");\n\t\t},\n\n\t\tsetEventBarAttr: function(event, div){\n\t\t\tthis._eventCommonAttr(event, div);\n\t\t},\n\n\t\t_getAttributes: function(attributeSetter, arg){\n\t\t\tvar result = {\n\t\t\t\tsetAttribute:function(name, value){\n\t\t\t\t\tthis[name] = value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tattributeSetter.apply(this, [arg, result]);\n\t\t\treturn result;\n\n\t\t},\n\n\t\teventBarAttrString: function(event){\n\t\t\treturn this.getAttributeString(this._getAttributes(this.setEventBarAttr, event));\n\t\t},\n\n\n\n\t\tagendaHeadAttrString :function(){\n\t\t\treturn this.getAttributeString({role: \"row\"});\n\t\t},\n\t\tagendaHeadDateString :function(label){\n\t\t\treturn this.getAttributeString({role: \"columnheader\", \"aria-label\": label});\n\t\t},\n\t\tagendaHeadDescriptionString :function(label){\n\t\t\treturn this.agendaHeadDateString(label);\n\t\t},\n\t\tagendaDataAttrString: function(){\n\t\t\treturn this.getAttributeString({role: \"grid\"});\n\t\t},\n\t\tagendaEventAttrString: function(event){\n\t\t\tvar attrs = this._getAttributes(this._eventCommonAttr, event);\n\n\t\t\tattrs[\"role\"] = \"row\";\n\n\t\t\treturn this.getAttributeString(attrs);\n\n\t\t},\n\t\tagendaDetailsBtnString: function(){\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels.icon_details});\n\t\t},\n\n\n\t\tgridAttrString: function(){\n\t\t\treturn this.getAttributeString({role: \"grid\"});\n\t\t},\n\n\t\tgridRowAttrString: function(event){\n\t\t\treturn this.agendaEventAttrString(event);\n\t\t},\n\n\t\tgridCellAttrString: function(event, column, value){\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": [\n\t\t\t\t(column.label === undefined ? column.id : column.label),\n\t\t\t\t\": \",\n\t\t\t\tvalue\n\t\t\t]});\n\t\t},\n\n\t\tmapAttrString: function(){\n\t\t\treturn this.gridAttrString();\n\t\t},\n\t\tmapRowAttrString: function(event){\n\t\t\treturn this.gridRowAttrString(event);\n\t\t},\n\t\tmapDetailsBtnString: function(){\n\t\t\treturn this.agendaDetailsBtnString();\n\t\t},\n\n\t\tminicalHeader: function(div, headerId){\n\t\t\tthis.setAttributes(div, {\n\t\t\t\t\"id\":headerId+\"\",\n\t\t\t\t\"aria-live\":\"assertice\",\n\t\t\t\t\"aria-atomic\":\"true\"\n\n\t\t\t});\n\t\t},\n\t\tminicalGrid: function(div, headerId){\n\t\t\tthis.setAttributes(div, {\n\t\t\t\t\"aria-labelledby\":headerId+\"\",\n\t\t\t\t\"role\":\"grid\"\n\t\t\t});\n\t\t},\n\t\tminicalRow: function(div){\n\t\t\tthis.setAttributes(div, {\n\t\t\t\t\"role\":\"row\"\n\t\t\t});\n\t\t},\n\t\tminicalDayCell: function(div, date){\n\t\t\tvar selected = (date.valueOf() < scheduler._max_date.valueOf() && date.valueOf() >= scheduler._min_date.valueOf());\n\t\t\tthis.setAttributes(div, {\n\t\t\t\t\"role\":\"gridcell\",\n\t\t\t\t\"aria-label\": scheduler.templates.day_date(date),\n\t\t\t\t\"aria-selected\": selected ? \"true\" : \"false\"\n\t\t\t});\n\t\t},\n\t\tminicalHeadCell: function(div){\n\t\t\tthis.setAttributes(div, {\n\t\t\t\t\"role\":\"columnheader\"\n\t\t\t});\n\t\t},\n\n\n\t\tweekAgendaDayCell: function(div, date){\n\t\t\tvar header = div.querySelector(\".dhx_wa_scale_bar\");\n\t\t\tvar content = div.querySelector(\".dhx_wa_day_data\");\n\t\t\tvar headerId = scheduler.uid() + \"\";\n\t\t\tthis.setAttributes(header, { \"id\": headerId});\n\t\t\tthis.setAttributes(content, { \"aria-labelledby\": headerId});\n\n\t\t},\n\t\tweekAgendaEvent: function(div, event){\n\t\t\tthis.eventAttr(event, div);\n\t\t},\n\n\t\tlightboxHiddenAttr: function(div){\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\n\t\t},\n\n\t\tlightboxVisibleAttr: function(div){\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\n\t\t},\n\n\t\tlightboxSectionButtonAttrString: function(label){\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\n\t\t},\n\n\t\tyearHeader: function(div, headerId){\n\t\t\tthis.setAttributes(div, {\n\t\t\t\t\"id\":headerId+\"\"\n\t\t\t});\n\t\t},\n\t\tyearGrid: function(div, headerId){\n\t\t\tthis.minicalGrid(div, headerId);\n\t\t},\n\t\tyearHeadCell: function(div){\n\t\t\treturn this.minicalHeadCell(div);\n\t\t},\n\t\tyearRow: function(div){\n\t\t\treturn this.minicalRow(div);\n\t\t},\n\t\tyearDayCell: function(div){\n\t\t\tthis.setAttributes(div, {\n\t\t\t\t\"role\":\"gridcell\"\n\t\t\t});\n\t\t},\n\n\t\tlightboxAttr: function(div){\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\n\t\t},\n\n\t\tlightboxButtonAttrString:function(buttonName){\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels[buttonName], \"tabindex\":\"0\"});\n\t\t},\n\t\teventMenuAttrString: function(iconName){\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":scheduler.locale.labels[iconName]});\n\t\t},\n\t\tlightboxHeader: function(div, headerText){\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\n\t\t},\n\n\t\tlightboxSelectAttrString: function(time_option){\n\t\t\tvar label = \"\";\n\n\t\t\tswitch (time_option) {\n\t\t\t\tcase \"%Y\":\n\t\t\t\t\tlabel = scheduler.locale.labels.year;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%m\":\n\t\t\t\t\tlabel = scheduler.locale.labels.month;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%d\":\n\t\t\t\t\tlabel = scheduler.locale.labels.day;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%H:%i\":\n\t\t\t\t\tlabel = scheduler.locale.labels.hour + \" \" + scheduler.locale.labels.minute;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn scheduler._waiAria.getAttributeString({\"aria-label\": label});\n\t\t},\n\n\n\t\tmessageButtonAttrString: function(buttonLabel){\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\n\t\t},\n\n\t\tmessageInfoAttr: function(div){\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\n\t\t},\n\n\t\tmessageModalAttr: function(div, uid){\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\n\t\t\tif(uid){\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\n\t\t\t}\n\n\t\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\n\t\t},\n\n\t\tquickInfoAttr: function(div){\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\n\t\t},\n\n\t\tquickInfoHeaderAttrString: function(){\n\t\t\treturn \" role='heading' \";\n\t\t},\n\n\t\tquickInfoHeader: function(div, header){\n\t\t\tdiv.setAttribute(\"aria-label\", header);\n\t\t},\n\n\t\tquickInfoButtonAttrString: function(label){\n\t\t\treturn scheduler._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\n\t\t},\n\n\t\ttooltipAttr: function(div){\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\n\t\t},\n\n\t\ttooltipVisibleAttr: function(div){\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\n\t\t},\n\n\t\ttooltipHiddenAttr: function(div){\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\n\t\t}\n\t};\n\n\tfunction isDisabled(){\n\t\treturn !scheduler.config.wai_aria_attributes;\n\t}\n\n\tfor(var i in scheduler._waiAria){\n\t\tscheduler._waiAria[i] = (function(payload){\n\t\t\treturn function(){\n\t\t\t\tif(isDisabled()){\n\t\t\t\t\treturn \" \";\n\t\t\t\t}\n\t\t\t\treturn payload.apply(this, arguments);\n\t\t\t};\n\t\t})(scheduler._waiAria[i]);\n\t}\n\n\n})();\n\n}","export default function(scheduler){\n\treturn function assert(check, message){\n\t\tif (!check){\n\t\t\tif(scheduler.config.show_errors && scheduler.callEvent(\"onError\",[message]) !== false) {\n\t\t\t\tif (scheduler.message) {\n\t\t\t\t\tscheduler.message({type: \"error\", text: message, expire: -1});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tconsole.log(message);\n\t\t\t\t}\n\n\t\t\t\t// eslint-disable-next-line no-debugger\n\t\t\t\tdebugger;\n\t\t\t}\n\t\t}\n\t};\n}","export default function extend(scheduler) {\n\nif (window.jQuery){\n\n(function( $ ){\n\tvar counter = 0;\n\tvar methods = [];\n\t$.fn.dhx_scheduler = function(config){\n\t\tif (typeof(config) === 'string') {\n\t\t\tif (methods[config] ) {\n\t\t\t\treturn methods[config].apply(this, []);\n\t\t\t}else {\n\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_scheduler');\n\t\t\t}\n\t\t} else {\n\t\t\tvar views = [];\n\t\t\tthis.each(function() {\n\t\t\t\tif (this && this.getAttribute){\n\t\t\t\t\tif (!this.getAttribute(\"dhxscheduler\")){\n\t\t\t\t\t\tvar name = \"scheduler\";\n\t\t\t\t\t\tif (counter){\n\t\t\t\t\t\t\tname = \"scheduler\" + (counter+1);\n\t\t\t\t\t\t\twindow[name] = Scheduler.getSchedulerInstance();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar comp  = window[name];\n\n\t\t\t\t\t\tthis.setAttribute(\"dhxscheduler\", name);\n\t\t\t\t\t\tfor (var key in config)\n\t\t\t\t\t\t\tif (key!=\"data\")\n\t\t\t\t\t\t\t\tcomp.config[key] = config[key];\n\n\t\t\t\t\t\tif (!this.getElementsByTagName(\"div\").length){\n\t\t\t\t\t\t\tthis.innerHTML = '<div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\"></div><div class=\"dhx_cal_next_button\"></div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div><div class=\"dhx_cal_tab\" name=\"day_tab\" data-tab=\"day\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" data-tab=\"week\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" data-tab=\"month\" style=\"right:76px;\"></div></div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div>';\n\t\t\t\t\t\t\tthis.className += \" dhx_cal_container\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcomp.init(this, comp.config.date, comp.config.mode);\n\t\t\t\t\t\tif (config.data)\n\t\t\t\t\t\t\tcomp.parse(config.data);\n\n\t\t\t\t\t\tviews.push(comp);\n\t\t\t\t\t\tcounter++;\n\t\t\t\t\t} else\n\t\t\t\t\t\tviews.push(window[this.getAttribute(\"dhxscheduler\")]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (views.length === 1) return views[0];\n\t\t\treturn views;\n\t\t}\n\t};\n\n\n\n\n})(window.jQuery);\n\n}\n\n}","export default function extend(scheduler) {\n\nscheduler.destructor = function(){\n\tscheduler.callEvent(\"onDestroy\", []);\n\tthis.clearAll();\n\n\tif(this.$container){\n\t\t// FIXME: clear container or remove container\n\t\tthis.$container.innerHTML = \"\";\n\t\t// scheduler.$domHelpers.remove(this.$container);\n\t}\n\n\tif(this._eventRemoveAll){\n\t\tthis._eventRemoveAll();\n\t}\n\n\tif(this.resetLightbox){\n\t\tthis.resetLightbox();\n\t}\n\n\tif(this._dp && this._dp.destructor){\n\t\tthis._dp.destructor();\n\t}\n\n\t// detachAllEvents should be called last, because in components may be attached events\n\tthis.detachAllEvents();\n\n\tfor(var i in this){\n\t\tif(i.indexOf(\"$\") === 0){\n\t\t\tdelete this[i];\n\t\t}\n\t}\n\tscheduler.$destroyed = true;\n};\n\n}","import serialize from \"../common/url_serialize.js\";\n\nexport default function extend(scheduler) {\n\nscheduler.Promise = window.Promise; \n\nfunction createConfig(method, args) {\n\tvar result = {\n\t\tmethod: method\n\t};\n\n\tif (args.length === 0) {\n\t\tthrow new Error(\"Arguments list of query is wrong.\");\n\t}\n\tif (args.length === 1) {\n\t\tif (typeof args[0] === \"string\") {\n\t\t\tresult.url = args[0];\n\t\t\tresult.async = true;\n\t\t} else {\n\t\t\tresult.url = args[0].url;\n\t\t\tresult.async = (args[0].async || true);\n\t\t\tresult.callback = args[0].callback;\n\t\t\tresult.headers = args[0].headers;\n\t\t}\n\t\tif (method === \"POST\" || \"PUT\") {\n\t\t\tif (args[0].data) {\n\t\t\t\tif (typeof args[0].data !== \"string\") {\n\t\t\t\t\tresult.data = serialize(args[0].data);\n\t\t\t\t} else {\n\t\t\t\t\tresult.data = args[0].data;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult.data = \"\";\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tresult.url = args[0];\n\tswitch(method) {\n\t\tcase \"GET\":\n\t\tcase \"DELETE\":\n\t\t\tresult.callback = args[1];\n\t\t\tresult.headers = args[2];\n\t\tbreak;\n\t\tcase \"POST\":\n\t\tcase \"PUT\":\n\t\t\tif (args[1]) {\n\t\t\t\tif (typeof args[1] !== \"string\") {\n\t\t\t\t\tresult.data = serialize(args[1]);\n\t\t\t\t} else {\n\t\t\t\t\tresult.data = args[1];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult.data = \"\";\n\t\t\t}\n\t\t\tresult.callback = args[2];\n\t\t\tresult.headers = args[3];\n\t\tbreak;\n\t}\n\treturn result;\n}\nscheduler.ajax = {\n\t// if false - dhxr param will added to prevent caching on client side (default),\n\t// if true - do not add extra params\n\tcache: true,\n\n\t// default method for load/loadStruct, post/get allowed\n\tmethod: \"get\",\n\n\tserializeRequestParams: serialize,\n\tparse: function(data) {\n\t\tif (typeof data !== \"string\") return data;\n\n\t\tvar obj;\n\t\tdata = data.replace(/^[\\s]+/,\"\");\n\t\tif (typeof DOMParser !== \"undefined\" && !scheduler.$env.isIE) { // ff,ie9\n\t\t\tobj = (new DOMParser()).parseFromString(data, \"text/xml\");\n\t\t} else if (typeof window.ActiveXObject !== \"undefined\") {\n\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\tobj.async = \"false\";\n\t\t\tobj.loadXML(data);\n\t\t}\n\t\treturn obj;\n\t},\n\txmltop: function(tagname, xhr, obj) {\n\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\n\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\n\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\n\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\n\t\t\t}\n\t\t}\n\t\tif (obj !== -1) scheduler.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\n\t\treturn document.createElement(\"DIV\");\n\t},\n\txpath: function(xpathExp, docObj) {\n\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\n\t\tif (scheduler.$env.isIE) {\n\t\t\treturn docObj.selectNodes(xpathExp)||[];\n\t\t} else {\n\t\t\tvar rows = [];\n\t\t\tvar first;\n\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\n\n\t\t\twhile (true){\n\t\t\t\tfirst = col.iterateNext();\n\t\t\t\tif(first){\n\t\t\t\t\trows.push(first);\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn rows;\n\t\t}\n\t},\n\tquery: function(config) {\n\t\treturn this._call(\n\t\t\t(config.method || \"GET\"),\n\t\t\tconfig.url,\n\t\t\tconfig.data || \"\",\n\t\t\t(config.async || true),\n\t\t\tconfig.callback,\n\t\t\tconfig.headers\n\t\t);\n\t},\n\tget: function(url, onLoad, headers) {\n\t\tvar config = createConfig(\"GET\", arguments);\n\t\treturn this.query(config);\n\t},\n\tgetSync: function(url, headers) {\n\t\tvar config = createConfig(\"GET\", arguments);\n\t\tconfig.async = false;\n\t\treturn this.query(config);\n\t},\n\tput: function(url, postData, onLoad, headers) {\n\t\tvar config = createConfig(\"PUT\", arguments);\n\t\treturn this.query(config);\n\t},\n\tdel: function(url, onLoad, headers) {\n\t\t/**\n\t\t * https://tools.ietf.org/html/rfc7231#section-4.3.5\n\t\t * A payload within a DELETE request message has no defined semantics;\n\t\t * sending a payload body on a DELETE request might cause some existing\n\t\t * implementations to reject the request.\n\t\t */\n\t\tvar config = createConfig(\"DELETE\", arguments);\n\t\treturn this.query(config);\n\t},\n\tpost: function(url, postData, onLoad, headers) {\n\t\tif (arguments.length == 1) {\n\t\t\tpostData = \"\";\n\t\t} else if (arguments.length == 2 && typeof(postData) == \"function\") {\n\t\t\tonLoad = postData;\n\t\t\tpostData = \"\";\n\t\t}\n\t\tvar config = createConfig(\"POST\", arguments);\n\t\treturn this.query(config);\n\t},\n\tpostSync: function(url, postData, headers) {\n\t\tpostData = (postData === null ? \"\" : String(postData));\n\n\t\tvar config = createConfig(\"POST\", arguments);\n\t\tconfig.async = false;\n\t\treturn this.query(config);\n\t},\n\t_call: function(method, url, postData, async, onLoad, headers) {\n\t\treturn new scheduler.Promise((function(resolve, reject) {\n\t\t\tvar t = (typeof XMLHttpRequest !== undefined && !scheduler.$env.isIE ? new XMLHttpRequest() : new window.ActiveXObject(\"Microsoft.XMLHTTP\"));\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\n\n\t\t\tif (!!async) {\n\t\t\t\tt.addEventListener(\"readystatechange\", function() {\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\n\t\t\t\t\t\t\tif (!scheduler.callEvent(\"onAjaxError\", [t])) return;\n\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(t);\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\n\t\t\t\t\t\t\t\tonLoad = null;\n\t\t\t\t\t\t\t\tt = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (method == \"GET\" && !this.cache) {\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\n\t\t\t}\n\n\t\t\tt.open(method, url, async);\n\n\t\t\tif (headers){\n\t\t\t\tfor (var key in headers)\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\t\t} else if (method == \"GET\") {\n\t\t\t\tpostData = null;\n\t\t\t}\n\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\n\t\t\tt.send(postData);\n\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\n\t\t}.bind(this)));\n\t},\n\turlSeparator: function(str){\n\t\tif (str.indexOf(\"?\") != -1)\n\t\t\treturn \"&\";\n\t\telse\n\t\t\treturn \"?\";\n\t}\n};\n\nscheduler.$ajax = scheduler.ajax; // for old\n\n}","export default function extend(scheduler) {\n\n/*\n%e\tDay of the month without leading zeros (01..31)\n%d\tDay of the month, 2 digits with leading zeros (01..31)\n%j\tDay of the year, 3 digits with leading zeros (001..366)\n%a\tA textual representation of a day, two letters\n%W\tA full textual representation of the day of the week\n\n%c\tNumeric representation of a month, without leading zeros (0..12)\n%m\tNumeric representation of a month, with leading zeros (00..12)\n%b\tA short textual representation of a month, three letters (Jan..Dec)\n%M\tA full textual representation of a month, such as January or March (January..December)\n\n%y\tA two digit representation of a year (93..03)\n%Y\tA full numeric representation of a year, 4 digits (1993..03)\n*/\n\nscheduler.config={\n\tdefault_date: \"%j %M %Y\",\n\tmonth_date: \"%F %Y\",\n\tload_date: \"%Y-%m-%d\",\n\tweek_date: \"%l\",\n\tday_date: \"%D %j\",\n\thour_date: \"%H:%i\",\n\tmonth_day: \"%d\",\n\t//xml_date: \"%m/%d/%Y %H:%i\",\n\tdate_format: \"%Y-%m-%d %H:%i\",\n\tapi_date: \"%d-%m-%Y %H:%i\",\n\tparse_exact_format: false,\n\tpreserve_length:true,\n\ttime_step: 5,\n\tdisplayed_event_color: \"#ff4a4a\",\n\tdisplayed_event_text_color: \"#ffef80\",\n\twide_form: 0,\n\tday_column_padding: 8,\n\tuse_select_menu_space: true,\n\tfix_tab_position: true,\n\tstart_on_monday: true,\n\tfirst_hour: 0,\n\tlast_hour: 24,\n\treadonly: false,\n\tdrag_resize: true,\n\tdrag_move: true,\n\tdrag_create: true,\n\tdrag_event_body: true,\n\tdblclick_create: true,\n\tdetails_on_dblclick: true,\n\tedit_on_create: true,\n\tdetails_on_create: true,\n\theader: null,\n\thour_size_px: 44,\n\tresize_month_events:false,\n\tresize_month_timed:false,\n\tresponsive_lightbox: false,\n\tseparate_short_events: true,\n\trtl:false,\n\n\tcascade_event_display: false,\n\tcascade_event_count: 4,\n\tcascade_event_margin: 30,\n\n\tmulti_day:true,\n\tmulti_day_height_limit: 200,\n\n\tdrag_lightbox: true,\n\tpreserve_scroll: true,\n\tselect: true,\n\tundo_deleted: true,\n\tserver_utc: false,\n\ttouch:true,\n\ttouch_tip:true,\n\ttouch_drag:500,\n\ttouch_swipe_dates: false,\n\tquick_info_detached:true,\n\n\tpositive_closing: false,\n\t//header_datepicker: true,\n\tdrag_highlight: true,\n\tlimit_drag_out: false,\n\ticons_edit: [\"icon_save\", \"icon_cancel\"],\n\ticons_select: [\"icon_details\", \"icon_edit\", \"icon_delete\"],\n\tbuttons_right: [\"dhx_save_btn\", \"dhx_cancel_btn\"],\n\tbuttons_left: [\"dhx_delete_btn\"],\n\tlightbox: {\n\t\tsections: [\n\t\t\t{name: \"description\", map_to: \"text\", type: \"textarea\", focus: true},\n\t\t\t{name: \"time\", height: 72, type: \"time\", map_to: \"auto\"}\n\t\t]\n\t},\n\thighlight_displayed_event: true,\n\tleft_border: false,\n\n\tajax_error: \"alert\",//\"ignore\"|\"console\"\n\tdelay_render: 0,\n\ttimeline_swap_resize: true,\n\twai_aria_attributes: true,\n\twai_aria_application_role: true,\n\n\tcsp: \"auto\",\n\tevent_attribute: \"data-event-id\",\n\tshow_errors: true\n};\n\nscheduler.config.buttons_left.$initial = scheduler.config.buttons_left.join();\nscheduler.config.buttons_right.$initial = scheduler.config.buttons_right.join();\n\nscheduler._helpers = {\n\tparseDate: function parseDate(date) {\n\t\tvar parse = scheduler.templates.xml_date || scheduler.templates.parse_date;\n\t\treturn parse(date);\n\t},\n\tformatDate: function formatDate(date) {\n\t\tvar format = scheduler.templates.xml_format || scheduler.templates.format_date;\n\t\treturn format(date);\n\t}\n};\n\nscheduler.templates={};\nscheduler.init_templates=function(){\n\n\n\n\tvar d=scheduler.date.date_to_str;\n\tvar c=scheduler.config;\n\tvar f = function(a,b){\n\t\tfor (var c in b)\n\t\t\tif (!a[c]) a[c]=b[c];\n\t};\n\tf(scheduler.templates,{\n\t\tday_date:d(c.default_date),\n\t\tmonth_date:d(c.month_date),\n\t\tweek_date:function(d1,d2){\n\t\t\tif(c.rtl) {\n\t\t\t\treturn scheduler.templates.day_date(scheduler.date.add(d2,-1,\"day\"))+\" &ndash; \"+scheduler.templates.day_date(d1);\n\t\t\t} \n\t\t\treturn scheduler.templates.day_date(d1)+\" &ndash; \"+scheduler.templates.day_date(scheduler.date.add(d2,-1,\"day\"));\n\t\t},\n\t\tday_scale_date:d(c.default_date),\n\t\ttime_slot_text: function(date){\n\t\t\treturn \"\";\n\t\t},\n\t\ttime_slot_class: function(date){\n\t\t\treturn \"\";\n\t\t},\n\n\t\tmonth_scale_date:d(c.week_date),\n\t\tweek_scale_date:d(c.day_date),\n\t\thour_scale:d(c.hour_date),\n\t\ttime_picker:d(c.hour_date),\n\t\tevent_date:d(c.hour_date),\n\t\tmonth_day:d(c.month_day),\n\n\t\tload_format: d(c.load_date),\n\t//\txml_date:scheduler.date.str_to_date(c.xml_date,c.server_utc),\n\t//\txml_format:d(c.date_format,c.server_utc),\n\t\tformat_date: d(c.date_format, c.server_utc),\n\t\tparse_date:scheduler.date.str_to_date(c.date_format,c.server_utc),\n\t\tapi_date:scheduler.date.str_to_date(c.api_date, false, false),\n\t\tevent_header:function(start,end,ev){\n\n\t\t\tif(ev._mode === \"small\" || ev._mode === \"smallest\"){\n\t\t\t\treturn scheduler.templates.event_date(start);\n\t\t\t}else{\n\t\t\t\treturn scheduler.templates.event_date(start)+\" - \"+scheduler.templates.event_date(end);\n\t\t\t}\n\t\t},\n\t\tevent_text:function(start,end,ev){\n\t\t\treturn ev.text;\n\t\t},\n\t\tevent_class:function(start,end,ev){\n\t\t\treturn \"\";\n\t\t},\n\t\tmonth_date_class:function(d){\n\t\t\treturn \"\";\n\t\t},\n\t\tweek_date_class:function(d){\n\t\t\treturn \"\";\n\t\t},\n\t\tevent_bar_date:function(start,end,ev) {\n\t\t\treturn scheduler.templates.event_date(start);\n\t\t},\n\t\tevent_bar_text:function(start,end,ev){\n\t\t\treturn ev.text;\n\t\t},\n\t\tmonth_events_link : function(date, count){\n\t\t\treturn \"<a>View more(\"+count+\" events)</a>\";\n\t\t},\n\t\tdrag_marker_class : function(start, end, event){\n\t\t\treturn \"\";\n\t\t},\n\t\tdrag_marker_content : function(start, end, event){\n\t\t\treturn \"\";\n\t\t},\n\t\t/* Could be redifined */\n\t\ttooltip_date_format: scheduler.date.date_to_str(\"%Y-%m-%d %H:%i\"),\n\t\ttooltip_text: function(start, end, event) {\n\t\t\treturn \"<b>Event:</b> \" + event.text + \"<br/><b>Start date:</b> \" + scheduler.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + scheduler.templates.tooltip_date_format(end);\n\t\t},\n\n\t\tcalendar_month: d(\"%F %Y\"),\n\t\tcalendar_scale_date: d(\"%D\"),\n\t\tcalendar_date: d(\"%d\"),\n\t\tcalendar_time: d(\"%d-%m-%Y\")\n\n\t});\n\tthis.callEvent(\"onTemplatesReady\",[]);\n};\n\n\n}","export default function extend(scheduler) {\n\nscheduler._events = {};\nscheduler.clearAll = function() {\n\tthis._events = {};\n\tthis._loaded = {};\n\n\tthis._edit_id = null;\n\tthis._select_id = null;\n\tthis._drag_id = null;\n\tthis._drag_mode = null;\n\tthis._drag_pos = null;\n\tthis._new_event = null;\n\n\tthis.clear_view();\n\tthis.callEvent(\"onClearAll\", []);\n};\nscheduler.addEvent = function(start_date, end_date, text, id, extra_data) {\n\tif (!arguments.length)\n\t\treturn this.addEventNow();\n\tvar ev = start_date;\n\tif (arguments.length != 1) {\n\t\tev = extra_data || {};\n\t\tev.start_date = start_date;\n\t\tev.end_date = end_date;\n\t\tev.text = text;\n\t\tev.id = id;\n\t}\n\tev.id = ev.id || scheduler.uid();\n\tev.text = ev.text || \"\";\n\n\tif (typeof ev.start_date == \"string\")  ev.start_date = this.templates.api_date(ev.start_date);\n\tif (typeof ev.end_date == \"string\")  ev.end_date = this.templates.api_date(ev.end_date);\n\tvar d = (this.config.event_duration || this.config.time_step) * 60000;\n\t// GS-2548: events that less than time step, will have the minimal duration according to time step\n\tif (new Date(ev.end_date).valueOf() - new Date(ev.start_date).valueOf() <= d)\n\t\tev.end_date.setTime(ev.end_date.valueOf() + d);\n\n\tev.start_date.setMilliseconds(0);\n\tev.end_date.setMilliseconds(0);\n\n\tev._timed = this.isOneDayEvent(ev);\n\n\tvar is_new = !this._events[ev.id];\n\tthis._events[ev.id] = ev;\n\tthis.event_updated(ev);\n\tif (!this._loading)\n\t\tthis.callEvent(is_new ? \"onEventAdded\" : \"onEventChanged\", [ev.id, ev]);\n\treturn ev.id;\n};\nscheduler.deleteEvent = function(id, silent) {\n\tvar ev = this._events[id];\n\tif (!silent && (!this.callEvent(\"onBeforeEventDelete\", [id, ev]) || !this.callEvent(\"onConfirmedBeforeEventDelete\", [id, ev])))\n\t\treturn;\n\tif (ev) {\n\t\tif(scheduler.getState().select_id == id){\n\t\t\tscheduler.unselect();\n\t\t}\n\t\tdelete this._events[id];\n\t\tthis.event_updated(ev);\n\n\t\tif(this._drag_id == ev.id){\n\t\t\tthis._drag_id = null;\n\t\t\tthis._drag_mode=null;\n\t\t\tthis._drag_pos=null;\n\t\t}\n\t}\n\n\tthis.callEvent(\"onEventDeleted\", [id, ev]);\n};\nscheduler.getEvent = function(id) {\n\treturn this._events[id];\n};\nscheduler.setEvent = function(id, hash) {\n\tif(!hash.id)\n\t\thash.id = id;\n\n\tthis._events[id] = hash;\n};\nscheduler.for_rendered = function(id, method) {\n\tfor (var i = this._rendered.length - 1; i >= 0; i--)\n\t\tif (this._rendered[i].getAttribute(this.config.event_attribute) == id)\n\t\t\tmethod(this._rendered[i], i);\n};\nscheduler.changeEventId = function(id, new_id) {\n\tif (id == new_id) return;\n\tvar ev = this._events[id];\n\tif (ev) {\n\t\tev.id = new_id;\n\t\tthis._events[new_id] = ev;\n\t\tdelete this._events[id];\n\t}\n\tthis.for_rendered(id, function(r) {\n\t\tr.setAttribute(\"event_id\", new_id); // for backward compatibility\n\t\tr.setAttribute(scheduler.config.event_attribute, new_id);\n\t});\n\tif (this._select_id == id) this._select_id = new_id;\n\tif (this._edit_id == id) this._edit_id = new_id;\n\t//if (this._drag_id==id) this._drag_id=new_id;\n\tthis.callEvent(\"onEventIdChange\", [id, new_id]);\n};\n\n(function() {\n\tvar attrs = [\"text\", \"Text\", \"start_date\", \"StartDate\", \"end_date\", \"EndDate\"];\n\tvar create_getter = function(name) {\n\t\treturn function(id) { return (scheduler.getEvent(id))[name]; };\n\t};\n\tvar create_setter = function(name) {\n\t\treturn function(id, value) {\n\t\t\tvar ev = scheduler.getEvent(id);\n\t\t\tev[name] = value;\n\t\t\tev._changed = true;\n\t\t\tev._timed = this.isOneDayEvent(ev);\n\t\t\tscheduler.event_updated(ev, true);\n\t\t};\n\t};\n\tfor (var i = 0; i < attrs.length; i += 2) {\n\t\tscheduler[\"getEvent\" + attrs[i + 1]] = create_getter(attrs[i]);\n\t\tscheduler[\"setEvent\" + attrs[i + 1]] = create_setter(attrs[i]);\n\t}\n})();\n\nscheduler.event_updated = function(ev, force) {\n\tif (this.is_visible_events(ev))\n\t\tthis.render_view_data();\n\telse\n\t\tthis.clear_event(ev.id);\n};\nscheduler.is_visible_events = function(ev) {\n\tif(!this._min_date || !this._max_date){\n\t\treturn false;\n\t}\n\n\t//if in displayed dates\n\tvar in_visible_range = (ev.start_date.valueOf() < this._max_date.valueOf() && this._min_date.valueOf() < ev.end_date.valueOf());\n\n\tif(in_visible_range){\n\n\t\t//end dates are not between last/first hours\n\t\tvar evFirstHour = ev.start_date.getHours(),\n\t\t\tevLastHour = ev.end_date.getHours() + (ev.end_date.getMinutes()/60),\n\t\t\tlastHour = this.config.last_hour,\n\t\t\tfirstHour = this.config.first_hour;\n\n\t\tvar end_dates_visible = (this._table_view || !((evLastHour > lastHour || evLastHour <= firstHour) && (evFirstHour >= lastHour || evFirstHour < firstHour)));\n\n\t\tif(end_dates_visible){\n\t\t\treturn true;\n\t\t}else{\n\n\t\t\t//event is bigger than area hidden between last/first hours\n\t\t\tvar event_duration = (ev.end_date.valueOf() - ev.start_date.valueOf()) / (1000*60*60),//hours\n\t\t\t\thidden_duration = 24 - (this.config.last_hour - this.config.first_hour);\n\n\t\t\treturn !!((event_duration > hidden_duration) || (evFirstHour < lastHour && evLastHour > firstHour));\n\n\t\t}\n\t}else{\n\t\treturn false;\n\t}\n};\nscheduler.isOneDayEvent = function(ev) {\n\t// decrease by one ms so events that ends on midnight on the next day were still considered one day events\n\t// e.g. (09-02-2018 19:00 - 10-02-2018 00:00)\n\t// events >= 24h long are considered multiday\n\tvar checkEndDate = new Date(ev.end_date.valueOf() - 1);\n\treturn (\n\t\tev.start_date.getFullYear() === checkEndDate.getFullYear() &&\n\t\tev.start_date.getMonth() === checkEndDate.getMonth() &&\n\t\tev.start_date.getDate() === checkEndDate.getDate()\n\t) && ((ev.end_date.valueOf() - ev.start_date.valueOf()) < (1000 * 60 * 60 * 24));\n};\n\nscheduler.get_visible_events = function(only_timed) {\n\t//not the best strategy for sure\n\tvar stack = [];\n\n\tfor (var id in this._events)\n\t\tif (this.is_visible_events(this._events[id]))\n\t\t\tif (!only_timed || this._events[id]._timed)\n\t\t\t\tif (this.filter_event(id, this._events[id]))\n\t\t\t\t\tstack.push(this._events[id]);\n\n\treturn stack;\n};\nscheduler.filter_event = function(id, ev) {\n\tvar filter = this[\"filter_\" + this._mode];\n\treturn (filter) ? filter(id, ev) : true;\n};\nscheduler._is_main_area_event = function(ev){\n\treturn !!ev._timed;\n};\nscheduler.render_view_data = function(evs, hold) {\n\tvar full = false;\n\tif (!evs) {\n\t\tfull = true;\n\t\tif (this._not_render) {\n\t\t\tthis._render_wait = true;\n\t\t\treturn;\n\t\t}\n\t\tthis._render_wait = false;\n\n\t\tthis.clear_view();\n\t\tevs = this.get_visible_events(!(this._table_view || this.config.multi_day));\n\t}\n\tfor(var i= 0, len = evs.length; i < len; i++){\n\t\tthis._recalculate_timed(evs[i]);\n\t}\n\n\tif (this.config.multi_day && !this._table_view) {\n\n\t\tvar tvs = [];\n\t\tvar tvd = [];\n\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\tif (this._is_main_area_event(evs[i]))\n\t\t\t\ttvs.push(evs[i]);\n\t\t\telse\n\t\t\t\ttvd.push(evs[i]);\n\t\t}\n\n\t\tif(!this._els['dhx_multi_day']){\n\t\t\tvar message = scheduler._commonErrorMessages.unknownView(this._mode);\n\t\t\tthrow new Error(message);\n\t\t}\n\n\t\t// multiday events\n\t\tthis._rendered_location = this._els['dhx_multi_day'][0];\n\t\tthis._table_view = true;\n\t\tthis.render_data(tvd, hold);\n\t\tthis._table_view = false;\n\n\t\t// normal events\n\t\tthis._rendered_location = this._els['dhx_cal_data'][0];\n\t\tthis._table_view = false;\n\t\tthis.render_data(tvs, hold);\n\n\t} else {\n\t\tvar buffer = document.createDocumentFragment();\n\t\tvar renderedLocation = this._els['dhx_cal_data'][0];\n\t\tthis._rendered_location = buffer;\n\t\tthis.render_data(evs, hold);\n\t\trenderedLocation.appendChild(buffer);\n\t\tthis._rendered_location = renderedLocation;\n\n\t}\n\n\tif(full){\n\t\tthis.callEvent(\"onDataRender\", []);\n\t}\n};\n\n\nscheduler._view_month_day = function(e){\n\tvar date = scheduler.getActionData(e).date;\n\tif(!scheduler.callEvent(\"onViewMoreClick\", [date]))\n\t\treturn;\n\tscheduler.setCurrentView(date, \"day\");\n};\n\nscheduler._render_month_link = function(ev){\n\tvar parent = this._rendered_location;\n\tvar toRender = this._lame_clone(ev);\n\n\t//render links in each cell of multiday events\n\tfor(var d = ev._sday; d < ev._eday; d++){\n\n\t\ttoRender._sday = d;\n\t\ttoRender._eday = d+1;\n\n\t\tvar date = scheduler.date;\n\t\tvar curr = scheduler._min_date;\n\t\tcurr = date.add(curr, toRender._sweek, \"week\");\n\t\tcurr = date.add(curr, toRender._sday, \"day\");\n\t\tvar count = scheduler.getEvents(curr, date.add(curr, 1, \"day\")).length;\n\n\t\tvar pos = this._get_event_bar_pos(toRender);\n\t\tvar widt = (pos.x2 - pos.x);\n\n\t\tvar el = document.createElement(\"div\");\n\t\tscheduler.event(el, \"click\", function(e){scheduler._view_month_day(e);});\n\t\tel.className = \"dhx_month_link\";\n\t\tel.style.top = pos.y + \"px\";\n\t\tel.style.left = pos.x + \"px\";\n\t\tel.style.width = widt + \"px\";\n\t\tel.innerHTML = scheduler.templates.month_events_link(curr, count);\n\t\tthis._rendered.push(el);\n\n\t\tparent.appendChild(el);\n\t}\n};\n\nscheduler._recalculate_timed = function(id){\n\tif(!id) return;\n\tvar ev;\n\tif(typeof(id) != \"object\")\n\t\tev = this._events[id];\n\telse\n\t\tev = id;\n\tif(!ev) return;\n\tev._timed = scheduler.isOneDayEvent(ev);\n};\nscheduler.attachEvent(\"onEventChanged\", scheduler._recalculate_timed);\nscheduler.attachEvent(\"onEventAdded\", scheduler._recalculate_timed);\n\nscheduler.render_data = function(evs, hold) {\n\tevs = this._pre_render_events(evs, hold);\n\tvar containers = {};\n\tfor (var i = 0; i < evs.length; i++)\n\t\tif (this._table_view){\n\t\t\tif(scheduler._mode != 'month'){\n\t\t\t\tthis.render_event_bar(evs[i]);//may be multiday section on other views\n\t\t\t}else{\n\n\t\t\t\tvar max_evs = scheduler.config.max_month_events;\n\t\t\t\tif(max_evs !== max_evs*1 || evs[i]._sorder < max_evs){\n\t\t\t\t\t//of max number events per month cell is set and event can be rendered\n\t\t\t\t\tthis.render_event_bar(evs[i]);\n\t\t\t\t}else if(max_evs !== undefined && evs[i]._sorder == max_evs){\n\t\t\t\t\t//render 'view more' links\n\t\t\t\t\tscheduler._render_month_link(evs[i]);\n\t\t\t\t}else{\n\t\t\t\t\t//do not render events with ordinal number > maximum events per cell\n\t\t\t\t}\n\t\t\t}\n\n\n\n\t\t}else{\n\t\t\tvar ev = evs[i];\n\t\t\tvar parent = scheduler.locate_holder(ev._sday);\n\t\t\tif (!parent) continue; //attempt to render non-visible event\n\n\t\t\tif(!containers[ev._sday]){\n\t\t\t\tcontainers[ev._sday] = {\n\t\t\t\t\treal: parent,\n\t\t\t\t\tbuffer: document.createDocumentFragment(),\n\t\t\t\t\twidth: parent.clientWidth\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar container = containers[ev._sday];\n\t\t\tthis.render_event(ev, container.buffer, container.width);\n\t\t}\n\n\t\tfor(var i in containers){\n\t\t\tvar container = containers[i];\n\t\t\tif(container.real && container.buffer){\n\t\t\t\tcontainer.real.appendChild(container.buffer);\n\t\t\t}\n\t\t}\n};\n\nscheduler._get_first_visible_cell = function(cells) {\n\tfor (var i = 0; i < cells.length; i++) {\n\t\tif ((cells[i].className || \"\").indexOf(\"dhx_scale_ignore\") == -1) {\n\t\t\treturn cells[i];\n\t\t}\n\t}\n\t// if no visible cell found, return cells[0] to be more tolerant, since it's the original logic\n\treturn cells[0];\n};\n\nscheduler._pre_render_events = function(evs, hold) {\n\tvar hb = this.xy.bar_height;\n\tvar h_old = this._colsS.heights;\n\tvar h = this._colsS.heights = [0, 0, 0, 0, 0, 0, 0];\n\tvar data = this._els[\"dhx_cal_data\"][0];\n\n\tif (!this._table_view) {\n\t\tevs = this._pre_render_events_line(evs, hold); //ignore long events for now\n\t}\n\telse {\n\t\tevs = this._pre_render_events_table(evs, hold);\n\t}\n\tif (this._table_view) {\n\t\tif (hold)\n\t\t\tthis._colsS.heights = h_old;\n\t\telse {\n\t\t\tvar monthRows = data.querySelectorAll(\".dhx_cal_month_row\");\n\t\t\tif (monthRows.length) {\n\t\t\t\tfor (var i = 0; i < monthRows.length; i++) {\n\t\t\t\t\th[i]++;\n\t\t\t\t\tvar cells = monthRows[i].querySelectorAll(\".dhx_cal_month_cell\");\n\t\t\t\t\tvar cellHeight = this._colsS.height - this.xy.month_head_height;\n\t\t\t\t\tif ((h[i]) * hb > cellHeight) { // 22 - height of cell's header\n\t\t\t\t\t\t//we have overflow, update heights\n\n\t\t\t\t\t\tvar cHeight = cellHeight;\n\t\t\t\t\t\tif(this.config.max_month_events*1 !== this.config.max_month_events || h[i] <= this.config.max_month_events){\n\t\t\t\t\t\t\tcHeight = h[i] * hb;\n\t\t\t\t\t\t}else if( (this.config.max_month_events + 1) * hb > cellHeight){\n\t\t\t\t\t\t\tcHeight = (this.config.max_month_events + 1) * hb;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmonthRows[i].style.height = (cHeight + this.xy.month_head_height) + \"px\";\n\t\t\t\t\t}\n\n\t\t\t\t\th[i] = (h[i - 1] || 0) + scheduler._get_first_visible_cell(cells).offsetHeight;\n\t\t\t\t}\n\t\t\t\th.unshift(0);\n\t\t\t\tconst dataArea = this.$container.querySelector(\".dhx_cal_data\");\n\t\t\t\tif (dataArea.offsetHeight < dataArea.scrollHeight && !scheduler._colsS.scroll_fix && scheduler.xy.scroll_width) {\n\n\t\t\t\t\tvar scale_settings = scheduler._colsS,\n\t\t\t\t\t\tsum_width = scale_settings[scale_settings.col_length],\n\t\t\t\t\t\trow_heights = scale_settings.heights.slice();\n\n\t\t\t\t\tsum_width -= (scheduler.xy.scroll_width || 0);\n\t\t\t\t\tthis._calc_scale_sizes(sum_width, this._min_date, this._max_date);\n\t\t\t\t\tscheduler._colsS.heights = row_heights;\n\n\t\t\t\t\tthis.set_xy(this._els[\"dhx_cal_header\"][0], sum_width/*, this.xy.scale_height*/);\n\t\t\t\t\tscheduler._render_scales(this._els[\"dhx_cal_header\"][0]);\n\t\t\t\t\tscheduler._render_month_scale(this._els[\"dhx_cal_data\"][0], this._get_timeunit_start(), this._min_date);\n\n\t\t\t\t\tscale_settings.scroll_fix = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!evs.length && this._els[\"dhx_multi_day\"][0].style.visibility == \"visible\")\n\t\t\t\t\th[0] = -1;\n\t\t\t\tif (evs.length || h[0] == -1) {\n\t\t\t\t\t//shift days to have space for multiday events\n\t\t\t\t\t//var childs = evl.parentNode.childNodes;\n\n\t\t\t\t\t// +1 so multiday events would have 2px from top and 2px from bottom by default\n\t\t\t\t\tvar full_multi_day_height = (h[0] + 1) * hb + 4;\n\n\t\t\t\t\tvar used_multi_day_height = full_multi_day_height;\n\t\t\t\t\tvar used_multi_day_height_css = full_multi_day_height + \"px\";\n\t\t\t\t\tif (this.config.multi_day_height_limit) {\n\t\t\t\t\t\tused_multi_day_height = Math.min(full_multi_day_height, this.config.multi_day_height_limit) ;\n\t\t\t\t\t\tused_multi_day_height_css = used_multi_day_height + \"px\";\n\t\t\t\t\t}\n\n\t\t\t\t\tvar multi_day_section = this._els[\"dhx_multi_day\"][0];\n\t\t\t\t\tmulti_day_section.style.height = used_multi_day_height_css;\n\t\t\t\t\tmulti_day_section.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\n\t\t\t\t\tmulti_day_section.style.display = (h[0] == -1 ? \"none\" : \"\");\n\n\t\t\t\t\t// icon\n\t\t\t\t\tvar multi_day_icon = this._els[\"dhx_multi_day\"][1];\n\t\t\t\t\tmulti_day_icon.style.height = used_multi_day_height_css;\n\t\t\t\t\tmulti_day_icon.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\n\t\t\t\t\tmulti_day_icon.style.display = (h[0] == -1 ? \"none\" : \"\");\n\t\t\t\t\tmulti_day_icon.className = h[0] ? \"dhx_multi_day_icon\" : \"dhx_multi_day_icon_small\";\n\t\t\t\t\tthis._dy_shift = (h[0] + 1) * hb;\n\t\t\t\t\tif(this.config.multi_day_height_limit){\n\t\t\t\t\t\tthis._dy_shift = Math.min(this.config.multi_day_height_limit, this._dy_shift);\n\t\t\t\t\t}\n\t\t\t\t\th[0] = 0;\n\n\t\t\t\t\tif (used_multi_day_height != full_multi_day_height) {\n\n\t\t\t\t\t\tmulti_day_section.style.overflowY = \"auto\";\n\t\t\t\t\t//\tmulti_day_section.style.width = (parseInt(this._els[\"dhx_cal_navline\"][0].style.width)) + \"px\";\n\n\t\t\t\t\t\tmulti_day_icon.style.position = \"fixed\";\n\t\t\t\t\t\tmulti_day_icon.style.top = \"\";\n\t\t\t\t\t\tmulti_day_icon.style.left = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn evs;\n};\nscheduler._get_event_sday = function(ev) {\n\t// get day in current view\n\t// use rounding for 23 or 25 hour days on DST\n\tvar datePart = this.date.day_start(new Date(ev.start_date));\n\treturn Math.round((datePart.valueOf() - this._min_date.valueOf()) / (24 * 60 * 60 * 1000));\n};\nscheduler._get_event_mapped_end_date = function(ev) {\n\tvar end_date = ev.end_date;\n\tif (this.config.separate_short_events) {\n\t\tvar ev_duration = (ev.end_date - ev.start_date) / 60000; // minutes\n\t\tif (ev_duration < this._min_mapped_duration) {\n\t\t\tend_date = this.date.add(end_date, this._min_mapped_duration - ev_duration, \"minute\");\n\t\t}\n\t}\n\treturn end_date;\n};\nscheduler._pre_render_events_line = function(evs, hold){\n\tevs.sort(function(a, b) {\n\t\tif (a.start_date.valueOf() == b.start_date.valueOf())\n\t\t\treturn a.id > b.id ? 1 : -1;\n\t\treturn a.start_date > b.start_date ? 1 : -1;\n\t});\n\tvar days = []; //events by weeks\n\tvar evs_originals = [];\n\n\tthis._min_mapped_duration = Math.floor(this.xy.min_event_height * 60 / this.config.hour_size_px);  // values could change along the way\n\n\tfor (var i = 0; i < evs.length; i++) {\n\t\tvar ev = evs[i];\n\n\t\t//check date overflow\n\t\tvar sd = ev.start_date;\n\t\tvar ed = ev.end_date;\n\t\t//check scale overflow\n\t\tvar sh = sd.getHours();\n\t\tvar eh = ed.getHours();\n\t\tev._sday = this._get_event_sday(ev); // sday based on event start_date\n\t\tif (this._ignores[ev._sday]){\n\t\t\t//ignore event\n\t\t\tevs.splice(i,1);\n\t\t\ti--;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!days[ev._sday]) days[ev._sday] = [];\n\n\t\tif (!hold) {\n\t\t\tev._inner = false;\n\n\t\t\tvar stack = days[ev._sday];\n\n\t\t\twhile (stack.length) {\n\t\t\t\tvar t_ev = stack[stack.length - 1];\n\t\t\t\tvar t_end_date = this._get_event_mapped_end_date(t_ev);\n\t\t\t\tif (t_end_date.valueOf() <= ev.start_date.valueOf()) {\n\t\t\t\t\tstack.splice(stack.length - 1, 1);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar slot_index = stack.length;\n\t\t\tvar sorderSet = false;\n\t\t\tfor (var j = 0; j < stack.length; j++) {\n\t\t\t\tvar t_ev = stack[j];\n\t\t\t\tvar t_end_date = this._get_event_mapped_end_date(t_ev);\n\t\t\t\tif (t_end_date.valueOf() <= ev.start_date.valueOf()) {\n\t\t\t\t\tsorderSet = true;\n\t\t\t\t\tev._sorder = t_ev._sorder;\n\t\t\t\t\tslot_index = j;\n\t\t\t\t\tev._inner = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (stack.length)\n\t\t\t\tstack[stack.length - 1]._inner = true;\n\n\t\t\tif (!sorderSet) {\n\t\t\t\tif (stack.length) {\n\t\t\t\t\tif (stack.length <= stack[stack.length - 1]._sorder) {\n\t\t\t\t\t\tif (!stack[stack.length - 1]._sorder)\n\t\t\t\t\t\t\tev._sorder = 0;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor (j = 0; j < stack.length; j++) {\n\t\t\t\t\t\t\t\tvar _is_sorder = false;\n\t\t\t\t\t\t\t\tfor (var k = 0; k < stack.length; k++) {\n\t\t\t\t\t\t\t\t\tif (stack[k]._sorder == j) {\n\t\t\t\t\t\t\t\t\t\t_is_sorder = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!_is_sorder) {\n\t\t\t\t\t\t\t\t\tev._sorder = j;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tev._inner = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar _max_sorder = stack[0]._sorder;\n\t\t\t\t\t\tfor (j = 1; j < stack.length; j++) {\n\t\t\t\t\t\t\tif (stack[j]._sorder > _max_sorder)\n\t\t\t\t\t\t\t\t_max_sorder = stack[j]._sorder;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tev._sorder = _max_sorder + 1;\n\t\t\t\t\t\tev._inner = false;\n\t\t\t\t\t}\n\n\t\t\t\t} else\n\t\t\t\t\tev._sorder = 0;\n\t\t\t}\n\n\t\t\tstack.splice(slot_index, slot_index == stack.length ? 0 : 1, ev);\n\n\t\t\tif (stack.length > (stack.max_count || 0)) {\n\t\t\t\tstack.max_count = stack.length;\n\t\t\t\tev._count = stack.length;\n\t\t\t} else {\n\t\t\t\tev._count = (ev._count) ? ev._count : 1;\n\t\t\t}\n\t\t}\n\n\t\tif (sh < this.config.first_hour || eh >= this.config.last_hour) {\n\t\t\t// Need to create copy of event as we will be changing it's start/end date\n\t\t\t// e.g. first_hour = 11 and event.start_date hours = 9. Need to preserve that info\n\t\t\tevs_originals.push(ev);\n\t\t\tevs[i] = ev = this._copy_event(ev);\n\n\t\t\tif (sh < this.config.first_hour) {\n\t\t\t\tev.start_date.setHours(this.config.first_hour);\n\t\t\t\tev.start_date.setMinutes(0);\n\t\t\t}\n\t\t\tif (eh >= this.config.last_hour) {\n\t\t\t\tev.end_date.setMinutes(0);\n\t\t\t\tev.end_date.setHours(this.config.last_hour);\n\t\t\t}\n\n\t\t\tif (ev.start_date > ev.end_date || sh == this.config.last_hour) {\n\t\t\t\tevs.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t}\n\tif (!hold) {\n\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\tevs[i]._count = days[evs[i]._sday].max_count;\n\t\t}\n\t\tfor (var i = 0; i < evs_originals.length; i++)\n\t\t\tevs_originals[i]._count = days[evs_originals[i]._sday].max_count;\n\t}\n\n\treturn evs;\n};\nscheduler._time_order = function(evs) {\n\tevs.sort(function(a, b) {\n\t\tif (a.start_date.valueOf() == b.start_date.valueOf()) {\n\t\t\tif (a._timed && !b._timed) return 1;\n\t\t\tif (!a._timed && b._timed) return -1;\n\t\t\treturn a.id > b.id ? 1 : -1;\n\t\t}\n\t\treturn a.start_date > b.start_date ? 1 : -1;\n\t});\n};\n\nscheduler._is_any_multiday_cell_visible = function(from, to, event){\n\tvar cols = this._cols.length;\n\tvar isAnyCellVisible = false;\n\tvar checkDate = from;\n\tvar noCells = true;\n\tvar lastDayEnd = new Date(to);\n\tif(scheduler.date.day_start(new Date(to)).valueOf() != to.valueOf()){\n\t\tlastDayEnd = scheduler.date.day_start(lastDayEnd);\n\t\tlastDayEnd = scheduler.date.add(lastDayEnd, 1, \"day\");\n\t}\n\twhile(checkDate < lastDayEnd){\n\t\tnoCells = false;\n\t\tvar cellIndex = this.locate_holder_day(checkDate, false, event);\n\t\tvar weekCellIndex = cellIndex % cols;\n\t\tif(!this._ignores[weekCellIndex]){\n\t\t\tisAnyCellVisible = true;\n\t\t\tbreak;\n\t\t}\n\t\tcheckDate = scheduler.date.add(checkDate, 1, \"day\");\n\t}\n\treturn noCells || isAnyCellVisible;\n};\n\nscheduler._pre_render_events_table = function(evs, hold) { // max - max height of week slot\n\tthis._time_order(evs);\n\tvar out = [];\n\tvar weeks = [\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[],\n\t\t[]\n\t]; //events by weeks\n\tvar max = this._colsS.heights;\n\tvar start_date;\n\tvar cols = this._cols.length;\n\tvar chunks_info = {};\n\n\tfor (var i = 0; i < evs.length; i++) {\n\t\tvar ev = evs[i];\n\t\tvar id = ev.id;\n\t\tif (!chunks_info[id]) {\n\t\t\tchunks_info[id] = {\n\t\t\t\tfirst_chunk: true,\n\t\t\t\tlast_chunk: true\n\t\t\t};\n\t\t}\n\t\tvar chunk_info = chunks_info[id];\n\t\tvar sd = (start_date || ev.start_date);\n\t\tvar ed = ev.end_date;\n\t\t//trim events which are crossing through current view\n\t\tif (sd < this._min_date) {\n\t\t\tchunk_info.first_chunk = false;\n\t\t\tsd = this._min_date;\n\t\t}\n\t\tif (ed > this._max_date) {\n\t\t\tchunk_info.last_chunk = false;\n\t\t\ted = this._max_date;\n\t\t}\n\n\t\tvar locate_s = this.locate_holder_day(sd, false, ev);\n\t\tev._sday = locate_s % cols;\n\t\t//skip single day events for ignored dates\n\t\tif (this._ignores[ev._sday] && ev._timed) continue;\n\n\t\tvar locate_e = this.locate_holder_day(ed, true, ev) || cols;\n\t\tev._eday = (locate_e % cols) || cols; //cols used to fill full week, when event end on monday\n\t\tev._length = locate_e - locate_s;\n\t\t//3600000 - compensate 1 hour during winter|summer time shift\n\t\tev._sweek = Math.floor((this._correct_shift(sd.valueOf(), 1) - this._min_date.valueOf()) / (60 * 60 * 1000 * 24 * cols));\n\n\t\tvar isAnyCellVisible = scheduler._is_any_multiday_cell_visible(sd, ed, ev);\n\n\t\tif(!isAnyCellVisible){\n\t\t\tstart_date = null;\n\t\t\tcontinue;\n\t\t}\n\n\t\t//current slot\n\t\tvar stack = weeks[ev._sweek];\n\t\t//check order position\n\t\tvar stack_line;\n\n\t\tfor (stack_line = 0; stack_line < stack.length; stack_line++)\n\t\t\tif (stack[stack_line]._eday <= ev._sday)\n\t\t\t\tbreak;\n\n\t\tif (!ev._sorder || !hold) {\n\t\t\tev._sorder = stack_line;\n\t\t}\n\n\t\tif (ev._sday + ev._length <= cols) {\n\t\t\tstart_date = null;\n\t\t\tout.push(ev);\n\t\t\tstack[stack_line] = ev;\n\t\t\t//get max height of slot\n\t\t\tmax[ev._sweek] = stack.length - 1;\n\t\t\tev._first_chunk = chunk_info.first_chunk;\n\t\t\tev._last_chunk = chunk_info.last_chunk;\n\t\t} else { // split long event in chunks\n\t\t\tvar copy = this._copy_event(ev);\n\t\t\tcopy.id = ev.id;\n\t\t\tcopy._length = cols - ev._sday;\n\t\t\tcopy._eday = cols;\n\t\t\tcopy._sday = ev._sday;\n\t\t\tcopy._sweek = ev._sweek;\n\t\t\tcopy._sorder = ev._sorder;\n\t\t\tcopy.end_date = this.date.add(sd, copy._length, \"day\");\n\t\t\tcopy._first_chunk = chunk_info.first_chunk;\n\t\t\tif (chunk_info.first_chunk) {\n\t\t\t\tchunk_info.first_chunk = false;\n\t\t\t}\n\n\t\t\tout.push(copy);\n\t\t\tstack[stack_line] = copy;\n\t\t\tstart_date = copy.end_date;\n\t\t\t//get max height of slot\n\t\t\tmax[ev._sweek] = stack.length - 1;\n\t\t\ti--;\n\t\t\tcontinue;  //repeat same step\n\t\t}\n\t}\n\treturn out;\n};\nscheduler._copy_dummy = function() {\n\tvar a = new Date(this.start_date);\n\tvar b = new Date(this.end_date);\n\tthis.start_date = a;\n\tthis.end_date = b;\n};\nscheduler._copy_event = function(ev) {\n\tthis._copy_dummy.prototype = ev;\n\treturn new this._copy_dummy();\n\t//return {start_date:ev.start_date, end_date:ev.end_date, text:ev.text, id:ev.id}\n};\nscheduler._rendered = [];\nscheduler.clear_view = function() {\n\tfor (var i = 0; i < this._rendered.length; i++) {\n\t\tvar obj = this._rendered[i];\n\t\tif (obj.parentNode) obj.parentNode.removeChild(obj);\n\t}\n\tthis._rendered = [];\n};\nscheduler.updateEvent = function(id) {\n\tvar ev = this.getEvent(id);\n\tthis.clear_event(id);\n\n\tif (ev && this.is_visible_events(ev) && this.filter_event(id, ev) && (this._table_view || this.config.multi_day || ev._timed)) {\n\t\tif (this.config.update_render){\n\t\t\tthis.render_view_data();\n\t\t}else{\n\t\t\tif(this.getState().mode == \"month\" && !this.getState().drag_id && !this.isOneDayEvent(ev)){\n\t\t\t\tthis.render_view_data();\n\t\t\t}else{\n\t\t\t\tthis.render_view_data([ev], true);\n\t\t\t}\n\t\t}\n\t}\n};\nscheduler.clear_event = function(id) {\n\tthis.for_rendered(id, function(node, i) {\n\t\tif (node.parentNode)\n\t\t\tnode.parentNode.removeChild(node);\n\t\tscheduler._rendered.splice(i, 1);\n\t});\n};\nscheduler._y_from_date = function(date){\n\tvar sm = date.getHours() * 60 + date.getMinutes();\n\treturn ((Math.round((sm * 60 * 1000 - this.config.first_hour * 60 * 60 * 1000) * this.config.hour_size_px / (60 * 60 * 1000))) % (this.config.hour_size_px * 24)); //42px/hour\n};\nscheduler._calc_event_y = function(ev, min_height){\n\tmin_height = min_height || 0;\n\tvar sm = ev.start_date.getHours() * 60 + ev.start_date.getMinutes();\n\tvar em = (ev.end_date.getHours() * 60 + ev.end_date.getMinutes()) || (scheduler.config.last_hour * 60);\n\tvar top = this._y_from_date(ev.start_date);\n\n\tvar height = Math.max(min_height, (em - sm) * this.config.hour_size_px / 60); //42px/hour\n\treturn {\n\t\ttop: top,\n\t\theight: height\n\t};\n};\nscheduler.render_event = function(ev, buffer, parentWidth) {\n\tvar menu = scheduler.xy.menu_width;\n\tvar menu_offset = (this.config.use_select_menu_space) ? 0 : menu;\n\tif (ev._sday < 0) return; //can occur in case of recurring event during time shift\n\n\tvar parent = scheduler.locate_holder(ev._sday);\n\tif (!parent) return; //attempt to render non-visible event\n\n\tbuffer = buffer || parent;\n\n\tvar pos_y = this._calc_event_y(ev, scheduler.xy.min_event_height);\n\tvar top = pos_y.top,\n\t\theight = pos_y.height;\n\n\tvar ev_count = ev._count || 1;\n\tvar ev_sorder = ev._sorder || 0;\n\n\tparentWidth = parentWidth || parent.clientWidth;\n\tif(this.config.day_column_padding){\n\t\tparentWidth -= this.config.day_column_padding;\n\t}\n\n\tvar width = Math.floor((parentWidth - menu_offset) / ev_count);\n\tvar left = ev_sorder * width + 1;\n\tif (!ev._inner) width = width * (ev_count - ev_sorder);\n\tif (this.config.cascade_event_display) {\n\t\tconst limit = this.config.cascade_event_count;\n\t\tconst margin = this.config.cascade_event_margin;\n\t\tlet right;\n\t\tlet marginRight = (ev_count - ev_sorder - 1) % limit * margin; \n\t\tlet marginLeft = ev_sorder % limit * margin; \n\t\tif (ev_count * margin < parentWidth - this.config.day_column_padding){\n\t\t\tright = (ev._inner) ? marginRight / 2: 0;\n\t\t} else {\n\t\t\tright = (ev._inner) ? marginRight / 3: 0;\n\t\t\tleft = marginLeft / 3;\n\t\t\tif (ev_count * margin / 2 > parentWidth - this.config.day_column_padding) {\n\t\t\t\tright = (ev._inner) ? marginRight / limit: 0;\n\t\t\t\tleft = marginLeft / limit;\n\t\t\t}\n\t\t}\n\t\twidth = Math.floor(parentWidth - menu_offset - left - right);\n\t}\n\n\tif(height < 30){\n\t\tev._mode = \"smallest\";\n\t}else if(height < 42){\n\t\tev._mode = \"small\";\n\t}else{\n\t\tev._mode = null;\n\t}\n\n\tvar d = this._render_v_bar(ev, menu_offset + left, top, width, height, ev._text_style, scheduler.templates.event_header(ev.start_date, ev.end_date, ev), scheduler.templates.event_text(ev.start_date, ev.end_date, ev));\n\t\n\tif(ev._mode === \"smallest\"){\n\t\td.classList.add(\"dhx_cal_event--xsmall\");\n\t}else if (ev._mode === \"small\"){\n\t\td.classList.add(\"dhx_cal_event--small\");\n\t}\n\n\tthis._waiAria.eventAttr(ev, d);\n\tthis._rendered.push(d);\n\tbuffer.appendChild(d);\n\n\tvar parentPosition = parseInt( this.config.rtl ? parent.style.right : parent.style.left, 10);\n\n\tleft = left + parentPosition + menu_offset;\n\n\tif (this._edit_id == ev.id) {\n\n\t\td.style.zIndex = 1; //fix overlapping issue\n\t\twidth = Math.max(width, scheduler.xy.editor_width);\n\t\td = document.createElement(\"div\");\n\t\td.setAttribute(\"event_id\", ev.id); // for backward compatibility\n\t\td.setAttribute(this.config.event_attribute, ev.id);\n\n\t\tthis._waiAria.eventAttr(ev, d);\n\n\t\td.className = \"dhx_cal_event dhx_cal_editor\";\n\t\tif (this.config.rtl) left++;\n\t\tthis.set_xy(d, width, height, left, top);\n\n\n\t\tif(ev.color){\n\t\t\td.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\n\t\t}\n\t\tvar tplClass = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\n\n\t\tif(tplClass){\n\t\t\td.className += \" \" + tplClass;\n\t\t}\n\t\tvar d2 = document.createElement(\"div\");\n\t\td2.style.cssText += \"overflow:hidden;height:100%\";\n\n\t\td.appendChild(d2);\n\t\tthis._els[\"dhx_cal_data\"][0].appendChild(d);\n\t\tthis._rendered.push(d);\n\n\t\td2.innerHTML = \"<textarea class='dhx_cal_editor'>\" + ev.text + \"</textarea>\";\n\t\tthis._editor = d2.querySelector(\"textarea\");\n\t\t\n\t\tscheduler.event(this._editor, \"keydown\", function(e) {\n\t\t\tif (e.shiftKey) return true;\n\t\t\tvar code = e.keyCode;\n\t\t\tif (code == scheduler.keys.edit_save) scheduler.editStop(true);\n\t\t\tif (code == scheduler.keys.edit_cancel) scheduler.editStop(false);\n\n\t\t\tif(code == scheduler.keys.edit_save || code == scheduler.keys.edit_cancel){\n\t\t\t\tif(e.preventDefault) e.preventDefault();\n\t\t\t}\n\t\t});\n\t\tscheduler.event(this._editor, \"selectstart\", function (e) {\n\t\t\te.cancelBubble = true;\n\t\t\treturn true;\n\t\t});\n\t\tscheduler._focus(this._editor, true);\n\t\t//IE and opera can add x-scroll during focusing\n\t\tthis._els[\"dhx_cal_data\"][0].scrollLeft = 0;\n\t}\n\tif (this.xy.menu_width !== 0 && this._select_id == ev.id) {\n\n\t\tif (this.config.cascade_event_display && this._drag_mode)\n\t\t\td.style.zIndex = 1; //fix overlapping issue for cascade view in case of dnd of selected event\n\t\tvar icons = this.config[\"icons_\" + ((this._edit_id == ev.id) ? \"edit\" : \"select\")];\n\t\tvar icons_str = \"\";\n\n\t\tvar ariaAttr;\n\n\t\tfor (var i = 0; i < icons.length; i++) {\n\t\t\tconst currentIcon = icons[i];\n\t\t\tariaAttr = this._waiAria.eventMenuAttrString(currentIcon);\n\t\t\ticons_str += `<div class='dhx_menu_icon ${currentIcon}' title='${this.locale.labels[currentIcon]}' ${ariaAttr}></div>`;\n\t\t}\n\t\tvar obj = this._render_v_bar(ev, left - menu - 1, top, menu, null, \"\", \"<div class='dhx_menu_head'></div>\", icons_str, true);\n\n\t\tif(ev.color){\n\t\t\tobj.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\n\t\t}\n\t\tif(ev.textColor){\n\t\t\tobj.style.setProperty(\"--dhx-scheduler-event-color\", ev.textColor);\n\t\t}\n\n\t\t//obj.style.left = left - menu + 1;\n\t\tthis._els[\"dhx_cal_data\"][0].appendChild(obj);\n\t\tthis._rendered.push(obj);\n\t}\n\tif(this.config.drag_highlight && this._drag_id == ev.id){\n\t\tthis.highlightEventPosition(ev);\n\t}\n};\nscheduler._render_v_bar = function (ev, x, y, w, h, style, contentA, contentB, bottom) {\n\tvar d = document.createElement(\"div\");\n\tvar id = ev.id;\n\tvar cs = (bottom) ? \"dhx_cal_event dhx_cal_select_menu\" : \"dhx_cal_event\";\n\n\tvar state = scheduler.getState();\n\tif(state.drag_id == ev.id){\n\t\tcs += \" dhx_cal_event_drag\";\n\t}\n\n\tif(state.select_id == ev.id){\n\t\tcs += \" dhx_cal_event_selected\";\n\t}\n\n\tvar cse = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\n\tif (cse) cs = cs + \" \" + cse;\n\n\tif(this.config.cascade_event_display) {\n\t\tcs += \" dhx_cal_event_cascade\";\n\t}\n\n\tvar boxWidth = w - 1;\n\tvar html = `<div event_id=\"${id}\" ${this.config.event_attribute}=\"${id}\" class=\"${cs}\"\n\t\t\t\tstyle=\"position:absolute; top:${y}px; ${((this.config.rtl) ? 'right:':'left:')}${x}px; width:${boxWidth}px; height:${h}px; ${(style || \"\")}\" \n\t\t\t\tdata-bar-start=\"${ev.start_date.valueOf()}\" data-bar-end=\"${ev.end_date.valueOf()}\">\n\t\t\t\t</div>`;\n\n\td.innerHTML = html;\n\n\tvar container = d.cloneNode(true).firstChild;\n\n\tif (!bottom && scheduler.renderEvent(container, ev, w, h, contentA, contentB)) {\n\t\tif(ev.color){\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\n\t\t}\n\t\tif(ev.textColor){\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-event-color\", ev.textColor);\n\t\t}\n\n\t\treturn container;\n\t} else {\n\t\tcontainer = d.firstChild;\n\t\tif(ev.color){\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\n\t\t}\n\t\tif(ev.textColor){\n\t\t\tcontainer.style.setProperty(\"--dhx-scheduler-event-color\", ev.textColor);\n\t\t}\n\n\t\tvar inner_html = '<div class=\"dhx_event_move dhx_header\" >&nbsp;</div>';\n\t\tinner_html += '<div class=\"dhx_event_move dhx_title\">' + contentA + '</div>';\n\t\tinner_html += '<div class=\"dhx_body\">' + contentB + '</div>'; // +2 css specific, moved from render_event\n\n\t\tvar footer_class = \"dhx_event_resize dhx_footer\";\n\t\tif (bottom || ev._drag_resize === false)\n\t\t\tfooter_class = \"dhx_resize_denied \" + footer_class;\n\n\t\tinner_html += '<div class=\"' + footer_class + '\" style=\" width:' + (bottom ? ' margin-top:-1px;' : '') + '\" ></div>';\n\n\t\tcontainer.innerHTML = inner_html;\n\t}\n\n\treturn container;\n};\nscheduler.renderEvent = function(){\n\treturn false;\n};\nscheduler.locate_holder = function(day) {\n\tif (this._mode == \"day\") return this._els[\"dhx_cal_data\"][0].firstChild; //dirty\n\treturn this._els[\"dhx_cal_data\"][0].childNodes[day];\n};\nscheduler.locate_holder_day = function(date, past) {\n\tvar day = Math.floor((this._correct_shift(date, 1) - this._min_date) / (60 * 60 * 24 * 1000));\n\t//when locating end data of event , we need to use next day if time part was defined\n\tif (past && this.date.time_part(date)) day++;\n\treturn day;\n};\n\n\n\nscheduler._get_dnd_order = function(order, ev_height, max_height){\n\tif(!this._drag_event)\n\t\treturn order;\n\tif(!this._drag_event._orig_sorder)\n\t\tthis._drag_event._orig_sorder = order;\n\telse\n\t\torder = this._drag_event._orig_sorder;\n\n\tvar evTop = ev_height * order;\n\twhile((evTop + ev_height) > max_height){\n\t\torder--;\n\t\tevTop -= ev_height;\n\t}\n\torder = Math.max(order, 0);\n\treturn order;\n};\n//scheduler._get_event_bar_pos = function(sday, eday, week, drag){\nscheduler._get_event_bar_pos = function(ev){\n\tvar rtl = this.config.rtl;\n\tvar columns = this._colsS;\n\tvar x = columns[ev._sday];\n\tvar x2 = columns[ev._eday];\n\tif (rtl) {\n\t\tx = columns[columns.col_length] - columns[ev._eday] + columns[0];\n\t\tx2 = columns[columns.col_length] - columns[ev._sday] + columns[0];\n\t}\n\n\tif (x2 == x) x2 = columns[ev._eday + 1];\n\tvar hb = this.xy.bar_height;\n\n\tvar order = ev._sorder;\n\tif(ev.id == this._drag_id){\n\t\tvar cellHeight = columns.heights[ev._sweek + 1] - columns.heights[ev._sweek]- this.xy.month_head_height;//22 for month head height\n\t\torder = scheduler._get_dnd_order(order, hb, cellHeight);\n\t}\n\tvar y_event_offset =  order * hb;\n\tvar y = columns.heights[ev._sweek] + (columns.height ? (this.xy.month_scale_height + 2) : 2 ) + y_event_offset;\n\treturn {x:x, x2:x2, y:y};\n};\n\nscheduler.render_event_bar = function (ev) {\n\tvar parent = this._rendered_location;\n\tvar pos = this._get_event_bar_pos(ev);\n\tvar y = pos.y;\n\tvar x = pos.x;\n\tvar x2 = pos.x2;\n\t// resize for month mutliday events\n\tvar resize_handle = \"\";\n\n\t//events in ignored dates\n\n\tif (!x2) return;\n\n\tvar resizable = scheduler.config.resize_month_events && this._mode == \"month\" &&\n\t\t(!ev._timed || scheduler.config.resize_month_timed);\n\n\tvar d = document.createElement(\"div\");\n\tvar left_chunk = (ev.hasOwnProperty(\"_first_chunk\") && ev._first_chunk),\n\t\tright_chunk = (ev.hasOwnProperty(\"_last_chunk\") && ev._last_chunk);\n\n\tvar resize_left = resizable && (ev._timed || left_chunk);\n\tvar resize_right = resizable && (ev._timed || right_chunk);\n\n\tvar timed = true;\n\tvar cs = \"dhx_cal_event_clear\";\n\tif (!ev._timed || resizable) {\n\t\ttimed = false;\n\t\tcs = \"dhx_cal_event_line\";\n\t}\n\tif(left_chunk){\n\t\tcs += \" dhx_cal_event_line_start\";\n\t}\n\tif(right_chunk){\n\t\tcs += \" dhx_cal_event_line_end\";\n\t}\n\tif(resize_left){\n\t\tresize_handle += \"<div class='dhx_event_resize dhx_event_resize_start'></div>\";\n\t}\n\tif(resize_right){\n\t\tresize_handle += \"<div class='dhx_event_resize dhx_event_resize_end'></div>\";\n\t}\n\n\tvar cse = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\n\tif (cse){\n\t\tcs += \" \" + cse;\n\t}\n\n\tvar bg_color = (ev.color ? (\"--dhx-scheduler-event-background:\" + ev.color + \";\") : \"\");\n\tvar color = (ev.textColor ? (\"--dhx-scheduler-event-color:\" + ev.textColor + \";\") : \"\");\n\n\tvar style_text = [\n\t\t\"position:absolute\",\n\t\t\"top:\" + y + \"px\",\n\t\t\"left:\" + x + \"px\",\n\t\t\"width:\" + (x2 - x - (timed ? 1 : 0)) + \"px\",\n\t\t\"height:\" + (this.xy.bar_height - 2) + \"px\",\n\t\tcolor,\n\t\tbg_color,\n\t\t(ev._text_style || \"\")\n\t].join(\";\");\n\n\tvar html = \"<div event_id='\" + ev.id + \"' \" + this.config.event_attribute + \"='\" + ev.id + \"' class='\"+ cs + \"' style='\"+style_text+\"'\"+this._waiAria.eventBarAttrString(ev)+\">\";\n\tif (resizable) {\n\t\thtml += resize_handle;\n\t}\n\t// GS-2578: dnd temp event comes from parameter, and here we got already modified event\n\tif(scheduler.getState().mode == \"month\" && !ev._beforeEventChangedFlag){\n\t\tev = scheduler.getEvent(ev.id); // ev at this point could be a part (row in a month view) of a larger event\n\t}\n\n\tif (ev._timed){\n\t\thtml += `<span class='dhx_cal_event_clear_date'>${scheduler.templates.event_bar_date(ev.start_date, ev.end_date, ev)}</span>`;\n\t}\n\n\thtml += \"<div class='dhx_cal_event_line_content'>\";\n\thtml += scheduler.templates.event_bar_text(ev.start_date, ev.end_date, ev) + '</div>';\n\thtml += \"</div>\";\n\thtml += '</div>';\n\n\td.innerHTML = html;\n\n\tthis._rendered.push(d.firstChild);\n\tparent.appendChild(d.firstChild);\n};\n\nscheduler._locate_event = function(node) {\n\tvar id = null;\n\twhile (node && !id && node.getAttribute) {\n\t\tid = node.getAttribute(this.config.event_attribute);\n\t\tnode = node.parentNode;\n\t}\n\treturn id;\n};\n\nscheduler.edit = function(id) {\n\tif (this._edit_id == id) return;\n\tthis.editStop(false, id);\n\tthis._edit_id = id;\n\tthis.updateEvent(id);\n};\nscheduler.editStop = function(mode, id) {\n\tif (id && this._edit_id == id) return;\n\tvar ev = this.getEvent(this._edit_id);\n\tif (ev) {\n\t\tif (mode) ev.text = this._editor.value;\n\t\tthis._edit_id = null;\n\t\tthis._editor = null;\n\t\tthis.updateEvent(ev.id);\n\t\tthis._edit_stop_event(ev, mode);\n\t}\n};\nscheduler._edit_stop_event = function(ev, mode) {\n\tif (this._new_event) {\n\t\tif (!mode) {\n\t\t\tif (ev) // in case of custom lightbox user can already delete event\n\t\t\t\tthis.deleteEvent(ev.id, true);\n\t\t} else {\n\t\t\tthis.callEvent(\"onEventAdded\", [ev.id, ev]);\n\t\t}\n\t\tthis._new_event = null;\n\t} else {\n\t\tif (mode){\n\t\t\tthis.callEvent(\"onEventChanged\", [ev.id, ev]);\n\t\t}\n\t}\n};\n\nscheduler.getEvents = function(from, to) {\n\tvar result = [];\n\tfor (var a in this._events) {\n\t\tvar ev = this._events[a];\n\t\tif (ev && ( (!from && !to) || (ev.start_date < to && ev.end_date > from) ))\n\t\t\tresult.push(ev);\n\t}\n\treturn result;\n};\nscheduler.getRenderedEvent = function(id) {\n\tif (!id)\n\t\treturn;\n\tvar rendered_events = scheduler._rendered;\n\tfor (var i=0; i<rendered_events.length; i++) {\n\t\tvar rendered_event = rendered_events[i];\n\t\tif (rendered_event.getAttribute(scheduler.config.event_attribute) == id) {\n\t\t\treturn rendered_event;\n\t\t}\n\t}\n\treturn null;\n};\nscheduler.showEvent = function(id, mode) {\n\tvar section;\n\tif(id && typeof id === \"object\"){\n\t\tmode = id.mode;\n\t\tsection = id.section;\n\t\tid = id.section;\n\t}\n\tvar ev = (typeof id == \"number\" || typeof id == \"string\") ? scheduler.getEvent(id) : id;\n\tmode = mode||scheduler._mode;\n\n\tif (!ev || (this.checkEvent(\"onBeforeEventDisplay\") && !this.callEvent(\"onBeforeEventDisplay\", [ev, mode])))\n\t\treturn;\n\n\tvar scroll_hour = scheduler.config.scroll_hour;\n\tscheduler.config.scroll_hour = ev.start_date.getHours();\n\tvar preserve_scroll = scheduler.config.preserve_scroll;\n\tscheduler.config.preserve_scroll = false;\n\n\tvar original_color = ev.color;\n\tvar original_text_color = ev.textColor;\n\tif (scheduler.config.highlight_displayed_event) {\n\t\tev.color = scheduler.config.displayed_event_color;\n\t\tev.textColor = scheduler.config.displayed_event_text_color;\n\t}\n\n\tscheduler.setCurrentView(new Date(ev.start_date), mode);\n\n\tfunction restoreOriginalColors(){\n\t\tev.color = original_color;\n\t\tev.textColor = original_text_color;\n\t}\n\n\tscheduler.config.scroll_hour = scroll_hour;\n\tscheduler.config.preserve_scroll = preserve_scroll;\n\n\tif (scheduler.matrix && scheduler.matrix[mode]) {\n\t\tvar timeline = scheduler.getView();\n\t\tvar property = timeline.y_property;\n\n\t\tvar event = scheduler.getEvent(ev.id);\n\n\t\tif(event){\n\t\t\tif(!section){\n\t\t\t\tvar section = event[property];\n\t\t\t\tif(Array.isArray(section)){\n\t\t\t\t\tsection = section[0];\n\t\t\t\t}else if(typeof section === \"string\" && scheduler.config.section_delimiter && section.indexOf(scheduler.config.section_delimiter) > -1){\n\t\t\t\t\tsection = section.split(scheduler.config.section_delimiter)[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar top = timeline.getSectionTop(section);\n\t\t\tvar left = timeline.posFromDate(event.start_date);\n\t\t\tvar container = scheduler.$container.querySelector(\".dhx_timeline_data_wrapper\");\n\t\t\tleft = left - (container.offsetWidth - timeline.dx) / 2;\n\t\t\ttop = top - container.offsetHeight / 2 + timeline.dy/2;\n\n\t\t\tif (timeline._smartRenderingEnabled()) {\n\t\t\t\tvar handlerId = timeline.attachEvent(\"onScroll\", function(){\n\t\t\t\t\trestoreOriginalColors();\n\t\t\t\t\ttimeline.detachEvent(handlerId);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttimeline.scrollTo({\n\t\t\t\tleft: left,\n\t\t\t\ttop: top\n\t\t\t});\n\t\t\tif (!timeline._smartRenderingEnabled()) {\n\t\t\t\trestoreOriginalColors();\n\t\t\t}\n\t\t}\n\t}else{\n\t\trestoreOriginalColors();\n\t}\n\n\tscheduler.callEvent(\"onAfterEventDisplay\", [ev, mode]);\n};\n\n\n}","export default function extend(scheduler) {\n\n\nscheduler._append_drag_marker = function(m){\n\tif(m.parentNode) return;\n\tvar zone = scheduler._els[\"dhx_cal_data\"][0];\n\n\tvar scale = zone.lastChild;\n\tvar className = scheduler._getClassName(scale);\n\tif(className.indexOf(\"dhx_scale_holder\") < 0 && scale.previousSibling){\n\t\tscale = scale.previousSibling;\n\t}\n\n\tclassName = scheduler._getClassName(scale);\n\tif (scale && className.indexOf(\"dhx_scale_holder\") === 0) {\n\t\tscale.appendChild(m);\n\t}\n};\n\nscheduler._update_marker_position = function(m, event){\n\tvar size = scheduler._calc_event_y(event, 0);\n\tm.style.top = size.top + \"px\";\n\tm.style.height = size.height + \"px\";\n};\n\nscheduler.highlightEventPosition = function(event){\n\tvar m = document.createElement(\"div\");\n\n\tm.setAttribute(\"event_id\", event.id); // for backward compatibility\n\tm.setAttribute(this.config.event_attribute, event.id);\n\tthis._rendered.push(m);\n\tthis._update_marker_position(m, event);\n\n\tvar css = this.templates.drag_marker_class(event.start_date, event.end_date, event);\n\tvar html = this.templates.drag_marker_content(event.start_date, event.end_date, event);\n\tm.className = \"dhx_drag_marker\";\n\tif(css)\n\t\tm.className += \" \" + css;\n\tif(html)\n\t\tm.innerHTML = html;\n\tthis._append_drag_marker(m);\n};\n\n}","export default function extend(scheduler) {\n\nscheduler.getRootView = function() {\n\treturn {\n\t\tview: {\n\t\t\trender: function(){\n\t\t\t\treturn {\n\t\t\t\t\ttag: \"div\",\n\t\t\t\t\ttype: 1,\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tstyle: \"width:100%;height:100%;\"\n\t\t\t\t\t},\n\t\t\t\t\thooks: {\n\t\t\t\t\t\t\"didInsert\": function(){\n\t\t\t\t\t\t\tscheduler.setCurrentView();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tbody: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tel: this.el,\n\t\t\t\t\t\t\ttype: 1\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t},\n\t\t\tinit: function(){\n\t\t\t\tvar container = document.createElement(\"DIV\");\n\t\t\t\tcontainer.id = \"scheduler_\"+ scheduler.uid();\n\t\t\t\tcontainer.style.width = \"100%\";\n\t\t\t\tcontainer.style.height = \"100%\";\n\t\t\t\tcontainer.classList.add(\"dhx_cal_container\");\n\t\t\t\tcontainer.cmp = \"grid\";\n\t\t\t\tcontainer.innerHTML = '<div class=\"dhx_cal_navline\">' +\n\t\t\t\t\t'<div class=\"dhx_cal_prev_button\"></div>' +\n\t\t\t\t\t'<div class=\"dhx_cal_next_button\"></div>' +\n\t\t\t\t\t'<div class=\"dhx_cal_today_button\"></div>' +\n\t\t\t\t\t'<div class=\"dhx_cal_date\"></div>' +\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" data-tab=\"day\"></div>' +\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" data-tab=\"week\"></div>' +\n\t\t\t\t\t'<div class=\"dhx_cal_tab\" data-tab=\"month\"></div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div class=\"dhx_cal_header\">' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div class=\"dhx_cal_data\">' +\n\t\t\t\t\t'</div>';\n\t\t\t\tscheduler.init(container);\n\n\t\t\t\tthis.el = container;\n\t\t\t}\n\t\t},\n\t\ttype: 4\n\t};\n};\n\n}","import global from \"../global\";\n\nexport default function extend(scheduler) {\n\n(function(){\n\n\tvar setCurrentView = scheduler.setCurrentView,\n\t\tupdateView = scheduler.updateView;\n\tvar update_view_timer = null,\n\t\tcurr_view_timer = null;\n\n\tvar lazy_setCurrentView = function(date, mode){\n\t\tvar self = this;\n\t\tglobal.clearTimeout(curr_view_timer);\n\t\tglobal.clearTimeout(update_view_timer);\n\n\t\tvar oldDate = self._date,\n\t\t\toldMode = self._mode;\n\t\tupdateFlags(this, date, mode);\n\n\t\tcurr_view_timer = setTimeout(function(){\n\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!self.callEvent(\"onBeforeViewChange\", [oldMode, oldDate, mode || self._mode, date || self._date])){\n\t\t\t\tupdateFlags(self, oldDate, oldMode);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdateView.call(self, date, mode);\n\t\t\tself.callEvent(\"onViewChange\", [self._mode, self._date]);\n\n\t\t\tglobal.clearTimeout(update_view_timer);\n\t\t\tcurr_view_timer = 0;\n\t\t}, scheduler.config.delay_render);\n\t};\n\tvar lazy_updateView = function(date, mode){\n\t\tvar self = this,\n\t\t\tars = arguments;\n\n\t\tupdateFlags(this, date, mode);\n\n\t\tglobal.clearTimeout(update_view_timer);\n\t\tupdate_view_timer = setTimeout(function(){\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(curr_view_timer)\n\t\t\t\treturn;\n\n\t\t\tupdateView.apply(self, ars);\n\t\t}, scheduler.config.delay_render);\n\t};\n\tfunction updateFlags(scheduler, date, mode){\n\t\tif(date)\n\t\t\tscheduler._date = date;\n\t\tif(mode)\n\t\t\tscheduler._mode = mode;\n\n\t}\n\tscheduler.attachEvent(\"onSchedulerReady\", function(){\n\t\tif(scheduler.config.delay_render){\n\t\t\tscheduler.setCurrentView = lazy_setCurrentView;\n\t\t\tscheduler.updateView = lazy_updateView;\n\t\t}else{\n\t\t\tscheduler.setCurrentView = setCurrentView;\n\t\t\tscheduler.updateView = updateView;\n\t\t}\n\t});\n\n})();\n\n}","import global from \"../global\";\n\nexport default function extend(scheduler) {\n/*\nif (global.dataProcessor && !dataProcessor.prototype.init_original){\n\tdataProcessor.prototype.init_original=dataProcessor.prototype.init;\n\tdataProcessor.prototype.init=function(obj){\n\t\tthis.init_original(obj);\n\t\tobj._dataprocessor=this;\n\n\t\tthis.setTransactionMode(\"POST\",true);\n\t\tthis.serverProcessor+=(this.serverProcessor.indexOf(\"?\")!=-1?\"&\":\"?\")+\"editing=true\";\n\t};\n}*/\n\nscheduler.attachEvent(\"onSchedulerReady\", function(){\n\tif(typeof dhtmlxError !== \"undefined\") {\n\t\twindow.dhtmlxError.catchError(\"LoadXML\", function(a, b, c){\n\t\t\tvar message = c[0].responseText;\n\n\t\t\tswitch (scheduler.config.ajax_error){\n\t\t\t\tcase \"alert\":\n\t\t\t\t\tglobal.alert(message);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"console\":\n\t\t\t\t\tglobal.console.log(message);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n});\n\n\n}","import ar from \"./locale_ar\";\nimport be from \"./locale_be\";\nimport ca from \"./locale_ca\";\nimport cn from \"./locale_cn\";\nimport cs from \"./locale_cs\";\nimport da from \"./locale_da\";\nimport de from \"./locale_de\";\nimport el from \"./locale_el\";\nimport en from \"./locale_en\";\nimport es from \"./locale_es\";\nimport fi from \"./locale_fi\";\nimport fr from \"./locale_fr\";\nimport he from \"./locale_he\";\nimport hu from \"./locale_hu\";\nimport id from \"./locale_id\";\nimport it from \"./locale_it\";\nimport jp from \"./locale_jp\";\n\nimport LocaleManager from \"./locale_manager\";\n\nimport nb from \"./locale_nb\";\nimport nl from \"./locale_nl\";\nimport no from \"./locale_no\";\nimport pl from \"./locale_pl\";\nimport pt from \"./locale_pt\";\nimport ro from \"./locale_ro\";\nimport ru from \"./locale_ru\";\nimport si from \"./locale_si\";\nimport sk from \"./locale_sk\";\nimport sv from \"./locale_sv\";\nimport tr from \"./locale_tr\";\nimport ua from \"./locale_ua\";\n\nexport default function(){\n\treturn new LocaleManager({\n\t\ten,\n\t\tar,\n\t\tbe,\n\t\tca,\n\t\tcn,\n\t\tcs,\n\t\tda,\n\t\tde,\n\t\tel,\n\t\tes,\n\t\tfi,\n\t\tfr,\n\t\the,\n\t\thu,\n\t\tid,\n\t\tit,\n\t\tjp,\n\t\tnb,\n\t\tnl,\n\t\tno,\n\t\tpl,\n\t\tpt,\n\t\tro,\n\t\tru,\n\t\tsi,\n\t\tsk,\n\t\tsv,\n\t\ttr,\n\t\tua\n\t});\n}","export default class ExtensionsManager{\n\tconstructor(config){\n\t\tthis._extensions = {};\n\t\tfor(const i in config){\n\t\t\tthis._extensions[i] = config[i];\n\t\t}\n\t}\n\n\taddExtension(name, ext) {\n\t\tthis._extensions[name] = ext;\n\t}\n\n\tgetExtension(name) {\n\t\treturn this._extensions[name];\n\t}\n}","\nexport default function(){\n/* global dhtmlx */\nif (typeof dhtmlx != \"undefined\" && dhtmlx.attaches) {\n\tdhtmlx.attaches.attachScheduler = function (day, mode, tabs, scheduler) {\n\t\tvar tabs = tabs || '<div class=\"dhx_cal_tab\" name=\"day_tab\" data-tab=\"day\" style=\"right:204px;\"></div><div class=\"dhx_cal_tab\" name=\"week_tab\" data-tab=\"week\" style=\"right:140px;\"></div><div class=\"dhx_cal_tab\" name=\"month_tab\" data-tab=\"month\" style=\"right:76px;\"></div>';\n\t\tvar obj = document.createElement(\"DIV\");\n\t\tobj.id = \"dhxSchedObj_\" + this._genStr(12);\n\t\tobj.innerHTML = '<div id=\"' + obj.id + '\" class=\"dhx_cal_container\" style=\"width:100%; height:100%;\"><div class=\"dhx_cal_navline\"><div class=\"dhx_cal_prev_button\"></div><div class=\"dhx_cal_next_button\"></div><div class=\"dhx_cal_today_button\"></div><div class=\"dhx_cal_date\"></div>' + tabs + '</div><div class=\"dhx_cal_header\"></div><div class=\"dhx_cal_data\"></div></div>';\n\t\tdocument.body.appendChild(obj.firstChild);\n\n\t\tthis.attachObject(obj.id, false, true);\n\n\t\tthis.vs[this.av].sched = scheduler;\n\t\tthis.vs[this.av].schedId = obj.id;\n\t\tscheduler.setSizes = scheduler.updateView;\n\t\tscheduler.destructor = function () { };\n\t\tscheduler.init(obj.id, day, mode);\n\n\t\treturn this.vs[this._viewRestore()].sched;\n\t};\n}\n\n}","export default function extend(scheduler) {\n\n\n/**\n * helpers for Multisection and Daily timeline events\n * Preserve _sorder and _count calculated for virtual events, so event position won't change when it refreshed individually\n * @private\n */\n\nif (!scheduler._inited_multisection_copies) {\n\tscheduler.attachEvent(\"onEventIdChange\", function (old_id, new_id) {\n\t\tvar copies = this._multisection_copies;\n\t\tif (!copies) return;\n\n\t\tif (copies[old_id] && !copies[new_id]) {\n\t\t\tvar eventCopies = copies[old_id];\n\t\t\tdelete copies[old_id];\n\t\t\tcopies[new_id] = eventCopies;\n\t\t}\n\t});\n\tscheduler._inited_multisection_copies = true;\n}\n\nscheduler._register_copies_array = function(evs){\n\tfor(var i=0; i < evs.length; i++)\n\t\tthis._register_copy(evs[i]);\n};\nscheduler._register_copy = function(copy){\n\tif(!this._multisection_copies){\n\t\treturn;\n\t}\n\n\tif(!this._multisection_copies[copy.id]){\n\t\tthis._multisection_copies[copy.id] = {};\n\t}\n\tvar section = copy[this._get_section_property()];\n\tvar evs = this._multisection_copies[copy.id];\n\tevs[section] = copy;\n};\nscheduler._get_copied_event = function(event_id, section){\n\tif(!this._multisection_copies[event_id])\n\t\treturn null;\n\n\tif(this._multisection_copies[event_id][section])\n\t\treturn this._multisection_copies[event_id][section];\n\n\tvar parts = this._multisection_copies[event_id];\n\t//multisection event has not been rendered in this section, need retrieve state of one of rendered events\n\tif(scheduler._drag_event && scheduler._drag_event._orig_section && parts[scheduler._drag_event._orig_section]){\n\t\treturn parts[scheduler._drag_event._orig_section];\n\t}else{\n\t\tvar min_sorder = Infinity,\n\t\t\tev = null;\n\t\tfor(var i in parts){\n\t\t\tif(parts[i]._sorder < min_sorder){\n\t\t\t\tev = parts[i];\n\t\t\t\tmin_sorder = parts[i]._sorder;\n\t\t\t}\n\t\t}\n\t\treturn ev;\n\t}\n};\nscheduler._clear_copied_events = function(){\n\tthis._multisection_copies = {};\n};\n\nscheduler._restore_render_flags = function(section_evs){\n\tvar map_to = this._get_section_property();\n\tfor(var i=0; i < section_evs.length; i++){\n\t\tvar ev = section_evs[i];\n\t\tvar prev_state = scheduler._get_copied_event(ev.id, ev[map_to]);\n\t\tif(prev_state){\n\t\t\tfor(var p in prev_state){\n\t\t\t\tif(p.indexOf(\"_\") === 0){\n\t\t\t\t\tev[p] = prev_state[p];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n}","const externalDrag = {\n\tfrom_scheduler :null,\n\tto_scheduler: null,\n\tdrag_data:null,\n\tdrag_placeholder : null,\n\tdelete_dnd_holder : function(){\n\t\tvar node = this.drag_placeholder;\n\t\tif(!node)\n\t\t\treturn;\n\t\tif(node.parentNode)\n\t\t\tnode.parentNode.removeChild(node);\n\t\tdocument.body.className = document.body.className.replace(\" dhx_no_select\", \"\");\n\t\tthis.drag_placeholder = null;\n\t},\n\tcopy_event_node : function(event, scheduler){\n\t\tvar clone = null;\n\t\tfor (var i = 0; i < scheduler._rendered.length; i++){\n\t\t\tvar node = scheduler._rendered[i];\n\t\t\tif (node.getAttribute(scheduler.config.event_attribute) == event.id || node.getAttribute(scheduler.config.event_attribute) == scheduler._drag_id) {\n\t\t\t\tclone = node.cloneNode(true);\n\t\t\t\tclone.style.position = clone.style.top = clone.style.left = \"\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn clone || document.createElement(\"div\");\n\t},\n\tcreate_dnd_holder : function(event, scheduler){\n\t\tif(this.drag_placeholder)\n\t\t\treturn this.drag_placeholder;\n\n\t\tvar holder = document.createElement(\"div\");\n\t\tvar html = scheduler.templates.event_outside(event.start_date, event.end_date, event);\n\t\tif(html){\n\t\t\tholder.innerHTML = html;\n\t\t}else{\n\t\t\tholder.appendChild(this.copy_event_node(event, scheduler));\n\t\t}\n\n\t\tholder.className = \"dhx_drag_placeholder\";\n\t\tholder.style.position = \"absolute\";\n\t\tthis.drag_placeholder = holder;\n\t\tdocument.body.appendChild(holder);\n\t\tdocument.body.className += \" dhx_no_select\";\n\t\treturn holder;\n\t},\n\tmove_dnd_holder : function(e){\n\t\tvar pos = {x: e.clientX, y: e.clientY};\n\t\tthis.create_dnd_holder(this.drag_data.ev, this.from_scheduler);\n\t\tif(!this.drag_placeholder){\n\t\t\treturn;\n\t\t}\n\t\tvar x = pos.x,\n\t\t\ty = pos.y;\n\n\t\tvar html = document.documentElement,\n\t\t\tbody = document.body,\n\t\t\tholder = this.drag_placeholder;\n\n\t\tholder.style.left = 10 + x + (html && html.scrollLeft || body && body.scrollLeft || 0) - (html.clientLeft || 0) + \"px\";\n\t\tholder.style.top = 10 + y + (html && html.scrollTop || body && body.scrollTop || 0) - (html.clientTop || 0) + \"px\";\n\t},\n\tclear_scheduler_dnd : function(scheduler){\n\t\tscheduler._drag_id = scheduler._drag_pos = scheduler._drag_mode = scheduler._drag_event = scheduler._new_event = null;\n\t},\n\tstop_drag : function(scheduler){\n\t\tif(scheduler){\n\t\t\tthis.clear_scheduler_dnd(scheduler);\n\t\t}\n\t\tthis.delete_dnd_holder();\n\t\tthis.drag_data = null;\n\t},\n\tinject_into_scheduler : function(event, scheduler, dom_event){\n\t\tevent._count = 1; // reset order calculation for the new location (scheduler)\n\t\tevent._sorder = 0;\n\n\t\tif(event.event_pid && event.event_pid != \"0\") {\n\t\t\tevent.event_pid = null;\n\t\t\tevent.rec_type = event.rec_pattern = \"\";\n\t\t\tevent.event_length = 0;\n\t\t}\n\n\t\tscheduler._drag_event = event;\n\t\tscheduler._events[event.id] = event;\n\t\tscheduler._drag_id = event.id;\n\t\tscheduler._drag_mode = \"move\";\n\n\t\t//resolve event position\n\t\tif(dom_event)\n\t\t\tscheduler._on_mouse_move(dom_event);\n\t},\n\tstart_dnd : function(scheduler){\n\t\tif(!scheduler.config.drag_out)\n\t\t\treturn;\n\n\t\tthis.from_scheduler = scheduler;\n\t\tthis.to_scheduler = scheduler;\n\t\tvar drag = this.drag_data = {};\n\t\tdrag.ev = scheduler._drag_event;\n\t\tdrag.orig_id = scheduler._drag_event.id;\n\t},\n\tland_into_scheduler : function(scheduler, e){\n\t\tif(!scheduler.config.drag_in){\n\t\t\tthis.move_dnd_holder(e);\n\t\t\treturn false;\n\t\t}\n\n\t\tvar drag = this.drag_data;\n\n\t\tvar ev = scheduler._lame_clone(drag.ev); // _lame_clone - helper for deep copy\n\n\t\tif(scheduler != this.from_scheduler){\n\t\t\tev.id = scheduler.uid();\n\t\t\tvar duration = ev.end_date - ev.start_date;\n\t\t\tev.start_date = new Date(scheduler.getState().min_date);\n\t\t\tev.end_date = new Date(ev.start_date.valueOf() + duration);\n\t\t}else{\n\t\t\tev.id = this.drag_data.orig_id;\n\t\t\tev._dhx_changed = true;\n\t\t}\n\t\tthis.drag_data.target_id = ev.id;\n\t\tif(!scheduler.callEvent(\"onBeforeEventDragIn\", [ev.id, ev, e]))\n\t\t\treturn false;\n\t\tthis.to_scheduler = scheduler;\n\t\tthis.inject_into_scheduler(ev, scheduler, e);\n\t\tthis.delete_dnd_holder();\n\t\tscheduler.updateView();\n\t\tscheduler.callEvent(\"onEventDragIn\", [ev.id, ev, e]);\n\t\treturn true;\n\t},\n\n\tdrag_from_scheduler : function(scheduler, e){\n\t\tif(this.drag_data && scheduler._drag_id && scheduler.config.drag_out){\n\t\t\tif(!scheduler.callEvent(\"onBeforeEventDragOut\", [scheduler._drag_id, scheduler._drag_event, e])){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(this.to_scheduler == scheduler){\n\t\t\t\tthis.to_scheduler = null;\n\t\t\t}\n\t\t\t\n\t\t\tthis.create_dnd_holder(this.drag_data.ev, scheduler);\n\t\t\tvar id = scheduler._drag_id;\n\t\t\tthis.drag_data.target_id = null;\n\t\t\tdelete scheduler._events[id];\n\t\t\tthis.clear_scheduler_dnd(scheduler);\n\t\t\tscheduler.updateEvent(id);\n\t\t\tscheduler.callEvent(\"onEventDragOut\", [id, this.drag_data.ev, e]);\n\t\t\treturn true;\n\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t},\n\treset_event : function(event, scheduler){\n\t\tthis.inject_into_scheduler(event, scheduler);\n\t\tthis.stop_drag(scheduler);\n\t\tscheduler.updateView();\n\t},\n\tmove_permanently : function(original_event, moved_event, from, to){\n\t\tto.callEvent(\"onEventAdded\", [moved_event.id, moved_event]);\n\n\t\t// delete from original calendar\n\t\tthis.inject_into_scheduler(original_event, from);\n\t\tthis.stop_drag(from);\n\t\tif(original_event.event_pid && original_event.event_pid != \"0\") {\n\t\t\tfrom.callEvent(\"onConfirmedBeforeEventDelete\", [original_event.id]);\n\t\t\tfrom.updateEvent(moved_event.event_pid);\n\t\t} else {\n\t\t\tfrom.deleteEvent(original_event.id);\n\t\t}\n\t\tfrom.updateView();\n\t\tto.updateView();\n\t}\n};\n\nlet outerDragHandlerAttached = false;\nconst connectedSchedulers = [];\nfunction attachOuterDragHandler(scheduler) {\n\tscheduler.event(document.body, \"mousemove\", function(e) {\n\t\tvar dnd = externalDrag;\n\t\tvar target_scheduler = dnd.target_scheduler;\n\n\t\tif(target_scheduler){\n\t\t\tif(!dnd.from_scheduler){\n\t\t\t\t// start dragging event inside initial scheduler\n\t\t\t\tif(target_scheduler.getState().drag_mode == \"move\" && target_scheduler.config.drag_out){\n\t\t\t\t\tdnd.start_dnd(target_scheduler);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(target_scheduler._drag_id){\n\t\t\t\t\t// moving event inside target scheduler\n\t\t\t\t}else{\n\t\t\t\t\t// dragging event into target scheduler\n\t\t\t\t\tvar source = dnd.to_scheduler;//previos target scheduler\n\t\t\t\t\tif(!source || dnd.drag_from_scheduler(source, e)){\n\t\t\t\t\t\tdnd.land_into_scheduler(target_scheduler, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}else if(dnd.from_scheduler){\n\t\t\tif(!dnd.to_scheduler){\n\t\t\t\t//dragging outside schedulers\n\t\t\t\tdnd.move_dnd_holder(e);\n\t\t\t}else{\n\t\t\t\t// dragging out of target scheduler\n\t\t\t\tdnd.drag_from_scheduler(dnd.to_scheduler, e);\n\t\t\t}\n\t\t}\n\n\t\tdnd.target_scheduler = null;\n\t});\n\tscheduler.event(document.body, \"mouseup\", function(e) {\n\t\tvar dnd = externalDrag;\n\t\tvar from = dnd.from_scheduler,\n\t\t\tto = dnd.to_scheduler;\n\n\t\tif(from){\n\t\t\tif(to && from == to){\n\t\t\t\t// drop back to the same calendar\n\t\t\t\tfrom.updateEvent(dnd.drag_data.target_id);\n\t\t\t}else if(to && from !== to){\n\t\t\t\t// drop to another scheduler\n\t\t\t\tvar original = dnd.drag_data.ev;\n\t\t\t\tvar ev = to.getEvent(dnd.drag_data.target_id);\n\t\t\t\tif(from.callEvent(\"onEventDropOut\", [original.id, original, to, e])){\n\t\t\t\t\tdnd.move_permanently(original, ev, from, to);\n\t\t\t\t}else{\n\t\t\t\t\tdnd.reset_event(original, from);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// drop outside schedulers\n\t\t\t\tvar original = dnd.drag_data.ev;\n\t\t\t\tif(from.callEvent(\"onEventDropOut\", [original.id, original, null, e])){\n\t\t\t\t\tdnd.reset_event(original, from);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdnd.stop_drag();\n\t\tdnd.current_scheduler = dnd.from_scheduler = dnd.to_scheduler = null;\n\t});\n\n}\n\nfunction processScheduler(scheduler){\n\tscheduler.attachEvent(\"onSchedulerReady\", function(){\n\t\tattachOuterDragHandler(scheduler);\n\t\touterDragHandlerAttached = true;\n\t}, {once: true});\n\n\tscheduler.attachEvent(\"onDestroy\", function(){\n\t\touterDragHandlerAttached = false;\n\t\tconst nextScheduler = connectedSchedulers.pop();\n\t\tif(nextScheduler){\n\t\t\tprocessScheduler(nextScheduler);\n\t\t}\n\t}, {once: true});\n}\n\nexport default function(scheduler){\n\tif(window.Scheduler && window.Scheduler.plugin){// if Scheduler factory is defined, not to confuse with the browser Scheduler object\n\t\twindow.Scheduler._outer_drag = externalDrag;// old private api compatibility\n\t}\n\n\tconnectedSchedulers.push(scheduler);\n\tif(!outerDragHandlerAttached) {\n\t\tprocessScheduler(scheduler);\n\t}\n\n\tscheduler.config.drag_in = true;\n\tscheduler.config.drag_out = true;\n\tscheduler.templates.event_outside = function(start, end, event){};\n\tvar dnd = externalDrag;\n\tscheduler.attachEvent(\"onTemplatesReady\", function(){\n\t\tscheduler.event(scheduler._obj, \"mousemove\", function(e){\n\t\t\tdnd.target_scheduler = scheduler;\n\t\t});\n\t\tscheduler.event(scheduler._obj, \"mouseup\", function(e){\n\t\t\tdnd.target_scheduler = scheduler;\n\t\t});\n\t});\n}","export default function(scheduler){\n\n\n\n(function(){\n\tvar modalsStack = [];\n\n\tfunction isModal(){\n\t\treturn !!(modalsStack.length);\n\t}\n\n\tfunction isChildOf(child, parent){\n\t\twhile(child && child != parent){\n\t\t\tchild = child.parentNode;\n\t\t}\n\n\t\treturn !!(child == parent);\n\t}\n\n\tfunction afterPopup(box){\n\t\tsetTimeout(function(){\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(!isModal() && !(isChildOf(document.activeElement, scheduler.$container))) {\n\t\t\t\tscheduler.focus();\n\t\t\t}\n\t\t}, 1);\n\t}\n\tfunction startModal(box){\n\t\tscheduler.eventRemove(box, \"keydown\", trapFocus);\n\t\tscheduler.event(box, \"keydown\", trapFocus);\n\t\tmodalsStack.push(box);\n\t\t//scheduler.$keyboardNavigation.dispatcher.disable();\n\t}\n\n\tfunction endModal(){\n\t\tvar box = modalsStack.pop();\n\t\tif(box) {\n\t\t\tscheduler.eventRemove(box, \"keydown\", trapFocus);\n\t\t}\n\t\tafterPopup(box);\n\n\t}\n\n\tfunction isTopModal(box){\n\t//\tif(dhtmlx._modalsStack.length){\n\t//\t\treturn box == dhtmlx._modalsStack[dhtmlx._modalsStack.length - 1];\n\t//\t}else{\n\t\t\treturn box == modalsStack[modalsStack.length - 1];\n\t//\t}\n\n\t}\n\n\tfunction trapFocus(event){\n\t\tvar event = event || window.event;\n\t\tvar target = event.currentTarget;\n\t\tif(!isTopModal(target)) return;\n\n\t\tscheduler.$keyboardNavigation.trapFocus(target, event);\n\t}\n\n\tfunction traceLightbox(){\n\t\tstartModal(scheduler.getLightbox());\n\t}\n\n\tscheduler.attachEvent(\"onLightbox\", traceLightbox);\n\tscheduler.attachEvent(\"onAfterLightbox\", endModal);\n\n\tscheduler.attachEvent(\"onAfterQuickInfo\", function(){afterPopup();});\n\n\tif(!scheduler._keyNavMessagePopup) {\n\t\tscheduler._keyNavMessagePopup = true;\n\n\t\tvar focusElement = null;\n\t\tvar backupFocus = null;\n\t\tconst modalsStack = [];\n\t\tscheduler.attachEvent(\"onMessagePopup\", function(box){\n\t\t\tfocusElement = document.activeElement;\n\t\t\tbackupFocus = focusElement;\n\n\t\t\twhile(backupFocus && scheduler._getClassName(backupFocus).indexOf(\"dhx_cal_data\") < 0){\n\t\t\t\tbackupFocus = backupFocus.parentNode;\n\t\t\t}\n\t\t\tif(backupFocus){\n\t\t\t\tbackupFocus = backupFocus.parentNode;\n\t\t\t}\n\n\t\t\tscheduler.eventRemove(box, \"keydown\", trapFocus);\n\t\t\tscheduler.event(box, \"keydown\", trapFocus);\n\t\t\tmodalsStack.push(box);\n\t\t});\n\n\n\t\tscheduler.attachEvent(\"onAfterMessagePopup\", function () {\n\t\t\tvar box = modalsStack.pop();\n\t\t\tif(box) {\n\t\t\t\tscheduler.eventRemove(box, \"keydown\", trapFocus);\n\t\t\t}\n\t\t\tsetTimeout(function(){\n\t\t\t\tif(scheduler.$destroyed){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar currentTarget = document.activeElement;\n\t\t\t\twhile(currentTarget && scheduler._getClassName(currentTarget).indexOf(\"dhx_cal_light\") < 0){\n\t\t\t\t\tcurrentTarget = currentTarget.parentNode;\n\t\t\t\t}\n\t\t\t\tif(currentTarget)\n\t\t\t\t\treturn;\n\n\n\t\t\t\tif(focusElement && focusElement.parentNode){\n\t\t\t\t\tfocusElement.focus();\n\n\t\t\t\t}else if(backupFocus && backupFocus.parentNode){\n\t\t\t\t\tbackupFocus.focus();\n\t\t\t\t}\n\t\t\t\tfocusElement = null;\n\t\t\t\tbackupFocus = null;\n\n\t\t\t}, 1);\n\t\t});\n\t}\n\n\tscheduler.$keyboardNavigation.isModal = isModal;\n\n\n})();\n\n}","export default function(scheduler){\n\n//Initial idea and implementation by Steve MC\nscheduler._temp_key_scope = function (){\n\n\tscheduler.config.key_nav = true;\n\n\tscheduler.$keyboardNavigation._pasteDate = null; // used for copy and paste operations\n\tscheduler.$keyboardNavigation._pasteSection = null; // used for copy and paste operations\n\tvar isCopy = null;\n\n\tvar pos = {};\n\n\tif(!document.body){\n\t\tscheduler.event(window, \"load\", function(){\n\t\t\tscheduler.event(document.body, \"mousemove\", trackMousePosition);\n\t\t});\n\t}else{\n\t\tscheduler.event(document.body, \"mousemove\", trackMousePosition);\n\t}\n\n\tfunction trackMousePosition(event){\n\t\tevent = event || window.event;\n\t\tpos.x = event.clientX;\n\t\tpos.y = event.clientY;\n\t}\n\tfunction currentTarget(){\n\n\t\tvar mousePointer = false;\n\t\tvar keyNavPointer = false;\n\n\t\tvar target = document.elementFromPoint(pos.x, pos.y);\n\t\twhile(target && target != scheduler._obj){\n\t\t\ttarget = target.parentNode;\n\t\t}\n\t\tmousePointer = !!(target == scheduler._obj);\n\n\t\tkeyNavPointer = scheduler.$keyboardNavigation.dispatcher.isEnabled();\n\n\t\treturn mousePointer || keyNavPointer;\n\t}\n\n\tscheduler.attachEvent(\"onMouseMove\", function(id,e){\n\t\tvar state = scheduler.getState();\n\n\t\t// make sure scheduler is fully initialized before calling scheduler.getActionData\n\t\tif(!(state.mode && state.min_date)){\n\t\t\treturn;\n\t\t}\n\t\tvar position = scheduler.getActionData(e);\n\t\tscheduler.$keyboardNavigation._pasteDate = position.date;\n\t\tscheduler.$keyboardNavigation._pasteSection = position.section;\n\t});\n\n\tfunction clear_event_after(ev){\n\t\tdelete ev.rec_type; delete ev.rec_pattern;\n\t\tdelete ev.event_pid; delete ev.event_length;\n\t}\n\n\tfunction copyEvent(ev){\n\t\treturn scheduler._lame_copy({}, ev);\n\t}\n\n\tscheduler._make_pasted_event = function(ev){\n\t\tvar date = scheduler.$keyboardNavigation._pasteDate;\n\t\tvar section = scheduler.$keyboardNavigation._pasteSection;\n\n\t\tvar event_duration = ev.end_date-ev.start_date;\n\n\t\tvar copy = copyEvent(ev);\n\t\tclear_event_after(copy);\n\t\tcopy.start_date = new Date(date);\n\t\tcopy.end_date = new Date(copy.start_date.valueOf() + event_duration);\n\n\t\tif(section){\n\t\t\tvar property = scheduler._get_section_property();\n\t\t\t// GS-2527: if the event has multiple sections, it will be inserted into the initial sections.\n\t\t\tif(scheduler.config.multisection && ev[property] && scheduler.isMultisectionEvent && scheduler.isMultisectionEvent(ev)) \n\t\t\t\tcopy[property] = ev[property]; // save initial set of resources for multisection view\n\t\t\telse\n\t\t\t\tcopy[property] = section;\n\t\t}\n\t\treturn copy;\n\t};\n\tscheduler._do_paste = function(is_copy, modified_ev, original_ev){\n\t\tif(scheduler.callEvent(\"onBeforeEventPasted\", [is_copy, modified_ev, original_ev]) === false){\n\t\t\treturn;\n\t\t}\n\t\tscheduler.addEvent(modified_ev);\n\t\tscheduler.callEvent(\"onEventPasted\", [is_copy, modified_ev, original_ev]);\n\t};\n\n\tscheduler._is_key_nav_active = function(){\n\t\tif(this._is_initialized() && !this._is_lightbox_open() && this.config.key_nav){\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tfunction getSelectedEvent(){\n\t\tvar node = scheduler.$keyboardNavigation.dispatcher.getActiveNode();\n\t\tif(node && node.eventId) return node.eventId;\n\t\treturn scheduler._select_id;\n\t}\n\n\tscheduler.event(document, \"keydown\", function(e){\n\t\t// compatibility fix - scheduler focus on ctrl+v on mouse hover\n\t\tif(((e.ctrlKey || e.metaKey) && e.keyCode == 86) && scheduler._buffer_event && !scheduler.$keyboardNavigation.dispatcher.isEnabled()) {\n\t\t\tscheduler.$keyboardNavigation.dispatcher.isActive = currentTarget();\n\t\t}\n\t});\n\n\tscheduler._key_nav_copy_paste = function(e){\n\t\tif(!scheduler._is_key_nav_active()) return true;\n\n\t\tif (e.keyCode == 37 || e.keyCode == 39) { // Left, Right arrows\n\t\t\te.cancelBubble = true;\n\n\t\t\tvar next = scheduler.date.add(scheduler._date,(e.keyCode == 37 ? -1 : 1 ),scheduler._mode);\n\t\t\tscheduler.setCurrentView(next);\n\t\t\treturn true;\n\t\t}\n\n\t\tvar select_id = getSelectedEvent();\n\t\tif ((e.ctrlKey || e.metaKey) && e.keyCode == 67) {  // CTRL+C\n\t\t\tif (select_id) {\n\t\t\t\tscheduler._buffer_event = copyEvent(scheduler.getEvent(select_id));\n\t\t\t\tisCopy = true;\n\t\t\t\tscheduler.callEvent(\"onEventCopied\", [scheduler.getEvent(select_id)]);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tif ((e.ctrlKey || e.metaKey) && e.keyCode == 88) { // CTRL+X\n\t\t\tif (select_id) {\n\t\t\t\tisCopy = false;\n\t\t\t\tvar ev = scheduler._buffer_event = copyEvent(scheduler.getEvent(select_id));\n\n\t\t\t\tscheduler.updateEvent(ev.id);\n\t\t\t\tscheduler.callEvent(\"onEventCut\", [ev]);\n\t\t\t}\n\t\t}\n\n\t\tif ((e.ctrlKey || e.metaKey) && e.keyCode == 86 && currentTarget(e)) {  // CTRL+V\n\t\t\tvar ev = scheduler._buffer_event ? scheduler.getEvent(scheduler._buffer_event.id) : scheduler._buffer_event;\n\t\t\tev = ev || scheduler._buffer_event;\n\n\t\t\tif (ev) {\n\t\t\t\tvar new_ev = scheduler._make_pasted_event(ev);\n\t\t\t\tif (isCopy) {\n\t\t\t\t\tnew_ev.id = scheduler.uid();\n\t\t\t\t\tscheduler._do_paste(isCopy, new_ev, ev);\n\t\t\t\t}\n\t\t\t\telse { // cut operation\n\t\t\t\t\tvar res = scheduler.callEvent(\"onBeforeEventChanged\",[new_ev, e, false, ev]);\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tscheduler._do_paste(isCopy, new_ev, ev);\n\t\t\t\t\t\tisCopy = true; // switch to copy after first paste operation\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t};\n};\nscheduler._temp_key_scope();\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.attachSchedulerHandlers = function(){\n\tvar dispatcher = scheduler.$keyboardNavigation.dispatcher;\n\n\tvar keyDownHandler = function(e){\n\t\tif(!scheduler.config.key_nav) return;\n\n\t\treturn dispatcher.keyDownHandler(e);\n\t};\n\n\tvar focusHandler = function () {\n\t\tdispatcher.keepScrollPosition(function () {\n\t\t\tdispatcher.focusGlobalNode();\n\t\t});\n\t};\n\n\tvar waitCall;\n\tscheduler.attachEvent(\"onDataRender\", function(){\n\t\tif(!scheduler.config.key_nav) return;\n\t\tif(!(dispatcher.isEnabled() && !scheduler.getState().editor_id)) return;\n\n\t\tclearTimeout(waitCall);\n\t\twaitCall = setTimeout(function(){\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(!dispatcher.isEnabled())\n\t\t\t\tdispatcher.enable();\n\t\t\treFocusActiveNode();\n\t\t});\n\t});\n\n\tvar reFocusActiveNode = function(){\n\t\tif(!dispatcher.isEnabled())\n\t\t\treturn;\n\n\t\tvar activeNode = dispatcher.getActiveNode();\n\t\tif(!activeNode)\n\t\t\treturn;\n\n\t\tif(!activeNode.isValid()){\n\t\t\tactiveNode = activeNode.fallback();\n\t\t}\n\n\t\tif(!activeNode || activeNode instanceof scheduler.$keyboardNavigation.MinicalButton || activeNode instanceof scheduler.$keyboardNavigation.MinicalCell)\n\t\t\treturn;\n\n\t\tdispatcher.keepScrollPosition(function () {\n\t\t\tactiveNode.focus(true);\n\t\t});\n\t};\n\n\tscheduler.attachEvent(\"onSchedulerReady\", function(){\n\t\tvar container = scheduler.$container;\n\t\tscheduler.eventRemove(document, \"keydown\", keyDownHandler);\n\t\tscheduler.eventRemove(container, \"mousedown\", mousedownHandler);\n\t\tscheduler.eventRemove(container, \"focus\", focusHandler);\n\n\n\t\tif(scheduler.config.key_nav){\n\n\t\t\tscheduler.event(document, \"keydown\", keyDownHandler);\n\t\t\tscheduler.event(container, \"mousedown\", mousedownHandler);\n\t\t\tscheduler.event(container, \"focus\", focusHandler);\n\n\t\t\tcontainer.setAttribute(\"tabindex\", \"0\");\n\n\t\t}else{\n\t\t\tcontainer.removeAttribute(\"tabindex\");\n\t\t}\n\t});\n\n\tfunction mousedownHandler(e){\n\t\tif(!scheduler.config.key_nav) return true;\n\n\t\tconst view = scheduler.getView();\n\t\tlet dataAreaClick = false;\n\t\tif (scheduler.getState().mode === \"month\") {\n\t\t\tdataAreaClick = scheduler.$keyboardNavigation.isChildOf(e.target || e.srcElement, scheduler.$container.querySelector(\".dhx_cal_month_table\"));\n\t\t} else if (view && view.layout === \"timeline\") {\n\t\t\tdataAreaClick = scheduler.$keyboardNavigation.isChildOf(e.target || e.srcElement, scheduler.$container.querySelector(\".dhx_timeline_data_col\"));\n\t\t} else {\n\t\t\tconst listOfScales = scheduler.$container.querySelectorAll(\".dhx_scale_holder\");\n\t\t\tconst arrOfScales = Array.from(listOfScales);\n\t\t\tdataAreaClick = arrOfScales.some(scale => scale === e.target.parentNode);\n\t\t}\n\n\t\tvar pos = scheduler.getActionData(e);\n\n\t\tvar focusNode;\n\t\tif(scheduler._locate_event(e.target || e.srcElement)){\n\t\t\tfocusNode = new scheduler.$keyboardNavigation.Event(scheduler._locate_event(e.target || e.srcElement));\n\t\t}else if(dataAreaClick){\n\t\t\tfocusNode = new scheduler.$keyboardNavigation.TimeSlot();\n\t\t\tif(pos.date && dataAreaClick){\n\t\t\t\tfocusNode = focusNode.nextSlot(new scheduler.$keyboardNavigation.TimeSlot(pos.date, null, pos.section));\n\t\t\t}\n\t\t}\n\n\t\tif(focusNode) {\n\t\t\tif (!dispatcher.isEnabled()) {\n\t\t\t\tdispatcher.activeNode = focusNode;\n\n\t\t\t} else {\n\t\t\t\tif (pos.date && dataAreaClick) {\n\t\t\t\t\tdispatcher.delay(function () {\n\t\t\t\t\t\tdispatcher.setActiveNode(focusNode);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction focusEvent(evNode){\n\t\tif(!scheduler.config.key_nav) return;\n\t\tif(!dispatcher.isEnabled()) return;\n\n\n\t\tvar prevState = evNode;\n\t\tvar focusNode = new scheduler.$keyboardNavigation.Event(prevState.eventId);\n\t\tif(!focusNode.isValid()){\n\t\t\tvar lastStart = focusNode.start || prevState.start;\n\t\t\tvar lastEnd = focusNode.end || prevState.end;\n\t\t\tvar lastSection = focusNode.section || prevState.section;\n\n\t\t\tfocusNode = new scheduler.$keyboardNavigation.TimeSlot(lastStart, lastEnd, lastSection);\n\t\t\tif(!focusNode.isValid()){\n\t\t\t\tfocusNode = new scheduler.$keyboardNavigation.TimeSlot();\n\t\t\t}\n\t\t}\n\n\t\tdispatcher.setActiveNode(focusNode);\n\t\tvar node = dispatcher.getActiveNode();\n\t\tif(node && node.getNode && document.activeElement != node.getNode()){\n\t\t\tdispatcher.focusNode(dispatcher.getActiveNode());\n\t\t}\n\t}\n\n\n\tvar updateEvent = scheduler.updateEvent;\n\tscheduler.updateEvent = function(id){\n\t\tvar res = updateEvent.apply(this, arguments);\n\t\tif(scheduler.config.key_nav && dispatcher.isEnabled()){\n\t\t\tif(scheduler.getState().select_id == id){\n\t\t\t\tvar element = new scheduler.$keyboardNavigation.Event(id);\n\n\t\t\t\tif(!scheduler.getState().lightbox_id){\n\t\t\t\t\tfocusEvent(element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t};\n\n\tscheduler.attachEvent(\"onEventDeleted\", function(id) {\n\t\tif(!scheduler.config.key_nav) return true;\n\t\tif(dispatcher.isEnabled()){\n\t\t\tvar activeNode = dispatcher.getActiveNode();\n\t\t\tif(activeNode.eventId == id){\n\t\t\t\tdispatcher.setActiveNode(new scheduler.$keyboardNavigation.TimeSlot());\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onClearAll\", function(){\n\t\tif(!scheduler.config.key_nav) return true;\n\t\tif(dispatcher.isEnabled()){\n\t\t\tif(dispatcher.getActiveNode() instanceof scheduler.$keyboardNavigation.Event){\n\t\t\t\tdispatcher.setActiveNode(new scheduler.$keyboardNavigation.TimeSlot());\n\t\t\t}\n\t\t}\n\t});\n\n};\n\n}","/* eslint-disable  */\n\nexport default function dhtmlxError(type, name, params) {\n\tif (!this.catches)\n\t\tthis.catches = [];\n\n\treturn this;\n}\n\ndhtmlxError.prototype.catchError = function (type, func_name) {\n\tthis.catches[type] = func_name;\n};\n\ndhtmlxError.prototype.throwError = function (type, name, params) {\n\tif (this.catches[type])\n\t\treturn this.catches[type](type, name, params);\n\n\tif (this.catches[\"ALL\"])\n\t\treturn this.catches[\"ALL\"](type, name, params);\n\n\tglobal.alert(\"Error type: \" + arguments[0] + \"\\nDescription: \" + arguments[1]);\n\treturn null;\n};\n\n","import { IMapAdapter, ICalendarEvent, IMapSettings, IMapPosition} from \"./types\";\ndeclare let google: any;\n\nexport class GoogleMapAdapter implements IMapAdapter {\n\tprivate map: any;\n\tprivate scheduler: any;\n\tprivate settings: IMapSettings;\n\tprivate _markers: any[];\n\tprivate infoWindow: any;\n\tconstructor(scheduler: any) {\n\t\tthis.map = null;\n\t\tthis._markers = [];\n\t\tthis.scheduler = scheduler;\n\t}\n\tonEventClick(event: ICalendarEvent): void {\n\t\tif (this._markers && this._markers.length > 0) {\n\t\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\t\tif (event.id == this._markers[i].event.id) {\n\t\t\t\t\tlet zoom = this.settings.zoom_after_resolve || this.settings.initial_zoom;\n\t\t\t\t\tif (event.lat && event.lng){\n\t\t\t\t\t\tthis.map.setCenter({\n\t\t\t\t\t\t\tlat: event.lat, \n\t\t\t\t\t\t\tlng: event.lng,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.map.setZoom(zoom);\n\t\t\t\t\t} else {\t\t\t\t\t\t\n\t\t\t\t\t\tthis.map.setCenter({\n\t\t\t\t\t\t\tlat: this.settings.error_position.lat, \n\t\t\t\t\t\t\tlng: this.settings.error_position.lng,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.map.setZoom(zoom);\n\t\t\t\t\t}\n\t\t\t\t\tgoogle.maps.event.trigger(this._markers[i].marker, 'click');\n\t\t\t\t}\t\n\t\t\t}\n\t\t} \n\t}\n\n\tinitialize(container: HTMLElement, options: IMapSettings): void {\n\t\tthis.settings = options;\n\t\tlet scheduler = this.scheduler;\n\t\tlet mapOptions = {\n\t\t\tcenter: { lat: options.initial_position.lat, lng:  options.initial_position.lng },\n\t\t\tzoom: options.initial_zoom,\n\t\t\tmapId: container.id,\n\t\t\tscrollwheel: true,\n\t\t\tmapTypeId: options.type\n\t\t}\n\t\t// we need to reuse the google map to avoid leak memory\n\t\tif (this.map === null) {\n\t\t\tthis.map = new google.maps.Map(container, mapOptions);\n\t\t}\n\t\telse {\n\t\t\tlet map = this.map;\n\t\t\tcontainer.appendChild(this.map.__gm.messageOverlay);\n\t\t\tcontainer.appendChild(this.map.__gm.outerContainer);\n\t\t\tsetTimeout(function() {\n\t\t\t\tmap.setOptions({container: container.id});\n\t\t\t}, 500);\n\t\t}\n\t\tgoogle.maps.event.addListener(this.map, \"dblclick\", function(event) {\n\t\t\tconst geocoder = new google.maps.Geocoder();\n\t\n\t\t\tif (!scheduler.config.readonly && scheduler.config.dblclick_create) {\n\t\t\t\tlet point = event.latLng;\n\t\t\t\tgeocoder.geocode(\n\t\t\t\t\t{ 'latLng': point },\n\t\t\t\t\tfunction(results, status) {\n\t\t\t\t\t\tif (status == google.maps.GeocoderStatus.OK) {\n\t\t\t\t\t\t\tpoint = results[0].geometry.location;\n\t\t\t\t\t\t\tscheduler.addEventNow({\n\t\t\t\t\t\t\t\tlat: point.lat(),\n\t\t\t\t\t\t\t\tlng: point.lng(),\n\t\t\t\t\t\t\t\tevent_location: results[0].formatted_address,\n\t\t\t\t\t\t\t\tstart_date: scheduler.getState().date,\n\t\t\t\t\t\t\t\tend_date: scheduler.date.add(scheduler.getState().date, scheduler.config.time_step, \"minute\")\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('Geocode was not successful for the following reason: ' + status);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tdestroy(container: HTMLElement): void {\n\t\tgoogle.maps.event.clearInstanceListeners(window);\n\t\tgoogle.maps.event.clearInstanceListeners(document);\n\t\tgoogle.maps.event.clearInstanceListeners(container);\n\t\twhile (container.firstChild) {\n\t\t\tcontainer.firstChild.remove();\n\t\t}\n\t\tcontainer.innerHTML = \"\";\n\t}\n\n\tasync addEventMarker(event: ICalendarEvent): Promise<void> {\n\t\tlet config = {\n\t\t\ttitle: event.text,\n\t\t\tposition: {},\n\t\t\tmap: {}\n\t\t}\n\t\t\n\t\tif (event.lat && event.lng) {\n\t\t\tconfig.position = { lat: event.lat, lng: event.lng };\n\t\t} else {\n\t\t\tconfig.position = { lat: this.settings.error_position.lat, lng: this.settings.error_position.lng }\n\t\t}\n\t\tconst { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\");\n\t\tlet marker;\n\t\tif (this.scheduler.ext.mapView.createMarker) {\n\t\t\tconfig.map = this.map;\n\t\t\tmarker = this.scheduler.ext.mapView.createMarker(config);\n\t\t} else {\n\t\t\tmarker = new AdvancedMarkerElement(config);\n\t\t\tmarker.map = this.map;\n\t\t}\n\t\tmarker.setMap(this.map);\n\t\t//case for markeks which were deleted with DataProcessor\n\t\tif (event[\"!nativeeditor_status\"] == \"true_deleted\"){\n\t\t\tmarker.setMap(null);\n\t\t}\n\t\tgoogle.maps.event.addListener(marker, \"click\", () => {\n\t\t\tif (this.infoWindow) {\n\t\t\t\tthis.infoWindow.close();\n\t\t\t}\n\t\t\tthis.infoWindow = new google.maps.InfoWindow({maxWidth: this.settings.info_window_max_width});\n\t\t\tthis.infoWindow.setContent(this.scheduler.templates.map_info_content(event));\n\t\t\tthis.infoWindow.open({\n\t\t\t\tanchor: marker,\n\t\t\t\tmap: this.map,\n\t\t\t});\n\t\t});\n\t\tlet markerInfo = {event, ...config, marker};\n\t\tthis._markers.push(markerInfo);\n\t}\n\n\tremoveEventMarker(eventId: string): void {\n\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\tif (eventId == this._markers[i].event.id) {\n\t\t\t\tthis._markers[i].marker.setVisible(false);\n\t\t\t\tthis._markers[i].marker.setMap(null);\n\t\t\t\tthis._markers[i].marker.setPosition(null);\n\t\t\t\tthis._markers[i].marker = null;\n\t\t\t\tthis._markers.splice(i,1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateEventMarker(event: ICalendarEvent): void {\n\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\tif(this._markers[i].event.id == event.id) {\n\t\t\t\tthis._markers[i].event = event;\n\t\t\t\tthis._markers[i].position.lat = event.lat;\n\t\t\t\tthis._markers[i].position.lng = event.lng;\n\t\t\t\tthis._markers[i].text = event.text;\n\t\t\t\tlet latlng = new google.maps.LatLng(event.lat, event.lng);\n\t\t\t\tthis._markers[i].marker.setPosition(latlng);\n\t\t\t}\n\t\t}\n\t}\n\n\tclearEventMarkers(): void {\n\t\tif (this._markers.length > 0) {\n\t\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\t\tthis._markers[i].marker.setMap(null);\n\t\t\t}\n\t\t\tthis._markers = [];\n\t\t}\n\t}\n\n\tsetView(latitude: number, longitude: number, zoom: number): void {\n\t\tthis.map.setCenter({\n\t\t\tlat: latitude, \n\t\t\tlng: longitude,\n\t\t});\n\t\tthis.map.setZoom(zoom);\n\t}\n\n\tasync resolveAddress(string: string): Promise<IMapPosition> {\n\t\tconst geocoder = new google.maps.Geocoder();\n\t\tlet position: any = await new Promise((resolve) => {\n\t\t\tgeocoder.geocode(\n\t\t\t\t{ 'address': string },\n\t\t\t\tfunction(results, status) {\n\t\t\t\t\tif (status == google.maps.GeocoderStatus.OK) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t lat: results[0].geometry.location.lat(),\n\t\t\t\t\t\t lng: results[0].geometry.location.lng()\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('Geocode was not successful for the following reason: ' + status);\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t\treturn position;\n\t}\n\t\n}","import { IMapAdapter, ICalendarEvent, IMapSettings, IMapPosition} from \"./types\";\n\ndeclare let L: any\n\nexport class OpenStreetMapAdapter implements IMapAdapter {\n\tprivate map: any;\n\tprivate scheduler: any;\n\tprivate _markers: any[];\n\tprivate settings: IMapSettings;\n\tconstructor(scheduler: any) {\n\t\tthis.map = null;\n\t\tthis._markers = [];\n\t\tthis.scheduler = scheduler;\n\t}\n\tonEventClick(event: ICalendarEvent): void {\n\t\tif (this._markers && this._markers.length > 0) {\n\t\t\tfor (let i = 0; i <  this._markers.length; i++) {\n\t\t\t\tif (event.id ==  this._markers[i].event.id) {\n\t\t\t\t\tthis._markers[i].marker.openPopup();\n\t\t\t\t\tthis._markers[i].marker.closeTooltip();\n\t\t\t\t\tif (event.lat && event.lng) {\n\t\t\t\t\t\tthis.setView(event.lat, event.lng, this.settings.zoom_after_resolve || this.settings.initial_zoom);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setView(this.settings.error_position.lat, this.settings.error_position.lng, this.settings.zoom_after_resolve || this.settings.initial_zoom);\n\t\t\t\t\t}\n\t\t\t\t}\t\n\t\t\t}\n\t\t} \n\t}\n\n\tinitialize(container: HTMLElement, options: IMapSettings): void {\n\t\tlet scheduler = this.scheduler;\n\t\tlet mapWrapper = document.createElement('div');\n\t\tmapWrapper.className = 'mapWrapper';\n\t\tmapWrapper.id = 'mapWrapper';\n\t\tmapWrapper.style.width = container.style.width;\n\t\tmapWrapper.style.height = container.style.height;\n\t\tcontainer.appendChild(mapWrapper);\n\n\t\tlet map = L.map(mapWrapper, {\n\t\t\tcenter: L.latLng(options.initial_position.lat, options.initial_position.lng),\n\t\t\tzoom: options.initial_zoom,\n\t\t\tkeyboard: false // need to set false, due to bug with moving window\n\t\t});\n\t\tL.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n\t\tmap.on(\"dblclick\", async function(e){\n\t\t\tconst settings = {\n\t\t\t\t\"method\": \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Accept-Language\":  \"en\",\n\t\t\t\t},\n\t\t\t};\n\t\t\tlet response = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${e.latlng.lat}&lon=${e.latlng.lng}&format=json`, settings).then(response => response.json());\n\t\t\tif (response.address) {\n\t\t\t\tlet address = response.address.country;\n\t\t\t\tscheduler.addEventNow({\n\t\t\t\t\tlat: e.latlng.lat,\n\t\t\t\t\tlng: e.latlng.lng,\n\t\t\t\t\tevent_location: address,\n\t\t\t\t\tstart_date: scheduler.getState().date,\n\t\t\t\t\tend_date: scheduler.date.add(scheduler.getState().date, scheduler.config.time_step, \"minute\")\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.error(\"unable recieve a position of the event\", response.error);\n\t\t\t}\n\t\t});\n\t\tthis.map = map;\n\t\tthis.settings = options;\n\t}\n\n\tdestroy(container: HTMLElement): void {\n\t\tthis.map.remove();\n\t\twhile (container.firstChild) {\n\t\t\tcontainer.firstChild.remove();\n\t\t}\n\t\tcontainer.innerHTML = \"\";\n\t}\n\n\taddEventMarker(event: ICalendarEvent): void {\n\t\tconst myIcon = L.icon({\n\t\t\ticonUrl: 'https://unpkg.com/leaflet@1.0.3/dist/images/marker-icon.png',\n\t\t\ticonSize:     [25, 41],\n\t\t\tshadowSize:   [30, 65],\n\t\t\ticonAnchor:   [12, 41],\n\t\t\tshadowAnchor: [7, 65]\n\t\t});\n\t\tlet popupConfig = {\n\t\t\tminWidth: 180,\n\t\t\tmaxWidth: this.settings.info_window_max_width,\n\t\t}\n\t\tconst markerPopup = L.popup(popupConfig).setContent(this.scheduler.templates.map_info_content(event));\n\t\tconst tooltip = L.tooltip().setContent(event.text);\n\n\t\tlet markerConfig = [\n\t\t\tevent.lat,\n\t\t\tevent.lng\n\t\t]\n\t\t\n\t\tif (!event.lat || !event.lng) {\n\t\t\tmarkerConfig = [this.settings.error_position.lat, this.settings.error_position.lng];\n\t\t}\n\t\tconst marker = L.marker(markerConfig, {\n\t\t\ticon: myIcon\n\t\t}).bindPopup(markerPopup).bindTooltip(tooltip).addTo(this.map);\n\t\tconst markerInfo = {event, marker};\n\t\tthis._markers.push(markerInfo);\t\t\n\t}\n\n\tremoveEventMarker(eventId: string): void {\n\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\tif (eventId == this._markers[i].event.id) {\n\t\t\t\tthis.map.removeLayer(this._markers[i].marker);\n\t\t\t\tthis._markers.splice(i,1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateEventMarker(event: ICalendarEvent): void {\n\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\tif(this._markers[i].event.id == event.id) {\n\t\t\t\tthis._markers[i].event = event;\n\t\t\t\tif (!event.lat || !event.lng){\n\t\t\t\t\tthis._markers[i].marker.setLatLng([this.settings.error_position.lat, this.settings.error_position.lng]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._markers[i].marker.setLatLng([event.lat, event.lng]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tclearEventMarkers(): void {\n\t\tif(this._markers) {\n\t\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\t\tthis.map.removeLayer(this._markers[i].marker); \n\t\t\t}\n\t\t\tthis._markers = [];\n\t\t}\n\t}\n\n\tsetView(latitude: number, longitude: number, zoom: number): void {\n\t\tthis.map.setView([latitude, longitude], zoom);\n\t}\n\n\tasync resolveAddress(string: string): Promise<IMapPosition> {\n\t\tconst settings = {\n\t\t\t\"method\": \"GET\",\n\t\t\theaders: {\n\t\t\t\t\"Accept-Language\":  \"en\",\n\t\t\t},\n\t\t};\n\t\tlet position:any = {};\n\t\tlet response = await fetch(`https://nominatim.openstreetmap.org/search?q=${string}&format=json`, settings).then(response => response.json());\n\t\tif (response && response.length) {\n\t\t\tposition.lat = +response[0].lat;\n\t\t\tposition.lng = +response[0].lon;\n\t\t} else {\n\t\t\tconsole.error(`Unable recieve a position of the event's location: ${string}`);\n\t\t}\n\t\treturn position;\n\t}\n}","import { IMapAdapter, ICalendarEvent, IMapSettings, IMapPosition} from \"./types\";\n\ndeclare let mapboxgl: any;\ndeclare let MapboxGeocoder: any;\n\nexport class MapboxAdapter implements IMapAdapter {\n\tprivate map: any;\n\tprivate scheduler: any;\n\tprivate settings: IMapSettings;\n\tprivate _markers: any[];\n\tconstructor(scheduler: any) {\n\t\tthis.map = null;\n\t\tthis._markers = [];\n\t\tthis.scheduler = scheduler;\n\t}\n\tonEventClick(event: ICalendarEvent): void {\n\t\tif (this._markers && this._markers.length > 0) {\n\t\t\tfor (let i = 0; i <  this._markers.length; i++) {\n                const popup = this._markers[i].marker.getPopup();\n                if (popup.isOpen()){\n                    popup.remove();\n                }\n\t\t\t\tif (event.id ==  this._markers[i].event.id) {\n\t\t\t\t\tthis._markers[i].marker.togglePopup();\n\t\t\t\t\tif (event.lat && event.lng) {\n\t\t\t\t\t\tthis.setView(event.lat, event.lng, this.settings.zoom_after_resolve || this.settings.initial_zoom);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setView(this.settings.error_position.lat, this.settings.error_position.lng, this.settings.zoom_after_resolve || this.settings.initial_zoom);\n\t\t\t\t\t}\n\t\t\t\t}\t\n\t\t\t}\n\t\t} \n\t}\n\n\tinitialize(container: HTMLElement, options: IMapSettings): void {\n        let scheduler = this.scheduler;\n\n\t\tmapboxgl.accessToken = options.accessToken;\n        const map = new mapboxgl.Map({\n            container: container, \n            center: [options.initial_position.lng, options.initial_position.lat], \n            zoom:  options.initial_zoom + 1, // problems with coordinates if zoom = 1\n        });\n        map.on(\"dblclick\",async function(e){\n\t\t\tlet response = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e.lngLat.lng},${ e.lngLat.lat}.json?access_token=${options.accessToken}`).then(response => response.json());\n\t\t\tif (response.features){\n\t\t\t\tlet address = response.features[0].place_name;\n\t\t\t\tscheduler.addEventNow({\n\t\t\t\t\tlat: e.lngLat.lat,\n\t\t\t\t\tlng: e.lngLat.lng,\n\t\t\t\t\tevent_location: address,\n\t\t\t\t\tstart_date: scheduler.getState().date,\n\t\t\t\t\tend_date: scheduler.date.add(scheduler.getState().date, scheduler.config.time_step, \"minute\")\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.error(\"unable recieve a position of the event\");\n\t\t\t}\n\t\t});\n        this.map = map;\n        this.settings = options;\n\t}\n\n\tdestroy(container: HTMLElement): void {\n\t\tthis.map.remove();\n        while (container.firstChild) {\n\t\t\tcontainer.firstChild.remove();\n\t\t}\n        container.innerHTML = \"\";\n\t}\n\n\taddEventMarker(event: ICalendarEvent): void {\n        let config = [\n\t\t\tevent.lng,\n\t\t\tevent.lat\n\t\t]\n\t\t\n\t\tif (!event.lat || !event.lng) {\n\t\t\tconfig = [this.settings.error_position.lng, this.settings.error_position.lat];\n\t\t} \n\n\t\tconst popup = new mapboxgl.Popup({ offset: 25, focusAfterOpen: false})\n            .setMaxWidth(`${this.settings.info_window_max_width}px`) \n            .setHTML(this.scheduler.templates.map_info_content(event));\n        const marker = new mapboxgl.Marker()\n            .setLngLat(config)\n            .setPopup(popup)\n            .addTo(this.map);\n        const markerInfo = {event, marker};    \n        this._markers.push(markerInfo);\n\t}\n\n\tremoveEventMarker(eventId: string): void {\n\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\tif (eventId == this._markers[i].event.id) {\n\t\t\t\tthis._markers[i].marker.remove();\n                this._markers.splice(i,1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateEventMarker(event: ICalendarEvent): void {\n\t\tfor (let i = 0; i < this._markers.length; i++) {\n\t\t\tif(this._markers[i].event.id == event.id) {\n\t\t\t\tthis._markers[i].event = event;\n\t\t\t\tif (!event.lat || !event.lng){\n\t\t\t\t\tthis._markers[i].marker.setLngLat([this.settings.error_position.lng, this.settings.error_position.lat]);\n\t\t\t\t} else {\n\t\t\t\t\tthis._markers[i].marker.setLngLat([event.lng, event.lat]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tclearEventMarkers(): void {\n\t\tfor (let i = 0; i <this._markers.length; i++) {\n\t\t\tthis._markers[i].marker.remove();\n\t\t}\n\t\tthis._markers = [];\n\t}\n\n\tsetView(latitude: number, longitude: number, zoom: number): void {\n\t\tthis.map.setCenter([longitude, latitude]);\n        this.map.setZoom(zoom);\n\t}\n\n\tasync resolveAddress(string: string): Promise<IMapPosition> {\n\t\tlet response = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${string}.json?access_token=${this.settings.accessToken}`).then(response => response.json());\n\t\tlet position:any = {};\n\t\tif (response && response.features.length) {\n\t\t\tposition.lng = response.features[0].center[0];\n\t\t\tposition.lat = response.features[0].center[1];\n\t\t} else {\n\t\t\tconsole.error(`Unable recieve a position of the event's location: ${string}`);\n\t\t}\n\t\treturn position;\n\t}\n}","// =============================================================================\n// Weekday\n// =============================================================================\nexport var ALL_WEEKDAYS = [\n    'MO',\n    'TU',\n    'WE',\n    'TH',\n    'FR',\n    'SA',\n    'SU',\n];\nvar Weekday = /** @class */ (function () {\n    function Weekday(weekday, n) {\n        if (n === 0)\n            throw new Error(\"Can't create weekday with n == 0\");\n        this.weekday = weekday;\n        this.n = n;\n    }\n    Weekday.fromStr = function (str) {\n        return new Weekday(ALL_WEEKDAYS.indexOf(str));\n    };\n    // __call__ - Cannot call the object directly, do it through\n    // e.g. RRule.TH.nth(-1) instead,\n    Weekday.prototype.nth = function (n) {\n        return this.n === n ? this : new Weekday(this.weekday, n);\n    };\n    // __eq__\n    Weekday.prototype.equals = function (other) {\n        return this.weekday === other.weekday && this.n === other.n;\n    };\n    // __repr__\n    Weekday.prototype.toString = function () {\n        var s = ALL_WEEKDAYS[this.weekday];\n        if (this.n)\n            s = (this.n > 0 ? '+' : '') + String(this.n) + s;\n        return s;\n    };\n    Weekday.prototype.getJsWeekday = function () {\n        return this.weekday === 6 ? 0 : this.weekday + 1;\n    };\n    return Weekday;\n}());\nexport { Weekday };\n//# sourceMappingURL=weekday.js.map","// =============================================================================\n// Helper functions\n// =============================================================================\nimport { ALL_WEEKDAYS } from './weekday';\nexport var isPresent = function (value) {\n    return value !== null && value !== undefined;\n};\nexport var isNumber = function (value) {\n    return typeof value === 'number';\n};\nexport var isWeekdayStr = function (value) {\n    return typeof value === 'string' && ALL_WEEKDAYS.includes(value);\n};\nexport var isArray = Array.isArray;\n/**\n * Simplified version of python's range()\n */\nexport var range = function (start, end) {\n    if (end === void 0) { end = start; }\n    if (arguments.length === 1) {\n        end = start;\n        start = 0;\n    }\n    var rang = [];\n    for (var i = start; i < end; i++)\n        rang.push(i);\n    return rang;\n};\nexport var clone = function (array) {\n    return [].concat(array);\n};\nexport var repeat = function (value, times) {\n    var i = 0;\n    var array = [];\n    if (isArray(value)) {\n        for (; i < times; i++)\n            array[i] = [].concat(value);\n    }\n    else {\n        for (; i < times; i++)\n            array[i] = value;\n    }\n    return array;\n};\nexport var toArray = function (item) {\n    if (isArray(item)) {\n        return item;\n    }\n    return [item];\n};\nexport function padStart(item, targetLength, padString) {\n    if (padString === void 0) { padString = ' '; }\n    var str = String(item);\n    targetLength = targetLength >> 0;\n    if (str.length > targetLength) {\n        return String(str);\n    }\n    targetLength = targetLength - str.length;\n    if (targetLength > padString.length) {\n        padString += repeat(padString, targetLength / padString.length);\n    }\n    return padString.slice(0, targetLength) + String(str);\n}\n/**\n * Python like split\n */\nexport var split = function (str, sep, num) {\n    var splits = str.split(sep);\n    return num\n        ? splits.slice(0, num).concat([splits.slice(num).join(sep)])\n        : splits;\n};\n/**\n * closure/goog/math/math.js:modulo\n * Copyright 2006 The Closure Library Authors.\n * The % operator in JavaScript returns the remainder of a / b, but differs from\n * some other languages in that the result will have the same sign as the\n * dividend. For example, -1 % 8 == -1, whereas in some other languages\n * (such as Python) the result would be 7. This function emulates the more\n * correct modulo behavior, which is useful for certain applications such as\n * calculating an offset index in a circular list.\n *\n * @param {number} a The dividend.\n * @param {number} b The divisor.\n * @return {number} a % b where the result is between 0 and b (either 0 <= x < b\n * or b < x <= 0, depending on the sign of b).\n */\nexport var pymod = function (a, b) {\n    var r = a % b;\n    // If r and b differ in sign, add b to wrap the result to the correct sign.\n    return r * b < 0 ? r + b : r;\n};\n/**\n * @see: <http://docs.python.org/library/functions.html#divmod>\n */\nexport var divmod = function (a, b) {\n    return { div: Math.floor(a / b), mod: pymod(a, b) };\n};\nexport var empty = function (obj) {\n    return !isPresent(obj) || obj.length === 0;\n};\n/**\n * Python-like boolean\n *\n * @return {Boolean} value of an object/primitive, taking into account\n * the fact that in Python an empty list's/tuple's\n * boolean value is False, whereas in JS it's true\n */\nexport var notEmpty = function (obj) {\n    return !empty(obj);\n};\n/**\n * Return true if a value is in an array\n */\nexport var includes = function (arr, val) {\n    return notEmpty(arr) && arr.indexOf(val) !== -1;\n};\n//# sourceMappingURL=helpers.js.map","import { padStart } from './helpers';\nexport var datetime = function (y, m, d, h, i, s) {\n    if (h === void 0) { h = 0; }\n    if (i === void 0) { i = 0; }\n    if (s === void 0) { s = 0; }\n    return new Date(Date.UTC(y, m - 1, d, h, i, s));\n};\n/**\n * General date-related utilities.\n * Also handles several incompatibilities between JavaScript and Python\n *\n */\nexport var MONTH_DAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n/**\n * Number of milliseconds of one day\n */\nexport var ONE_DAY = 1000 * 60 * 60 * 24;\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.MAXYEAR>\n */\nexport var MAXYEAR = 9999;\n/**\n * Python uses 1-Jan-1 as the base for calculating ordinals but we don't\n * want to confuse the JS engine with milliseconds > Number.MAX_NUMBER,\n * therefore we use 1-Jan-1970 instead\n */\nexport var ORDINAL_BASE = datetime(1970, 1, 1);\n/**\n * Python: MO-SU: 0 - 6\n * JS: SU-SAT 0 - 6\n */\nexport var PY_WEEKDAYS = [6, 0, 1, 2, 3, 4, 5];\n/**\n * py_date.timetuple()[7]\n */\nexport var getYearDay = function (date) {\n    var dateNoTime = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());\n    return (Math.ceil((dateNoTime.valueOf() - new Date(date.getUTCFullYear(), 0, 1).valueOf()) /\n        ONE_DAY) + 1);\n};\nexport var isLeapYear = function (year) {\n    return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n};\nexport var isDate = function (value) {\n    return value instanceof Date;\n};\nexport var isValidDate = function (value) {\n    return isDate(value) && !isNaN(value.getTime());\n};\n/**\n * @return {Number} the date's timezone offset in ms\n */\nexport var tzOffset = function (date) {\n    return date.getTimezoneOffset() * 60 * 1000;\n};\n/**\n * @see: <http://www.mcfedries.com/JavaScript/DaysBetween.asp>\n */\nexport var daysBetween = function (date1, date2) {\n    // The number of milliseconds in one day\n    // Convert both dates to milliseconds\n    var date1ms = date1.getTime();\n    var date2ms = date2.getTime();\n    // Calculate the difference in milliseconds\n    var differencems = date1ms - date2ms;\n    // Convert back to days and return\n    return Math.round(differencems / ONE_DAY);\n};\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.date.toordinal>\n */\nexport var toOrdinal = function (date) {\n    return daysBetween(date, ORDINAL_BASE);\n};\n/**\n * @see - <http://docs.python.org/library/datetime.html#datetime.date.fromordinal>\n */\nexport var fromOrdinal = function (ordinal) {\n    return new Date(ORDINAL_BASE.getTime() + ordinal * ONE_DAY);\n};\nexport var getMonthDays = function (date) {\n    var month = date.getUTCMonth();\n    return month === 1 && isLeapYear(date.getUTCFullYear())\n        ? 29\n        : MONTH_DAYS[month];\n};\n/**\n * @return {Number} python-like weekday\n */\nexport var getWeekday = function (date) {\n    return PY_WEEKDAYS[date.getUTCDay()];\n};\n/**\n * @see: <http://docs.python.org/library/calendar.html#calendar.monthrange>\n */\nexport var monthRange = function (year, month) {\n    var date = datetime(year, month + 1, 1);\n    return [getWeekday(date), getMonthDays(date)];\n};\n/**\n * @see: <http://docs.python.org/library/datetime.html#datetime.datetime.combine>\n */\nexport var combine = function (date, time) {\n    time = time || date;\n    return new Date(Date.UTC(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds()));\n};\nexport var clone = function (date) {\n    var dolly = new Date(date.getTime());\n    return dolly;\n};\nexport var cloneDates = function (dates) {\n    var clones = [];\n    for (var i = 0; i < dates.length; i++) {\n        clones.push(clone(dates[i]));\n    }\n    return clones;\n};\n/**\n * Sorts an array of Date or Time objects\n */\nexport var sort = function (dates) {\n    dates.sort(function (a, b) {\n        return a.getTime() - b.getTime();\n    });\n};\nexport var timeToUntilString = function (time, utc) {\n    if (utc === void 0) { utc = true; }\n    var date = new Date(time);\n    return [\n        padStart(date.getUTCFullYear().toString(), 4, '0'),\n        padStart(date.getUTCMonth() + 1, 2, '0'),\n        padStart(date.getUTCDate(), 2, '0'),\n        'T',\n        padStart(date.getUTCHours(), 2, '0'),\n        padStart(date.getUTCMinutes(), 2, '0'),\n        padStart(date.getUTCSeconds(), 2, '0'),\n        utc ? 'Z' : '',\n    ].join('');\n};\nexport var untilStringToDate = function (until) {\n    var re = /^(\\d{4})(\\d{2})(\\d{2})(T(\\d{2})(\\d{2})(\\d{2})Z?)?$/;\n    var bits = re.exec(until);\n    if (!bits)\n        throw new Error(\"Invalid UNTIL value: \".concat(until));\n    return new Date(Date.UTC(parseInt(bits[1], 10), parseInt(bits[2], 10) - 1, parseInt(bits[3], 10), parseInt(bits[5], 10) || 0, parseInt(bits[6], 10) || 0, parseInt(bits[7], 10) || 0));\n};\nvar dateTZtoISO8601 = function (date, timeZone) {\n    // date format for sv-SE is almost ISO8601\n    var dateStr = date.toLocaleString('sv-SE', { timeZone: timeZone });\n    // '2023-02-07 10:41:36'\n    return dateStr.replace(' ', 'T') + 'Z';\n};\nexport var dateInTimeZone = function (date, timeZone) {\n    var localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    // Date constructor can only reliably parse dates in ISO8601 format\n    var dateInLocalTZ = new Date(dateTZtoISO8601(date, localTimeZone));\n    var dateInTargetTZ = new Date(dateTZtoISO8601(date, timeZone !== null && timeZone !== void 0 ? timeZone : 'UTC'));\n    var tzOffset = dateInTargetTZ.getTime() - dateInLocalTZ.getTime();\n    return new Date(date.getTime() - tzOffset);\n};\n//# sourceMappingURL=dateutil.js.map","/**\n * This class helps us to emulate python's generators, sorta.\n */\nvar IterResult = /** @class */ (function () {\n    function IterResult(method, args) {\n        this.minDate = null;\n        this.maxDate = null;\n        this._result = [];\n        this.total = 0;\n        this.method = method;\n        this.args = args;\n        if (method === 'between') {\n            this.maxDate = args.inc\n                ? args.before\n                : new Date(args.before.getTime() - 1);\n            this.minDate = args.inc ? args.after : new Date(args.after.getTime() + 1);\n        }\n        else if (method === 'before') {\n            this.maxDate = args.inc ? args.dt : new Date(args.dt.getTime() - 1);\n        }\n        else if (method === 'after') {\n            this.minDate = args.inc ? args.dt : new Date(args.dt.getTime() + 1);\n        }\n    }\n    /**\n     * Possibly adds a date into the result.\n     *\n     * @param {Date} date - the date isn't necessarly added to the result\n     * list (if it is too late/too early)\n     * @return {Boolean} true if it makes sense to continue the iteration\n     * false if we're done.\n     */\n    IterResult.prototype.accept = function (date) {\n        ++this.total;\n        var tooEarly = this.minDate && date < this.minDate;\n        var tooLate = this.maxDate && date > this.maxDate;\n        if (this.method === 'between') {\n            if (tooEarly)\n                return true;\n            if (tooLate)\n                return false;\n        }\n        else if (this.method === 'before') {\n            if (tooLate)\n                return false;\n        }\n        else if (this.method === 'after') {\n            if (tooEarly)\n                return true;\n            this.add(date);\n            return false;\n        }\n        return this.add(date);\n    };\n    /**\n     *\n     * @param {Date} date that is part of the result.\n     * @return {Boolean} whether we are interested in more values.\n     */\n    IterResult.prototype.add = function (date) {\n        this._result.push(date);\n        return true;\n    };\n    /**\n     * 'before' and 'after' return only one date, whereas 'all'\n     * and 'between' an array.\n     *\n     * @return {Date,Array?}\n     */\n    IterResult.prototype.getValue = function () {\n        var res = this._result;\n        switch (this.method) {\n            case 'all':\n            case 'between':\n                return res;\n            case 'before':\n            case 'after':\n            default:\n                return (res.length ? res[res.length - 1] : null);\n        }\n    };\n    IterResult.prototype.clone = function () {\n        return new IterResult(this.method, this.args);\n    };\n    return IterResult;\n}());\nexport default IterResult;\n//# sourceMappingURL=iterresult.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import { __extends } from \"tslib\";\nimport IterResult from './iterresult';\n/**\n * IterResult subclass that calls a callback function on each add,\n * and stops iterating when the callback returns false.\n */\nvar CallbackIterResult = /** @class */ (function (_super) {\n    __extends(CallbackIterResult, _super);\n    function CallbackIterResult(method, args, iterator) {\n        var _this = _super.call(this, method, args) || this;\n        _this.iterator = iterator;\n        return _this;\n    }\n    CallbackIterResult.prototype.add = function (date) {\n        if (this.iterator(date, this._result.length)) {\n            this._result.push(date);\n            return true;\n        }\n        return false;\n    };\n    return CallbackIterResult;\n}(IterResult));\nexport default CallbackIterResult;\n//# sourceMappingURL=callbackiterresult.js.map","export var Frequency;\n(function (Frequency) {\n    Frequency[Frequency[\"YEARLY\"] = 0] = \"YEARLY\";\n    Frequency[Frequency[\"MONTHLY\"] = 1] = \"MONTHLY\";\n    Frequency[Frequency[\"WEEKLY\"] = 2] = \"WEEKLY\";\n    Frequency[Frequency[\"DAILY\"] = 3] = \"DAILY\";\n    Frequency[Frequency[\"HOURLY\"] = 4] = \"HOURLY\";\n    Frequency[Frequency[\"MINUTELY\"] = 5] = \"MINUTELY\";\n    Frequency[Frequency[\"SECONDLY\"] = 6] = \"SECONDLY\";\n})(Frequency || (Frequency = {}));\nexport function freqIsDailyOrGreater(freq) {\n    return freq < Frequency.HOURLY;\n}\n//# sourceMappingURL=types.js.map","// =============================================================================\n// i18n\n// =============================================================================\nvar ENGLISH = {\n    dayNames: [\n        'Sunday',\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday',\n        'Saturday',\n    ],\n    monthNames: [\n        'January',\n        'February',\n        'March',\n        'April',\n        'May',\n        'June',\n        'July',\n        'August',\n        'September',\n        'October',\n        'November',\n        'December',\n    ],\n    tokens: {\n        SKIP: /^[ \\r\\n\\t]+|^\\.$/,\n        number: /^[1-9][0-9]*/,\n        numberAsText: /^(one|two|three)/i,\n        every: /^every/i,\n        'day(s)': /^days?/i,\n        'weekday(s)': /^weekdays?/i,\n        'week(s)': /^weeks?/i,\n        'hour(s)': /^hours?/i,\n        'minute(s)': /^minutes?/i,\n        'month(s)': /^months?/i,\n        'year(s)': /^years?/i,\n        on: /^(on|in)/i,\n        at: /^(at)/i,\n        the: /^the/i,\n        first: /^first/i,\n        second: /^second/i,\n        third: /^third/i,\n        nth: /^([1-9][0-9]*)(\\.|th|nd|rd|st)/i,\n        last: /^last/i,\n        for: /^for/i,\n        'time(s)': /^times?/i,\n        until: /^(un)?til/i,\n        monday: /^mo(n(day)?)?/i,\n        tuesday: /^tu(e(s(day)?)?)?/i,\n        wednesday: /^we(d(n(esday)?)?)?/i,\n        thursday: /^th(u(r(sday)?)?)?/i,\n        friday: /^fr(i(day)?)?/i,\n        saturday: /^sa(t(urday)?)?/i,\n        sunday: /^su(n(day)?)?/i,\n        january: /^jan(uary)?/i,\n        february: /^feb(ruary)?/i,\n        march: /^mar(ch)?/i,\n        april: /^apr(il)?/i,\n        may: /^may/i,\n        june: /^june?/i,\n        july: /^july?/i,\n        august: /^aug(ust)?/i,\n        september: /^sep(t(ember)?)?/i,\n        october: /^oct(ober)?/i,\n        november: /^nov(ember)?/i,\n        december: /^dec(ember)?/i,\n        comma: /^(,\\s*|(and|or)\\s*)+/i,\n    },\n};\nexport default ENGLISH;\n//# sourceMappingURL=i18n.js.map","import ENGLISH from './i18n';\nimport { RRule } from '../rrule';\nimport { isArray, isNumber, isPresent } from '../helpers';\n// =============================================================================\n// Helper functions\n// =============================================================================\n/**\n * Return true if a value is in an array\n */\nvar contains = function (arr, val) {\n    return arr.indexOf(val) !== -1;\n};\nvar defaultGetText = function (id) { return id.toString(); };\nvar defaultDateFormatter = function (year, month, day) { return \"\".concat(month, \" \").concat(day, \", \").concat(year); };\n/**\n *\n * @param {RRule} rrule\n * Optional:\n * @param {Function} gettext function\n * @param {Object} language definition\n * @constructor\n */\nvar ToText = /** @class */ (function () {\n    function ToText(rrule, gettext, language, dateFormatter) {\n        if (gettext === void 0) { gettext = defaultGetText; }\n        if (language === void 0) { language = ENGLISH; }\n        if (dateFormatter === void 0) { dateFormatter = defaultDateFormatter; }\n        this.text = [];\n        this.language = language || ENGLISH;\n        this.gettext = gettext;\n        this.dateFormatter = dateFormatter;\n        this.rrule = rrule;\n        this.options = rrule.options;\n        this.origOptions = rrule.origOptions;\n        if (this.origOptions.bymonthday) {\n            var bymonthday = [].concat(this.options.bymonthday);\n            var bynmonthday = [].concat(this.options.bynmonthday);\n            bymonthday.sort(function (a, b) { return a - b; });\n            bynmonthday.sort(function (a, b) { return b - a; });\n            // 1, 2, 3, .., -5, -4, -3, ..\n            this.bymonthday = bymonthday.concat(bynmonthday);\n            if (!this.bymonthday.length)\n                this.bymonthday = null;\n        }\n        if (isPresent(this.origOptions.byweekday)) {\n            var byweekday = !isArray(this.origOptions.byweekday)\n                ? [this.origOptions.byweekday]\n                : this.origOptions.byweekday;\n            var days = String(byweekday);\n            this.byweekday = {\n                allWeeks: byweekday.filter(function (weekday) {\n                    return !weekday.n;\n                }),\n                someWeeks: byweekday.filter(function (weekday) {\n                    return Boolean(weekday.n);\n                }),\n                isWeekdays: days.indexOf('MO') !== -1 &&\n                    days.indexOf('TU') !== -1 &&\n                    days.indexOf('WE') !== -1 &&\n                    days.indexOf('TH') !== -1 &&\n                    days.indexOf('FR') !== -1 &&\n                    days.indexOf('SA') === -1 &&\n                    days.indexOf('SU') === -1,\n                isEveryDay: days.indexOf('MO') !== -1 &&\n                    days.indexOf('TU') !== -1 &&\n                    days.indexOf('WE') !== -1 &&\n                    days.indexOf('TH') !== -1 &&\n                    days.indexOf('FR') !== -1 &&\n                    days.indexOf('SA') !== -1 &&\n                    days.indexOf('SU') !== -1,\n            };\n            var sortWeekDays = function (a, b) {\n                return a.weekday - b.weekday;\n            };\n            this.byweekday.allWeeks.sort(sortWeekDays);\n            this.byweekday.someWeeks.sort(sortWeekDays);\n            if (!this.byweekday.allWeeks.length)\n                this.byweekday.allWeeks = null;\n            if (!this.byweekday.someWeeks.length)\n                this.byweekday.someWeeks = null;\n        }\n        else {\n            this.byweekday = null;\n        }\n    }\n    /**\n     * Test whether the rrule can be fully converted to text.\n     *\n     * @param {RRule} rrule\n     * @return {Boolean}\n     */\n    ToText.isFullyConvertible = function (rrule) {\n        var canConvert = true;\n        if (!(rrule.options.freq in ToText.IMPLEMENTED))\n            return false;\n        if (rrule.origOptions.until && rrule.origOptions.count)\n            return false;\n        for (var key in rrule.origOptions) {\n            if (contains(['dtstart', 'tzid', 'wkst', 'freq'], key))\n                return true;\n            if (!contains(ToText.IMPLEMENTED[rrule.options.freq], key))\n                return false;\n        }\n        return canConvert;\n    };\n    ToText.prototype.isFullyConvertible = function () {\n        return ToText.isFullyConvertible(this.rrule);\n    };\n    /**\n     * Perform the conversion. Only some of the frequencies are supported.\n     * If some of the rrule's options aren't supported, they'll\n     * be omitted from the output an \"(~ approximate)\" will be appended.\n     *\n     * @return {*}\n     */\n    ToText.prototype.toString = function () {\n        var gettext = this.gettext;\n        if (!(this.options.freq in ToText.IMPLEMENTED)) {\n            return gettext('RRule error: Unable to fully convert this rrule to text');\n        }\n        this.text = [gettext('every')];\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        this[RRule.FREQUENCIES[this.options.freq]]();\n        if (this.options.until) {\n            this.add(gettext('until'));\n            var until = this.options.until;\n            this.add(this.dateFormatter(until.getUTCFullYear(), this.language.monthNames[until.getUTCMonth()], until.getUTCDate()));\n        }\n        else if (this.options.count) {\n            this.add(gettext('for'))\n                .add(this.options.count.toString())\n                .add(this.plural(this.options.count) ? gettext('times') : gettext('time'));\n        }\n        if (!this.isFullyConvertible())\n            this.add(gettext('(~ approximate)'));\n        return this.text.join('');\n    };\n    ToText.prototype.HOURLY = function () {\n        var gettext = this.gettext;\n        if (this.options.interval !== 1)\n            this.add(this.options.interval.toString());\n        this.add(this.plural(this.options.interval) ? gettext('hours') : gettext('hour'));\n    };\n    ToText.prototype.MINUTELY = function () {\n        var gettext = this.gettext;\n        if (this.options.interval !== 1)\n            this.add(this.options.interval.toString());\n        this.add(this.plural(this.options.interval)\n            ? gettext('minutes')\n            : gettext('minute'));\n    };\n    ToText.prototype.DAILY = function () {\n        var gettext = this.gettext;\n        if (this.options.interval !== 1)\n            this.add(this.options.interval.toString());\n        if (this.byweekday && this.byweekday.isWeekdays) {\n            this.add(this.plural(this.options.interval)\n                ? gettext('weekdays')\n                : gettext('weekday'));\n        }\n        else {\n            this.add(this.plural(this.options.interval) ? gettext('days') : gettext('day'));\n        }\n        if (this.origOptions.bymonth) {\n            this.add(gettext('in'));\n            this._bymonth();\n        }\n        if (this.bymonthday) {\n            this._bymonthday();\n        }\n        else if (this.byweekday) {\n            this._byweekday();\n        }\n        else if (this.origOptions.byhour) {\n            this._byhour();\n        }\n    };\n    ToText.prototype.WEEKLY = function () {\n        var gettext = this.gettext;\n        if (this.options.interval !== 1) {\n            this.add(this.options.interval.toString()).add(this.plural(this.options.interval) ? gettext('weeks') : gettext('week'));\n        }\n        if (this.byweekday && this.byweekday.isWeekdays) {\n            if (this.options.interval === 1) {\n                this.add(this.plural(this.options.interval)\n                    ? gettext('weekdays')\n                    : gettext('weekday'));\n            }\n            else {\n                this.add(gettext('on')).add(gettext('weekdays'));\n            }\n        }\n        else if (this.byweekday && this.byweekday.isEveryDay) {\n            this.add(this.plural(this.options.interval) ? gettext('days') : gettext('day'));\n        }\n        else {\n            if (this.options.interval === 1)\n                this.add(gettext('week'));\n            if (this.origOptions.bymonth) {\n                this.add(gettext('in'));\n                this._bymonth();\n            }\n            if (this.bymonthday) {\n                this._bymonthday();\n            }\n            else if (this.byweekday) {\n                this._byweekday();\n            }\n            if (this.origOptions.byhour) {\n                this._byhour();\n            }\n        }\n    };\n    ToText.prototype.MONTHLY = function () {\n        var gettext = this.gettext;\n        if (this.origOptions.bymonth) {\n            if (this.options.interval !== 1) {\n                this.add(this.options.interval.toString()).add(gettext('months'));\n                if (this.plural(this.options.interval))\n                    this.add(gettext('in'));\n            }\n            else {\n                // this.add(gettext('MONTH'))\n            }\n            this._bymonth();\n        }\n        else {\n            if (this.options.interval !== 1) {\n                this.add(this.options.interval.toString());\n            }\n            this.add(this.plural(this.options.interval)\n                ? gettext('months')\n                : gettext('month'));\n        }\n        if (this.bymonthday) {\n            this._bymonthday();\n        }\n        else if (this.byweekday && this.byweekday.isWeekdays) {\n            this.add(gettext('on')).add(gettext('weekdays'));\n        }\n        else if (this.byweekday) {\n            this._byweekday();\n        }\n    };\n    ToText.prototype.YEARLY = function () {\n        var gettext = this.gettext;\n        if (this.origOptions.bymonth) {\n            if (this.options.interval !== 1) {\n                this.add(this.options.interval.toString());\n                this.add(gettext('years'));\n            }\n            else {\n                // this.add(gettext('YEAR'))\n            }\n            this._bymonth();\n        }\n        else {\n            if (this.options.interval !== 1) {\n                this.add(this.options.interval.toString());\n            }\n            this.add(this.plural(this.options.interval) ? gettext('years') : gettext('year'));\n        }\n        if (this.bymonthday) {\n            this._bymonthday();\n        }\n        else if (this.byweekday) {\n            this._byweekday();\n        }\n        if (this.options.byyearday) {\n            this.add(gettext('on the'))\n                .add(this.list(this.options.byyearday, this.nth, gettext('and')))\n                .add(gettext('day'));\n        }\n        if (this.options.byweekno) {\n            this.add(gettext('in'))\n                .add(this.plural(this.options.byweekno.length)\n                ? gettext('weeks')\n                : gettext('week'))\n                .add(this.list(this.options.byweekno, undefined, gettext('and')));\n        }\n    };\n    ToText.prototype._bymonthday = function () {\n        var gettext = this.gettext;\n        if (this.byweekday && this.byweekday.allWeeks) {\n            this.add(gettext('on'))\n                .add(this.list(this.byweekday.allWeeks, this.weekdaytext, gettext('or')))\n                .add(gettext('the'))\n                .add(this.list(this.bymonthday, this.nth, gettext('or')));\n        }\n        else {\n            this.add(gettext('on the')).add(this.list(this.bymonthday, this.nth, gettext('and')));\n        }\n        // this.add(gettext('DAY'))\n    };\n    ToText.prototype._byweekday = function () {\n        var gettext = this.gettext;\n        if (this.byweekday.allWeeks && !this.byweekday.isWeekdays) {\n            this.add(gettext('on')).add(this.list(this.byweekday.allWeeks, this.weekdaytext));\n        }\n        if (this.byweekday.someWeeks) {\n            if (this.byweekday.allWeeks)\n                this.add(gettext('and'));\n            this.add(gettext('on the')).add(this.list(this.byweekday.someWeeks, this.weekdaytext, gettext('and')));\n        }\n    };\n    ToText.prototype._byhour = function () {\n        var gettext = this.gettext;\n        this.add(gettext('at')).add(this.list(this.origOptions.byhour, undefined, gettext('and')));\n    };\n    ToText.prototype._bymonth = function () {\n        this.add(this.list(this.options.bymonth, this.monthtext, this.gettext('and')));\n    };\n    ToText.prototype.nth = function (n) {\n        n = parseInt(n.toString(), 10);\n        var nth;\n        var gettext = this.gettext;\n        if (n === -1)\n            return gettext('last');\n        var npos = Math.abs(n);\n        switch (npos) {\n            case 1:\n            case 21:\n            case 31:\n                nth = npos + gettext('st');\n                break;\n            case 2:\n            case 22:\n                nth = npos + gettext('nd');\n                break;\n            case 3:\n            case 23:\n                nth = npos + gettext('rd');\n                break;\n            default:\n                nth = npos + gettext('th');\n        }\n        return n < 0 ? nth + ' ' + gettext('last') : nth;\n    };\n    ToText.prototype.monthtext = function (m) {\n        return this.language.monthNames[m - 1];\n    };\n    ToText.prototype.weekdaytext = function (wday) {\n        var weekday = isNumber(wday) ? (wday + 1) % 7 : wday.getJsWeekday();\n        return ((wday.n ? this.nth(wday.n) + ' ' : '') +\n            this.language.dayNames[weekday]);\n    };\n    ToText.prototype.plural = function (n) {\n        return n % 100 !== 1;\n    };\n    ToText.prototype.add = function (s) {\n        this.text.push(' ');\n        this.text.push(s);\n        return this;\n    };\n    ToText.prototype.list = function (arr, callback, finalDelim, delim) {\n        var _this = this;\n        if (delim === void 0) { delim = ','; }\n        if (!isArray(arr)) {\n            arr = [arr];\n        }\n        var delimJoin = function (array, delimiter, finalDelimiter) {\n            var list = '';\n            for (var i = 0; i < array.length; i++) {\n                if (i !== 0) {\n                    if (i === array.length - 1) {\n                        list += ' ' + finalDelimiter + ' ';\n                    }\n                    else {\n                        list += delimiter + ' ';\n                    }\n                }\n                list += array[i];\n            }\n            return list;\n        };\n        callback =\n            callback ||\n                function (o) {\n                    return o.toString();\n                };\n        var realCallback = function (arg) {\n            return callback && callback.call(_this, arg);\n        };\n        if (finalDelim) {\n            return delimJoin(arr.map(realCallback), delim, finalDelim);\n        }\n        else {\n            return arr.map(realCallback).join(delim + ' ');\n        }\n    };\n    return ToText;\n}());\nexport default ToText;\n//# sourceMappingURL=totext.js.map","import ENGLISH from './i18n';\nimport { RRule } from '../rrule';\n// =============================================================================\n// Parser\n// =============================================================================\nvar Parser = /** @class */ (function () {\n    function Parser(rules) {\n        this.done = true;\n        this.rules = rules;\n    }\n    Parser.prototype.start = function (text) {\n        this.text = text;\n        this.done = false;\n        return this.nextSymbol();\n    };\n    Parser.prototype.isDone = function () {\n        return this.done && this.symbol === null;\n    };\n    Parser.prototype.nextSymbol = function () {\n        var best;\n        var bestSymbol;\n        this.symbol = null;\n        this.value = null;\n        do {\n            if (this.done)\n                return false;\n            var rule = void 0;\n            best = null;\n            for (var name_1 in this.rules) {\n                rule = this.rules[name_1];\n                var match = rule.exec(this.text);\n                if (match) {\n                    if (best === null || match[0].length > best[0].length) {\n                        best = match;\n                        bestSymbol = name_1;\n                    }\n                }\n            }\n            if (best != null) {\n                this.text = this.text.substr(best[0].length);\n                if (this.text === '')\n                    this.done = true;\n            }\n            if (best == null) {\n                this.done = true;\n                this.symbol = null;\n                this.value = null;\n                return;\n            }\n        } while (bestSymbol === 'SKIP');\n        this.symbol = bestSymbol;\n        this.value = best;\n        return true;\n    };\n    Parser.prototype.accept = function (name) {\n        if (this.symbol === name) {\n            if (this.value) {\n                var v = this.value;\n                this.nextSymbol();\n                return v;\n            }\n            this.nextSymbol();\n            return true;\n        }\n        return false;\n    };\n    Parser.prototype.acceptNumber = function () {\n        return this.accept('number');\n    };\n    Parser.prototype.expect = function (name) {\n        if (this.accept(name))\n            return true;\n        throw new Error('expected ' + name + ' but found ' + this.symbol);\n    };\n    return Parser;\n}());\nexport default function parseText(text, language) {\n    if (language === void 0) { language = ENGLISH; }\n    var options = {};\n    var ttr = new Parser(language.tokens);\n    if (!ttr.start(text))\n        return null;\n    S();\n    return options;\n    function S() {\n        // every [n]\n        ttr.expect('every');\n        var n = ttr.acceptNumber();\n        if (n)\n            options.interval = parseInt(n[0], 10);\n        if (ttr.isDone())\n            throw new Error('Unexpected end');\n        switch (ttr.symbol) {\n            case 'day(s)':\n                options.freq = RRule.DAILY;\n                if (ttr.nextSymbol()) {\n                    AT();\n                    F();\n                }\n                break;\n            // FIXME Note: every 2 weekdays != every two weeks on weekdays.\n            // DAILY on weekdays is not a valid rule\n            case 'weekday(s)':\n                options.freq = RRule.WEEKLY;\n                options.byweekday = [RRule.MO, RRule.TU, RRule.WE, RRule.TH, RRule.FR];\n                ttr.nextSymbol();\n                AT();\n                F();\n                break;\n            case 'week(s)':\n                options.freq = RRule.WEEKLY;\n                if (ttr.nextSymbol()) {\n                    ON();\n                    AT();\n                    F();\n                }\n                break;\n            case 'hour(s)':\n                options.freq = RRule.HOURLY;\n                if (ttr.nextSymbol()) {\n                    ON();\n                    F();\n                }\n                break;\n            case 'minute(s)':\n                options.freq = RRule.MINUTELY;\n                if (ttr.nextSymbol()) {\n                    ON();\n                    F();\n                }\n                break;\n            case 'month(s)':\n                options.freq = RRule.MONTHLY;\n                if (ttr.nextSymbol()) {\n                    ON();\n                    F();\n                }\n                break;\n            case 'year(s)':\n                options.freq = RRule.YEARLY;\n                if (ttr.nextSymbol()) {\n                    ON();\n                    F();\n                }\n                break;\n            case 'monday':\n            case 'tuesday':\n            case 'wednesday':\n            case 'thursday':\n            case 'friday':\n            case 'saturday':\n            case 'sunday':\n                options.freq = RRule.WEEKLY;\n                var key = ttr.symbol\n                    .substr(0, 2)\n                    .toUpperCase();\n                options.byweekday = [RRule[key]];\n                if (!ttr.nextSymbol())\n                    return;\n                // TODO check for duplicates\n                while (ttr.accept('comma')) {\n                    if (ttr.isDone())\n                        throw new Error('Unexpected end');\n                    var wkd = decodeWKD();\n                    if (!wkd) {\n                        throw new Error('Unexpected symbol ' + ttr.symbol + ', expected weekday');\n                    }\n                    options.byweekday.push(RRule[wkd]);\n                    ttr.nextSymbol();\n                }\n                AT();\n                MDAYs();\n                F();\n                break;\n            case 'january':\n            case 'february':\n            case 'march':\n            case 'april':\n            case 'may':\n            case 'june':\n            case 'july':\n            case 'august':\n            case 'september':\n            case 'october':\n            case 'november':\n            case 'december':\n                options.freq = RRule.YEARLY;\n                options.bymonth = [decodeM()];\n                if (!ttr.nextSymbol())\n                    return;\n                // TODO check for duplicates\n                while (ttr.accept('comma')) {\n                    if (ttr.isDone())\n                        throw new Error('Unexpected end');\n                    var m = decodeM();\n                    if (!m) {\n                        throw new Error('Unexpected symbol ' + ttr.symbol + ', expected month');\n                    }\n                    options.bymonth.push(m);\n                    ttr.nextSymbol();\n                }\n                ON();\n                F();\n                break;\n            default:\n                throw new Error('Unknown symbol');\n        }\n    }\n    function ON() {\n        var on = ttr.accept('on');\n        var the = ttr.accept('the');\n        if (!(on || the))\n            return;\n        do {\n            var nth = decodeNTH();\n            var wkd = decodeWKD();\n            var m = decodeM();\n            // nth <weekday> | <weekday>\n            if (nth) {\n                // ttr.nextSymbol()\n                if (wkd) {\n                    ttr.nextSymbol();\n                    if (!options.byweekday)\n                        options.byweekday = [];\n                    options.byweekday.push(RRule[wkd].nth(nth));\n                }\n                else {\n                    if (!options.bymonthday)\n                        options.bymonthday = [];\n                    options.bymonthday.push(nth);\n                    ttr.accept('day(s)');\n                }\n                // <weekday>\n            }\n            else if (wkd) {\n                ttr.nextSymbol();\n                if (!options.byweekday)\n                    options.byweekday = [];\n                options.byweekday.push(RRule[wkd]);\n            }\n            else if (ttr.symbol === 'weekday(s)') {\n                ttr.nextSymbol();\n                if (!options.byweekday) {\n                    options.byweekday = [RRule.MO, RRule.TU, RRule.WE, RRule.TH, RRule.FR];\n                }\n            }\n            else if (ttr.symbol === 'week(s)') {\n                ttr.nextSymbol();\n                var n = ttr.acceptNumber();\n                if (!n) {\n                    throw new Error('Unexpected symbol ' + ttr.symbol + ', expected week number');\n                }\n                options.byweekno = [parseInt(n[0], 10)];\n                while (ttr.accept('comma')) {\n                    n = ttr.acceptNumber();\n                    if (!n) {\n                        throw new Error('Unexpected symbol ' + ttr.symbol + '; expected monthday');\n                    }\n                    options.byweekno.push(parseInt(n[0], 10));\n                }\n            }\n            else if (m) {\n                ttr.nextSymbol();\n                if (!options.bymonth)\n                    options.bymonth = [];\n                options.bymonth.push(m);\n            }\n            else {\n                return;\n            }\n        } while (ttr.accept('comma') || ttr.accept('the') || ttr.accept('on'));\n    }\n    function AT() {\n        var at = ttr.accept('at');\n        if (!at)\n            return;\n        do {\n            var n = ttr.acceptNumber();\n            if (!n) {\n                throw new Error('Unexpected symbol ' + ttr.symbol + ', expected hour');\n            }\n            options.byhour = [parseInt(n[0], 10)];\n            while (ttr.accept('comma')) {\n                n = ttr.acceptNumber();\n                if (!n) {\n                    throw new Error('Unexpected symbol ' + ttr.symbol + '; expected hour');\n                }\n                options.byhour.push(parseInt(n[0], 10));\n            }\n        } while (ttr.accept('comma') || ttr.accept('at'));\n    }\n    function decodeM() {\n        switch (ttr.symbol) {\n            case 'january':\n                return 1;\n            case 'february':\n                return 2;\n            case 'march':\n                return 3;\n            case 'april':\n                return 4;\n            case 'may':\n                return 5;\n            case 'june':\n                return 6;\n            case 'july':\n                return 7;\n            case 'august':\n                return 8;\n            case 'september':\n                return 9;\n            case 'october':\n                return 10;\n            case 'november':\n                return 11;\n            case 'december':\n                return 12;\n            default:\n                return false;\n        }\n    }\n    function decodeWKD() {\n        switch (ttr.symbol) {\n            case 'monday':\n            case 'tuesday':\n            case 'wednesday':\n            case 'thursday':\n            case 'friday':\n            case 'saturday':\n            case 'sunday':\n                return ttr.symbol.substr(0, 2).toUpperCase();\n            default:\n                return false;\n        }\n    }\n    function decodeNTH() {\n        switch (ttr.symbol) {\n            case 'last':\n                ttr.nextSymbol();\n                return -1;\n            case 'first':\n                ttr.nextSymbol();\n                return 1;\n            case 'second':\n                ttr.nextSymbol();\n                return ttr.accept('last') ? -2 : 2;\n            case 'third':\n                ttr.nextSymbol();\n                return ttr.accept('last') ? -3 : 3;\n            case 'nth':\n                var v = parseInt(ttr.value[1], 10);\n                if (v < -366 || v > 366)\n                    throw new Error('Nth out of range: ' + v);\n                ttr.nextSymbol();\n                return ttr.accept('last') ? -v : v;\n            default:\n                return false;\n        }\n    }\n    function MDAYs() {\n        ttr.accept('on');\n        ttr.accept('the');\n        var nth = decodeNTH();\n        if (!nth)\n            return;\n        options.bymonthday = [nth];\n        ttr.nextSymbol();\n        while (ttr.accept('comma')) {\n            nth = decodeNTH();\n            if (!nth) {\n                throw new Error('Unexpected symbol ' + ttr.symbol + '; expected monthday');\n            }\n            options.bymonthday.push(nth);\n            ttr.nextSymbol();\n        }\n    }\n    function F() {\n        if (ttr.symbol === 'until') {\n            var date = Date.parse(ttr.text);\n            if (!date)\n                throw new Error('Cannot parse until date:' + ttr.text);\n            options.until = new Date(date);\n        }\n        else if (ttr.accept('for')) {\n            options.count = parseInt(ttr.value[0], 10);\n            ttr.expect('number');\n            // ttr.expect('times')\n        }\n    }\n}\n//# sourceMappingURL=parsetext.js.map","import ToText from './totext';\nimport parseText from './parsetext';\nimport { RRule } from '../rrule';\nimport { Frequency } from '../types';\nimport ENGLISH from './i18n';\n/* !\n * rrule.js - Library for working with recurrence rules for calendar dates.\n * https://github.com/jakubroztocil/rrule\n *\n * Copyright 2010, Jakub Roztocil and Lars Schoning\n * Licenced under the BSD licence.\n * https://github.com/jakubroztocil/rrule/blob/master/LICENCE\n *\n */\n/**\n *\n * Implementation of RRule.fromText() and RRule::toText().\n *\n *\n * On the client side, this file needs to be included\n * when those functions are used.\n *\n */\n// =============================================================================\n// fromText\n// =============================================================================\n/**\n * Will be able to convert some of the below described rules from\n * text format to a rule object.\n *\n *\n * RULES\n *\n * Every ([n])\n * day(s)\n * | [weekday], ..., (and) [weekday]\n * | weekday(s)\n * | week(s)\n * | month(s)\n * | [month], ..., (and) [month]\n * | year(s)\n *\n *\n * Plus 0, 1, or multiple of these:\n *\n * on [weekday], ..., (or) [weekday] the [monthday], [monthday], ... (or) [monthday]\n *\n * on [weekday], ..., (and) [weekday]\n *\n * on the [monthday], [monthday], ... (and) [monthday] (day of the month)\n *\n * on the [nth-weekday], ..., (and) [nth-weekday] (of the month/year)\n *\n *\n * Plus 0 or 1 of these:\n *\n * for [n] time(s)\n *\n * until [date]\n *\n * Plus (.)\n *\n *\n * Definitely no supported for parsing:\n *\n * (for year):\n * in week(s) [n], ..., (and) [n]\n *\n * on the [yearday], ..., (and) [n] day of the year\n * on day [yearday], ..., (and) [n]\n *\n *\n * NON-TERMINALS\n *\n * [n]: 1, 2 ..., one, two, three ..\n * [month]: January, February, March, April, May, ... December\n * [weekday]: Monday, ... Sunday\n * [nth-weekday]: first [weekday], 2nd [weekday], ... last [weekday], ...\n * [monthday]: first, 1., 2., 1st, 2nd, second, ... 31st, last day, 2nd last day, ..\n * [date]:\n * - [month] (0-31(,) ([year])),\n * - (the) 0-31.(1-12.([year])),\n * - (the) 0-31/(1-12/([year])),\n * - [weekday]\n *\n * [year]: 0000, 0001, ... 01, 02, ..\n *\n * Definitely not supported for parsing:\n *\n * [yearday]: first, 1., 2., 1st, 2nd, second, ... 366th, last day, 2nd last day, ..\n *\n * @param {String} text\n * @return {Object, Boolean} the rule, or null.\n */\nvar fromText = function (text, language) {\n    if (language === void 0) { language = ENGLISH; }\n    return new RRule(parseText(text, language) || undefined);\n};\nvar common = [\n    'count',\n    'until',\n    'interval',\n    'byweekday',\n    'bymonthday',\n    'bymonth',\n];\nToText.IMPLEMENTED = [];\nToText.IMPLEMENTED[Frequency.HOURLY] = common;\nToText.IMPLEMENTED[Frequency.MINUTELY] = common;\nToText.IMPLEMENTED[Frequency.DAILY] = ['byhour'].concat(common);\nToText.IMPLEMENTED[Frequency.WEEKLY] = common;\nToText.IMPLEMENTED[Frequency.MONTHLY] = common;\nToText.IMPLEMENTED[Frequency.YEARLY] = ['byweekno', 'byyearday'].concat(common);\n// =============================================================================\n// Export\n// =============================================================================\nvar toText = function (rrule, gettext, language, dateFormatter) {\n    return new ToText(rrule, gettext, language, dateFormatter).toString();\n};\nvar isFullyConvertible = ToText.isFullyConvertible;\nexport { fromText, parseText, isFullyConvertible, toText };\n//# sourceMappingURL=index.js.map","import { __extends } from \"tslib\";\nimport { Frequency } from './types';\nimport { pymod, divmod, empty, includes } from './helpers';\nimport { getWeekday, MAXYEAR, monthRange } from './dateutil';\nvar Time = /** @class */ (function () {\n    function Time(hour, minute, second, millisecond) {\n        this.hour = hour;\n        this.minute = minute;\n        this.second = second;\n        this.millisecond = millisecond || 0;\n    }\n    Time.prototype.getHours = function () {\n        return this.hour;\n    };\n    Time.prototype.getMinutes = function () {\n        return this.minute;\n    };\n    Time.prototype.getSeconds = function () {\n        return this.second;\n    };\n    Time.prototype.getMilliseconds = function () {\n        return this.millisecond;\n    };\n    Time.prototype.getTime = function () {\n        return ((this.hour * 60 * 60 + this.minute * 60 + this.second) * 1000 +\n            this.millisecond);\n    };\n    return Time;\n}());\nexport { Time };\nvar DateTime = /** @class */ (function (_super) {\n    __extends(DateTime, _super);\n    function DateTime(year, month, day, hour, minute, second, millisecond) {\n        var _this = _super.call(this, hour, minute, second, millisecond) || this;\n        _this.year = year;\n        _this.month = month;\n        _this.day = day;\n        return _this;\n    }\n    DateTime.fromDate = function (date) {\n        return new this(date.getUTCFullYear(), date.getUTCMonth() + 1, date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.valueOf() % 1000);\n    };\n    DateTime.prototype.getWeekday = function () {\n        return getWeekday(new Date(this.getTime()));\n    };\n    DateTime.prototype.getTime = function () {\n        return new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, this.millisecond)).getTime();\n    };\n    DateTime.prototype.getDay = function () {\n        return this.day;\n    };\n    DateTime.prototype.getMonth = function () {\n        return this.month;\n    };\n    DateTime.prototype.getYear = function () {\n        return this.year;\n    };\n    DateTime.prototype.addYears = function (years) {\n        this.year += years;\n    };\n    DateTime.prototype.addMonths = function (months) {\n        this.month += months;\n        if (this.month > 12) {\n            var yearDiv = Math.floor(this.month / 12);\n            var monthMod = pymod(this.month, 12);\n            this.month = monthMod;\n            this.year += yearDiv;\n            if (this.month === 0) {\n                this.month = 12;\n                --this.year;\n            }\n        }\n    };\n    DateTime.prototype.addWeekly = function (days, wkst) {\n        if (wkst > this.getWeekday()) {\n            this.day += -(this.getWeekday() + 1 + (6 - wkst)) + days * 7;\n        }\n        else {\n            this.day += -(this.getWeekday() - wkst) + days * 7;\n        }\n        this.fixDay();\n    };\n    DateTime.prototype.addDaily = function (days) {\n        this.day += days;\n        this.fixDay();\n    };\n    DateTime.prototype.addHours = function (hours, filtered, byhour) {\n        if (filtered) {\n            // Jump to one iteration before next day\n            this.hour += Math.floor((23 - this.hour) / hours) * hours;\n        }\n        for (;;) {\n            this.hour += hours;\n            var _a = divmod(this.hour, 24), dayDiv = _a.div, hourMod = _a.mod;\n            if (dayDiv) {\n                this.hour = hourMod;\n                this.addDaily(dayDiv);\n            }\n            if (empty(byhour) || includes(byhour, this.hour))\n                break;\n        }\n    };\n    DateTime.prototype.addMinutes = function (minutes, filtered, byhour, byminute) {\n        if (filtered) {\n            // Jump to one iteration before next day\n            this.minute +=\n                Math.floor((1439 - (this.hour * 60 + this.minute)) / minutes) * minutes;\n        }\n        for (;;) {\n            this.minute += minutes;\n            var _a = divmod(this.minute, 60), hourDiv = _a.div, minuteMod = _a.mod;\n            if (hourDiv) {\n                this.minute = minuteMod;\n                this.addHours(hourDiv, false, byhour);\n            }\n            if ((empty(byhour) || includes(byhour, this.hour)) &&\n                (empty(byminute) || includes(byminute, this.minute))) {\n                break;\n            }\n        }\n    };\n    DateTime.prototype.addSeconds = function (seconds, filtered, byhour, byminute, bysecond) {\n        if (filtered) {\n            // Jump to one iteration before next day\n            this.second +=\n                Math.floor((86399 - (this.hour * 3600 + this.minute * 60 + this.second)) /\n                    seconds) * seconds;\n        }\n        for (;;) {\n            this.second += seconds;\n            var _a = divmod(this.second, 60), minuteDiv = _a.div, secondMod = _a.mod;\n            if (minuteDiv) {\n                this.second = secondMod;\n                this.addMinutes(minuteDiv, false, byhour, byminute);\n            }\n            if ((empty(byhour) || includes(byhour, this.hour)) &&\n                (empty(byminute) || includes(byminute, this.minute)) &&\n                (empty(bysecond) || includes(bysecond, this.second))) {\n                break;\n            }\n        }\n    };\n    DateTime.prototype.fixDay = function () {\n        if (this.day <= 28) {\n            return;\n        }\n        var daysinmonth = monthRange(this.year, this.month - 1)[1];\n        if (this.day <= daysinmonth) {\n            return;\n        }\n        while (this.day > daysinmonth) {\n            this.day -= daysinmonth;\n            ++this.month;\n            if (this.month === 13) {\n                this.month = 1;\n                ++this.year;\n                if (this.year > MAXYEAR) {\n                    return;\n                }\n            }\n            daysinmonth = monthRange(this.year, this.month - 1)[1];\n        }\n    };\n    DateTime.prototype.add = function (options, filtered) {\n        var freq = options.freq, interval = options.interval, wkst = options.wkst, byhour = options.byhour, byminute = options.byminute, bysecond = options.bysecond;\n        switch (freq) {\n            case Frequency.YEARLY:\n                return this.addYears(interval);\n            case Frequency.MONTHLY:\n                return this.addMonths(interval);\n            case Frequency.WEEKLY:\n                return this.addWeekly(interval, wkst);\n            case Frequency.DAILY:\n                return this.addDaily(interval);\n            case Frequency.HOURLY:\n                return this.addHours(interval, filtered, byhour);\n            case Frequency.MINUTELY:\n                return this.addMinutes(interval, filtered, byhour, byminute);\n            case Frequency.SECONDLY:\n                return this.addSeconds(interval, filtered, byhour, byminute, bysecond);\n        }\n    };\n    return DateTime;\n}(Time));\nexport { DateTime };\n//# sourceMappingURL=datetime.js.map","import { __assign } from \"tslib\";\nimport { freqIsDailyOrGreater } from './types';\nimport { includes, notEmpty, isPresent, isNumber, isArray, isWeekdayStr, } from './helpers';\nimport { RRule, defaultKeys, DEFAULT_OPTIONS } from './rrule';\nimport { getWeekday, isDate, isValidDate } from './dateutil';\nimport { Weekday } from './weekday';\nimport { Time } from './datetime';\nexport function initializeOptions(options) {\n    var invalid = [];\n    var keys = Object.keys(options);\n    // Shallow copy for options and origOptions and check for invalid\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        if (!includes(defaultKeys, key))\n            invalid.push(key);\n        if (isDate(options[key]) && !isValidDate(options[key])) {\n            invalid.push(key);\n        }\n    }\n    if (invalid.length) {\n        throw new Error('Invalid options: ' + invalid.join(', '));\n    }\n    return __assign({}, options);\n}\nexport function parseOptions(options) {\n    var opts = __assign(__assign({}, DEFAULT_OPTIONS), initializeOptions(options));\n    if (isPresent(opts.byeaster))\n        opts.freq = RRule.YEARLY;\n    if (!(isPresent(opts.freq) && RRule.FREQUENCIES[opts.freq])) {\n        throw new Error(\"Invalid frequency: \".concat(opts.freq, \" \").concat(options.freq));\n    }\n    if (!opts.dtstart)\n        opts.dtstart = new Date(new Date().setMilliseconds(0));\n    if (!isPresent(opts.wkst)) {\n        opts.wkst = RRule.MO.weekday;\n    }\n    else if (isNumber(opts.wkst)) {\n        // cool, just keep it like that\n    }\n    else {\n        opts.wkst = opts.wkst.weekday;\n    }\n    if (isPresent(opts.bysetpos)) {\n        if (isNumber(opts.bysetpos))\n            opts.bysetpos = [opts.bysetpos];\n        for (var i = 0; i < opts.bysetpos.length; i++) {\n            var v = opts.bysetpos[i];\n            if (v === 0 || !(v >= -366 && v <= 366)) {\n                throw new Error('bysetpos must be between 1 and 366,' + ' or between -366 and -1');\n            }\n        }\n    }\n    if (!(Boolean(opts.byweekno) ||\n        notEmpty(opts.byweekno) ||\n        notEmpty(opts.byyearday) ||\n        Boolean(opts.bymonthday) ||\n        notEmpty(opts.bymonthday) ||\n        isPresent(opts.byweekday) ||\n        isPresent(opts.byeaster))) {\n        switch (opts.freq) {\n            case RRule.YEARLY:\n                if (!opts.bymonth)\n                    opts.bymonth = opts.dtstart.getUTCMonth() + 1;\n                opts.bymonthday = opts.dtstart.getUTCDate();\n                break;\n            case RRule.MONTHLY:\n                opts.bymonthday = opts.dtstart.getUTCDate();\n                break;\n            case RRule.WEEKLY:\n                opts.byweekday = [getWeekday(opts.dtstart)];\n                break;\n        }\n    }\n    // bymonth\n    if (isPresent(opts.bymonth) && !isArray(opts.bymonth)) {\n        opts.bymonth = [opts.bymonth];\n    }\n    // byyearday\n    if (isPresent(opts.byyearday) &&\n        !isArray(opts.byyearday) &&\n        isNumber(opts.byyearday)) {\n        opts.byyearday = [opts.byyearday];\n    }\n    // bymonthday\n    if (!isPresent(opts.bymonthday)) {\n        opts.bymonthday = [];\n        opts.bynmonthday = [];\n    }\n    else if (isArray(opts.bymonthday)) {\n        var bymonthday = [];\n        var bynmonthday = [];\n        for (var i = 0; i < opts.bymonthday.length; i++) {\n            var v = opts.bymonthday[i];\n            if (v > 0) {\n                bymonthday.push(v);\n            }\n            else if (v < 0) {\n                bynmonthday.push(v);\n            }\n        }\n        opts.bymonthday = bymonthday;\n        opts.bynmonthday = bynmonthday;\n    }\n    else if (opts.bymonthday < 0) {\n        opts.bynmonthday = [opts.bymonthday];\n        opts.bymonthday = [];\n    }\n    else {\n        opts.bynmonthday = [];\n        opts.bymonthday = [opts.bymonthday];\n    }\n    // byweekno\n    if (isPresent(opts.byweekno) && !isArray(opts.byweekno)) {\n        opts.byweekno = [opts.byweekno];\n    }\n    // byweekday / bynweekday\n    if (!isPresent(opts.byweekday)) {\n        opts.bynweekday = null;\n    }\n    else if (isNumber(opts.byweekday)) {\n        opts.byweekday = [opts.byweekday];\n        opts.bynweekday = null;\n    }\n    else if (isWeekdayStr(opts.byweekday)) {\n        opts.byweekday = [Weekday.fromStr(opts.byweekday).weekday];\n        opts.bynweekday = null;\n    }\n    else if (opts.byweekday instanceof Weekday) {\n        if (!opts.byweekday.n || opts.freq > RRule.MONTHLY) {\n            opts.byweekday = [opts.byweekday.weekday];\n            opts.bynweekday = null;\n        }\n        else {\n            opts.bynweekday = [[opts.byweekday.weekday, opts.byweekday.n]];\n            opts.byweekday = null;\n        }\n    }\n    else {\n        var byweekday = [];\n        var bynweekday = [];\n        for (var i = 0; i < opts.byweekday.length; i++) {\n            var wday = opts.byweekday[i];\n            if (isNumber(wday)) {\n                byweekday.push(wday);\n                continue;\n            }\n            else if (isWeekdayStr(wday)) {\n                byweekday.push(Weekday.fromStr(wday).weekday);\n                continue;\n            }\n            if (!wday.n || opts.freq > RRule.MONTHLY) {\n                byweekday.push(wday.weekday);\n            }\n            else {\n                bynweekday.push([wday.weekday, wday.n]);\n            }\n        }\n        opts.byweekday = notEmpty(byweekday) ? byweekday : null;\n        opts.bynweekday = notEmpty(bynweekday) ? bynweekday : null;\n    }\n    // byhour\n    if (!isPresent(opts.byhour)) {\n        opts.byhour = opts.freq < RRule.HOURLY ? [opts.dtstart.getUTCHours()] : null;\n    }\n    else if (isNumber(opts.byhour)) {\n        opts.byhour = [opts.byhour];\n    }\n    // byminute\n    if (!isPresent(opts.byminute)) {\n        opts.byminute =\n            opts.freq < RRule.MINUTELY ? [opts.dtstart.getUTCMinutes()] : null;\n    }\n    else if (isNumber(opts.byminute)) {\n        opts.byminute = [opts.byminute];\n    }\n    // bysecond\n    if (!isPresent(opts.bysecond)) {\n        opts.bysecond =\n            opts.freq < RRule.SECONDLY ? [opts.dtstart.getUTCSeconds()] : null;\n    }\n    else if (isNumber(opts.bysecond)) {\n        opts.bysecond = [opts.bysecond];\n    }\n    return { parsedOptions: opts };\n}\nexport function buildTimeset(opts) {\n    var millisecondModulo = opts.dtstart.getTime() % 1000;\n    if (!freqIsDailyOrGreater(opts.freq)) {\n        return [];\n    }\n    var timeset = [];\n    opts.byhour.forEach(function (hour) {\n        opts.byminute.forEach(function (minute) {\n            opts.bysecond.forEach(function (second) {\n                timeset.push(new Time(hour, minute, second, millisecondModulo));\n            });\n        });\n    });\n    return timeset;\n}\n//# sourceMappingURL=parseoptions.js.map","import { __assign } from \"tslib\";\nimport { Frequency } from './types';\nimport { Weekday } from './weekday';\nimport { untilStringToDate } from './dateutil';\nimport { Days } from './rrule';\nexport function parseString(rfcString) {\n    var options = rfcString\n        .split('\\n')\n        .map(parseLine)\n        .filter(function (x) { return x !== null; });\n    return __assign(__assign({}, options[0]), options[1]);\n}\nexport function parseDtstart(line) {\n    var options = {};\n    var dtstartWithZone = /DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\\s]+)/i.exec(line);\n    if (!dtstartWithZone) {\n        return options;\n    }\n    var tzid = dtstartWithZone[1], dtstart = dtstartWithZone[2];\n    if (tzid) {\n        options.tzid = tzid;\n    }\n    options.dtstart = untilStringToDate(dtstart);\n    return options;\n}\nfunction parseLine(rfcString) {\n    rfcString = rfcString.replace(/^\\s+|\\s+$/, '');\n    if (!rfcString.length)\n        return null;\n    var header = /^([A-Z]+?)[:;]/.exec(rfcString.toUpperCase());\n    if (!header) {\n        return parseRrule(rfcString);\n    }\n    var key = header[1];\n    switch (key.toUpperCase()) {\n        case 'RRULE':\n        case 'EXRULE':\n            return parseRrule(rfcString);\n        case 'DTSTART':\n            return parseDtstart(rfcString);\n        default:\n            throw new Error(\"Unsupported RFC prop \".concat(key, \" in \").concat(rfcString));\n    }\n}\nfunction parseRrule(line) {\n    var strippedLine = line.replace(/^RRULE:/i, '');\n    var options = parseDtstart(strippedLine);\n    var attrs = line.replace(/^(?:RRULE|EXRULE):/i, '').split(';');\n    attrs.forEach(function (attr) {\n        var _a = attr.split('='), key = _a[0], value = _a[1];\n        switch (key.toUpperCase()) {\n            case 'FREQ':\n                options.freq = Frequency[value.toUpperCase()];\n                break;\n            case 'WKST':\n                options.wkst = Days[value.toUpperCase()];\n                break;\n            case 'COUNT':\n            case 'INTERVAL':\n            case 'BYSETPOS':\n            case 'BYMONTH':\n            case 'BYMONTHDAY':\n            case 'BYYEARDAY':\n            case 'BYWEEKNO':\n            case 'BYHOUR':\n            case 'BYMINUTE':\n            case 'BYSECOND':\n                var num = parseNumber(value);\n                var optionKey = key.toLowerCase();\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                options[optionKey] = num;\n                break;\n            case 'BYWEEKDAY':\n            case 'BYDAY':\n                options.byweekday = parseWeekday(value);\n                break;\n            case 'DTSTART':\n            case 'TZID':\n                // for backwards compatibility\n                var dtstart = parseDtstart(line);\n                options.tzid = dtstart.tzid;\n                options.dtstart = dtstart.dtstart;\n                break;\n            case 'UNTIL':\n                options.until = untilStringToDate(value);\n                break;\n            case 'BYEASTER':\n                options.byeaster = Number(value);\n                break;\n            default:\n                throw new Error(\"Unknown RRULE property '\" + key + \"'\");\n        }\n    });\n    return options;\n}\nfunction parseNumber(value) {\n    if (value.indexOf(',') !== -1) {\n        var values = value.split(',');\n        return values.map(parseIndividualNumber);\n    }\n    return parseIndividualNumber(value);\n}\nfunction parseIndividualNumber(value) {\n    if (/^[+-]?\\d+$/.test(value)) {\n        return Number(value);\n    }\n    return value;\n}\nfunction parseWeekday(value) {\n    var days = value.split(',');\n    return days.map(function (day) {\n        if (day.length === 2) {\n            // MO, TU, ...\n            return Days[day]; // wday instanceof Weekday\n        }\n        // -1MO, +3FR, 1SO, 13TU ...\n        var parts = day.match(/^([+-]?\\d{1,2})([A-Z]{2})$/);\n        if (!parts || parts.length < 3) {\n            throw new SyntaxError(\"Invalid weekday string: \".concat(day));\n        }\n        var n = Number(parts[1]);\n        var wdaypart = parts[2];\n        var wday = Days[wdaypart].weekday;\n        return new Weekday(wday, n);\n    });\n}\n//# sourceMappingURL=parsestring.js.map","import { dateInTimeZone, timeToUntilString } from './dateutil';\nvar DateWithZone = /** @class */ (function () {\n    function DateWithZone(date, tzid) {\n        if (isNaN(date.getTime())) {\n            throw new RangeError('Invalid date passed to DateWithZone');\n        }\n        this.date = date;\n        this.tzid = tzid;\n    }\n    Object.defineProperty(DateWithZone.prototype, \"isUTC\", {\n        get: function () {\n            return !this.tzid || this.tzid.toUpperCase() === 'UTC';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DateWithZone.prototype.toString = function () {\n        var datestr = timeToUntilString(this.date.getTime(), this.isUTC);\n        if (!this.isUTC) {\n            return \";TZID=\".concat(this.tzid, \":\").concat(datestr);\n        }\n        return \":\".concat(datestr);\n    };\n    DateWithZone.prototype.getTime = function () {\n        return this.date.getTime();\n    };\n    DateWithZone.prototype.rezonedDate = function () {\n        if (this.isUTC) {\n            return this.date;\n        }\n        return dateInTimeZone(this.date, this.tzid);\n    };\n    return DateWithZone;\n}());\nexport { DateWithZone };\n//# sourceMappingURL=datewithzone.js.map","import { RRule, DEFAULT_OPTIONS } from './rrule';\nimport { includes, isPresent, isArray, isNumber, toArray } from './helpers';\nimport { Weekday } from './weekday';\nimport { timeToUntilString } from './dateutil';\nimport { DateWithZone } from './datewithzone';\nexport function optionsToString(options) {\n    var rrule = [];\n    var dtstart = '';\n    var keys = Object.keys(options);\n    var defaultKeys = Object.keys(DEFAULT_OPTIONS);\n    for (var i = 0; i < keys.length; i++) {\n        if (keys[i] === 'tzid')\n            continue;\n        if (!includes(defaultKeys, keys[i]))\n            continue;\n        var key = keys[i].toUpperCase();\n        var value = options[keys[i]];\n        var outValue = '';\n        if (!isPresent(value) || (isArray(value) && !value.length))\n            continue;\n        switch (key) {\n            case 'FREQ':\n                outValue = RRule.FREQUENCIES[options.freq];\n                break;\n            case 'WKST':\n                if (isNumber(value)) {\n                    outValue = new Weekday(value).toString();\n                }\n                else {\n                    outValue = value.toString();\n                }\n                break;\n            case 'BYWEEKDAY':\n                /*\n                  NOTE: BYWEEKDAY is a special case.\n                  RRule() deconstructs the rule.options.byweekday array\n                  into an array of Weekday arguments.\n                  On the other hand, rule.origOptions is an array of Weekdays.\n                  We need to handle both cases here.\n                  It might be worth change RRule to keep the Weekdays.\n        \n                  Also, BYWEEKDAY (used by RRule) vs. BYDAY (RFC)\n        \n                  */\n                key = 'BYDAY';\n                outValue = toArray(value)\n                    .map(function (wday) {\n                    if (wday instanceof Weekday) {\n                        return wday;\n                    }\n                    if (isArray(wday)) {\n                        return new Weekday(wday[0], wday[1]);\n                    }\n                    return new Weekday(wday);\n                })\n                    .toString();\n                break;\n            case 'DTSTART':\n                dtstart = buildDtstart(value, options.tzid);\n                break;\n            case 'UNTIL':\n                outValue = timeToUntilString(value, !options.tzid);\n                break;\n            default:\n                if (isArray(value)) {\n                    var strValues = [];\n                    for (var j = 0; j < value.length; j++) {\n                        strValues[j] = String(value[j]);\n                    }\n                    outValue = strValues.toString();\n                }\n                else {\n                    outValue = String(value);\n                }\n        }\n        if (outValue) {\n            rrule.push([key, outValue]);\n        }\n    }\n    var rules = rrule\n        .map(function (_a) {\n        var key = _a[0], value = _a[1];\n        return \"\".concat(key, \"=\").concat(value.toString());\n    })\n        .join(';');\n    var ruleString = '';\n    if (rules !== '') {\n        ruleString = \"RRULE:\".concat(rules);\n    }\n    return [dtstart, ruleString].filter(function (x) { return !!x; }).join('\\n');\n}\nfunction buildDtstart(dtstart, tzid) {\n    if (!dtstart) {\n        return '';\n    }\n    return 'DTSTART' + new DateWithZone(new Date(dtstart), tzid).toString();\n}\n//# sourceMappingURL=optionstostring.js.map","import IterResult from './iterresult';\nimport { clone, cloneDates } from './dateutil';\nimport { isArray } from './helpers';\nfunction argsMatch(left, right) {\n    if (Array.isArray(left)) {\n        if (!Array.isArray(right))\n            return false;\n        if (left.length !== right.length)\n            return false;\n        return left.every(function (date, i) { return date.getTime() === right[i].getTime(); });\n    }\n    if (left instanceof Date) {\n        return right instanceof Date && left.getTime() === right.getTime();\n    }\n    return left === right;\n}\nvar Cache = /** @class */ (function () {\n    function Cache() {\n        this.all = false;\n        this.before = [];\n        this.after = [];\n        this.between = [];\n    }\n    /**\n     * @param {String} what - all/before/after/between\n     * @param {Array,Date} value - an array of dates, one date, or null\n     * @param {Object?} args - _iter arguments\n     */\n    Cache.prototype._cacheAdd = function (what, value, args) {\n        if (value) {\n            value = value instanceof Date ? clone(value) : cloneDates(value);\n        }\n        if (what === 'all') {\n            this.all = value;\n        }\n        else {\n            args._value = value;\n            this[what].push(args);\n        }\n    };\n    /**\n     * @return false - not in the cache\n     * @return null  - cached, but zero occurrences (before/after)\n     * @return Date  - cached (before/after)\n     * @return []    - cached, but zero occurrences (all/between)\n     * @return [Date1, DateN] - cached (all/between)\n     */\n    Cache.prototype._cacheGet = function (what, args) {\n        var cached = false;\n        var argsKeys = args ? Object.keys(args) : [];\n        var findCacheDiff = function (item) {\n            for (var i = 0; i < argsKeys.length; i++) {\n                var key = argsKeys[i];\n                if (!argsMatch(args[key], item[key])) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var cachedObject = this[what];\n        if (what === 'all') {\n            cached = this.all;\n        }\n        else if (isArray(cachedObject)) {\n            // Let's see whether we've already called the\n            // 'what' method with the same 'args'\n            for (var i = 0; i < cachedObject.length; i++) {\n                var item = cachedObject[i];\n                if (argsKeys.length && findCacheDiff(item))\n                    continue;\n                cached = item._value;\n                break;\n            }\n        }\n        if (!cached && this.all) {\n            // Not in the cache, but we already know all the occurrences,\n            // so we can find the correct dates from the cached ones.\n            var iterResult = new IterResult(what, args);\n            for (var i = 0; i < this.all.length; i++) {\n                if (!iterResult.accept(this.all[i]))\n                    break;\n            }\n            cached = iterResult.getValue();\n            this._cacheAdd(what, cached, args);\n        }\n        return isArray(cached)\n            ? cloneDates(cached)\n            : cached instanceof Date\n                ? clone(cached)\n                : cached;\n    };\n    return Cache;\n}());\nexport { Cache };\n//# sourceMappingURL=cache.js.map","import { __spreadArray } from \"tslib\";\nimport { range, repeat } from './helpers';\n// =============================================================================\n// Date masks\n// =============================================================================\n// Every mask is 7 days longer to handle cross-year weekly periods.\nvar M365MASK = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], repeat(1, 31), true), repeat(2, 28), true), repeat(3, 31), true), repeat(4, 30), true), repeat(5, 31), true), repeat(6, 30), true), repeat(7, 31), true), repeat(8, 31), true), repeat(9, 30), true), repeat(10, 31), true), repeat(11, 30), true), repeat(12, 31), true), repeat(1, 7), true);\nvar M366MASK = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], repeat(1, 31), true), repeat(2, 29), true), repeat(3, 31), true), repeat(4, 30), true), repeat(5, 31), true), repeat(6, 30), true), repeat(7, 31), true), repeat(8, 31), true), repeat(9, 30), true), repeat(10, 31), true), repeat(11, 30), true), repeat(12, 31), true), repeat(1, 7), true);\nvar M28 = range(1, 29);\nvar M29 = range(1, 30);\nvar M30 = range(1, 31);\nvar M31 = range(1, 32);\nvar MDAY366MASK = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], M31, true), M29, true), M31, true), M30, true), M31, true), M30, true), M31, true), M31, true), M30, true), M31, true), M30, true), M31, true), M31.slice(0, 7), true);\nvar MDAY365MASK = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], M31, true), M28, true), M31, true), M30, true), M31, true), M30, true), M31, true), M31, true), M30, true), M31, true), M30, true), M31, true), M31.slice(0, 7), true);\nvar NM28 = range(-28, 0);\nvar NM29 = range(-29, 0);\nvar NM30 = range(-30, 0);\nvar NM31 = range(-31, 0);\nvar NMDAY366MASK = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], NM31, true), NM29, true), NM31, true), NM30, true), NM31, true), NM30, true), NM31, true), NM31, true), NM30, true), NM31, true), NM30, true), NM31, true), NM31.slice(0, 7), true);\nvar NMDAY365MASK = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], NM31, true), NM28, true), NM31, true), NM30, true), NM31, true), NM30, true), NM31, true), NM31, true), NM30, true), NM31, true), NM30, true), NM31, true), NM31.slice(0, 7), true);\nvar M366RANGE = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366];\nvar M365RANGE = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365];\nvar WDAYMASK = (function () {\n    var wdaymask = [];\n    for (var i = 0; i < 55; i++)\n        wdaymask = wdaymask.concat(range(7));\n    return wdaymask;\n})();\nexport { WDAYMASK, M365MASK, M365RANGE, M366MASK, M366RANGE, MDAY365MASK, MDAY366MASK, NMDAY365MASK, NMDAY366MASK, };\n//# sourceMappingURL=masks.js.map","import { __assign } from \"tslib\";\nimport { datetime, getWeekday, isLeapYear, toOrdinal } from '../dateutil';\nimport { empty, repeat, pymod, includes } from '../helpers';\nimport { M365MASK, MDAY365MASK, NMDAY365MASK, WDAYMASK, M365RANGE, M366MASK, MDAY366MASK, NMDAY366MASK, M366RANGE, } from '../masks';\nexport function rebuildYear(year, options) {\n    var firstyday = datetime(year, 1, 1);\n    var yearlen = isLeapYear(year) ? 366 : 365;\n    var nextyearlen = isLeapYear(year + 1) ? 366 : 365;\n    var yearordinal = toOrdinal(firstyday);\n    var yearweekday = getWeekday(firstyday);\n    var result = __assign(__assign({ yearlen: yearlen, nextyearlen: nextyearlen, yearordinal: yearordinal, yearweekday: yearweekday }, baseYearMasks(year)), { wnomask: null });\n    if (empty(options.byweekno)) {\n        return result;\n    }\n    result.wnomask = repeat(0, yearlen + 7);\n    var firstwkst;\n    var wyearlen;\n    var no1wkst = (firstwkst = pymod(7 - yearweekday + options.wkst, 7));\n    if (no1wkst >= 4) {\n        no1wkst = 0;\n        // Number of days in the year, plus the days we got\n        // from last year.\n        wyearlen = result.yearlen + pymod(yearweekday - options.wkst, 7);\n    }\n    else {\n        // Number of days in the year, minus the days we\n        // left in last year.\n        wyearlen = yearlen - no1wkst;\n    }\n    var div = Math.floor(wyearlen / 7);\n    var mod = pymod(wyearlen, 7);\n    var numweeks = Math.floor(div + mod / 4);\n    for (var j = 0; j < options.byweekno.length; j++) {\n        var n = options.byweekno[j];\n        if (n < 0) {\n            n += numweeks + 1;\n        }\n        if (!(n > 0 && n <= numweeks)) {\n            continue;\n        }\n        var i = void 0;\n        if (n > 1) {\n            i = no1wkst + (n - 1) * 7;\n            if (no1wkst !== firstwkst) {\n                i -= 7 - firstwkst;\n            }\n        }\n        else {\n            i = no1wkst;\n        }\n        for (var k = 0; k < 7; k++) {\n            result.wnomask[i] = 1;\n            i++;\n            if (result.wdaymask[i] === options.wkst)\n                break;\n        }\n    }\n    if (includes(options.byweekno, 1)) {\n        // Check week number 1 of next year as well\n        // orig-TODO : Check -numweeks for next year.\n        var i = no1wkst + numweeks * 7;\n        if (no1wkst !== firstwkst)\n            i -= 7 - firstwkst;\n        if (i < yearlen) {\n            // If week starts in next year, we\n            // don't care about it.\n            for (var j = 0; j < 7; j++) {\n                result.wnomask[i] = 1;\n                i += 1;\n                if (result.wdaymask[i] === options.wkst)\n                    break;\n            }\n        }\n    }\n    if (no1wkst) {\n        // Check last week number of last year as\n        // well. If no1wkst is 0, either the year\n        // started on week start, or week number 1\n        // got days from last year, so there are no\n        // days from last year's last week number in\n        // this year.\n        var lnumweeks = void 0;\n        if (!includes(options.byweekno, -1)) {\n            var lyearweekday = getWeekday(datetime(year - 1, 1, 1));\n            var lno1wkst = pymod(7 - lyearweekday.valueOf() + options.wkst, 7);\n            var lyearlen = isLeapYear(year - 1) ? 366 : 365;\n            var weekst = void 0;\n            if (lno1wkst >= 4) {\n                lno1wkst = 0;\n                weekst = lyearlen + pymod(lyearweekday - options.wkst, 7);\n            }\n            else {\n                weekst = yearlen - no1wkst;\n            }\n            lnumweeks = Math.floor(52 + pymod(weekst, 7) / 4);\n        }\n        else {\n            lnumweeks = -1;\n        }\n        if (includes(options.byweekno, lnumweeks)) {\n            for (var i = 0; i < no1wkst; i++)\n                result.wnomask[i] = 1;\n        }\n    }\n    return result;\n}\nfunction baseYearMasks(year) {\n    var yearlen = isLeapYear(year) ? 366 : 365;\n    var firstyday = datetime(year, 1, 1);\n    var wday = getWeekday(firstyday);\n    if (yearlen === 365) {\n        return {\n            mmask: M365MASK,\n            mdaymask: MDAY365MASK,\n            nmdaymask: NMDAY365MASK,\n            wdaymask: WDAYMASK.slice(wday),\n            mrange: M365RANGE,\n        };\n    }\n    return {\n        mmask: M366MASK,\n        mdaymask: MDAY366MASK,\n        nmdaymask: NMDAY366MASK,\n        wdaymask: WDAYMASK.slice(wday),\n        mrange: M366RANGE,\n    };\n}\n//# sourceMappingURL=yearinfo.js.map","import { notEmpty, repeat, range, isPresent } from '../helpers';\nimport { Frequency } from '../types';\nimport { rebuildYear } from './yearinfo';\nimport { rebuildMonth } from './monthinfo';\nimport { easter } from './easter';\nimport { Time } from '../datetime';\nimport { datetime, sort, toOrdinal } from '../dateutil';\n// =============================================================================\n// Iterinfo\n// =============================================================================\nvar Iterinfo = /** @class */ (function () {\n    // eslint-disable-next-line no-empty-function\n    function Iterinfo(options) {\n        this.options = options;\n    }\n    Iterinfo.prototype.rebuild = function (year, month) {\n        var options = this.options;\n        if (year !== this.lastyear) {\n            this.yearinfo = rebuildYear(year, options);\n        }\n        if (notEmpty(options.bynweekday) &&\n            (month !== this.lastmonth || year !== this.lastyear)) {\n            var _a = this.yearinfo, yearlen = _a.yearlen, mrange = _a.mrange, wdaymask = _a.wdaymask;\n            this.monthinfo = rebuildMonth(year, month, yearlen, mrange, wdaymask, options);\n        }\n        if (isPresent(options.byeaster)) {\n            this.eastermask = easter(year, options.byeaster);\n        }\n    };\n    Object.defineProperty(Iterinfo.prototype, \"lastyear\", {\n        get: function () {\n            return this.monthinfo ? this.monthinfo.lastyear : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"lastmonth\", {\n        get: function () {\n            return this.monthinfo ? this.monthinfo.lastmonth : null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"yearlen\", {\n        get: function () {\n            return this.yearinfo.yearlen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"yearordinal\", {\n        get: function () {\n            return this.yearinfo.yearordinal;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"mrange\", {\n        get: function () {\n            return this.yearinfo.mrange;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"wdaymask\", {\n        get: function () {\n            return this.yearinfo.wdaymask;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"mmask\", {\n        get: function () {\n            return this.yearinfo.mmask;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"wnomask\", {\n        get: function () {\n            return this.yearinfo.wnomask;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"nwdaymask\", {\n        get: function () {\n            return this.monthinfo ? this.monthinfo.nwdaymask : [];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"nextyearlen\", {\n        get: function () {\n            return this.yearinfo.nextyearlen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"mdaymask\", {\n        get: function () {\n            return this.yearinfo.mdaymask;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Iterinfo.prototype, \"nmdaymask\", {\n        get: function () {\n            return this.yearinfo.nmdaymask;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Iterinfo.prototype.ydayset = function () {\n        return [range(this.yearlen), 0, this.yearlen];\n    };\n    Iterinfo.prototype.mdayset = function (_, month) {\n        var start = this.mrange[month - 1];\n        var end = this.mrange[month];\n        var set = repeat(null, this.yearlen);\n        for (var i = start; i < end; i++)\n            set[i] = i;\n        return [set, start, end];\n    };\n    Iterinfo.prototype.wdayset = function (year, month, day) {\n        // We need to handle cross-year weeks here.\n        var set = repeat(null, this.yearlen + 7);\n        var i = toOrdinal(datetime(year, month, day)) - this.yearordinal;\n        var start = i;\n        for (var j = 0; j < 7; j++) {\n            set[i] = i;\n            ++i;\n            if (this.wdaymask[i] === this.options.wkst)\n                break;\n        }\n        return [set, start, i];\n    };\n    Iterinfo.prototype.ddayset = function (year, month, day) {\n        var set = repeat(null, this.yearlen);\n        var i = toOrdinal(datetime(year, month, day)) - this.yearordinal;\n        set[i] = i;\n        return [set, i, i + 1];\n    };\n    Iterinfo.prototype.htimeset = function (hour, _, second, millisecond) {\n        var _this = this;\n        var set = [];\n        this.options.byminute.forEach(function (minute) {\n            set = set.concat(_this.mtimeset(hour, minute, second, millisecond));\n        });\n        sort(set);\n        return set;\n    };\n    Iterinfo.prototype.mtimeset = function (hour, minute, _, millisecond) {\n        var set = this.options.bysecond.map(function (second) { return new Time(hour, minute, second, millisecond); });\n        sort(set);\n        return set;\n    };\n    Iterinfo.prototype.stimeset = function (hour, minute, second, millisecond) {\n        return [new Time(hour, minute, second, millisecond)];\n    };\n    Iterinfo.prototype.getdayset = function (freq) {\n        switch (freq) {\n            case Frequency.YEARLY:\n                return this.ydayset.bind(this);\n            case Frequency.MONTHLY:\n                return this.mdayset.bind(this);\n            case Frequency.WEEKLY:\n                return this.wdayset.bind(this);\n            case Frequency.DAILY:\n                return this.ddayset.bind(this);\n            default:\n                return this.ddayset.bind(this);\n        }\n    };\n    Iterinfo.prototype.gettimeset = function (freq) {\n        switch (freq) {\n            case Frequency.HOURLY:\n                return this.htimeset.bind(this);\n            case Frequency.MINUTELY:\n                return this.mtimeset.bind(this);\n            case Frequency.SECONDLY:\n                return this.stimeset.bind(this);\n        }\n    };\n    return Iterinfo;\n}());\nexport default Iterinfo;\n//# sourceMappingURL=index.js.map","import { RRule } from '../rrule';\nimport { empty, repeat, pymod } from '../helpers';\nexport function rebuildMonth(year, month, yearlen, mrange, wdaymask, options) {\n    var result = {\n        lastyear: year,\n        lastmonth: month,\n        nwdaymask: [],\n    };\n    var ranges = [];\n    if (options.freq === RRule.YEARLY) {\n        if (empty(options.bymonth)) {\n            ranges = [[0, yearlen]];\n        }\n        else {\n            for (var j = 0; j < options.bymonth.length; j++) {\n                month = options.bymonth[j];\n                ranges.push(mrange.slice(month - 1, month + 1));\n            }\n        }\n    }\n    else if (options.freq === RRule.MONTHLY) {\n        ranges = [mrange.slice(month - 1, month + 1)];\n    }\n    if (empty(ranges)) {\n        return result;\n    }\n    // Weekly frequency won't get here, so we may not\n    // care about cross-year weekly periods.\n    result.nwdaymask = repeat(0, yearlen);\n    for (var j = 0; j < ranges.length; j++) {\n        var rang = ranges[j];\n        var first = rang[0];\n        var last = rang[1] - 1;\n        for (var k = 0; k < options.bynweekday.length; k++) {\n            var i = void 0;\n            var _a = options.bynweekday[k], wday = _a[0], n = _a[1];\n            if (n < 0) {\n                i = last + (n + 1) * 7;\n                i -= pymod(wdaymask[i] - wday, 7);\n            }\n            else {\n                i = first + (n - 1) * 7;\n                i += pymod(7 - wdaymask[i] + wday, 7);\n            }\n            if (first <= i && i <= last)\n                result.nwdaymask[i] = 1;\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=monthinfo.js.map","export function easter(y, offset) {\n    if (offset === void 0) { offset = 0; }\n    var a = y % 19;\n    var b = Math.floor(y / 100);\n    var c = y % 100;\n    var d = Math.floor(b / 4);\n    var e = b % 4;\n    var f = Math.floor((b + 8) / 25);\n    var g = Math.floor((b - f + 1) / 3);\n    var h = Math.floor(19 * a + b - d - g + 15) % 30;\n    var i = Math.floor(c / 4);\n    var k = c % 4;\n    var l = Math.floor(32 + 2 * e + 2 * i - h - k) % 7;\n    var m = Math.floor((a + 11 * h + 22 * l) / 451);\n    var month = Math.floor((h + l - 7 * m + 114) / 31);\n    var day = ((h + l - 7 * m + 114) % 31) + 1;\n    var date = Date.UTC(y, month - 1, day + offset);\n    var yearStart = Date.UTC(y, 0, 1);\n    return [Math.ceil((date - yearStart) / (1000 * 60 * 60 * 24))];\n}\n//# sourceMappingURL=easter.js.map","import { combine, fromOrdinal, sort } from '../dateutil';\nimport { pymod, isPresent, includes } from '../helpers';\nexport function buildPoslist(bysetpos, timeset, start, end, ii, dayset) {\n    var poslist = [];\n    for (var j = 0; j < bysetpos.length; j++) {\n        var daypos = void 0;\n        var timepos = void 0;\n        var pos = bysetpos[j];\n        if (pos < 0) {\n            daypos = Math.floor(pos / timeset.length);\n            timepos = pymod(pos, timeset.length);\n        }\n        else {\n            daypos = Math.floor((pos - 1) / timeset.length);\n            timepos = pymod(pos - 1, timeset.length);\n        }\n        var tmp = [];\n        for (var k = start; k < end; k++) {\n            var val = dayset[k];\n            if (!isPresent(val))\n                continue;\n            tmp.push(val);\n        }\n        var i = void 0;\n        if (daypos < 0) {\n            i = tmp.slice(daypos)[0];\n        }\n        else {\n            i = tmp[daypos];\n        }\n        var time = timeset[timepos];\n        var date = fromOrdinal(ii.yearordinal + i);\n        var res = combine(date, time);\n        // XXX: can this ever be in the array?\n        // - compare the actual date instead?\n        if (!includes(poslist, res))\n            poslist.push(res);\n    }\n    sort(poslist);\n    return poslist;\n}\n//# sourceMappingURL=poslist.js.map","import { freqIsDailyOrGreater } from '../types';\nimport { combine, fromOrdinal, MAXYEAR } from '../dateutil';\nimport Iterinfo from '../iterinfo/index';\nimport { RRule } from '../rrule';\nimport { buildTimeset } from '../parseoptions';\nimport { notEmpty, includes, isPresent } from '../helpers';\nimport { DateWithZone } from '../datewithzone';\nimport { buildPoslist } from './poslist';\nimport { DateTime } from '../datetime';\nexport function iter(iterResult, options) {\n    var dtstart = options.dtstart, freq = options.freq, interval = options.interval, until = options.until, bysetpos = options.bysetpos;\n    var count = options.count;\n    if (count === 0 || interval === 0) {\n        return emitResult(iterResult);\n    }\n    var counterDate = DateTime.fromDate(dtstart);\n    var ii = new Iterinfo(options);\n    ii.rebuild(counterDate.year, counterDate.month);\n    var timeset = makeTimeset(ii, counterDate, options);\n    for (;;) {\n        var _a = ii.getdayset(freq)(counterDate.year, counterDate.month, counterDate.day), dayset = _a[0], start = _a[1], end = _a[2];\n        var filtered = removeFilteredDays(dayset, start, end, ii, options);\n        if (notEmpty(bysetpos)) {\n            var poslist = buildPoslist(bysetpos, timeset, start, end, ii, dayset);\n            for (var j = 0; j < poslist.length; j++) {\n                var res = poslist[j];\n                if (until && res > until) {\n                    return emitResult(iterResult);\n                }\n                if (res >= dtstart) {\n                    var rezonedDate = rezoneIfNeeded(res, options);\n                    if (!iterResult.accept(rezonedDate)) {\n                        return emitResult(iterResult);\n                    }\n                    if (count) {\n                        --count;\n                        if (!count) {\n                            return emitResult(iterResult);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            for (var j = start; j < end; j++) {\n                var currentDay = dayset[j];\n                if (!isPresent(currentDay)) {\n                    continue;\n                }\n                var date = fromOrdinal(ii.yearordinal + currentDay);\n                for (var k = 0; k < timeset.length; k++) {\n                    var time = timeset[k];\n                    var res = combine(date, time);\n                    if (until && res > until) {\n                        return emitResult(iterResult);\n                    }\n                    if (res >= dtstart) {\n                        var rezonedDate = rezoneIfNeeded(res, options);\n                        if (!iterResult.accept(rezonedDate)) {\n                            return emitResult(iterResult);\n                        }\n                        if (count) {\n                            --count;\n                            if (!count) {\n                                return emitResult(iterResult);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (options.interval === 0) {\n            return emitResult(iterResult);\n        }\n        // Handle frequency and interval\n        counterDate.add(options, filtered);\n        if (counterDate.year > MAXYEAR) {\n            return emitResult(iterResult);\n        }\n        if (!freqIsDailyOrGreater(freq)) {\n            timeset = ii.gettimeset(freq)(counterDate.hour, counterDate.minute, counterDate.second, 0);\n        }\n        ii.rebuild(counterDate.year, counterDate.month);\n    }\n}\nfunction isFiltered(ii, currentDay, options) {\n    var bymonth = options.bymonth, byweekno = options.byweekno, byweekday = options.byweekday, byeaster = options.byeaster, bymonthday = options.bymonthday, bynmonthday = options.bynmonthday, byyearday = options.byyearday;\n    return ((notEmpty(bymonth) && !includes(bymonth, ii.mmask[currentDay])) ||\n        (notEmpty(byweekno) && !ii.wnomask[currentDay]) ||\n        (notEmpty(byweekday) && !includes(byweekday, ii.wdaymask[currentDay])) ||\n        (notEmpty(ii.nwdaymask) && !ii.nwdaymask[currentDay]) ||\n        (byeaster !== null && !includes(ii.eastermask, currentDay)) ||\n        ((notEmpty(bymonthday) || notEmpty(bynmonthday)) &&\n            !includes(bymonthday, ii.mdaymask[currentDay]) &&\n            !includes(bynmonthday, ii.nmdaymask[currentDay])) ||\n        (notEmpty(byyearday) &&\n            ((currentDay < ii.yearlen &&\n                !includes(byyearday, currentDay + 1) &&\n                !includes(byyearday, -ii.yearlen + currentDay)) ||\n                (currentDay >= ii.yearlen &&\n                    !includes(byyearday, currentDay + 1 - ii.yearlen) &&\n                    !includes(byyearday, -ii.nextyearlen + currentDay - ii.yearlen)))));\n}\nfunction rezoneIfNeeded(date, options) {\n    return new DateWithZone(date, options.tzid).rezonedDate();\n}\nfunction emitResult(iterResult) {\n    return iterResult.getValue();\n}\nfunction removeFilteredDays(dayset, start, end, ii, options) {\n    var filtered = false;\n    for (var dayCounter = start; dayCounter < end; dayCounter++) {\n        var currentDay = dayset[dayCounter];\n        filtered = isFiltered(ii, currentDay, options);\n        if (filtered)\n            dayset[currentDay] = null;\n    }\n    return filtered;\n}\nfunction makeTimeset(ii, counterDate, options) {\n    var freq = options.freq, byhour = options.byhour, byminute = options.byminute, bysecond = options.bysecond;\n    if (freqIsDailyOrGreater(freq)) {\n        return buildTimeset(options);\n    }\n    if ((freq >= RRule.HOURLY &&\n        notEmpty(byhour) &&\n        !includes(byhour, counterDate.hour)) ||\n        (freq >= RRule.MINUTELY &&\n            notEmpty(byminute) &&\n            !includes(byminute, counterDate.minute)) ||\n        (freq >= RRule.SECONDLY &&\n            notEmpty(bysecond) &&\n            !includes(bysecond, counterDate.second))) {\n        return [];\n    }\n    return ii.gettimeset(freq)(counterDate.hour, counterDate.minute, counterDate.second, counterDate.millisecond);\n}\n//# sourceMappingURL=index.js.map","import { isValidDate } from './dateutil';\nimport IterResult from './iterresult';\nimport CallbackIterResult from './callbackiterresult';\nimport { fromText, parseText, toText, isFullyConvertible } from './nlp/index';\nimport { Frequency, } from './types';\nimport { parseOptions, initializeOptions } from './parseoptions';\nimport { parseString } from './parsestring';\nimport { optionsToString } from './optionstostring';\nimport { Cache } from './cache';\nimport { Weekday } from './weekday';\nimport { iter } from './iter/index';\n// =============================================================================\n// RRule\n// =============================================================================\nexport var Days = {\n    MO: new Weekday(0),\n    TU: new Weekday(1),\n    WE: new Weekday(2),\n    TH: new Weekday(3),\n    FR: new Weekday(4),\n    SA: new Weekday(5),\n    SU: new Weekday(6),\n};\nexport var DEFAULT_OPTIONS = {\n    freq: Frequency.YEARLY,\n    dtstart: null,\n    interval: 1,\n    wkst: Days.MO,\n    count: null,\n    until: null,\n    tzid: null,\n    bysetpos: null,\n    bymonth: null,\n    bymonthday: null,\n    bynmonthday: null,\n    byyearday: null,\n    byweekno: null,\n    byweekday: null,\n    bynweekday: null,\n    byhour: null,\n    byminute: null,\n    bysecond: null,\n    byeaster: null,\n};\nexport var defaultKeys = Object.keys(DEFAULT_OPTIONS);\n/**\n *\n * @param {Options?} options - see <http://labix.org/python-dateutil/#head-cf004ee9a75592797e076752b2a889c10f445418>\n * - The only required option is `freq`, one of RRule.YEARLY, RRule.MONTHLY, ...\n * @constructor\n */\nvar RRule = /** @class */ (function () {\n    function RRule(options, noCache) {\n        if (options === void 0) { options = {}; }\n        if (noCache === void 0) { noCache = false; }\n        // RFC string\n        this._cache = noCache ? null : new Cache();\n        // used by toString()\n        this.origOptions = initializeOptions(options);\n        var parsedOptions = parseOptions(options).parsedOptions;\n        this.options = parsedOptions;\n    }\n    RRule.parseText = function (text, language) {\n        return parseText(text, language);\n    };\n    RRule.fromText = function (text, language) {\n        return fromText(text, language);\n    };\n    RRule.fromString = function (str) {\n        return new RRule(RRule.parseString(str) || undefined);\n    };\n    RRule.prototype._iter = function (iterResult) {\n        return iter(iterResult, this.options);\n    };\n    RRule.prototype._cacheGet = function (what, args) {\n        if (!this._cache)\n            return false;\n        return this._cache._cacheGet(what, args);\n    };\n    RRule.prototype._cacheAdd = function (what, value, args) {\n        if (!this._cache)\n            return;\n        return this._cache._cacheAdd(what, value, args);\n    };\n    /**\n     * @param {Function} iterator - optional function that will be called\n     * on each date that is added. It can return false\n     * to stop the iteration.\n     * @return Array containing all recurrences.\n     */\n    RRule.prototype.all = function (iterator) {\n        if (iterator) {\n            return this._iter(new CallbackIterResult('all', {}, iterator));\n        }\n        var result = this._cacheGet('all');\n        if (result === false) {\n            result = this._iter(new IterResult('all', {}));\n            this._cacheAdd('all', result);\n        }\n        return result;\n    };\n    /**\n     * Returns all the occurrences of the rrule between after and before.\n     * The inc keyword defines what happens if after and/or before are\n     * themselves occurrences. With inc == True, they will be included in the\n     * list, if they are found in the recurrence set.\n     *\n     * @return Array\n     */\n    RRule.prototype.between = function (after, before, inc, iterator) {\n        if (inc === void 0) { inc = false; }\n        if (!isValidDate(after) || !isValidDate(before)) {\n            throw new Error('Invalid date passed in to RRule.between');\n        }\n        var args = {\n            before: before,\n            after: after,\n            inc: inc,\n        };\n        if (iterator) {\n            return this._iter(new CallbackIterResult('between', args, iterator));\n        }\n        var result = this._cacheGet('between', args);\n        if (result === false) {\n            result = this._iter(new IterResult('between', args));\n            this._cacheAdd('between', result, args);\n        }\n        return result;\n    };\n    /**\n     * Returns the last recurrence before the given datetime instance.\n     * The inc keyword defines what happens if dt is an occurrence.\n     * With inc == True, if dt itself is an occurrence, it will be returned.\n     *\n     * @return Date or null\n     */\n    RRule.prototype.before = function (dt, inc) {\n        if (inc === void 0) { inc = false; }\n        if (!isValidDate(dt)) {\n            throw new Error('Invalid date passed in to RRule.before');\n        }\n        var args = { dt: dt, inc: inc };\n        var result = this._cacheGet('before', args);\n        if (result === false) {\n            result = this._iter(new IterResult('before', args));\n            this._cacheAdd('before', result, args);\n        }\n        return result;\n    };\n    /**\n     * Returns the first recurrence after the given datetime instance.\n     * The inc keyword defines what happens if dt is an occurrence.\n     * With inc == True, if dt itself is an occurrence, it will be returned.\n     *\n     * @return Date or null\n     */\n    RRule.prototype.after = function (dt, inc) {\n        if (inc === void 0) { inc = false; }\n        if (!isValidDate(dt)) {\n            throw new Error('Invalid date passed in to RRule.after');\n        }\n        var args = { dt: dt, inc: inc };\n        var result = this._cacheGet('after', args);\n        if (result === false) {\n            result = this._iter(new IterResult('after', args));\n            this._cacheAdd('after', result, args);\n        }\n        return result;\n    };\n    /**\n     * Returns the number of recurrences in this set. It will have go trough\n     * the whole recurrence, if this hasn't been done before.\n     */\n    RRule.prototype.count = function () {\n        return this.all().length;\n    };\n    /**\n     * Converts the rrule into its string representation\n     *\n     * @see <http://www.ietf.org/rfc/rfc2445.txt>\n     * @return String\n     */\n    RRule.prototype.toString = function () {\n        return optionsToString(this.origOptions);\n    };\n    /**\n     * Will convert all rules described in nlp:ToText\n     * to text.\n     */\n    RRule.prototype.toText = function (gettext, language, dateFormatter) {\n        return toText(this, gettext, language, dateFormatter);\n    };\n    RRule.prototype.isFullyConvertibleToText = function () {\n        return isFullyConvertible(this);\n    };\n    /**\n     * @return a RRule instance with the same freq and options\n     * as this one (cache is not cloned)\n     */\n    RRule.prototype.clone = function () {\n        return new RRule(this.origOptions);\n    };\n    // RRule class 'constants'\n    RRule.FREQUENCIES = [\n        'YEARLY',\n        'MONTHLY',\n        'WEEKLY',\n        'DAILY',\n        'HOURLY',\n        'MINUTELY',\n        'SECONDLY',\n    ];\n    RRule.YEARLY = Frequency.YEARLY;\n    RRule.MONTHLY = Frequency.MONTHLY;\n    RRule.WEEKLY = Frequency.WEEKLY;\n    RRule.DAILY = Frequency.DAILY;\n    RRule.HOURLY = Frequency.HOURLY;\n    RRule.MINUTELY = Frequency.MINUTELY;\n    RRule.SECONDLY = Frequency.SECONDLY;\n    RRule.MO = Days.MO;\n    RRule.TU = Days.TU;\n    RRule.WE = Days.WE;\n    RRule.TH = Days.TH;\n    RRule.FR = Days.FR;\n    RRule.SA = Days.SA;\n    RRule.SU = Days.SU;\n    RRule.parseString = parseString;\n    RRule.optionsToString = optionsToString;\n    return RRule;\n}());\nexport { RRule };\n//# sourceMappingURL=rrule.js.map","import { __assign } from \"tslib\";\nimport { RRule } from './rrule';\nimport { RRuleSet } from './rruleset';\nimport { untilStringToDate } from './dateutil';\nimport { includes, split } from './helpers';\nimport { parseString, parseDtstart } from './parsestring';\n/**\n * RRuleStr\n * To parse a set of rrule strings\n */\nvar DEFAULT_OPTIONS = {\n    dtstart: null,\n    cache: false,\n    unfold: false,\n    forceset: false,\n    compatible: false,\n    tzid: null,\n};\nexport function parseInput(s, options) {\n    var rrulevals = [];\n    var rdatevals = [];\n    var exrulevals = [];\n    var exdatevals = [];\n    var parsedDtstart = parseDtstart(s);\n    var dtstart = parsedDtstart.dtstart;\n    var tzid = parsedDtstart.tzid;\n    var lines = splitIntoLines(s, options.unfold);\n    lines.forEach(function (line) {\n        var _a;\n        if (!line)\n            return;\n        var _b = breakDownLine(line), name = _b.name, parms = _b.parms, value = _b.value;\n        switch (name.toUpperCase()) {\n            case 'RRULE':\n                if (parms.length) {\n                    throw new Error(\"unsupported RRULE parm: \".concat(parms.join(',')));\n                }\n                rrulevals.push(parseString(line));\n                break;\n            case 'RDATE':\n                var _c = (_a = /RDATE(?:;TZID=([^:=]+))?/i.exec(line)) !== null && _a !== void 0 ? _a : [], rdateTzid = _c[1];\n                if (rdateTzid && !tzid) {\n                    tzid = rdateTzid;\n                }\n                rdatevals = rdatevals.concat(parseRDate(value, parms));\n                break;\n            case 'EXRULE':\n                if (parms.length) {\n                    throw new Error(\"unsupported EXRULE parm: \".concat(parms.join(',')));\n                }\n                exrulevals.push(parseString(value));\n                break;\n            case 'EXDATE':\n                exdatevals = exdatevals.concat(parseRDate(value, parms));\n                break;\n            case 'DTSTART':\n                break;\n            default:\n                throw new Error('unsupported property: ' + name);\n        }\n    });\n    return {\n        dtstart: dtstart,\n        tzid: tzid,\n        rrulevals: rrulevals,\n        rdatevals: rdatevals,\n        exrulevals: exrulevals,\n        exdatevals: exdatevals,\n    };\n}\nfunction buildRule(s, options) {\n    var _a = parseInput(s, options), rrulevals = _a.rrulevals, rdatevals = _a.rdatevals, exrulevals = _a.exrulevals, exdatevals = _a.exdatevals, dtstart = _a.dtstart, tzid = _a.tzid;\n    var noCache = options.cache === false;\n    if (options.compatible) {\n        options.forceset = true;\n        options.unfold = true;\n    }\n    if (options.forceset ||\n        rrulevals.length > 1 ||\n        rdatevals.length ||\n        exrulevals.length ||\n        exdatevals.length) {\n        var rset_1 = new RRuleSet(noCache);\n        rset_1.dtstart(dtstart);\n        rset_1.tzid(tzid || undefined);\n        rrulevals.forEach(function (val) {\n            rset_1.rrule(new RRule(groomRruleOptions(val, dtstart, tzid), noCache));\n        });\n        rdatevals.forEach(function (date) {\n            rset_1.rdate(date);\n        });\n        exrulevals.forEach(function (val) {\n            rset_1.exrule(new RRule(groomRruleOptions(val, dtstart, tzid), noCache));\n        });\n        exdatevals.forEach(function (date) {\n            rset_1.exdate(date);\n        });\n        if (options.compatible && options.dtstart)\n            rset_1.rdate(dtstart);\n        return rset_1;\n    }\n    var val = rrulevals[0] || {};\n    return new RRule(groomRruleOptions(val, val.dtstart || options.dtstart || dtstart, val.tzid || options.tzid || tzid), noCache);\n}\nexport function rrulestr(s, options) {\n    if (options === void 0) { options = {}; }\n    return buildRule(s, initializeOptions(options));\n}\nfunction groomRruleOptions(val, dtstart, tzid) {\n    return __assign(__assign({}, val), { dtstart: dtstart, tzid: tzid });\n}\nfunction initializeOptions(options) {\n    var invalid = [];\n    var keys = Object.keys(options);\n    var defaultKeys = Object.keys(DEFAULT_OPTIONS);\n    keys.forEach(function (key) {\n        if (!includes(defaultKeys, key))\n            invalid.push(key);\n    });\n    if (invalid.length) {\n        throw new Error('Invalid options: ' + invalid.join(', '));\n    }\n    return __assign(__assign({}, DEFAULT_OPTIONS), options);\n}\nfunction extractName(line) {\n    if (line.indexOf(':') === -1) {\n        return {\n            name: 'RRULE',\n            value: line,\n        };\n    }\n    var _a = split(line, ':', 1), name = _a[0], value = _a[1];\n    return {\n        name: name,\n        value: value,\n    };\n}\nfunction breakDownLine(line) {\n    var _a = extractName(line), name = _a.name, value = _a.value;\n    var parms = name.split(';');\n    if (!parms)\n        throw new Error('empty property name');\n    return {\n        name: parms[0].toUpperCase(),\n        parms: parms.slice(1),\n        value: value,\n    };\n}\nfunction splitIntoLines(s, unfold) {\n    if (unfold === void 0) { unfold = false; }\n    s = s && s.trim();\n    if (!s)\n        throw new Error('Invalid empty string');\n    // More info about 'unfold' option\n    // Go head to http://www.ietf.org/rfc/rfc2445.txt\n    if (!unfold) {\n        return s.split(/\\s/);\n    }\n    var lines = s.split('\\n');\n    var i = 0;\n    while (i < lines.length) {\n        // TODO\n        var line = (lines[i] = lines[i].replace(/\\s+$/g, ''));\n        if (!line) {\n            lines.splice(i, 1);\n        }\n        else if (i > 0 && line[0] === ' ') {\n            lines[i - 1] += line.slice(1);\n            lines.splice(i, 1);\n        }\n        else {\n            i += 1;\n        }\n    }\n    return lines;\n}\nfunction validateDateParm(parms) {\n    parms.forEach(function (parm) {\n        if (!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(parm)) {\n            throw new Error('unsupported RDATE/EXDATE parm: ' + parm);\n        }\n    });\n}\nfunction parseRDate(rdateval, parms) {\n    validateDateParm(parms);\n    return rdateval.split(',').map(function (datestr) { return untilStringToDate(datestr); });\n}\n//# sourceMappingURL=rrulestr.js.map","import { __extends } from \"tslib\";\nimport { RRule } from './rrule';\nimport { sort, timeToUntilString } from './dateutil';\nimport { includes } from './helpers';\nimport { iterSet } from './iterset';\nimport { rrulestr } from './rrulestr';\nimport { optionsToString } from './optionstostring';\nfunction createGetterSetter(fieldName) {\n    var _this = this;\n    return function (field) {\n        if (field !== undefined) {\n            _this[\"_\".concat(fieldName)] = field;\n        }\n        if (_this[\"_\".concat(fieldName)] !== undefined) {\n            return _this[\"_\".concat(fieldName)];\n        }\n        for (var i = 0; i < _this._rrule.length; i++) {\n            var field_1 = _this._rrule[i].origOptions[fieldName];\n            if (field_1) {\n                return field_1;\n            }\n        }\n    };\n}\nvar RRuleSet = /** @class */ (function (_super) {\n    __extends(RRuleSet, _super);\n    /**\n     *\n     * @param {Boolean?} noCache\n     * The same stratagy as RRule on cache, default to false\n     * @constructor\n     */\n    function RRuleSet(noCache) {\n        if (noCache === void 0) { noCache = false; }\n        var _this = _super.call(this, {}, noCache) || this;\n        _this.dtstart = createGetterSetter.apply(_this, ['dtstart']);\n        _this.tzid = createGetterSetter.apply(_this, ['tzid']);\n        _this._rrule = [];\n        _this._rdate = [];\n        _this._exrule = [];\n        _this._exdate = [];\n        return _this;\n    }\n    RRuleSet.prototype._iter = function (iterResult) {\n        return iterSet(iterResult, this._rrule, this._exrule, this._rdate, this._exdate, this.tzid());\n    };\n    /**\n     * Adds an RRule to the set\n     *\n     * @param {RRule}\n     */\n    RRuleSet.prototype.rrule = function (rrule) {\n        _addRule(rrule, this._rrule);\n    };\n    /**\n     * Adds an EXRULE to the set\n     *\n     * @param {RRule}\n     */\n    RRuleSet.prototype.exrule = function (rrule) {\n        _addRule(rrule, this._exrule);\n    };\n    /**\n     * Adds an RDate to the set\n     *\n     * @param {Date}\n     */\n    RRuleSet.prototype.rdate = function (date) {\n        _addDate(date, this._rdate);\n    };\n    /**\n     * Adds an EXDATE to the set\n     *\n     * @param {Date}\n     */\n    RRuleSet.prototype.exdate = function (date) {\n        _addDate(date, this._exdate);\n    };\n    /**\n     * Get list of included rrules in this recurrence set.\n     *\n     * @return List of rrules\n     */\n    RRuleSet.prototype.rrules = function () {\n        return this._rrule.map(function (e) { return rrulestr(e.toString()); });\n    };\n    /**\n     * Get list of excluded rrules in this recurrence set.\n     *\n     * @return List of exrules\n     */\n    RRuleSet.prototype.exrules = function () {\n        return this._exrule.map(function (e) { return rrulestr(e.toString()); });\n    };\n    /**\n     * Get list of included datetimes in this recurrence set.\n     *\n     * @return List of rdates\n     */\n    RRuleSet.prototype.rdates = function () {\n        return this._rdate.map(function (e) { return new Date(e.getTime()); });\n    };\n    /**\n     * Get list of included datetimes in this recurrence set.\n     *\n     * @return List of exdates\n     */\n    RRuleSet.prototype.exdates = function () {\n        return this._exdate.map(function (e) { return new Date(e.getTime()); });\n    };\n    RRuleSet.prototype.valueOf = function () {\n        var result = [];\n        if (!this._rrule.length && this._dtstart) {\n            result = result.concat(optionsToString({ dtstart: this._dtstart }));\n        }\n        this._rrule.forEach(function (rrule) {\n            result = result.concat(rrule.toString().split('\\n'));\n        });\n        this._exrule.forEach(function (exrule) {\n            result = result.concat(exrule\n                .toString()\n                .split('\\n')\n                .map(function (line) { return line.replace(/^RRULE:/, 'EXRULE:'); })\n                .filter(function (line) { return !/^DTSTART/.test(line); }));\n        });\n        if (this._rdate.length) {\n            result.push(rdatesToString('RDATE', this._rdate, this.tzid()));\n        }\n        if (this._exdate.length) {\n            result.push(rdatesToString('EXDATE', this._exdate, this.tzid()));\n        }\n        return result;\n    };\n    /**\n     * to generate recurrence field such as:\n     * DTSTART:19970902T010000Z\n     * RRULE:FREQ=YEARLY;COUNT=2;BYDAY=TU\n     * RRULE:FREQ=YEARLY;COUNT=1;BYDAY=TH\n     */\n    RRuleSet.prototype.toString = function () {\n        return this.valueOf().join('\\n');\n    };\n    /**\n     * Create a new RRuleSet Object completely base on current instance\n     */\n    RRuleSet.prototype.clone = function () {\n        var rrs = new RRuleSet(!!this._cache);\n        this._rrule.forEach(function (rule) { return rrs.rrule(rule.clone()); });\n        this._exrule.forEach(function (rule) { return rrs.exrule(rule.clone()); });\n        this._rdate.forEach(function (date) { return rrs.rdate(new Date(date.getTime())); });\n        this._exdate.forEach(function (date) { return rrs.exdate(new Date(date.getTime())); });\n        return rrs;\n    };\n    return RRuleSet;\n}(RRule));\nexport { RRuleSet };\nfunction _addRule(rrule, collection) {\n    if (!(rrule instanceof RRule)) {\n        throw new TypeError(String(rrule) + ' is not RRule instance');\n    }\n    if (!includes(collection.map(String), String(rrule))) {\n        collection.push(rrule);\n    }\n}\nfunction _addDate(date, collection) {\n    if (!(date instanceof Date)) {\n        throw new TypeError(String(date) + ' is not Date instance');\n    }\n    if (!includes(collection.map(Number), Number(date))) {\n        collection.push(date);\n        sort(collection);\n    }\n}\nfunction rdatesToString(param, rdates, tzid) {\n    var isUTC = !tzid || tzid.toUpperCase() === 'UTC';\n    var header = isUTC ? \"\".concat(param, \":\") : \"\".concat(param, \";TZID=\").concat(tzid, \":\");\n    var dateString = rdates\n        .map(function (rdate) { return timeToUntilString(rdate.valueOf(), isUTC); })\n        .join(',');\n    return \"\".concat(header).concat(dateString);\n}\n//# sourceMappingURL=rruleset.js.map","import { DateWithZone } from './datewithzone';\nimport { iter } from './iter';\nimport { sort } from './dateutil';\nexport function iterSet(iterResult, _rrule, _exrule, _rdate, _exdate, tzid) {\n    var _exdateHash = {};\n    var _accept = iterResult.accept;\n    function evalExdate(after, before) {\n        _exrule.forEach(function (rrule) {\n            rrule.between(after, before, true).forEach(function (date) {\n                _exdateHash[Number(date)] = true;\n            });\n        });\n    }\n    _exdate.forEach(function (date) {\n        var zonedDate = new DateWithZone(date, tzid).rezonedDate();\n        _exdateHash[Number(zonedDate)] = true;\n    });\n    iterResult.accept = function (date) {\n        var dt = Number(date);\n        if (isNaN(dt))\n            return _accept.call(this, date);\n        if (!_exdateHash[dt]) {\n            evalExdate(new Date(dt - 1), new Date(dt + 1));\n            if (!_exdateHash[dt]) {\n                _exdateHash[dt] = true;\n                return _accept.call(this, date);\n            }\n        }\n        return true;\n    };\n    if (iterResult.method === 'between') {\n        evalExdate(iterResult.args.after, iterResult.args.before);\n        iterResult.accept = function (date) {\n            var dt = Number(date);\n            if (!_exdateHash[dt]) {\n                _exdateHash[dt] = true;\n                return _accept.call(this, date);\n            }\n            return true;\n        };\n    }\n    for (var i = 0; i < _rdate.length; i++) {\n        var zonedDate = new DateWithZone(_rdate[i], tzid).rezonedDate();\n        if (!iterResult.accept(new Date(zonedDate.getTime())))\n            break;\n    }\n    _rrule.forEach(function (rrule) {\n        iter(iterResult, rrule.options);\n    });\n    var res = iterResult._result;\n    sort(res);\n    switch (iterResult.method) {\n        case 'all':\n        case 'between':\n            return res;\n        case 'before':\n            return ((res.length && res[res.length - 1]) || null);\n        case 'after':\n        default:\n            return ((res.length && res[0]) || null);\n    }\n}\n//# sourceMappingURL=iterset.js.map","/* autoscroll start */\n\nexport default function(scheduler){\n\nlet scrollInterval = 10;\n\nlet interval = null;\nlet startPos = null;\n\nfunction getRelativeCoordinates (e, parent) {\n\tconst view = scheduler.matrix[scheduler._mode];\n\tconst pos = {};\n\tconst offset = {};\n\tlet container = parent;\n\n\tpos.x = !!e.touches ? e.touches[ 0 ].pageX : e.pageX;\n\tpos.y = !! e.touches ? e.touches[ 0 ].pageY : e.pageY;\n\n\toffset.left = container.offsetLeft + view.dx;\n\toffset.top = container.offsetTop;\n\n\twhile ( container ) {\n\n\t\toffset.left += container.offsetLeft;\n\t\toffset.top += container.offsetTop;\n\n\t\tcontainer = container.offsetParent;\n\t}\n\n\treturn {\n\t\tx : pos.x - offset.left,\n\t\ty : pos.y - offset.top\n\t};\n}\n\nfunction autoscrollInterval(event){\n\tif(interval)\n\t\tclearInterval(interval);\n\n\tconst view = scheduler.matrix[scheduler._mode];\n\tif(!view)\n\t\treturn;\n\tscheduler._schedulerOuter =  scheduler.$container.querySelector(\".dhx_timeline_data_wrapper\");\n\tif (!view.scrollable){\n\t\tscheduler._schedulerOuter = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t}\n\n\tconst eventPos = {\n\t\tpageX: !!event.touches ? event.touches[0].pageX : event.pageX,\n\t\tpageY: !!event.touches ? event.touches[0].pageY : event.pageY\n\t};\n\tinterval = setInterval(function(){tick(eventPos);}, scrollInterval);\n}\n\nscheduler.attachEvent(\"onDestroy\", function(){\n\tclearInterval(interval);\n});\n\nfunction tick(e){\n\tif(!scheduler.getState().drag_id) {\n\t\tclearInterval(interval);\n\t\tstartPos = null;\n\t\treturn;\n\t}\n\n\tconst view = scheduler.matrix[scheduler._mode];\n\tif(!view)\n\t\treturn;\n\n\n\t\n\tconst viewport = scheduler._schedulerOuter;\n\tconst box = getRelativeCoordinates(e, viewport);\n\n\tconst availWidth = viewport.offsetWidth - view.dx;\n\tconst availHeight = viewport.offsetHeight;\n\n\tconst posX = box.x;\n\tconst posY = box.y;\n\n\tlet settings = view.autoscroll || {};\n\tif(settings === true){\n\t\tsettings = {};\n\t}\n\n\tscheduler._merge(settings, {\n\t\trange_x: 200,// px to edge\n\t\trange_y: 100,\n\t\tspeed_x: 20,// speed\n\t\tspeed_y: 10\n\t});\n\n\tlet scrollLeft = need_scroll(posX, availWidth, startPos ? startPos.x : 0, settings.range_x);\n\tif(!view.scrollable){\n\t\tscrollLeft = 0;\n\t}\n\tlet scrollTop = need_scroll(posY, availHeight, startPos ? startPos.y : 0, settings.range_y);\n\n\tif((scrollTop || scrollLeft) && !startPos){\n\t\tstartPos = {\n\t\t\tx: posX,\n\t\t\ty: posY\n\t\t};\n\n\t\tscrollLeft = 0;\n\t\tscrollTop = 0;\n\t}\n\n\tscrollLeft = scrollLeft * settings.speed_x;\n\tscrollTop = scrollTop * settings.speed_y;\n\n\tif(scrollLeft && scrollTop){\n\t\tif(Math.abs(scrollLeft / 5) > Math.abs(scrollTop)){\n\t\t\tscrollTop = 0;\n\t\t}else if(Math.abs(scrollTop / 5) > Math.abs(scrollLeft)){\n\t\t\tscrollLeft = 0;\n\t\t}\n\t}\n\n\tif(scrollLeft || scrollTop){\n\t\tstartPos.started = true;\n\t\tscroll(scrollLeft, scrollTop);\n\t}else{\n\t\tclearInterval(interval);\n\t}\n}\n\nfunction need_scroll(pos, boxSize, startCoord, scrollRange){\n\tif(pos < scrollRange && (!startPos || startPos.started || pos < startCoord)){\n\t\treturn -1;\n\t}else if(boxSize - pos < scrollRange && (!startPos || startPos.started || pos > startCoord)){\n\t\treturn 1;\n\t}\n\treturn 0;\n}\n\nfunction scroll(left, top){\n\tconst viewport = scheduler._schedulerOuter;\n\tif(top){\n\t\tviewport.scrollTop += top;\n\t}\n\tif (left){ // + 40 - adjust height of that movement was correct\n\t\tviewport.scrollLeft += left;\n\t}\n}\n\n\nvar evId = scheduler.attachEvent(\"onSchedulerReady\", function(){\n\tif (scheduler.matrix) {\n\t\tscheduler.event(document.body, \"mousemove\", autoscrollInterval);\n\t\tscheduler.detachEvent(evId);\n\t}\n});\n\n/* autoscroll end */\n\n}","export default (function(){\n\treturn function create(){\n\t\tvar modes = {\n\t\t\t\"minMax\":\"[0;max]\",\n\t\t\t\"maxMin\":\"[max;0]\",\n\t\t\t\"nMaxMin\":\"[-max;0]\"\n\t\t};\n\t\t\n\t\tfunction createTestElement(){\n\t\t\tvar container = document.createElement(\"div\");\n\t\t\tcontainer.style.cssText = \t\"direction: rtl;\" + \n\t\t\t\t\t\t\t\t\t\t\"overflow: auto;\" +\n\t\t\t\t\t\t\t\t\t\t\"width:100px;\" +\n\t\t\t\t\t\t\t\t\t\t\"height: 100px;\" +\n\t\t\t\t\t\t\t\t\t\t\"position:absolute;\" +\n\t\t\t\t\t\t\t\t\t\t\"top: -100500px;\" +\n\t\t\t\t\t\t\t\t\t\t\"left: -100500px;\";\n\t\t\tvar content = document.createElement(\"div\");\n\t\t\tcontent.style.cssText = \"width: 100500px;height: 1px;\";\n\t\t\tcontainer.appendChild(content);\n\t\t\treturn container;\n\t\t}\n\n\t\tfunction detectScrollMode(){\n\t\t\tvar result = modes.minMax;\n\t\t\tvar demoElement = createTestElement();\n\t\t\tdocument.body.appendChild(demoElement);\n\n\t\t\tvar initialScroll = demoElement.scrollLeft;\n\t\t\tif(initialScroll > 0){\n\t\t\t\t// scrollLeft goes from zero (left) to maximum value (right), the same way as in ltr mode\n\t\t\t\t// probably chrome\n\t\t\t\tresult = modes.minMax;\n\t\t\t}else{\n\t\t\t\tdemoElement.scrollLeft = -50;\n\t\t\t\tif(demoElement.scrollLeft === -50){\n\t\t\t\t\t// scrollLeft goes from negative max (left) to zero (right)\n\t\t\t\t\t// probably FF\n\t\t\t\t\tresult = modes.nMaxMin; \n\t\t\t\t}else{\n\t\t\t\t\t// scrollLeft goes from max (left) to zero (right)\n\t\t\t\t\t// probably IE\n\t\t\t\t\tresult = modes.maxMin; \n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdocument.body.removeChild(demoElement);\n\t\t\treturn result;\n\t\t}\n\n\t\tfunction normalizeValue(value, scrollWidth){\n\t\t\tvar mode = getMode();\n\t\t\tif(mode === modes.nMaxMin){\n\t\t\t\tif(value){\n\t\t\t\t\treturn -value;\n\t\t\t\t}else {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}else if (mode === modes.minMax){\n\t\t\t\treturn scrollWidth - value;\n\t\t\t}else {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\n\t\tfunction getScrollValue(element){\n\t\t\t//const direction = \"ltr\";\n\t\t\tvar direction = getComputedStyle(element).direction;\n\t\t\tif(!direction || direction === \"ltr\"){\n\t\t\t\treturn element.scrollLeft;\n\t\t\t}else {\n\t\t\t\tvar maxScroll = element.scrollWidth - element.offsetWidth;\n\t\t\t\treturn normalizeValue(element.scrollLeft, maxScroll);\n\t\t\t}\n\t\t}\n\n\t\tfunction setScrollValue(element, value){\n\t\t\t//const direction = \"ltr\";\n\t\t\tvar direction = getComputedStyle(element).direction;\n\t\t\tif(!direction || direction === \"ltr\"){\n\t\t\t\telement.scrollLeft = value;\n\t\t\t}else {\n\t\t\t\tvar maxScroll = element.scrollWidth - element.offsetWidth;\n\t\t\t\tvar normalized = normalizeValue(value, maxScroll);\n\t\t\t\telement.scrollLeft = normalized;\n\t\t\t}\n\t\t}\n\n\t\tvar currentMode;\n\t\tfunction getMode(){\n\t\t\tif(!currentMode){\n\t\t\t\tcurrentMode = detectScrollMode();\n\t\t\t}\n\t\t\treturn currentMode;\n\t\t}\n\t\treturn {\n\t\t\tmodes: modes,\n\t\t\tgetMode: getMode,\n\t\t\tnormalizeValue: normalizeValue,\n\t\t\tgetScrollValue: getScrollValue,\n\t\t\tsetScrollValue: setScrollValue\n\t\t};\n\t};\n})();","interface IViewPosition{\n\ttop: number;\n\tleft: number;\n}\n\ninterface IViewBox extends IViewPosition{\n\twidth: number;\n\theight: number;\n\tbottom: number;\n\tright: number;\n}\n\nexport class Tooltip {\n\tprivate _root: HTMLElement;\n\tprivate _tooltipNode: HTMLElement | null;\n\tprivate _scheduler: any;\n\n\tconstructor(scheduler: any){\n\t\tthis._scheduler = scheduler;\n\t}\n\n\tgetNode() : HTMLElement {\n\t\tconst scheduler = this._scheduler;\n\t\tif (!this._tooltipNode){\n\t\t\tthis._tooltipNode = document.createElement(\"div\");\n\t\t\tthis._tooltipNode.className = \"dhtmlXTooltip scheduler_tooltip tooltip\";\n\n\t\t\tscheduler._waiAria.tooltipAttr(this._tooltipNode);\n\t\t}\n\t\tif(scheduler.config.rtl){\n\t\t\tthis._tooltipNode.classList.add(\"dhtmlXTooltip_rtl\");\n\t\t} else{\n\t\t\tthis._tooltipNode.classList.remove(\"dhtmlXTooltip_rtl\");\n\t\t}\n\t\treturn this._tooltipNode;\n\t}\n\n\tsetViewport(node: HTMLElement):Tooltip{\n\t\tthis._root = node;\n\t\treturn this;\n\t}\n\n\tshow(left: number, top: number): Tooltip;\n\tshow(event: MouseEvent): Tooltip;\n\tshow(left: number | MouseEvent, top?: number): Tooltip {\n\t\tconst scheduler = this._scheduler;\n\t\tconst domHelpers = scheduler.$domHelpers;\n\t\tconst container = document.body;\n\t\tconst node = this.getNode();\n\n\t\tif(!domHelpers.isChildOf(node, container)){\n\t\t\tthis.hide();\n\t\t\tcontainer.appendChild(node);\n\t\t}\n\n\t\tif (this._isLikeMouseEvent(left)) {\n\t\t\tconst position = this._calculateTooltipPosition(left as MouseEvent);\n\t\t\ttop = position.top;\n\t\t\tleft = position.left;\n\t\t}\n\n\t\tnode.style.top = top + \"px\";\n\t\tnode.style.left = left + \"px\";\n\n\t\tscheduler._waiAria.tooltipVisibleAttr(node);\n\t\treturn this;\n\t}\n\thide() : Tooltip{\n\t\tconst scheduler = this._scheduler;\n\t\tconst node = this.getNode();\n\t\tif(node && node.parentNode){\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\t\tscheduler._waiAria.tooltipHiddenAttr(node);\n\t\treturn this;\n\t}\n\n\tsetContent(html: string) : Tooltip{\n\t\tconst node = this.getNode();\n\t\tnode.innerHTML = html;\n\t\treturn this;\n\t}\n\n\t// it is for salesforce, because it proxies event to it own events\n\tprivate _isLikeMouseEvent(event: any): boolean {\n\t\tif (!event || typeof event !== \"object\") {\n\t\t\treturn false;\n\t\t}\n\t\treturn \"clientX\" in event && \"clientY\" in event;\n\t}\n\n\tprivate _getViewPort() : HTMLElement {\n\t\treturn this._root || document.body;\n\t}\n\n\n\tprivate _calculateTooltipPosition(event: MouseEvent): IViewPosition{\n\t\tconst scheduler = this._scheduler;\n\t\tconst domHelpers = scheduler.$domHelpers;\n\t\t// top/left coordinates inside the viewport by mouse position\n\t\tconst viewport =  this._getViewPortSize();\n\t\tconst tooltipNode = this.getNode();\n\t\tconst tooltip: IViewBox = {\n\t\t\ttop:0,\n\t\t\tleft: 0,\n\t\t\twidth: tooltipNode.offsetWidth,\n\t\t\theight: tooltipNode.offsetHeight,\n\t\t\tbottom: 0,\n\t\t\tright: 0\n\t\t};\n\n\t\tconst offsetX = scheduler.config.tooltip_offset_x;\n\t\tconst offsetY = scheduler.config.tooltip_offset_y;\n\n\t\tconst container = document.body;\n\t\tconst mouse = domHelpers.getRelativeEventPosition(event, container);\n\t\tconst containerPos = domHelpers.getNodePosition(container);\n\t\tmouse.y += containerPos.y; // to fix margin collapsing\n\n\t\ttooltip.top = mouse.y;\n\t\ttooltip.left = mouse.x;\n\t\ttooltip.top += offsetY;\n\t\ttooltip.left += offsetX;\n\t\ttooltip.bottom = tooltip.top + tooltip.height;\n\t\ttooltip.right = tooltip.left + tooltip.width;\n\n\t\tconst scrollTop = window.scrollY + container.scrollTop; // to fix margin collapsing\n\t\t// edge cases when the tooltip element can be partially hidden by edges of the viewport\n\t\tif(tooltip.top < viewport.top - scrollTop){\n\t\t\ttooltip.top = viewport.top;\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\n\t\t}else if(tooltip.bottom > viewport.bottom){\n\t\t\ttooltip.bottom = viewport.bottom;\n\t\t\ttooltip.top = tooltip.bottom - tooltip.height;\n\t\t}\n\n\t\tif(tooltip.left < viewport.left){\n\t\t\ttooltip.left = viewport.left;\n\t\t\ttooltip.right = viewport.left + tooltip.width;\n\t\t}else if(tooltip.right > viewport.right){\n\t\t\ttooltip.right = viewport.right;\n\t\t\ttooltip.left = tooltip.right - tooltip.width;\n\t\t}\n\n\t\tif(mouse.x >= tooltip.left && mouse.x <= tooltip.right) {\n\t\t\ttooltip.left = mouse.x - tooltip.width - offsetX;\n\t\t\ttooltip.right = tooltip.left + tooltip.width;\n\t\t}\n\n\t\tif(mouse.y >= tooltip.top && mouse.y <= tooltip.bottom) {\n\t\t\ttooltip.top = mouse.y - tooltip.height - offsetY;\n\t\t\ttooltip.bottom = tooltip.top + tooltip.height;\n\t\t}\n\t\t// GS-2816: when tooltip width is greater than viewport width\n\t\tif(tooltip.left < 0 ){\n\t\t\ttooltip.left = 0;\n\t\t}\n\t\tif(tooltip.right < 0 ){\n\t\t\ttooltip.right = 0;\n\t\t}\n\n\t\treturn tooltip;\n\t}\n\n\tprivate _getViewPortSize() : IViewBox {\n\t\tconst scheduler = this._scheduler;\n\t\tconst domHelpers = scheduler.$domHelpers;\n\t\tconst container = this._getViewPort();\n\t\tlet viewport = container;\n\t\tlet scrollTop = window.scrollY + document.body.scrollTop;\n\t\tlet scrollLeft = window.scrollX + document.body.scrollLeft;\n\t\tlet pos;\n\t\t// support for the initial tooltip mode where the tooltip element was attached to the data area of scheduler\n\t\tif(container === scheduler.$event_data){\n\t\t\tviewport = scheduler.$event;\n\t\t\tscrollTop = 0;\n\t\t\tscrollLeft = 0;\n\t\t\tpos = domHelpers.getNodePosition(scheduler.$event);\n\t\t}else{\n\t\t\tpos = domHelpers.getNodePosition(viewport);\n\t\t}\n\t\treturn {\n\t\t\tleft:pos.x + scrollLeft,\n\t\t\ttop: pos.y + scrollTop,\n\t\t\twidth: pos.width,\n\t\t\theight: pos.height,\n\t\t\tbottom: pos.y + pos.height + scrollTop,\n\t\t\tright: pos.x + pos.width + scrollLeft\n\t\t};\n\t}\n}\n","import * as utils from \"../../core/utils/utils\";\nimport { Tooltip } from \"./tooltip\";\n\ninterface ITrackerTarget {\n\tselector: string;\n\tonmouseenter: (event: MouseEvent, node: HTMLElement) => void;\n\tonmousemove: (event: MouseEvent, node: HTMLElement) => void;\n\tonmouseleave: (event: MouseEvent, node: HTMLElement) => void;\n\tglobal: boolean;\n}\n\ninterface ITooltipConfig {\n\tselector: string;\n\thtml: (event: MouseEvent, node: HTMLElement) => string;\n\tglobal: boolean;\n}\n\nexport class TooltipManager{\n\ttooltip: Tooltip;\n\tprotected _domEvents: any;\n\tprivate _listeners: object = {};\n\tprivate _scheduler: any;\n\tprivate delayShow: any;\n\tprivate delayHide: any;\n\n\tconstructor(scheduler: any) {\n\t\tthis.tooltip = new Tooltip(scheduler);\n\t\tthis._scheduler = scheduler;\n\t\tthis._domEvents = scheduler._createDomEventScope();\n\t\tthis._initDelayedFunctions();\n\t}\n\n\tdestructor(): void{\n\t\tthis.tooltip.hide();\n\t\tthis._domEvents.detachAll();\n\t}\n\thideTooltip(): void{\n\t\tthis.delayHide();\n\t}\n\tattach(config: ITrackerTarget): void {\n\t\tlet root = document.body;\n\t\tconst scheduler = this._scheduler;\n\t\tconst domHelpers = scheduler.$domHelpers;\n\t\tif(!config.global){\n\t\t\troot = scheduler.$root;\n\t\t}\n\n\t\tlet watchableTarget = null;\n\t\tconst handler = (event) => {\n\t\t\tconst eventTarget = domHelpers.getTargetNode(event);\n\t\t\tconst targetNode = domHelpers.closest(eventTarget, config.selector);\n\t\t\tif(domHelpers.isChildOf(eventTarget, this.tooltip.getNode())){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst doOnMouseEnter = () => {\n\t\t\t\twatchableTarget = targetNode;\n\t\t\t\tconfig.onmouseenter(event, targetNode);\n\t\t\t};\n\t\t\t// GS-2377: to show tooltip after touch and hide it when touch is outside the events\n\t\t\tif (scheduler._mobile && scheduler.config.touch_tooltip){\n\t\t\t\tif(targetNode){\n\t\t\t\t\tdoOnMouseEnter();\n\t\t\t\t} else {\n\t\t\t\t\tconfig.onmouseleave(event, targetNode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(watchableTarget){\n\t\t\t\tif(targetNode && targetNode === watchableTarget){\n\t\t\t\t\tconfig.onmousemove(event, targetNode);\n\t\t\t\t}else{\n\t\t\t\t\tconfig.onmouseleave(event, watchableTarget);\n\t\t\t\t\twatchableTarget = null;\n\n\t\t\t\t\tif(targetNode && targetNode !== watchableTarget){\n\t\t\t\t\t\tdoOnMouseEnter();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(targetNode){\n\t\t\t\t\tdoOnMouseEnter();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.detach(config.selector);\n\t\tthis._domEvents.attach(root, \"mousemove\", handler);\n\t\tthis._listeners[config.selector] = {\n\t\t\tnode: root,\n\t\t\thandler\n\t\t};\n\t}\n\n\tdetach(selector: string): void {\n\t\tconst listener = this._listeners[selector];\n\t\tif(listener){\n\t\t\tthis._domEvents.detach(listener.node, \"mousemove\", listener.handler);\n\t\t}\n\t}\n\n\ttooltipFor(config: ITooltipConfig): void {\n\t\tconst cloneDomEvent = (event: MouseEvent) => {\n\t\t\tlet clone = event;\n\t\t\t// making events survive timeout in ie\n\t\t\t// tslint:disable-next-line no-string-literal\n\t\t\tif(document[\"createEventObject\"] && !document.createEvent){\n\t\t\t\t// tslint:disable-next-line no-string-literal\n\t\t\t\tclone = document[\"createEventObject\"](event);\n\t\t\t}\n\t\t\treturn clone;\n\t\t};\n\t\tthis._initDelayedFunctions();\n\t\tthis.attach({\n\t\t\tselector: config.selector,\n\t\t\tglobal: config.global,\n\t\t\tonmouseenter:(event: MouseEvent, node: HTMLElement) => {\n\t\t\t\tconst html = config.html(event, node);\n\t\t\t\tif(html){\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonmousemove:(event: MouseEvent, node: HTMLElement) => {\n\t\t\t\tconst html = config.html(event, node);\n\t\t\t\tif(html){\n\t\t\t\t\tthis.delayShow(cloneDomEvent(event), html);\n\t\t\t\t}else{\n\t\t\t\t\tthis.delayShow.$cancelTimeout();\n\t\t\t\t\tthis.delayHide();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonmouseleave:() => {\n\t\t\t\tthis.delayShow.$cancelTimeout();\n\t\t\t\tthis.delayHide();\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate _initDelayedFunctions(){\n\t\tconst scheduler = this._scheduler;\n\t\t// reset delayed functions in order to apply current values of tooltip_timeout\n\t\tif(this.delayShow){\n\t\t\tthis.delayShow.$cancelTimeout();\n\t\t}\n\t\tif(this.delayHide){\n\t\t\tthis.delayHide.$cancelTimeout();\n\t\t}\n\t\tthis.tooltip.hide();\n\t\t\n\t\tthis.delayShow = (utils as any).default.delay((event: MouseEvent, html: string) => {\n\t\t\tif(scheduler.callEvent(\"onBeforeTooltip\", [event]) === false) {\n\t\t\t\tthis.tooltip.hide();\n\t\t\t} else {\n\t\t\t\tthis.tooltip.setContent(html);\n\t\t\t\tthis.tooltip.show(event);\n\t\t\t}\n\t\t}, scheduler.config.tooltip_timeout || 1);\n\n\t\tthis.delayHide = (utils as any).default.delay(() => {\n\t\t\tthis.delayShow.$cancelTimeout();\n\t\t\tthis.tooltip.hide();\n\t\t}, scheduler.config.tooltip_hide_timeout || 1);\n\t}\n\n}","import active_links from \"./active_links\";\nimport agenda_legacy from \"./agenda_legacy_view\";\nimport agenda_view from \"./agenda\";\nimport all_timed from \"./all_timed\";\nimport collision from \"./collision\";\nimport container_autoresize from \"./container_autoresize\";\nimport cookie from \"./cookie\";\nimport daytimeline from \"./daytimeline\";\nimport drag_between from \"./drag_between\";\nimport editors from \"./editors\";\nimport expand from \"./expand\";\nimport grid_view from \"./grid_view\";\nimport html_templates from \"./html_templates\";\nimport key_nav from \"./key_nav\";\nimport layer from \"./layer\";\nimport legacy from \"./legacy\";\nimport limit from \"./limit\";\nimport map_view from \"./map_view\";\nimport minical from \"./minical\";\nimport monthheight from \"./monthheight\";\nimport multisection from \"./multisection\";\nimport multiselect from \"./multiselect\";\nimport multisource from \"./multisource\";\nimport mvc from \"./mvc\";\nimport outerdrag from \"./outerdrag\";\nimport pdf from \"./pdf\";\nimport quick_info from \"./quick_info\";\nimport readonly from \"./readonly\";\nimport recurring from \"./recurring\";\nimport recurring_legacy from \"./recurring_legacy\";\nimport serialize from \"./serialize\";\nimport timeline from \"./timeline\";\nimport tooltip from \"./tooltip\";\nimport treetimeline from \"./treetimeline\";\nimport units from \"./units\";\nimport url from \"./url\";\nimport week_agenda from \"./week_agenda\";\nimport wp from \"./wp\";\nimport year_view from \"./year_view\";\nimport export_api from \"./export_api\";\n\nexport default {\n\tactive_links,\n\tagenda_legacy,\n\tagenda_view,\n\tall_timed,\n\tcollision,\n\tcontainer_autoresize,\n\tcookie,\n\tdaytimeline,\n\tdrag_between,\n\teditors,\n\texpand,\n\texport_api,\n\tgrid_view,\n\thtml_templates,\n\tkey_nav,\n\tlayer,\n\tlegacy,\n\tlimit,\n\tmap_view,\n\tminical,\n\tmonthheight,\n\tmultisection,\n\tmultiselect,\n\tmultisource,\n\tmvc,\n\touterdrag,\n\tpdf,\n\tquick_info,\n\treadonly,\n\trecurring,\n\trecurring_legacy,\n\tserialize,\n\ttimeline,\n\ttooltip,\n\ttreetimeline,\n\tunits,\n\turl,\n\tweek_agenda,\n\twp,\n\tyear_view\n};","export default function(scheduler){\n\nscheduler.config.active_link_view = \"day\";\nscheduler._active_link_click = function(e){\n\tvar start = e.target;\n\tvar to = start.getAttribute(\"data-link-date\");\n\tvar s_d = scheduler.date.str_to_date(scheduler.config.api_date, false, true);\n\tif (to) {\n\t\tscheduler.setCurrentView(s_d(to), scheduler.config.active_link_view);\n\t\tif (e && e.preventDefault)\n\t\t\te.preventDefault();\n\t\treturn false;\n\t}\n};\nscheduler.attachEvent(\"onTemplatesReady\", function() {\n\tvar do_wrapper = function(key, fullname){\n\t\tfullname = fullname || (key+\"_scale_date\");\n\n\t\tif(!scheduler.templates['_active_links_old_'+ fullname]){\n\t\t\tscheduler.templates['_active_links_old_'+ fullname] = scheduler.templates[fullname];\n\t\t}\n\t\tvar week_x = scheduler.templates['_active_links_old_'+ fullname];\n\t\tvar d_s = scheduler.date.date_to_str(scheduler.config.api_date);\n\t\tscheduler.templates[fullname] = function(date) {\n\t\t\treturn \"<a data-link-date='\" + d_s(date) + \"' href='#'>\" + week_x(date) + \"</a>\";\n\t\t};\n\t};\n\n\tdo_wrapper(\"week\");\n\tdo_wrapper(\"\", \"month_day\");\n\tif (this.matrix){\n\t\tfor (var key in this.matrix)\n\t\t\tdo_wrapper(key);\n\t}\n\n\tthis._detachDomEvent(this._obj, \"click\", scheduler._active_link_click);\n\tscheduler.event(this._obj, \"click\", scheduler._active_link_click);\n});\n\n}","export default function(scheduler){\n\nscheduler.date.add_agenda_legacy = function(date){\n\treturn scheduler.date.add(date, 1, \"year\");\n};\n\nscheduler.templates.agenda_legacy_time = function(start,end,ev){\n\tif (ev._timed)\n\t\treturn this.day_date(ev.start_date, ev.end_date, ev)+\" \"+this.event_date(start);\n\telse\n\t\treturn scheduler.templates.day_date(start)+\" &ndash; \"+scheduler.templates.day_date(end);\n};\nscheduler.templates.agenda_legacy_text = function(start,end,event){\n\treturn event.text;\n};\nscheduler.templates.agenda_legacy_date = function(){ return \"\"; };\n\nscheduler.date.agenda_legacy_start=function(){ return scheduler.date.date_part(scheduler._currentDate()); };\n\nscheduler.attachEvent(\"onTemplatesReady\",function() {\n\tvar old_dblclick_dhx_cal_data = scheduler.dblclick_dhx_cal_data;\n\tscheduler.dblclick_dhx_cal_data = function() {\n\t\tif (this._mode == \"agenda_legacy\") {\n\t\t\tif (!this.config.readonly && this.config.dblclick_create)\n\t\t\t\tthis.addEventNow();\n\t\t} else {\n\t\t\tif (old_dblclick_dhx_cal_data)\n\t\t\t\treturn old_dblclick_dhx_cal_data.apply(this, arguments);\n\t\t}\n\t};\n\n\n\tvar old = scheduler.render_data;\n\tscheduler.render_data=function(evs){\n\t\tif (this._mode == \"agenda_legacy\")\n\t\t\tfill_agenda_tab();\n\t\telse\n\t\t\treturn old.apply(this,arguments);\n\t};\n\n\tvar old_render_view_data = scheduler.render_view_data;\n\tscheduler.render_view_data = function(){\n\t\tif(this._mode == \"agenda_legacy\") {\n\t\t\tscheduler._agendaScrollTop = scheduler._els[\"dhx_cal_data\"][0].childNodes[0].scrollTop;\n\t\t\tscheduler._els[\"dhx_cal_data\"][0].childNodes[0].scrollTop = 0;\n\t\t}\n\t\treturn old_render_view_data.apply(this,arguments);\n\t};\n\n\n\n\tfunction set_full_view(mode){\n\t\tif (mode){\n\t\t\tvar l = scheduler.locale.labels;\n\n\t\t\tvar rowAttr = scheduler._waiAria.agendaHeadAttrString();\n\t\t\tvar dateHeader = scheduler._waiAria.agendaHeadDateString(l.date);\n\t\t\tvar descriptionHeader = scheduler._waiAria.agendaHeadDescriptionString(l.description);\n\n\t\t\tscheduler._els[\"dhx_cal_header\"][0].innerHTML=\"<div \"+rowAttr+\" class='dhx_agenda_line dhx_agenda_line_header'>\" +\n\t\t\t\t\"<div \"+dateHeader+\">\"+l.date+\"</div>\" +\n\t\t\t\t\"<span class = 'description_header' style='padding-left:25px' \"+descriptionHeader+\">\"+l.description+\"</span>\" +\n\t\t\t\t\"</div>\";\n\t\t\tscheduler._table_view=true;\n\t\t\tscheduler.set_sizes();\n\t\t}\n\t}\n\n\tfunction fill_agenda_tab(){\n\t\t//select events for which data need to be printed\n\n\t\tvar events = scheduler.get_visible_events();\n\t\tevents.sort(function(a,b){ return a.start_date>b.start_date?1:-1;});\n\n\t\tvar tableAttr = scheduler._waiAria.agendaDataAttrString();\n\t\tvar agendaEventAttrString;\n\t\t//generate html for the view\n\t\tvar html=\"<div class='dhx_agenda_area' \"+tableAttr+\">\";\n\t\tfor (var i=0; i<events.length; i++){\n\t\t\tvar ev = events[i];\n\t\t\tvar bg_color = (ev.color?(\"--dhx-scheduler-event-background:\"+ev.color+\";\"):\"\");\n\t\t\tvar color = (ev.textColor?(\"--dhx-scheduler-event-color:\"+ev.textColor+\";\"):\"\");\n\t\t\tvar ev_class = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\n\n\t\t\tagendaEventAttrString = scheduler._waiAria.agendaEventAttrString(ev);\n\t\t\tvar agendaDetailsButtonAttr = scheduler._waiAria.agendaDetailsBtnString();\n\n\t\t\thtml+=\"<div \"+agendaEventAttrString+\" class='dhx_agenda_line\"+(ev_class?' '+ev_class:'')+\n\t\t\t\t\t\"' event_id='\"+ev.id+\"' \"+scheduler.config.event_attribute+\"='\"+ev.id+\"' style='\"+color+\"\"+bg_color+\"\"+\n\t\t\t\t\t(ev._text_style||\"\")+\"'><div class='dhx_agenda_event_time'>\"+\n\t\t\t\t\t(scheduler.config.rtl ? scheduler.templates.agenda_time(ev.end_date,ev.start_date, ev):scheduler.templates.agenda_time(ev.start_date, ev.end_date,ev))+\n\t\t\t\t\t\"</div>\";\n\t\t\thtml+=`<div ${agendaDetailsButtonAttr} class='dhx_event_icon icon_details'><svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z\" fill=\"#A1A4A6\"/>\n\t\t\t</svg></div>`;\n\t\t\thtml+=\"<span>\"+scheduler.templates.agenda_text(ev.start_date, ev.end_date, ev)+\"</span></div>\";\n\t\t}\n\t\thtml+=\"<div class='dhx_v_border'></div></div>\";\n\n\t\t//render html\n\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = html;\n\t\tscheduler._els[\"dhx_cal_data\"][0].childNodes[0].scrollTop = scheduler._agendaScrollTop||0;\n\n\t\t// setting up dhx_v_border size\n\t\tvar agenda_area = scheduler._els[\"dhx_cal_data\"][0].childNodes[0];\n\t\tvar v_border = agenda_area.childNodes[agenda_area.childNodes.length-1];\n\t\tv_border.style.height = (agenda_area.offsetHeight < scheduler._els[\"dhx_cal_data\"][0].offsetHeight) ? \"100%\" : (agenda_area.offsetHeight+\"px\");\n\n\t\tvar t=scheduler._els[\"dhx_cal_data\"][0].firstChild.childNodes;\n\n\t\tvar dateElement = scheduler._getNavDateElement();\n\t\tif(dateElement){\n\t\t\tdateElement.innerHTML=scheduler.templates.agenda_date(scheduler._min_date, scheduler._max_date, scheduler._mode);\n\t\t}\n\n\t\tscheduler._rendered=[];\n\t\tfor (var i=0; i < t.length-1; i++)\n\t\t\tscheduler._rendered[i]=t[i];\n\n\t}\n\n\tscheduler.agenda_legacy_view=function(mode){\n\t\tscheduler._min_date = scheduler.config.agenda_start||scheduler.date.agenda_legacy_start(scheduler._date);\n\t\tscheduler._max_date = scheduler.config.agenda_end||scheduler.date.add_agenda_legacy(scheduler._min_date, 1);\n\n\t\tset_full_view(mode);\n\t\tif (mode){\n\t\t\tscheduler._cols = null;\n\t\t\tscheduler._colsS = null;\n\t\t\tscheduler._table_view = true;\n\t\t\t//agenda tab activated\n\t\t\tfill_agenda_tab();\n\t\t} else {\n\t\t\tscheduler._table_view = false;\n\t\t\t//agenda tab de-activated\n\t\t}\n\t};\n});\n\n\n}","export default function(scheduler){\n\n\tscheduler.date.add_agenda = function(date, inc){\n\t\treturn scheduler.date.add(date, 1*inc, \"month\");\n\t};\n\t\n\tscheduler.templates.agenda_time = function(start,end,ev){\n\t\tif (ev._timed){\n\t\t\treturn `${this.event_date(start)} - ${this.event_date(end)}`;\n\t\t}else{\n\t\t\treturn scheduler.locale.labels.full_day;\n\t\t}\n\t};\n\tscheduler.templates.agenda_text = function(start,end,ev){\n\t\treturn ev.text;\n\t};\n\n\tconst dayDateToStr = scheduler.date.date_to_str(\"%F %j\");\n\tconst dayDowToStr = scheduler.date.date_to_str(\"%l\");\n\n\tscheduler.templates.agenda_day = function(date){ \n\t\treturn `<div class=\"dhx_agenda_day_date\">${dayDateToStr(date)}</div>\n\t\t<div class=\"dhx_agenda_day_dow\">${dayDowToStr(date)}</div>`;\n\t};\n\tscheduler.templates.agenda_date = function(start, end){ \n\t\treturn scheduler.templates.month_date(scheduler.getState().date); \n\t};\n\t\n\tscheduler.date.agenda_start=function(date){\n\t\treturn scheduler.date.month_start(new Date(date));\n\t};\n\n\tlet scrollTop = 0;\n\t\n\tscheduler.attachEvent(\"onTemplatesReady\",function() {\n\t\tvar old_dblclick_dhx_cal_data = scheduler.dblclick_dhx_cal_data;\n\t\tscheduler.dblclick_dhx_cal_data = function() {\n\t\t\tif (this._mode == \"agenda\") {\n\t\t\t\tif (!this.config.readonly && this.config.dblclick_create)\n\t\t\t\t\tthis.addEventNow();\n\t\t\t} else {\n\t\t\t\tif (old_dblclick_dhx_cal_data)\n\t\t\t\t\treturn old_dblclick_dhx_cal_data.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t\n\t\n\t\tvar old = scheduler.render_data;\n\t\tscheduler.render_data=function(evs){\n\t\t\tif (this._mode == \"agenda\")\n\t\t\t\tfill_agenda_tab();\n\t\t\telse\n\t\t\t\treturn old.apply(this,arguments);\n\t\t};\n\t\n\t\tvar old_render_view_data = scheduler.render_view_data;\n\t\tscheduler.render_view_data = function(){\n\t\t\tif(this._mode == \"agenda\") {\n\t\t\t\tscrollTop = scheduler._els[\"dhx_cal_data\"][0].scrollTop;\n\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = 0;\n\t\t\t}\n\t\t\treturn old_render_view_data.apply(this,arguments);\n\t\t};\n\n\t\tfunction fill_agenda_tab(){\n\t\t\tconst events = scheduler.get_visible_events();\n\t\t\tevents.sort(function(a,b){ return a.start_date>b.start_date?1:-1;});\n\n\t\t\tconst eventsInDays = {};\n\t\t\tlet currDate = scheduler.getState().min_date;\n\t\t\tconst maxDate = scheduler.getState().max_date;\n\t\t\twhile(currDate.valueOf() < maxDate.valueOf()){\n\t\t\t\teventsInDays[currDate.valueOf()] = [];\n\t\t\t\tcurrDate = scheduler.date.add(currDate, 1, \"day\");\n\t\t\t}\n\n\t\t\tlet anyEvents = false;\n\n\t\t\tevents.forEach((ev) => {\n\t\t\t\tlet eventStart = scheduler.date.day_start(new Date(ev.start_date)); \n\t\t\t\twhile (eventStart.valueOf() < ev.end_date.valueOf()) {\n\t\t\t\t\tif (eventsInDays[eventStart.valueOf()]) {\n\t\t\t\t\t\teventsInDays[eventStart.valueOf()].push(ev);\n\t\t\t\t\t\tanyEvents = true;\n\t\t\t\t\t}\n\t\t\t\t\teventStart = scheduler.date.day_start(scheduler.date.add(eventStart, 1, \"day\"));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(!anyEvents){\n\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = renderEmptyView();\n\t\t\t}else{\n\t\t\t\tlet html = \"\";\n\t\t\t\tfor(let day in eventsInDays){\n\t\t\t\t\tif(scheduler.ignore_agenda && scheduler.ignore_agenda(new Date(day*1))){\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\thtml += renderDay(new Date(day*1), eventsInDays[day]);\n\t\t\t\t}\n\n\t\t\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = html;\n\t\t\t}\n\n\t\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = scrollTop;\n\t\t\t\n\t\t\tlet t = scheduler._els[\"dhx_cal_data\"][0].querySelectorAll(\".dhx_cal_agenda_event_line\");\n\t\t\tscheduler._rendered = [];\n\t\t\tfor (var i = 0; i < t.length - 1; i++) {\n\t\t\t\tscheduler._rendered[i] = t[i];\n\t\t\t}\n\t\t}\n\n\t\n\n\t\tfunction renderEmptyView(){\n\t\t\treturn `<div class=\"dhx_cal_agenda_no_events\">${scheduler.locale.labels.agenda_tab}</div>`;\n\t\t}\n\n\t\tfunction renderDay(day, events) {\n\t\t\tif(!events.length){\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\tlet html = `\n<div class=\"dhx_cal_agenda_day\" data-date=\"${scheduler.templates.format_date(day)}\" data-day=\"${day.getDay()}\">\n\t<div class=\"dhx_cal_agenda_day_header\">${scheduler.templates.agenda_day(day)}</div>\n\t<div class=\"dhx_cal_agenda_day_events\">\n`;\n\n\t\t\tevents.forEach((calendarEvent) => {\n\t\t\t\thtml += renderOneEvent(day, calendarEvent);\n\t\t\t});\n\n\t\t\thtml += `</div></div>`;\n\t\t\treturn html;\n\t\t}\n\n\t\tfunction renderOneEvent(day, calendarEvent){\n\t\t\tconst dates = scheduler.templates.agenda_time(calendarEvent.start_date, calendarEvent.end_date, calendarEvent);\n\t\t\tconst selectedId = scheduler.getState().select_id;\n\t\t\tconst cls = scheduler.templates.event_class(calendarEvent.start_date, calendarEvent.end_date, calendarEvent);\n\t\t\tconst description = scheduler.templates.agenda_text(calendarEvent.start_date, calendarEvent.end_date, calendarEvent);\n\n\t\t\tlet style = \"\";\n\t\t\tif(calendarEvent.color || calendarEvent.textColor){\n\t\t\t\tconst bg = (calendarEvent.color ? (\"--dhx-scheduler-event-background:\" + calendarEvent.color + \";\") : \"\");\n\t\t\t\tconst color = (calendarEvent.textColor ? (\"--dhx-scheduler-event-color:\" + calendarEvent.textColor + \";\") : \"\");\n\t\t\t\tstyle = ` style=\"${bg}${color}\" `;\n\t\t\t}\n\n\t\t\treturn `<div class=\"dhx_cal_agenda_event_line ${cls||\"\"} ${calendarEvent.id == selectedId ? \"dhx_cal_agenda_event_line_selected\" : \"\"}\" ${style} ${scheduler.config.event_attribute}=\"${calendarEvent.id}\">\n\t<div class=\"dhx_cal_agenda_event_line_marker\"></div>\n\t<div class=\"dhx_cal_agenda_event_line_time\">${dates}</div>\n\t<div class=\"dhx_cal_agenda_event_line_text\">${description}</div>\n</div>`;\n\t\t}\n\t\n\t\tscheduler.agenda_view=function(mode){\n\t\t\tif (mode){\n\t\t\t\tscheduler._min_date = scheduler.config.agenda_start || scheduler.date.agenda_start(scheduler._date);\n\t\t\t\tscheduler._max_date = scheduler.config.agenda_end || scheduler.date.add_agenda(scheduler._min_date, 1);\n\t\t\t\tscheduler._cols = null;\n\t\t\t\tscheduler._colsS = null;\n\t\t\t\tscheduler._table_view = true;\n\n\t\t\t\tconst dateHeader = scheduler._getNavDateElement();\n\t\t\t\tdateHeader.innerHTML = scheduler.templates.agenda_date(scheduler._date);\n\t\t\t\t//agenda tab activated\n\t\t\t\tfill_agenda_tab();\n\t\t\t} else {\n\t\t\t\tscheduler._table_view = false;\n\t\t\t\t//agenda tab de-activated\n\t\t\t}\n\t\t};\n\t});\n\n\t// scheduler.attachEvent(\"onEventSelected\", function(id){\n\t// \tconst oldSelected = scheduler.$container.querySelectorAll(\".dhx_cal_agenda_event_line_selected\");\n\t// \toldSelected.forEach((el) => {\n\t// \t\tel.classList.remove(\"dhx_cal_agenda_event_line_selected\");\n\t// \t});\n\n\t// \tconst selected = scheduler.$container.querySelector(`[${scheduler.config.event_attribute}=\"${id}\"]`);\n\t// \tif(selected){\n\t// \t\tselected.classList.add(\"dhx_cal_agenda_event_line_selected\");\n\t// \t}\n\t// });\n\t\n\t\n}","export default function(scheduler){\n\n\tscheduler.config.all_timed = \"short\";\n\tscheduler.config.all_timed_month = false;\n\n\tscheduler.ext.allTimed = {\n\t\tisMainAreaEvent: function(ev){\n\t\t\treturn !!(ev._timed || scheduler.config.all_timed === true || (scheduler.config.all_timed == \"short\" && is_event_short(ev)) );\n\t\t}\n\t};\n\n\tvar is_event_short = function (ev) {\n\t\tif(!((ev.end_date - ev.start_date)/(1000*60*60) >= 24)){\n\t\t\treturn true;\n\t\t}\n\n\t\t// short event shouldn't disappear to multiday area during dnd-resize\n\t\tif(scheduler._drag_mode == \"resize\" && scheduler._drag_id == ev.id){\n\t\t\treturn true;\n\t\t}\n\t\treturn \tfalse;\n\t};\n\n\t// copy of usual events and recurring instances;\n\t// regular copy causes problems with recurrings which have series event as a prototype\n\tscheduler._safe_copy = function(event){\n\t\tvar proto = null,\n\t\t\tcopy = scheduler._copy_event(event);\n\t\tif(event.event_pid){\n\t\t\tproto = scheduler.getEvent(event.event_pid);\n\t\t}\n\n\t\tif (proto && proto.isPrototypeOf(event)) {\n\t\t\tdelete copy.event_length;\n\t\t\tdelete copy.event_pid;\n\t\t\tdelete copy.rec_pattern;\n\t\t\tdelete copy.rec_type;\n\t\t}\n\n\t\treturn copy;\n\t};\n\n\tvar old_prerender_events_line = scheduler._pre_render_events_line;\n\tvar old_prerender_events_table = scheduler._pre_render_events_table;\n\n\tvar prerender_events = function (evs, hold) {\n\t\tif (!this._table_view) {\n\t\t\treturn old_prerender_events_line.call(this, evs, hold);\n\t\t}\n\n\t\treturn old_prerender_events_table.call(this, evs, hold);\n\t};\n\n\tscheduler._pre_render_events_line = scheduler._pre_render_events_table = function(evs, hold){\n\t\tif (!this.config.all_timed ||\n\t\t\t(this._table_view && this._mode != \"month\") ||\n\t\t\t(this._mode == \"month\" && !this.config.all_timed_month))\n\t\t\treturn prerender_events.call(this, evs, hold);\n\n\t\tfor (var i=0; i < evs.length; i++) {\n\t\t\tvar ev=evs[i];\n\n\t\t\tif (ev._timed)\n\t\t\t\tcontinue;\n\n\t\t\tif (this.config.all_timed == \"short\") {\n\t\t\t\tif (!is_event_short(ev)) {\n\t\t\t\t\tif (this._mode != \"month\") {\n\t\t\t\t\t\tevs.splice(i--, 1);\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar ce = this._safe_copy(ev); // current event (event for one specific day) is copy of original with modified dates\n\t\t\tif(!ev._virtual){\n\t\t\t\tce._first_chunk = true;\n\t\t\t}else{\n\t\t\t\tce._first_chunk = false;\n\t\t\t}\n\t\t\tce._drag_resize = false;\n\t\t\tce._virtual = true;\n\t\t\tce.start_date = new Date(ce.start_date); // as lame copy doesn't copy date objects\n\n\t\t\tif (!isOvernightEvent(ev)) {\n\t\t\t\tce.end_date = new Date(ev.end_date);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tce.end_date = getNextDay(ce.start_date);\n\t\t\t\tif (this.config.last_hour != 24) { // if specific last_hour was set (e.g. 20)\n\t\t\t\t\tce.end_date = setDateTime(ce.start_date, this.config.last_hour);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar event_changed = false;\n\t\t\tif (ce.start_date < this._max_date && ce.end_date > this._min_date && ce.start_date < ce.end_date) {\n\t\t\t\tevs[i] = ce; // adding another event in collection\n\t\t\t\tevent_changed = true;\n\t\t\t}\n\t\t//\tif (ce.start_date > ce.end_date) {\n\t\t//\t\tevs.splice(i--,1);\n\t\t//\t}\n\n\t\t\tvar re = this._safe_copy(ev); // remaining event, copy of original with modified start_date (making range more narrow)\n\t\t\tre._virtual = true;\n\t\t\tre.end_date = new Date(re.end_date);\n\t\t\tif (re.start_date < this._min_date)\n\t\t\t\tre.start_date = setDateTime(this._min_date, this.config.first_hour);// as we are starting only with whole hours\n\t\t\telse\n\t\t\t\tre.start_date = setDateTime(getNextDay(ev.start_date), this.config.first_hour);\n\n\t\t\tif (re.start_date < this._max_date && re.start_date < re.end_date) {\n\t\t\t\tif (event_changed){\n\t\t\t\t\tevs.splice(i+1,0,re);//insert part\n\t\t\t\t}else {\n\t\t\t\t\tevs[i--] = re;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tre._last_chunk = false;\n\t\t\t}else{\n\t\t\t\tce._last_chunk = true;\n\t\t\t\tce._drag_resize = true;\n\t\t\t}\n\n\t\t}\n\t\t// in case of all_timed pre_render is not applied to the original event\n\t\t// so we need to force redraw in case of dnd\n\t\tvar redraw = (this._drag_mode == 'move')?false:hold;\n\t\treturn prerender_events.call(this, evs, redraw);\n\n\n\t\tfunction isOvernightEvent(ev){\n\t\t\tvar next_day = getNextDay(ev.start_date);\n\t\t\treturn (+ev.end_date > +next_day);\n\t\t}\n\t\tfunction getNextDay(date){\n\t\t\tvar next_day = scheduler.date.add(date, 1, \"day\");\n\t\t\tnext_day = scheduler.date.date_part(next_day);\n\t\t\treturn next_day;\n\t\t}\n\t\tfunction setDateTime(date, hours){\n\t\t\tvar val = scheduler.date.date_part(new Date(date));\n\t\t\tval.setHours(hours);\n\t\t\treturn val;\n\t\t}\n\t};\n\tvar old_get_visible_events = scheduler.get_visible_events;\n\tscheduler.get_visible_events = function(only_timed){\n\t\tif (!(this.config.all_timed && this.config.multi_day))\n\t\t\treturn old_get_visible_events.call(this, only_timed);\n\t\treturn old_get_visible_events.call(this, false); // only timed = false\n\t};\n\tscheduler.attachEvent(\"onBeforeViewChange\", function (old_mode, old_date, mode, date) {\n\t\tscheduler._allow_dnd = (mode == \"day\" || mode == \"week\" || scheduler.getView(mode));\n\t\treturn true;\n\t});\n\n\tscheduler._is_main_area_event = function(ev){\n\t\treturn scheduler.ext.allTimed.isMainAreaEvent(ev);\n\t};\n\n\tvar oldUpdate = scheduler.updateEvent;\n\tscheduler.updateEvent = function(id){\n\t\t// full redraw(update_render=true) messes events order while dnd.\n\t\t// individual redraw(update_render=false) of multiday event, which happens on select/unselect, expands event to full width of the cell and can be fixes only with full redraw.\n\t\t// so for now full redraw is always enabled for not-dnd updates\n\t\tvar ev = scheduler.getEvent(id);\n\t\tvar fullRedrawNeeded;\n\t\tvar initial;\n\t\tif(ev) {\n\t\t\tfullRedrawNeeded = (scheduler.config.all_timed && !(scheduler.isOneDayEvent(scheduler._events[id]) || scheduler.getState().drag_id));\n\t\t\tif (fullRedrawNeeded) {\n\t\t\t\tinitial = scheduler.config.update_render;\n\t\t\t\tscheduler.config.update_render = true;\n\t\t\t}\n\t\t}\n\t\toldUpdate.apply(scheduler, arguments);\n\n\t\tif(ev) {\n\t\t\tif (fullRedrawNeeded) {\n\t\t\t\tscheduler.config.update_render = initial;\n\t\t\t}\n\t\t}\n\t};\n\n}","export default function(scheduler){\n\nlet temp_section;\nlet before;\n\nscheduler.config.collision_limit = 1;\n\nfunction _setTempSection(event_id) { // for custom views (matrix, timeline, units)\n\tconst checked_mode = scheduler._get_section_view();\n\tif(checked_mode && event_id){\n\t\ttemp_section = scheduler.getEvent(event_id)[scheduler._get_section_property()];\n\t}\n}\n\nscheduler.attachEvent(\"onBeforeDrag\",function(id){\n\t_setTempSection(id);\n\treturn true;\n});\nscheduler.attachEvent(\"onBeforeLightbox\",function(id){\n\tconst ev = scheduler.getEvent(id);\n\tbefore = [ev.start_date, ev.end_date];\n\t_setTempSection(id);\n\treturn true;\n});\nscheduler.attachEvent(\"onEventChanged\",function(id){\n\tif (!id || !scheduler.getEvent(id)) return true;\n\tconst ev = scheduler.getEvent(id);\n\tif (!scheduler.checkCollision(ev)){\n\t\tif (!before) return false;\n\t\tev.start_date = before[0];\n\t\tev.end_date = before[1];\n\t\tev._timed=this.isOneDayEvent(ev);\n\t}\n\treturn true;\n});\nscheduler.attachEvent(\"onBeforeEventChanged\",function(ev,e,is_new){\n\treturn scheduler.checkCollision(ev);\n});\nscheduler.attachEvent(\"onEventAdded\",function(id,ev) {\n\tconst result = scheduler.checkCollision(ev);\n\tif (!result)\n\t\tscheduler.deleteEvent(id);\n});\nscheduler.attachEvent(\"onEventSave\",function(id, edited_ev, is_new){\n\tedited_ev = scheduler._lame_clone(edited_ev);\n\tedited_ev.id = id;\n\n\t//lightbox may not have 'time' section\n\tif(!(edited_ev.start_date && edited_ev.end_date)){\n\t\tconst ev = scheduler.getEvent(id);\n\t\tedited_ev.start_date = new Date(ev.start_date);\n\t\tedited_ev.end_date = new Date(ev.end_date);\n\t}\n\n\tif((edited_ev.rrule && !edited_ev.recurring_event_id) || edited_ev.rec_type){\n\t\tscheduler._roll_back_dates(edited_ev);\n\t}\n\treturn scheduler.checkCollision(edited_ev); // in case user creates event on one date but then edited it another\n});\n\nscheduler._check_sections_collision = function(first, second){\n\tconst map_to = scheduler._get_section_property();\n\tif (first[map_to] == second[map_to] && first.id != second.id)\n\t\treturn true;\n\treturn false;\n};\n\nscheduler.checkCollision = function(ev) {\n\tlet evs = [];\n\tconst collision_limit = scheduler.config.collision_limit;\n\n\tif (ev.rec_type) {\n\t\tlet evs_dates = scheduler.getRecDates(ev);\n\t\tfor (let k = 0; k < evs_dates.length; k++) {\n\t\t\tlet tevs = scheduler.getEvents(evs_dates[k].start_date,evs_dates[k].end_date);\n\t\t\tfor (let j = 0; j < tevs.length; j++) {\n\t\t\t\tif ((tevs[j].event_pid || tevs[j].id) != ev.id)\n\t\t\t\t\tevs.push(tevs[j]);\n\t\t\t}\n\t\t}\n\t} else if (ev.rrule) {\n\t\tlet evs_dates = scheduler.getRecDates(ev);\n\t\tfor (let k = 0; k < evs_dates.length; k++) {\n\t\t\tlet tevs = scheduler.getEvents(evs_dates[k].start_date,evs_dates[k].end_date);\n\t\t\tfor (let j = 0; j < tevs.length; j++) {\n\t\t\t\tif ((String(tevs[j].id).split(\"#\")[0] || tevs[j].id) != ev.id)\n\t\t\t\t\tevs.push(tevs[j]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tevs = scheduler.getEvents(ev.start_date, ev.end_date);\n\t\tfor (let i = 0; i < evs.length; i++) {\n\t\t\tlet concurrent = evs[i];\n\t\t\t// for recurring legacy\n\t\t\tif (concurrent.id == ev.id || (concurrent.event_length && [concurrent.event_pid, concurrent.event_length].join(\"#\") == ev.id)) {\n\t\t\t\tevs.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//for recurring rrule\n\t\t\tif (concurrent.recurring_event_id && [concurrent.recurring_event_id, concurrent._pid_time].join(\"#\") == ev.id) {\n\t\t\t\tevs.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tconst checked_mode = scheduler._get_section_view();\n\tconst map_to = scheduler._get_section_property();\n\n\tlet single = true;\n\tif (checked_mode) { // custom view\n\t\tlet count = 0;\n\n\t\tfor (let i = 0; i < evs.length; i++){\n\t\t\tif (evs[i].id != ev.id && this._check_sections_collision(evs[i], ev))\n\t\t\t\tcount++;\n\t\t}\n\n\t\tif (count >= collision_limit) {\n\n\t\t\tsingle = false;\n\t\t}\n\t}\n\telse {\n\t\tif ( evs.length >= collision_limit )\n\t\t\tsingle = false;\n\t}\n\tif (!single) {\n\t\tlet res = !scheduler.callEvent(\"onEventCollision\",[ev,evs]);\n\t\tif (!res) {\n\t\t\tev[map_to] = temp_section||ev[map_to]; // from _setTempSection for custom views\n\t\t}\n\t\treturn res;\n\t}\n\treturn single;\n\n};\n\n}","export default function(scheduler){\n\n\tscheduler.config.container_autoresize = true;\n\tscheduler.config.month_day_min_height = 90;\n\tscheduler.config.min_grid_size = 25;\n\tscheduler.config.min_map_size = 400;\n\n\tvar old_pre_render_event = scheduler._pre_render_events;\n\n\t//need for temporary disabling without modifying public config\n\tvar active = true;\n\tvar total_height = 0;\n\tvar multiday_height = 0;\n\n\tscheduler._pre_render_events = function(evs, hold) {\n\t\tif (!(scheduler.config.container_autoresize && active)) {\n\t\t\treturn old_pre_render_event.apply(this, arguments);\n\t\t}\n\n\t\tvar hb = this.xy.bar_height;\n\t\tvar h_old = this._colsS.heights;\n\t\tvar h = this._colsS.heights = [0, 0, 0, 0, 0, 0, 0];\n\t\tvar data = this._els[\"dhx_cal_data\"][0];\n\n\t\tif (!this._table_view)\n\t\t\tevs = this._pre_render_events_line(evs, hold); //ignore long events for now\n\t\telse\n\t\t\tevs = this._pre_render_events_table(evs, hold);\n\n\t\tif (this._table_view) {\n\t\t\tif (hold){\n\t\t\t\tthis._colsS.heights = h_old;\n\t\t\t} else {\n\t\t\t\tvar evl = data.firstChild;\n\t\t\t\tconst rows = evl.querySelectorAll(\".dhx_cal_month_row\");\n\t\t\t\tif (rows && rows.length) {\n\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\n\t\t\t\t\t\th[i]++;\n\n\t\t\t\t\t\tif ((h[i]) * hb > this._colsS.height - this.xy.month_head_height) { // 22 - height of cell's header\n\t\t\t\t\t\t\t//we have overflow, update heights\n\t\t\t\t\t\t\tvar cells = rows[i].querySelectorAll(\".dhx_cal_month_cell\");\n\n\t\t\t\t\t\t\tvar cHeight = this._colsS.height - this.xy.month_head_height;\n\t\t\t\t\t\t\tif(this.config.max_month_events*1 !== this.config.max_month_events || h[i] <= this.config.max_month_events){\n\t\t\t\t\t\t\t\tcHeight = h[i] * hb;\n\t\t\t\t\t\t\t}else if( (this.config.max_month_events + 1) * hb > this._colsS.height - this.xy.month_head_height){\n\t\t\t\t\t\t\t\tcHeight = (this.config.max_month_events + 1) * hb;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trows[i].style.height = (cHeight + this.xy.month_head_height) + \"px\";\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\tfor (var j = 0; j < cells.length; j++) {\n\t\t\t\t\t\t\t\tcells[j].childNodes[1].style.height = cHeight + \"px\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\th[i] = (h[i - 1] || 0) + cells[0].offsetHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\th[i] = (h[i - 1] || 0) + rows[i].querySelectorAll(\".dhx_cal_month_cell\")[0].offsetHeight;\n\t\t\t\t\t}\n\t\t\t\t\th.unshift(0);\n\t\t\t\t\tif (evl.parentNode.offsetHeight < evl.parentNode.scrollHeight && !evl._h_fix) {\n\t\t\t\t\t\t//we have v-scroll, decrease last day cell\n\n\t\t\t\t\t\t// NO CHECK SHOULD BE MADE ON VERTICAL SCROLL\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!evs.length && this._els[\"dhx_multi_day\"][0].style.visibility == \"visible\")\n\t\t\t\t\t\th[0] = -1;\n\t\t\t\t\tif (evs.length || h[0] == -1) {\n\t\t\t\t\t\t//shift days to have space for multiday events\n\t\t\t\t\t\t//var childs = evl.parentNode.childNodes;\n\t\t\t\t\t\tvar dh = ((h[0] + 1) * hb + 1); // +1 so multiday events would have 2px from top and 2px from bottom by default\n\t\t\t\t\t\tif(multiday_height != dh + 1) {\n\t\t\t\t\t\t\tthis._obj.style.height = (total_height - multiday_height + dh - 1) + \"px\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdh += \"px\";\n\t\t\t\t\t\tconst navHeight = this._els[\"dhx_cal_navline\"][0].offsetHeight;\n\t\t\t\t\t\tconst headerHeight =  this._els[\"dhx_cal_header\"][0].offsetHeight;\n\t\t\t\t\t\tdata.style.height = (this._obj.offsetHeight - navHeight - headerHeight - (this.xy.margin_top || 0)) + 'px';\n\t\t\t\t\t\tvar last = this._els[\"dhx_multi_day\"][0];\n\t\t\t\t\t\tlast.style.height = dh;\n\t\t\t\t\t\tlast.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\n\t\t\t\t\t\tlast.style.display = (h[0] == -1 ? \"none\" : \"\");\n\t\t\t\t\t\tlast = this._els[\"dhx_multi_day\"][1];\n\t\t\t\t\t\tlast.style.height = dh;\n\t\t\t\t\t\tlast.style.visibility = (h[0] == -1 ? \"hidden\" : \"visible\");\n\t\t\t\t\t\tlast.style.display = (h[0] == -1 ? \"none\" : \"\");\n\n\t\t\t\t\t\tlast.className = h[0] ? \"dhx_multi_day_icon\" : \"dhx_multi_day_icon_small\";\n\t\t\t\t\t\tthis._dy_shift = (h[0] + 1) * hb;\n\t\t\t\t\t\th[0] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn evs;\n\t};\n\n\tvar checked_divs = [\"dhx_cal_navline\", \"dhx_cal_header\", \"dhx_multi_day\", \"dhx_cal_data\"];\n\tvar updateContainterHeight = function(is_repaint) {\n\t\ttotal_height = 0;\n\t\tfor (var i = 0; i < checked_divs.length; i++) {\n\n\t\t\tvar className = checked_divs[i];\n\t\t\tvar checked_div = (scheduler._els[className]) ? scheduler._els[className][0] : null;\n\t\t\tvar height = 0;\n\t\t\tswitch (className) {\n\t\t\t\tcase \"dhx_cal_navline\":\n\t\t\t\tcase \"dhx_cal_header\":\n\t\t\t\t\theight = checked_div.offsetHeight;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"dhx_multi_day\":\n\t\t\t\t\theight = (checked_div) ? checked_div.offsetHeight - 1 : 0;\n\t\t\t\t\tmultiday_height = height;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"dhx_cal_data\":\n\t\t\t\t\tvar mode = scheduler.getState().mode;\n\n\t\t\t\t\tif(checked_div.childNodes[1] && mode != \"month\") {\n\t\t\t\t\t\tlet maxHeight = 0;\n\t\t\t\t\t\tfor(let i = 0; i < checked_div.childNodes.length; i++){\n\t\t\t\t\t\t\tif(checked_div.childNodes[i].offsetHeight > maxHeight){\n\t\t\t\t\t\t\t\tmaxHeight = checked_div.childNodes[i].offsetHeight;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\theight = maxHeight;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\theight = Math.max(checked_div.offsetHeight - 1, checked_div.scrollHeight);\n\t\t\t\t\t}\n\t\t\t\t\tif (mode == \"month\") {\n\t\t\t\t\t\tif (scheduler.config.month_day_min_height && !is_repaint) {\n\t\t\t\t\t\t\tvar rows_length = checked_div.querySelectorAll(\".dhx_cal_month_row\").length;\n\t\t\t\t\t\t\theight = rows_length * scheduler.config.month_day_min_height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (is_repaint) {\n\t\t\t\t\t\t\tchecked_div.style.height = height + \"px\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (mode == \"year\"){\n\t\t\t\t\t\theight = 190 * scheduler.config.year_y;\n\t\t\t\t\t}\n\t\t\t\t\telse if(mode == \"agenda\"){\n\t\t\t\t\t\theight = 0;\n\t\t\t\t\t\t// GS-2790: if there is no events the height should have the default value\n\t\t\t\t\t\tif(checked_div.children && checked_div.children.length){\n\t\t\t\t\t\t\tif(checked_div.children.length === 1 && checked_div.children[0].classList.contains(\"dhx_cal_agenda_no_events\")){\n\t\t\t\t\t\t\t\theight = 300;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfor(var j = 0; j < checked_div.children.length; j++){\n\t\t\t\t\t\t\t\t\theight += checked_div.children[j].offsetHeight;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(height + 2 < scheduler.config.min_grid_size){\n\t\t\t\t\t\t\theight = scheduler.config.min_grid_size;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\theight += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (mode == \"week_agenda\"){\n\t\t\t\t\t\tvar min_height = scheduler.xy.week_agenda_scale_height + scheduler.config.min_grid_size,\n\t\t\t\t\t\t\tcur_height;\n\n\t\t\t\t\t\tvar column;\n\t\t\t\t\t\tfor(var k = 0; k < checked_div.childNodes.length; k++){\n\t\t\t\t\t\t\tcolumn = checked_div.childNodes[k];\n\t\t\t\t\t\t\tfor(var j = 0; j < column.childNodes.length; j++) {\n\t\t\t\t\t\t\t\tvar innerHeight = 0,\n\t\t\t\t\t\t\t\t\teventsContainer = column.childNodes[j].childNodes[1];\n\n\t\t\t\t\t\t\t\tfor(var g =0; g < eventsContainer.childNodes.length; g++){\n\t\t\t\t\t\t\t\t\tinnerHeight += eventsContainer.childNodes[g].offsetHeight;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcur_height = innerHeight + scheduler.xy.week_agenda_scale_height;\n\t\t\t\t\t\t\t\tcur_height = (k == 1 && (j == 2 || j == 3)) ? cur_height * 2 : cur_height; // for last two cells;\n\n\t\t\t\t\t\t\t\tif (cur_height > min_height) {\n\t\t\t\t\t\t\t\t\tmin_height = cur_height;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\theight = min_height * 3;\n\t\t\t\t\t}\n\t\t\t\t\telse if(mode == \"map\") {\n\t\t\t\t\t\theight = 0;\n\t\t\t\t\t\tvar evs = checked_div.querySelectorAll(\".dhx_map_line\");\n\n\t\t\t\t\t\tfor (var j = 0; j < evs.length; j++) {\n\t\t\t\t\t\t\theight += evs[j].offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (height + 2 < scheduler.config.min_map_size) {\n\t\t\t\t\t\t\theight = scheduler.config.min_map_size;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\theight += 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(scheduler._gridView) {\n\t\t\t\t\t\theight = 0;\n\n\t\t\t\t\t\tif (checked_div.childNodes[1].childNodes[0].childNodes && checked_div.childNodes[1].childNodes[0].childNodes.length) {\n\t\t\t\t\t\t\tvar evs = checked_div.childNodes[1].childNodes[0].childNodes[0].childNodes;\n\n\t\t\t\t\t\t\tfor (var j = 0; j < evs.length; j++) {\n\t\t\t\t\t\t\t\theight += evs[j].offsetHeight;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\theight += 2;\n\n\t\t\t\t\t\t\tif(height < scheduler.config.min_grid_size){\n\t\t\t\t\t\t\t\theight = scheduler.config.min_grid_size;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\theight = scheduler.config.min_grid_size;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (scheduler.matrix && scheduler.matrix[mode]) {\n\t\t\t\t\t\tif (is_repaint) {\n\t\t\t\t\t\t\theight += 0;\n\t\t\t\t\t\t\tchecked_div.style.height = height + \"px\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\theight = 0;\n\t\t\t\t\t\t\tvar cfg = scheduler.matrix[mode];\n\t\t\t\t\t\t\tvar rows = cfg.y_unit;\n\t\t\t\t\t\t\tfor(var r=0; r < rows.length; r++){\n\t\t\t\t\t\t\t\theight += cfg.getSectionHeight(rows[r].key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Check and add extra height to avoid events hiding by the horizontal scrollbar\n\t\t\t\t\t\t\tif(scheduler.$container.clientWidth != scheduler.$container.scrollWidth){\n\t\t\t\t\t\t\t\theight += getScrollSize();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\theight -= 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (mode == \"day\" || mode == \"week\" || (scheduler._props && scheduler._props[mode])) {\n\t\t\t\t\t\theight += 2;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\theight += 1;\n\t\t\ttotal_height += height;\n\t\t}\n\t\tscheduler._obj.style.height = (total_height) + \"px\";\n\n\t\tif (!is_repaint)\n\t\t\tscheduler.updateView();\n\t};\n\n\tfunction callUpdate(){\n\t\tactive = false;\n\t\tscheduler.callEvent(\"onAfterSchedulerResize\", []);\n\t\tactive = true;\n\t}\n\n\tvar conditionalUpdateContainerHeight = function() {\n\t\tif(!(scheduler.config.container_autoresize && active))\n\t\t\treturn true;\n\n\t\tvar mode = scheduler.getState().mode;\n\n\t\tif(!mode) {\n\t\t\treturn true;\n\t\t}\n\n\t\tvar asyncRepaint = window.requestAnimationFrame || window.setTimeout;\n\t\tvar scrollTop = document.documentElement.scrollTop;\n\n\t\tasyncRepaint(function() {\n\t\t\tif(scheduler.$destroyed || !scheduler.$initialized){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdateContainterHeight();\n\t\t});\n\n\t\tif ( (scheduler.matrix && scheduler.matrix[mode]) || mode == \"month\") {\n\t\t\tasyncRepaint(function() {\n\t\t\t\tif(scheduler.$destroyed || !scheduler.$initialized){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdateContainterHeight(true);\n\t\t\t\tdocument.documentElement.scrollTop = scrollTop;\n\t\t\t\tcallUpdate();\n\t\t\t}, 1);\n\t\t}else{\n\t\t\tcallUpdate();\n\t\t}\n\t};\n\n\tscheduler.attachEvent(\"onBeforeViewChange\", function(){\n\t\tvar autosizeEnabled = scheduler.config.container_autoresize;\n\t\tif(!scheduler.xy.$original_scroll_width){\n\t\t\tscheduler.xy.$original_scroll_width = scheduler.xy.scroll_width;\n\t\t}\n\n\t\tscheduler.xy.scroll_width = autosizeEnabled ? 0 : scheduler.xy.$original_scroll_width;\n\n\t\tif(scheduler.matrix){\n\t\t\tfor(var i in scheduler.matrix){\n\t\t\t\tvar timeline = scheduler.matrix[i];\n\t\t\t\tif(!timeline.$original_section_autoheight){\n\t\t\t\t\ttimeline.$original_section_autoheight = timeline.section_autoheight;\n\t\t\t\t}\n\t\t\t\tif(autosizeEnabled){\n\t\t\t\t\ttimeline.section_autoheight = false;\n\t\t\t\t}else{\n\t\t\t\t\ttimeline.section_autoheight = timeline.$original_section_autoheight;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onViewChange\", conditionalUpdateContainerHeight);\n\tscheduler.attachEvent(\"onXLE\", conditionalUpdateContainerHeight);\n\tscheduler.attachEvent(\"onEventChanged\", conditionalUpdateContainerHeight);\n\tscheduler.attachEvent(\"onEventCreated\", conditionalUpdateContainerHeight);\n\tscheduler.attachEvent(\"onEventAdded\", conditionalUpdateContainerHeight);\n\tscheduler.attachEvent(\"onEventDeleted\", conditionalUpdateContainerHeight);\n\tscheduler.attachEvent(\"onAfterSchedulerResize\", conditionalUpdateContainerHeight);\n\tscheduler.attachEvent(\"onClearAll\", conditionalUpdateContainerHeight);\n\n\t//disable container autoresize when expanded\n\tscheduler.attachEvent(\"onBeforeExpand\", function(){\n\t\tactive = false;\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onBeforeCollapse\", function(){\n\t\tactive = true;\n\t\treturn true;\n\t});\n\t// helper function\n\tfunction getScrollSize() {\n\t\tvar div = document.createElement(\"div\");\n\t\tdiv.style.cssText = \"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\n\n\t\tdocument.body.appendChild(div);\n\t\tvar size = div.offsetWidth - div.clientWidth;\n\t\tdocument.body.removeChild(div);\n\t\treturn size;\n\t}\n\n\n}","export default function(scheduler){\n\tfunction setCookie(name,cookie_param,value) {\n\t\tvar str = name + \"=\" + value +  (cookie_param?(\"; \"+cookie_param):\"\");\n\t\tdocument.cookie = str;\n\t}\n\tfunction getCookie(name) {\n\t\tvar search = name + \"=\";\n\t\tif (document.cookie.length > 0) {\n\t\t\tvar offset = document.cookie.indexOf(search);\n\t\t\tif (offset != -1) {\n\t\t\t\toffset += search.length;\n\t\t\t\tvar end = document.cookie.indexOf(\";\", offset);\n\t\t\t\tif (end == -1)\n\t\t\t\t\tend = document.cookie.length;\n\t\t\t\treturn document.cookie.substring(offset, end);\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tfunction getCookieName(scheduler) {\n\t\treturn (scheduler._obj.id || \"scheduler\") + \"_settings\";\n\t}\n\n\tvar first = true;\n\tscheduler.attachEvent(\"onBeforeViewChange\",function(oldMode,oldDate,mode,date){\n\t\t// if Url plugin is enabled - explicit url values should have more priority than cookies\n\t\tif (first && scheduler._get_url_nav){\n\t\t\tvar urlNavigationPlugin = scheduler._get_url_nav();\n\t\t\tif(urlNavigationPlugin.date || urlNavigationPlugin.mode || urlNavigationPlugin.event){\n\t\t\t\tfirst = false;\n\t\t\t}\n\t\t}\n\n\t\tvar cookie = getCookieName(scheduler);\n\n\t\tif (first){\n\t\t\tfirst = false;\n\t\t\tvar schedulerCookie = getCookie(cookie);\n\t\t\tif (schedulerCookie){\n\n\t\t\t\tif(!scheduler._min_date){\n\t\t\t\t\t//otherwise scheduler will have incorrect date until timeout\n\t\t\t\t\t//it can cause js error with 'onMouseMove' handler of key_nav.js\n\t\t\t\t\tscheduler._min_date = date;\n\t\t\t\t}\n\n\t\t\t\tschedulerCookie = unescape(schedulerCookie).split(\"@\");\n\t\t\t\tschedulerCookie[0] = this._helpers.parseDate(schedulerCookie[0]);\n\t\t\t\tvar view = this.isViewExists(schedulerCookie[1]) ? schedulerCookie[1] : mode,\n\t\t\t\t\tdate = !isNaN(+schedulerCookie[0]) ? schedulerCookie[0] : date;\n\n\t\t\t\twindow.setTimeout(function(){\n\t\t\t\t\tif(scheduler.$destroyed){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tscheduler.setCurrentView(date,view);\n\t\t\t\t},1);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onViewChange\", function (newMode , newDate){\n\t\tvar cookie = getCookieName(scheduler);\n\t\tvar text = escape(this._helpers.formatDate(newDate)+\"@\"+(newMode));\n\t\tsetCookie(cookie,\"expires=Sun, 31 Jan 9999 22:00:00 GMT\",text);\n\t});\n\n\t// As we are blocking first render above there could be a problem in case of dynamic loading and rendering of visible data in general ('from'/'to' won't be defined)\n\tvar old_load = scheduler._load;\n\tscheduler._load = function() {\n\t\tvar args = arguments;\n\n\t\tif (!scheduler._date) {\n\t\t\tvar that = this;\n\t\t\twindow.setTimeout(function() {\n\t\t\t\told_load.apply(that, args);\n\t\t\t},1);\n\t\t} else {\n\t\t\told_load.apply(this, args);\n\t\t}\n\t};\n}","\nimport virtual_events_helpers from \"../core/virtual_events_helpers\";\n\nexport default function(scheduler){\n\tvirtual_events_helpers(scheduler);\n\tvar old_timeline = scheduler.createTimelineView;\n\n\tscheduler.createTimelineView = function (config) {\n\t\tif(config.render != 'days'){\n\t\t\told_timeline.apply(this, arguments);\n\t\t\treturn;\n\t\t}\n\n\t\tvar name = config.name;\n\n\t\tvar property = config.y_property = \"timeline-week\" + name;\n\t\tconfig.y_unit = [];\n\t\tconfig.render = \"bar\";\n\t\tconfig.days = config.days || 7;\n\n\t\told_timeline.call(this, config);\n\n\t\tscheduler.templates[name + \"_scalex_class\"] = function(){};\n\t\tscheduler.templates[name + \"_scaley_class\"] = function(){};\n\t\tscheduler.templates[name+\"_scale_label\"] = function(section_id, section_label, section_options){\n\t\t\treturn scheduler.templates.day_date(section_label);\n\t\t};\n\n\t\tscheduler.date[name + \"_start\"] = function (date) {\n\t\t\tdate = scheduler.date.week_start(date);\n\t\t\tdate = scheduler.date.add(date, config.x_step*config.x_start, config.x_unit);\n\t\t\treturn date;\n\t\t};\n\t\tscheduler.date[\"add_\" + name] = function (date, inc) {\n\t\t\treturn scheduler.date.add(date, inc*config.days, \"day\");\n\t\t};\n\n\t\tfunction initSections(){\n\t\t\tvar date = new Date(scheduler.getState().date);\n\t\t\tvar ds = scheduler.date[name + \"_start\"](date);\n\n\t\t\tds = scheduler.date.date_part(ds);\n\n\t\t\tvar list = [];\n\t\t\tvar obj = scheduler.matrix[name];\n\t\t\tobj.y_unit = list;\n\t\t\tobj.order = {};\n\n\t\t\tfor (var i = 0; i < config.days; i++) {\n\t\t\t\tlist.push({ key: +ds, label: ds });\n\n\t\t\t\tobj.order[obj.y_unit[i].key] = i;\n\t\t\t\tds = scheduler.date.add(ds, 1, \"day\");\n\t\t\t}\n\t\t}\n\t\tvar renderMatrix = scheduler._renderMatrix;\n\t\tscheduler._renderMatrix = function(mode, refresh){\n\t\t\tif(mode){\n\t\t\t\tinitSections();\n\t\t\t}\n\t\t\trenderMatrix.apply(this, arguments);\n\t\t};\n\n\t\t//copy all properties(not only hasOwnProperty)\n\t\tfunction copy_values(ev) {\n\t\t\tvar res = {};\n\t\t\tfor (var i in ev)\n\t\t\t\tres[i] = ev[i];\n\t\t\treturn res;\n\t\t}\n\t\t//ignore fake section id in week view\n\t\tvar oldCollision = scheduler.checkCollision;\n\t\tscheduler.checkCollision = function (ev) {\n\t\t\tif (ev[property]) {\n\t\t\t\tvar ev = copy_values(ev);\n\t\t\t\tdelete ev[property];\n\t\t\t}\n\t\t\treturn oldCollision.apply(scheduler, [ev]);\n\t\t};\n\n\n\t\tscheduler.attachEvent(\"onBeforeDrag\", function (id, drag_mode, e) {\n\t\t\tvar trg = e.target || e.srcElement;\n\t\t\tvar className = scheduler._getClassName(trg);\n\t\t\tif (drag_mode == 'resize') {\n\t\t\t\tif (className.indexOf(\"dhx_event_resize_end\") < 0) {\n\t\t\t\t\tscheduler._w_line_drag_from_start = true;\n\t\t\t\t} else {\n\t\t\t\t\tscheduler._w_line_drag_from_start = false;\n\t\t\t\t}\n\t\t\t}else if(drag_mode == 'move'){\n\t\t\t\tif (className.indexOf(\"no_drag_move\") >= 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t\tvar old_mouse = scheduler[\"mouse_\" + name];\n\t\tscheduler[\"mouse_\" + name] = function (pos) {\n\t\t\tvar move_delta;\n\t\t\t\tif(this._drag_event)\n\t\t\t\tmove_delta = this._drag_event._move_delta;\n\t\t\t\t\n\t\t\tvar obj = scheduler.matrix[this._mode];\n\n\t\t\tif (obj.scrollable  && !pos.converted) {\n\t\t\t\tpos.converted =1;\n\t\t\t\tpos.x -= - obj._x_scroll;\n\t\t\t\tpos.y += obj._y_scroll;\n\t\t\t} \n\n\t\t\tif(move_delta === undefined && scheduler._drag_mode == \"move\"){\n\t\t\t\t\n\t\t\t\tvar pos_copy = {y : pos.y};\n\t\t\t\tscheduler._resolve_timeline_section(obj, pos_copy);\n\t\t\t\tvar x = pos.x - obj.dx;\n\n\t\t\t\tvar end_date = new Date(pos_copy.section);\n\t\t\t\tset_time_part(scheduler._timeline_drag_date(obj, x), end_date);\n\t\t\t\tvar drag_event = scheduler._drag_event;\n\n\t\t\t\tvar ev = this.getEvent(this._drag_id);\n\t\t\t\tif(ev){\n\t\t\t\t\tdrag_event._move_delta = (ev.start_date-end_date)/60000;\n\t\t\t\t\tif (this.config.preserve_length && pos._ignores){\n\t\t\t\t\t\tdrag_event._move_delta = this._get_real_event_length(ev.start_date,end_date, obj);\n\t\t\t\t\t\tdrag_event._event_length = this._get_real_event_length(ev.start_date,ev.end_date, obj);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar pos = old_mouse.apply(scheduler, arguments);\n\t\t\tif (scheduler._drag_mode && scheduler._drag_mode != \"move\") {\n\n\t\t\t\tvar dat = null;\n\t\t\t\tif (scheduler._drag_event && scheduler._drag_event['timeline-week' + name]) {\n\t\t\t\t\tdat = new Date(scheduler._drag_event['timeline-week' + name]);\n\t\t\t\t} else {\n\t\t\t\t\tdat = new Date(pos.section);\n\t\t\t\t}\n\n\t\t\t\tpos.y += Math.round((dat - scheduler.date.date_part(new Date(scheduler._min_date))) / (1000 * 60 * this.config.time_step));\n\n\t\t\t\tif (scheduler._drag_mode == \"resize\") {\n\n\t\t\t\t\tpos.resize_from_start = scheduler._w_line_drag_from_start;\n\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (scheduler._drag_event) {\n\t\t\t\t\tvar days_y = Math.floor(Math.abs(pos.y / (24 * 60 / scheduler.config.time_step)));\n\t\t\t\t\tdays_y *= pos.y > 0 ? 1 : -1;\n\t\t\t\t\tpos.y = pos.y % (24 * 60 / scheduler.config.time_step);\n\t\t\t\t\tvar st_date = scheduler.date.date_part(new Date(scheduler._min_date));\n\t\t\t\t\tif (st_date.valueOf() != new Date(pos.section).valueOf()) {\n\t\t\t\t\t\tpos.x = Math.floor((pos.section - st_date) / (24 * 60 * 60000));\n\t\t\t\t\t\tpos.x += days_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn pos;\n\t\t};\n\n\t\tscheduler.attachEvent(\"onEventCreated\", function (id, e) {\n\t\t\tif (scheduler._events[id]) {\n\t\t\t\tdelete scheduler._events[id][property];//section of week-timeline is generated during rendering. storing it with data-items causes side-effects in collision ext\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\tscheduler.attachEvent(\"onBeforeEventChanged\", function (ev, e, flag, ev_old) {\n\t\t\tif (scheduler._events[ev.id]) {\n\t\t\t\tdelete scheduler._events[ev.id][property];//section of week-timeline is generated during rendering. storing it with data-items causes side-effects in collision ext\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\tvar oldUpdateTimelineSection = scheduler._update_timeline_section;\n\t\tscheduler._update_timeline_section = function(action){\n\t\t\tvar event, storedEv;\n\t\t\tif (this._mode == name) {\n\t\t\t\tevent = action.event;\n\t\t\t\tif(event){\n\t\t\t\t\tstoredEv = scheduler._get_copied_event(event.id, scheduler.date.day_start(new Date(event.start_date.valueOf())));\n\t\t\t\t\tif(storedEv){\n\t\t\t\t\t\taction.event._sorder = storedEv._sorder;\n\t\t\t\t\t\taction.event._count = storedEv._count;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\toldUpdateTimelineSection.apply(this, arguments);\n\t\t\tif(event && storedEv){\n\t\t\t\tstoredEv._count = event._count;\n\t\t\t\tstoredEv._sorder = event._sorder;\n\t\t\t}\n\t\t};\n\n\t\tvar oldRender = scheduler.render_view_data;\n\t\tscheduler.render_view_data = function (evs, hold) {\n\t\t\tif (this._mode == name) {\n\t\t\t\tif (evs) {\n\t\t\t\t\tevs = week_line_dates(evs);\n\t\t\t\t\tscheduler._restore_render_flags(evs);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn oldRender.apply(scheduler, [evs, hold]);\n\t\t};\n\t\tvar old_get_evs = scheduler.get_visible_events;\n\t\tscheduler.get_visible_events = function () {\n\t\t\tif (this._mode == name) {\n\t\t\t\tthis._clear_copied_events();\n\t\t\t\tscheduler._max_date = scheduler.date.date_part(scheduler.date.add(scheduler._min_date, config.days, \"day\"));\n\t\t\t\tvar evs = old_get_evs.apply(scheduler, arguments);\n\n\t\t\t\tevs = week_line_dates(evs);\n\t\t\t\tscheduler._register_copies_array(evs);\n\t\t\t\treturn evs;\n\t\t\t}\n\t\t\treturn old_get_evs.apply(scheduler, arguments);\n\t\t};\n\n\t\tvar old_add_event_now = scheduler.addEventNow;\n\t\tscheduler.addEventNow = function (event) {\n\t\t\tif (scheduler.getState().mode == name) {\n\t\t\t\tif (event[property]) {\n\t\t\t\t\tvar dat = new Date(event[property]);\n\t\t\t\t\tset_date_part(dat, event.start_date);\n\t\t\t\t\tset_date_part(dat, event.end_date);\n\n\t\t\t\t} else {\n\t\t\t\t\tvar date = new Date(event.start_date);\n\t\t\t\t\tevent[property] = +scheduler.date.date_part(date);\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn old_add_event_now.apply(scheduler, arguments);\n\t\t};\n\n\t\tfunction set_date_part(source, target) {\n\t\t\t// reset to start of the month in order to prevent month change when target is on 31th day, and source month has only 30 days\n\t\t\ttarget.setDate(1);\n\n\t\t\ttarget.setFullYear(source.getFullYear());\n\t\t\ttarget.setMonth(source.getMonth());\n\t\t\ttarget.setDate(source.getDate());\n\t\t}\n\n\t\tfunction week_line_dates(evs) {\n\t\t\tvar res = [];\n\t\t\tfor (var i =0; i < evs.length; i++) {\n\t\t\t\tvar ev = copy_timeline_event(evs[i]);\n\t\t\t\tif(!scheduler.isOneDayEvent(ev)){\n\n\t\t\t\t\tvar to = new Date(Math.min(+ev.end_date, +scheduler._max_date)),\n\t\t\t\t\t\tfrom = new Date(Math.max(+ev.start_date, +scheduler._min_date));\n\n\t\t\t\t\tvar multiday_chunks = [];\n\t\t\t\t\twhile(+from < +to){\n\t\t\t\t\t\tvar chunk = copy_timeline_event(ev);\n\t\t\t\t\t\tchunk.start_date = from;\n\t\t\t\t\t\tchunk.end_date = new Date(Math.min(+get_next_day(chunk.start_date), +to));\n\t\t\t\t\t\tfrom = get_next_day(from);\n\t\t\t\t\t\tweek_line_ev_date(chunk);\n\t\t\t\t\t\tres.push(chunk);\n\t\t\t\t\t\tmultiday_chunks.push(chunk);\n\t\t\t\t\t}\n\n\t\t\t\t\tset_resize_options(multiday_chunks, ev);\n\t\t\t\t}else{\n\t\t\t\t\tweek_line_ev_date(ev);\n\t\t\t\t\tres.push(ev);\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\n\t\tfunction set_resize_options(chunks, original){\n\t\t\tvar first = false;\n\t\t\tvar last = false;\n\t\t\tfor(var i = 0, len = chunks.length; i < len; i++){\n\t\t\t\tvar chunk = chunks[i];\n\t\t\t\tfirst = +chunk._w_start_date == +original.start_date;\n\t\t\t\tlast =  +chunk._w_end_date == +original.end_date;\n\n\t\t\t\tchunk._no_resize_start = chunk._no_resize_end = true;\n\n\t\t\t\tif(first){\n\t\t\t\t\tchunk._no_resize_start = false;\n\t\t\t\t}\n\t\t\t\tif(last)\n\t\t\t\t\tchunk._no_resize_end = false;\n\t\t\t}\n\t\t}\n\n\t\tfunction copy_timeline_event(ev){\n\t\t\tvar par = scheduler.getEvent(ev.event_pid);\n\t\t\tif (par && par.isPrototypeOf(ev)) {\n\t\t\t\tev = scheduler._copy_event(ev);\n\t\t\t\tdelete ev.event_length;\n\t\t\t\tdelete ev.event_pid;\n\t\t\t\tdelete ev.rec_pattern;\n\t\t\t\tdelete ev.rec_type;\n\t\t\t} else {\n\t\t\t\tev = scheduler._lame_clone(ev);\n\t\t\t}\n\t\t\treturn ev;\n\t\t}\n\t\tfunction week_line_ev_date(ev) {\n\t\t\tif (ev._w_start_date && ev._w_end_date) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar date = scheduler.date,\n\t\t\t\tstart = ev._w_start_date = new Date(ev.start_date),\n\t\t\t\tend = ev._w_end_date = new Date(ev.end_date);\n\t\t\tev[property] = +date.date_part(ev.start_date);\n\n\t\t\tif (!ev._count)\n\t\t\t\tev._count = 1;\n\t\t\tif (!ev._sorder)\n\t\t\t\tev._sorder = 0;\n\n\t\t\tvar duration = end - start;\n\t\t\tev.start_date = new Date(scheduler._min_date);\n\t\t\tset_time_part(start, ev.start_date);\n\t\t\tev.end_date = new Date(+ev.start_date + duration);\n\t\t\t//set_time_part(end, ev.end_date);\n\n\t\t\tif(start.getTimezoneOffset() != end.getTimezoneOffset()){\n\t\t\t\tev.end_date = new Date(ev.end_date.valueOf() + (start.getTimezoneOffset() - end.getTimezoneOffset())*(1000*60));\n\t\t\t}\n\t\t}\n\n\t\tfunction set_time_part(source, target) {\n\t\t\ttarget.setMinutes(source.getMinutes());\n\t\t\ttarget.setHours(source.getHours());\n\t\t}\n\t\tfunction get_next_day(date){\n\t\t\tvar next_day = scheduler.date.add(date, 1, \"day\");\n\t\t\tnext_day = scheduler.date.date_part(next_day);\n\t\t\treturn next_day;\n\t\t}\n\n\t\tvar old_render_marked_timespan = scheduler._render_marked_timespan;\n\t\tscheduler._render_marked_timespan = function() {\n\t\t\tif (scheduler._mode == name) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn old_render_marked_timespan.apply(this, arguments);\n\t\t};\n\t};\n\n}","export default function(scheduler){\n/* global dhtmlXCombo */\nscheduler.form_blocks['combo']={\n\trender:function(sns) {\n\t\tif (!sns.cached_options)\n\t\t\tsns.cached_options = {};\n\t\t//GS-2458: set height from config.sections\n\t\tconst sectionHeight = sns.height ? `style='height:${sns.height}px;'` : '';\n\t\tvar res = '';\n\t\tres += `<div class='${sns.type}' ${sectionHeight}></div>`;\n\t\treturn res;\n\t},\n\tset_value:function(node,value,ev,config){\n\t\t(function(){\n\t\t\tresetCombo();\n\t\t\tvar id = scheduler.attachEvent(\"onAfterLightbox\",function(){\n\t\t\t\t// otherwise destructor will never be called after form reset(e.g. in readonly event mode)\n\t\t\t\tresetCombo();\n\t\t\t\tscheduler.detachEvent(id);\n\t\t\t});\n\t\t\tfunction resetCombo(){\n\t\t\t\tif(node._combo && node._combo.DOMParent) {\n\t\t\t\t\tvar combo = node._combo;\n\t\t\t\t\tif(combo.unload){\n\t\t\t\t\t\tcombo.unload();\n\t\t\t\t\t}else if(combo.destructor){\n\t\t\t\t\t\tcombo.destructor();\n\t\t\t\t\t}\n\t\t\t\t\t// dhtmlxCombo 4.1.0 bug\n\t\t\t\t\tcombo.DOMParent = combo.DOMelem = null;\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t\twindow.dhx_globalImgPath = config.image_path||'/';\n\t\tnode._combo = new dhtmlXCombo(node, config.name, node.offsetWidth-8);\n\t\tif (config.onchange)\n\t\t\tnode._combo.attachEvent(\"onChange\", config.onchange);\n\n\t\tif (config.options_height)\n\t\t\tnode._combo.setOptionHeight(config.options_height);\n\t\tvar combo = node._combo;\n\t\tcombo.enableFilteringMode(config.filtering, config.script_path||null, !!config.cache);\n\n\t\tif (!config.script_path) { // script-side filtration is used\n\t\t\tvar all_options = [];\n\t\t\tfor (var i = 0; i < config.options.length; i++) {\n\t\t\t\tvar option = config.options[i];\n\t\t\t\tvar single_option = [\n\t\t\t\t\toption.key,\n\t\t\t\t\toption.label,\n\t\t\t\t\toption.css\n\t\t\t\t];\n\t\t\t\tall_options.push(single_option);\n\t\t\t}\n\t\t\tcombo.addOption(all_options);\n\t\t\tif (ev[config.map_to]) {\n\t\t\t\tvar index = combo.getIndexByValue(ev[config.map_to]);\n\t\t\t\tcombo.selectOption(index);\n\t\t\t}\n\t\t} else { // server-side filtration is used\n\t\t\tvar selected_id = ev[config.map_to];\n\t\t\tif (selected_id) {\n\t\t\t\tif (config.cached_options[selected_id]) {\n\t\t\t\t\tcombo.addOption(selected_id, config.cached_options[selected_id]);\n\t\t\t\t\tcombo.disable(1);\n\t\t\t\t\tcombo.selectOption(0);\n\t\t\t\t\tcombo.disable(0);\n\t\t\t\t} else {\n\t\t\t\t\tscheduler.ajax.get(config.script_path+\"?id=\"+selected_id+\"&uid=\"+scheduler.uid(), function(result){\n\t\t\t\t\t\tvar responseText = result.xmlDoc.responseText;\n\t\t\t\t\t\tvar label;\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tvar res = JSON.parse(responseText);\n\t\t\t\t\t\t\tlabel = res.options[0].text;\n\t\t\t\t\t\t}catch(e){\n\t\t\t\t\t\t\tvar option = scheduler.ajax.xpath(\"//option\", result.xmlDoc)[0];\n\t\t\t\t\t\t\tlabel = option.childNodes[0].nodeValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconfig.cached_options[selected_id] = label;\n\t\t\t\t\t\tcombo.addOption(selected_id, label);\n\t\t\t\t\t\tcombo.disable(1);\n\t\t\t\t\t\tcombo.selectOption(0);\n\t\t\t\t\t\tcombo.disable(0);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcombo.setComboValue(\"\");\n\t\t\t}\n\t\t}\n\t},\n\tget_value:function(node,ev,config) {\n\t\tvar selected_id = node._combo.getSelectedValue(); // value = key\n\t\tif (config.script_path) {\n\t\t\tconfig.cached_options[selected_id] = node._combo.getSelectedText();\n\t\t}\n\t\treturn selected_id;\n\t},\n\tfocus:function(node){\n\t}\n};\n\nscheduler.form_blocks['radio']={\n\trender:function(sns) {\n\t\tvar res = '';\n\t\tres += `<div class='dhx_cal_ltext dhx_cal_radio ${sns.vertical ? \"dhx_cal_radio_vertical\": \"\"}' style='height:${sns.height}px;'>`;\n\t\tfor (var i=0; i<sns.options.length; i++) {\n\t\t\tvar id = scheduler.uid();\n\t\t\tres += \"<label class='dhx_cal_radio_item' for='\"+id+\"'><input id='\"+id+\"' type='radio' name='\"+sns.name+\"' value='\"+sns.options[i].key+\"'><span>\"+\" \"+sns.options[i].label+\"</span></label>\";\n\t\t}\n\t\tres += \"</div>\";\n\n\t\treturn res;\n\t},\n\tset_value:function(node,value,ev,config){\n\t\tvar radiobuttons = node.getElementsByTagName('input');\n\t\tfor (var i = 0; i < radiobuttons.length; i++) {\n\t\t\tradiobuttons[i].checked = false;\n\t\t\tvar checked_value = ev[config.map_to]||value;\n\t\t\tif (radiobuttons[i].value == checked_value) {\n\t\t\t\tradiobuttons[i].checked = true;\n\t\t\t}\n\t\t}\n\t},\n\tget_value:function(node,ev,config){\n\t\tvar radiobuttons = node.getElementsByTagName('input');\n\t\tfor(var i=0; i<radiobuttons.length; i++) {\n\t\t\tif(radiobuttons[i].checked) {\n\t\t\t\treturn radiobuttons[i].value;\n\t\t\t}\n\t\t}\n\t},\n\tfocus:function(node){\n\t}\n};\n\nscheduler.form_blocks['checkbox']={\n\trender:function(sns) {\n\t\tif (scheduler.config.wide_form)\n\t\t\treturn '<div class=\"dhx_cal_wide_checkbox\"></div>';\n\t\telse\n\t\t\treturn '';\n\t},\n\tset_value:function(node,value,ev,config){\n\t\tnode=scheduler._lightbox.querySelector(`#${config.id}`);\n\t\t//GS-2458: set height from config.sections\n\t\tif(config.height){\n\t\t\tnode.style.height = `${config.height}px`;\n\t\t}\n\t\tvar id = scheduler.uid();\n\t\tvar isChecked = (typeof config.checked_value != \"undefined\") ? value == config.checked_value : !!value;\n\t\tnode.className += \" dhx_cal_checkbox\";\n\t\tvar check_html = \"<input id='\"+id+\"' type='checkbox' value='true' name='\"+config.name+\"'\"+((isChecked)?\"checked='true'\":'')+\"'>\";\n\t\tvar label_html = \"<label for='\"+id+\"'>\"+(scheduler.locale.labels[\"section_\"+config.name]||config.name)+\"</label>\";\n\t\tif (scheduler.config.wide_form){\n\t\t\tnode.innerHTML = label_html;\n\t\t\tnode.nextSibling.innerHTML=check_html;\n\t\t} else\n\t\t\tnode.innerHTML=check_html+label_html;\n\n\t\tif (config.handler) {\n\t\t\tvar checkbox = node.getElementsByTagName('input')[0];\n\t\t\tif(checkbox.$_eventAttached){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcheckbox.$_eventAttached = true;\n\t\t\tscheduler.event(checkbox, \"click\", config.handler);\n\t\t\t//checkbox.onclick = config.handler;\n\t\t}\n\t},\n\tget_value:function(node,ev,config){\n\t\tnode=scheduler._lightbox.querySelector(`#${config.id}`);\n\t\tvar checkbox = node.getElementsByTagName('input')[0]; // moved to the header\n\t\tif (!checkbox)\n\t\t\tcheckbox = node.nextSibling.getElementsByTagName('input')[0];\n\t\treturn (checkbox.checked)?(config.checked_value||true):(config.unchecked_value||false);\n\t},\n\tfocus:function(node){\n\t}\n};\n\n\n}","export default function(scheduler){\n\nscheduler.ext.fullscreen = {\n\ttoggleIcon: null\n};\n\nscheduler.expand = function() {\n\tif(!scheduler.callEvent(\"onBeforeExpand\", []))\n\t\treturn;\n\tvar t = scheduler._obj;\n\tdo {\n\t\tt._position = t.style.position || \"\";\n\t\tt.style.position = \"static\";\n\t} while ((t = t.parentNode) && t.style);\n\tt = scheduler._obj;\n\tt.style.position = \"absolute\";\n\tt._width = t.style.width;\n\tt._height = t.style.height;\n\tt.style.width = t.style.height = \"100%\";\n\tt.style.top = t.style.left = \"0px\";\n\n\tvar top = document.body;\n\ttop.scrollTop = 0;\n\n\ttop = top.parentNode;\n\tif (top)\n\t\ttop.scrollTop = 0;\n\tdocument.body._overflow = document.body.style.overflow || \"\";\n\tdocument.body.style.overflow = \"hidden\";\n\tscheduler._maximize();\n\tscheduler.callEvent(\"onExpand\", []);\n};\nscheduler.collapse = function() {\n\tif(!scheduler.callEvent(\"onBeforeCollapse\", []))\n\t\treturn;\n\tvar t = scheduler._obj;\n\tdo {\n\t\tt.style.position = t._position;\n\t} while ((t = t.parentNode) && t.style);\n\tt = scheduler._obj;\n\tt.style.width = t._width;\n\tt.style.height = t._height;\n\tdocument.body.style.overflow = document.body._overflow;\n\tscheduler._maximize();\n\tscheduler.callEvent(\"onCollapse\", []);\n};\nscheduler.attachEvent(\"onTemplatesReady\", function() {\n\tvar t = document.createElement(\"div\");\n\tt.className = \"dhx_expand_icon\";\n\tscheduler.ext.fullscreen.toggleIcon = t;\n\tt.innerHTML = `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t<g>\n\t<line x1=\"0.5\" y1=\"5\" x2=\"0.5\" y2=\"3.0598e-08\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\n\t<line y1=\"0.5\" x2=\"5\" y2=\"0.5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\n\t<line x1=\"0.5\" y1=\"11\" x2=\"0.5\" y2=\"16\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\n\t<line y1=\"15.5\" x2=\"5\" y2=\"15.5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\n\t<line x1=\"11\" y1=\"0.5\" x2=\"16\" y2=\"0.5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\n\t<line x1=\"15.5\" y1=\"2.18557e-08\" x2=\"15.5\" y2=\"5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\n\t<line x1=\"11\" y1=\"15.5\" x2=\"16\" y2=\"15.5\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\n\t<line x1=\"15.5\" y1=\"16\" x2=\"15.5\" y2=\"11\" stroke=\"var(--dhx-scheduler-base-colors-icons)\"/>\n\t</g>\n\t</svg>\n\t`;\n\tscheduler._obj.appendChild(t);\n\tscheduler.event(t, \"click\",  function() {\n\t\tif (!scheduler.expanded)\n\t\t\tscheduler.expand(); else\n\t\t\tscheduler.collapse();\n\t});\n});\nscheduler._maximize = function() {\n\tthis.expanded = !this.expanded;\n\tif(this.expanded){\n\t\tthis.ext.fullscreen.toggleIcon.classList.add(\"dhx_expand_icon--expanded\");\n\t\t\n\t}else{\n\t\tthis.ext.fullscreen.toggleIcon.classList.remove(\"dhx_expand_icon--expanded\");\n\t}\n\t\n\t//scheduler.ext.fullscreen.toggleIcon.style.backgroundPosition = \"0 \" + (this.expanded ? \"0\" : \"18\") + \"px\";\n\n\tvar directions = ['left', 'top'];\n\tfor (var i = 0; i < directions.length; i++) {\n\t\t//var margin = scheduler.xy['margin_' + directions[i]];\n\t\tvar prev_margin = scheduler['_prev_margin_' + directions[i]];\n\t\tif (scheduler.xy['margin_' + directions[i]]) {\n\t\t\tscheduler['_prev_margin_' + directions[i]] = scheduler.xy['margin_' + directions[i]];\n\t\t\tscheduler.xy['margin_' + directions[i]] = 0;\n\t\t} else {\n\t\t\tif (prev_margin) {\n\t\t\t\tscheduler.xy['margin_' + directions[i]] = scheduler['_prev_margin_' + directions[i]];\n\t\t\t\tdelete scheduler['_prev_margin_' + directions[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\tscheduler.setCurrentView();\n};\n\n\n}\n","export default function(scheduler){\n\n\n(function(){\n\nfunction defaults(obj, std){\n\tfor (var key in std)\n\t\tif (!obj[key])\n\t\t\tobj[key] = std[key];\n\treturn obj;\n}\n\nfunction getElementSizes(element, scheduler) {\n\tvar sizes = {};\n\telement = scheduler._els[element];\n\tif (element && element[0]) {\n\t\tsizes.x = element[0].scrollWidth;\n\t\tsizes.y = element[0].scrollHeight;\n\t} else {\n\t\tsizes.x = 0;\n\t\tsizes.y = 0;\n\t}\n\treturn sizes;\n}\n\n//compatibility for new versions of scheduler\nif(!window.dhtmlxAjax){\n\twindow.dhtmlxAjax = {\n\t\tpost: function(url, data, callback){\n\t\t\treturn window.dhx4.ajax.post(url, data, callback);\n\t\t},\n\t\tget: function(url, callback){\n\t\t\treturn window.ajax.get(url, callback);\n\t\t}\n\t};\n}\n\nfunction add_export_methods(scheduler){\n\n\tscheduler.exportToPDF = function(config){\n\t\tconfig = defaults((config || {}), {\n\t\t\tname:\"calendar.pdf\",\n\t\t\tformat:\"A4\",\n\t\t\torientation:\"landscape\",\n\t\t\tdpi:96,\n\t\t\tzoom:1,\n\t\t\trtl: scheduler.config.rtl\n\t\t});\n\t\tconfig.html = this._export_html(config);\n\t\tconfig.mode = this.getState().mode;\n\t\tthis._send_to_export(config, \"pdf\");\n\t};\n\n\tscheduler.exportToPNG = function(config){\n\t\tconfig = defaults((config || {}), {\n\t\t\tname:\"calendar.png\",\n\t\t\tformat:\"A4\",\n\t\t\torientation:\"landscape\",\n\t\t\tdpi:96,\n\t\t\tzoom:1,\n\t\t\trtl: scheduler.config.rtl\n\t\t});\n\t\tconfig.html = this._export_html(config);\n\t\tconfig.mode = this.getState().mode;\n\t\tthis._send_to_export(config, \"png\");\n\t};\n\n\tscheduler.exportToICal = function(config){\n\t\tconfig = defaults((config || {}), {\n\t\t\tname:\"calendar.ical\",\n\t\t\tdata:this._serialize_plain(null, config)\n\t\t});\n\t\tthis._send_to_export(config, \"ical\");\n\t};\n\n\tscheduler.exportToExcel = function(config){\n\t\tconfig = defaults((config || {}), {\n\t\t\tname:\"calendar.xlsx\",\n\t\t\ttitle:\"Events\",\n\t\t\tdata:this._serialize_plain( this.templates.xml_format, config),\n\t\t\tcolumns:this._serialize_columns()\n\t\t});\n\t\tthis._send_to_export(config, \"excel\");\n\t};\n\n\tscheduler._ajax_to_export = function(data, type, callback){\n\t\tdelete data.callback;\n\t\tvar url = data.server || \"https://export.dhtmlx.com/scheduler\";\n\n\t\twindow.dhtmlxAjax.post(url,\n\t\t\t\"type=\"+type+\"&store=1&data=\"+encodeURIComponent(JSON.stringify(data)),\n\t\t\tfunction(loader){\n\t\t\t\tvar fail = loader.xmlDoc.status > 400;\n\t\t\t\tvar info = null;\n\n\t\t\t\tif (!fail){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tinfo = JSON.parse(loader.xmlDoc.responseText);\n\t\t\t\t\t}catch(e){}\n\t\t\t\t}\n\t\t\t\tcallback(info);\n\t\t\t}\n\t\t);\n\t};\n\n\tscheduler._plain_export_copy = function(source, format){\n\t\tvar target = {};\n\t\tfor (var key in source)\n\t\t\ttarget[key] = source[key];\n\n\t\ttarget.start_date = format(target.start_date);\n\t\ttarget.end_date = format(target.end_date);\n\t\ttarget.$text = this.templates.event_text(source.start_date, source.end_date, source);\n\n\t\treturn target;\n\t};\n\n\tscheduler._serialize_plain = function(format, config){\n\t\tformat = format || scheduler.date.date_to_str(\"%Y%m%dT%H%i%s\", true);\n\n\t\tvar events;\n\t\tif (config && config.start && config.end)\n\t\t\tevents = scheduler.getEvents(config.start, config.end);\n\t\telse\n\t\t\tevents = scheduler.getEvents();\n\n\t\tvar data = [];\n\t\tfor (var i = 0; i< events.length; i++)\n\t\t\tdata[i] = this._plain_export_copy(events[i], format);\n\n\t\treturn data;\n\t};\n\n\tscheduler._serialize_columns = function(){\n\t\treturn [\n\t\t\t{ id:\"start_date\", header:\"Start Date\", width:30 },\n\t\t\t{ id:\"end_date\", header:\"End Date\", width:30 },\n\t\t\t{ id:\"$text\", header:\"Text\", width:100 }\n\t\t];\n\t};\n\n\tscheduler._send_to_export = function(data, type){\n\t\tif(!data.version){\n\t\t\tdata.version = scheduler.version;\n\t\t}\n\n\t\tif(!data.skin){\n\t\t\tdata.skin = scheduler.skin;\n\t\t}\n\n\t\tif (data.callback)\n\t\t\t\treturn scheduler._ajax_to_export(data, type, data.callback);\n\n\t\tvar form = this._create_hidden_form();\n\n\t\tform.firstChild.action = data.server || \"https://export.dhtmlx.com/scheduler\";\n\t\tform.firstChild.childNodes[0].value = JSON.stringify(data);\n\t\tform.firstChild.childNodes[1].value = type;\n\t\tform.firstChild.submit();\n\t};\n\n\tscheduler._create_hidden_form = function(){\n\t\tif (!this._hidden_export_form){\n\t\t\tvar t = this._hidden_export_form = document.createElement(\"div\");\n\t\t\tt.style.display = \"none\";\n\t\t\tt.innerHTML = \"<form method='POST' target='_blank'><input type='text' name='data'><input type='hidden' name='type' value=''></form>\";\n\t\t\tdocument.body.appendChild(t);\n\t\t}\n\t\treturn this._hidden_export_form;\n\t};\n\n\tscheduler._get_export_size = function(format, orientation, zoom, dpi, header, footer, scales) {\n\n\t\tdpi = parseInt(dpi)/25.4 || 4;\n\n\t\tvar sizes = {\n\t\t\t\"A5\":{ x:148, y:210 },\n\t\t\t\"A4\":{ x:210, y:297 },\n\t\t\t\"A3\":{ x:297, y:420 },\n\t\t\t\"A2\":{ x:420, y:594 },\n\t\t\t\"A1\":{ x:594, y:841 },\n\t\t\t\"A0\":{ x:841, y:1189 }\n\t\t};\n\n\t\tvar dataX = getElementSizes(\"dhx_cal_data\", this).x;\n\t\tvar dataY = getElementSizes(\"dhx_cal_data\", this).y;\n\t\tvar headY = getElementSizes(\"dhx_cal_header\", this).y;\n\t\tvar multY = getElementSizes(\"dhx_multi_day\", this).y;\n\n\t\tvar cSize = {\n\t\t\ty: dataY + headY + multY\n\t\t};\n\n\t\tif (format === \"full\") {\n\t\t\tcSize.x = dataX;\n\t\t} else {\n\t\t\tcSize.x = Math.floor( (orientation === \"landscape\" ? sizes[format].y : sizes[format].x) * dpi );\n\t\t}\n\n\t\tif (scales) {\n\t\t\tcSize.x *= (parseFloat(scales.x) || 1);\n\t\t\tcSize.y *= (parseFloat(scales.y) || 1);\n\t\t}\n\n\t\treturn cSize;\n\t};\n\n\tfunction getTimeline() {\n\t\tvar mode = scheduler.getState().mode;\n\t\tif (scheduler.matrix && scheduler.matrix[mode]) {\n\t\t\treturn scheduler.matrix[mode];\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction getInitialSizes() {\n\t\tvar smartRendering = undefined,\n\t\t\tscrollable = undefined;\n\n\t\tvar timeline = getTimeline();\n\t\tif (timeline) {\n\t\t\tscrollable = timeline.scrollable;\n\t\t\tsmartRendering = timeline.smart_rendering;\n\t\t}\n\n\t\treturn {\n\t\t\tnav_height: scheduler.xy.nav_height,\n\t\t\tscroll_width: scheduler.xy.scroll_width,\n\t\t\tstyle_width: scheduler._obj.style.width,\n\t\t\tstyle_height: scheduler._obj.style.height,\n\t\t\ttimeline_scrollable: scrollable,\n\t\t\ttimeline_smart_rendering: smartRendering\n\t\t};\n\t}\n\n\tfunction setExportSizes(size, initialSizes) {\n\t\tscheduler._obj.style.width  = size.x + \"px\";\n\t\tscheduler._obj.style.height = size.y + \"px\";\n\n\t\tscheduler.xy.nav_height = 0;\n\t\tscheduler.xy.scroll_width = 0;\n\n\t\tvar timeline = getTimeline();\n\t\tif (initialSizes.timeline_scrollable || initialSizes.timeline_smart_rendering) {\n\n\t\t\ttimeline.scrollable = false;\n\t\t\ttimeline.smart_rendering = false;\n\t\t}\n\t}\n\n\tfunction setInitialSizes(initialSizes) {\n\t\tscheduler.xy.scroll_width = initialSizes.scroll_width;\n\t\tscheduler.xy.nav_height = initialSizes.nav_height;\n\t\tscheduler._obj.style.width  = initialSizes.style_width;\n\t\tscheduler._obj.style.height = initialSizes.style_height;\n\n\t\tvar timeline = getTimeline();\n\t\tif (initialSizes.timeline_scrollable || initialSizes.timeline_smart_rendering) {\n\t\t\ttimeline.scrollable = initialSizes.timeline_scrollable;\n\t\t\ttimeline.smart_rendering = initialSizes.timeline_smart_rendering;\n\t\t}\n\t}\n\n\tscheduler._export_html = function (obj) {\n\t\tvar initialSizes = getInitialSizes();\n\t\tvar size = scheduler._get_export_size(obj.format, obj.orientation, obj.zoom, obj.dpi, obj.header, obj.footer, obj.scales);\n\n\t\tvar html = \"\";\n\t\ttry {\n\t\t\tsetExportSizes(size, initialSizes);\n\t\t\tscheduler.setCurrentView();\n\t\t\thtml = scheduler._obj.innerHTML;\n\t\t} catch (e) {\n\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(e);\n\t\t} finally {\n\t\t\tsetInitialSizes(initialSizes);\n\t\t\tscheduler.setCurrentView();\n\t\t}\n\n\t\treturn html;\n\t};\n\n}\n\nadd_export_methods(scheduler);\n\n\n})();\n\n}","export default function(scheduler){\n\n(function(){\n\tscheduler._grid = {\n\t\tnames: {},\n\t\tsort_rules:{\n\t\t\t\"int\":function(a,b, getVal){ return getVal(a)*1 < getVal(b)*1?1:-1; },\n\t\t\t\"str\":function(a,b, getVal){ return getVal(a) < getVal(b)?1:-1; },\n\t\t\t\"date\":function(a,b, getVal){ return new Date(getVal(a))< new Date(getVal(b))?1:-1; }\n\t\t},\n\t\t_getObjName:function(name){\n\t\t\treturn \"grid_\"+name;\n\t\t},\n\t\t_getViewName:function(objName){\n\t\t\treturn objName.replace(/^grid_/,'');\n\t\t}\n\t};\n}\n)();\n/*\nobj={\n    name:'grid_name'\n\tfields:[\n                  { id:\"id\", label:\"Id\", width:80, sort:\"int/date/str\", template:function(start_date, end_date, ev){ return \"\"}, align:\"right/left/center\" },\n                  { id:\"text\", label:\"Text\", width:'*', css:\"class_name\", sort:function(a,b){ return 1 or -1}, valign:'top/bottom/middle' }\n                  ...\n            ],\n\tfrom:new Date(0),\n\tto:Date:new Date(9999,1,1),\n\trowHeight:int,\n\tpaging:true/false,\n\tselect:true/false\n}\n*/\n\n\nscheduler.createGridView=function(obj){\n\tvar name = obj.name || 'grid';\n\tvar objName = scheduler._grid._getObjName(name);\n\n\tscheduler._grid.names[name] = name;\n\tscheduler.config[name + '_start'] = obj.from || (new Date(0));\n\tscheduler.config[name + '_end'] = obj.to || (new Date(9999,1,1));\n\n\tscheduler[objName] = obj;\n\tscheduler[objName].defPadding = 8;\n\tscheduler[objName].columns = scheduler[objName].fields;\n\tscheduler[objName].unit = obj.unit || \"month\";\n\tscheduler[objName].step = obj.step || 1;\n\tdelete scheduler[objName].fields;\n\tfunction isValidSize(size){\n\t\treturn !(size !== undefined && (size*1 != size || size < 0));\n\t}\n\n\tvar cols = scheduler[objName].columns;\n\tfor(var i=0; i < cols.length; i++){\n\t\tif(isValidSize(cols[i].width))\n\t\t\tcols[i].initialWidth = cols[i].width;\n\t\tif(!isValidSize(cols[i].paddingLeft))\n\t\t\tdelete cols[i].paddingLeft;\n\t\tif(!isValidSize(cols[i].paddingRight))\n\t\t\tdelete cols[i].paddingRight;\n\t}\n\n\tscheduler[objName].select = obj.select === undefined ? true : obj.select;\n\tif(scheduler.locale.labels[name +'_tab'] === undefined)\n\t\tscheduler.locale.labels[name +'_tab'] = scheduler[objName].label || scheduler.locale.labels.grid_tab;\n\n\tscheduler[objName]._selected_divs = [];\n\n\tscheduler.date[name+'_start']=function(d){\n\t\tif(scheduler.date[obj.unit+'_start'])\n\t\t\treturn scheduler.date[obj.unit+'_start'](d);\n\t\telse\n\t\t\treturn (d);\n\t};\n\tscheduler.date['add_' + name] = function(date, inc){\n\t\treturn scheduler.date.add(date, inc*scheduler[objName].step, scheduler[objName].unit);\n\t};\n\n\tscheduler.templates[name+\"_date\"] = function(start, end){\n\t\tif (scheduler.config.rtl) {\n\t\t\treturn scheduler.templates.day_date(end)+\" - \"+scheduler.templates.day_date(start);\n\t\t} else {\n\t\t\treturn scheduler.templates.day_date(start)+\" - \"+scheduler.templates.day_date(end);\n\t\t}\n\t};\n\tscheduler.templates[name + '_full_date'] = function(start,end,ev){\n\t\tif (scheduler.isOneDayEvent(ev)) {\n\t\t\treturn this[name + '_single_date'](start);\n\t\t} else if (scheduler.config.rtl) {\n\t\t\treturn scheduler.templates.day_date(end)+\" &ndash; \"+scheduler.templates.day_date(start);\n\t\t} else {\n\t\t\treturn scheduler.templates.day_date(start)+\" &ndash; \"+scheduler.templates.day_date(end);\n\t\t}\n\t};\n\tscheduler.templates[name + '_single_date'] = function(date){\n\t\treturn scheduler.templates.day_date(date)+\" \"+this.event_date(date);\n\t};\n\tscheduler.templates[name + '_field'] = function(field_name, event){\n\t\treturn event[field_name];\n\t};\n\n\tscheduler.attachEvent(\"onTemplatesReady\",function(){\n\t\tscheduler.attachEvent(\"onEventSelected\", function(id){\n\t\t\tif(this._mode == name && scheduler[objName].select ){\n\t\t\t\tscheduler._grid.selectEvent(id, name);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tscheduler.attachEvent(\"onEventUnselected\", function(id){\n\t\t\tif(this._mode == name && scheduler[objName].select ){\n\t\t\t\tscheduler._grid.unselectEvent('', name);\n\t\t\t}\n\t\t});\n\n\t\tvar old = scheduler.render_data;\n\t\tscheduler.render_data=function(evs){\n\t\t\tif (this._mode == name)\n\t\t\t\tscheduler._grid._fill_grid_tab(objName);\n\t\t\telse\n\t\t\t\treturn old.apply(this,arguments);\n\t\t};\n\n\t\tvar old_render_view_data = scheduler.render_view_data;\n\t\tscheduler.render_view_data=function(){\n\t\t\tvar data_container = scheduler._els[\"dhx_cal_data\"][0].lastChild;\n\t\t\tif(this._mode == name && data_container) {\n\t\t\t\tscheduler._grid._gridScrollTop = data_container.scrollTop;\n\t\t\t}\n\n\t\t\treturn old_render_view_data.apply(this,arguments);\n\t\t};\n});\n\n\n\tscheduler[name+'_view']=function(mode){\n\t\tscheduler._grid._sort_marker = null;\n\t\tdelete scheduler._gridView;\n\t\tscheduler._grid._gridScrollTop = 0;\n\t\tscheduler._rendered=[];\n\t\tscheduler[objName]._selected_divs = [];\n\n\t\tif (mode){\n\t\t\tvar min = null,\n\t\t\t\tmax = null;\n\t\t\tvar view = scheduler[objName];\n\t\t\tif(view.paging){\n\t\t\t\tmin = scheduler.date[name+'_start'](new Date(scheduler._date));\n\t\t\t\tmax = scheduler.date['add_'+name](min, 1);\n\t\t\t}else{\n\t\t\t\tmin = scheduler.config[name + '_start'];\n\t\t\t\tmax = scheduler.config[name + '_end'];\n\t\t\t}\n\n\t\t\tscheduler._min_date = min;\n\t\t\tscheduler._max_date = max;\n\n\t\t\tscheduler._grid.set_full_view(objName);\n\n\t\t\tvar header = \"\";\n\t\t\tif(+min > +new Date(0) && +max < +(new Date(9999,1,1))){\n\t\t\t\theader = scheduler.templates[name+\"_date\"](min, max);\n\t\t\t}\n\n\t\t\tvar dateElement = scheduler._getNavDateElement();\n\t\t\tif(dateElement){\n\t\t\t\tdateElement.innerHTML=header;\n\t\t\t}\n\n\t\t\t//grid tab activated\n\t\t\tscheduler._gridView = objName;\n\t\t} else {\n\t\t\t//grid tab de-activated\n\t\t}\n\t};\n\n\n};\n\n\nscheduler.dblclick_dhx_grid_area=function(){\n\tif (!this.config.readonly && this.config.dblclick_create)\n\t\tthis.addEventNow();\n};\n\nif(scheduler._click.dhx_cal_header){\n\tscheduler._old_header_click = scheduler._click.dhx_cal_header;\n}\nscheduler._click.dhx_cal_header=function(e){\n\tif(scheduler._gridView){\n\t\tvar event = e||window.event;\n\n\t\tvar column = scheduler._grid._get_target_column(event, scheduler._gridView);\n\t\tscheduler._grid._toggle_sort_state(scheduler._gridView, column.id);\n\t\tscheduler.clear_view();\n\t\tscheduler._grid._fill_grid_tab(scheduler._gridView);\n\t}\n\telse if(scheduler._old_header_click)\n\t\treturn scheduler._old_header_click.apply(this,arguments);\n};\n\nscheduler._grid.selectEvent = function(id, view_name){\n\tif(scheduler.callEvent(\"onBeforeRowSelect\",[id])){\n\t\tvar objName = scheduler._grid._getObjName(view_name);\n\n\t\tscheduler.for_rendered(id, function(event_div){\n\t\t\tevent_div.classList.add(\"dhx_grid_event_selected\");\n\t\t\tscheduler[objName]._selected_divs.push(event_div);\n\t\t});\n\t//\tscheduler._select_id = id;\n\t}\n};\n\nscheduler._grid._unselectDiv= function(div){\n\tdiv.className = div.classList.remove(\"dhx_grid_event_selected\");\n};\nscheduler._grid.unselectEvent = function(id, view_name){\n\tvar objName = scheduler._grid._getObjName(view_name);\n\tif(!objName || !scheduler[objName]._selected_divs)\n\t\treturn;\n\n\tif(!id){\n\t\tfor(var i=0; i<scheduler[objName]._selected_divs.length; i++)\n\t\t\tscheduler._grid._unselectDiv(scheduler[objName]._selected_divs[i]);\n\n\t\tscheduler[objName]._selected_divs = [];\n\n\t}else{\n\t\tfor(var i=0; i<scheduler[objName]._selected_divs.length; i++)\n\t\t\tif(scheduler[objName]._selected_divs[i].getAttribute(scheduler.config.event_attribute) == id){\n\t\t\t\tscheduler._grid._unselectDiv(scheduler[objName]._selected_divs[i]);\n\t\t\t\tscheduler[objName]._selected_divs.slice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n};\n\nscheduler._grid._get_target_column = function(event, objName){\n\tvar targ = event.originalTarget || event.srcElement;\n\tvar className = scheduler._getClassName(targ);\n\tif(className == 'dhx_grid_view_sort')\n\t\ttarg = targ.parentNode;\n\n\tvar index = 0;\n\tfor(var i =0; i < targ.parentNode.childNodes.length; i++){\n\t\tif(targ.parentNode.childNodes[i] == targ){\n\t\t\tindex = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn scheduler[objName].columns[index];\n};\n\nscheduler._grid._get_sort_state = function(objName){\n\tvar grid = scheduler[objName];\n\treturn grid.sort;\n};\n\nscheduler._grid._toggle_sort_state = function(objName, column){\n\tvar sort = this._get_sort_state(objName);\n\tvar grid = scheduler[objName];\n\n\tif(sort && sort.column == column){\n\t\tsort.direction = sort.direction == \"asc\" ? \"desc\" : \"asc\";\n\t}else{\n\t\tgrid.sort = {\n\t\t\tcolumn: column,\n\t\t\tdirection: \"desc\"\n\t\t};\n\t}\n};\n\nscheduler._grid._get_sort_value_for_column = function(column){\n\tvar value = null;\n\tif(column.template){\n\t\tvar template = column.template;\n\t\tvalue = function(ev){\n\t\t\treturn template(ev.start_date, ev.end_date, ev);\n\t\t};\n\t}else{\n\t\tvar field = column.id;\n\t\tif(field == \"date\")\n\t\t\tfield = \"start_date\";\n\t\tvalue = function(ev){ return ev[field]; };\n\t}\n\treturn value;\n};\n\nscheduler._grid.draw_sort_marker = function(columns, sort){\n\n\tif(scheduler._grid._sort_marker){\n\t\tscheduler._grid._sort_marker.className = scheduler._grid._sort_marker.className.replace(/( )?dhx_grid_sort_(asc|desc)/, '');\n\t\tscheduler._grid._sort_marker.removeChild(scheduler._grid._sort_marker.lastChild);\n\t}\n\n\tif(sort){\n\t\tvar node = scheduler._grid._get_column_node(columns, sort.column);\n\n\t\tnode.className += \" dhx_grid_sort_\"+ sort.direction;\n\t\tscheduler._grid._sort_marker = node;\n\t\tvar html = \"<div class='dhx_grid_view_sort' style='left:\"+(+node.style.width.replace('px','') -15+node.offsetLeft)+\"px'>&nbsp;</div>\";\n\t\tnode.innerHTML += html;\n\t}\n};\n\nscheduler._grid.sort_grid=function(sort){\n\n\tsort = sort || {direction:'desc', value:function(ev){return ev.start_date;}, rule:scheduler._grid.sort_rules['date']};\n\n\tvar events = scheduler.get_visible_events();\n\n\tevents.sort(function(a,b){return sort.rule(a,b,sort.value);});\n\tif(sort.direction == 'asc'){\n\t\tevents = events.reverse();\n\t}\n\treturn events;\n};\n\n\n\nscheduler._grid.set_full_view = function(mode){\n\tif (mode){\n\t\t//var l = scheduler.locale.labels;\n\t\tvar html =scheduler._grid._print_grid_header(mode);\n\n\t\tscheduler._els[\"dhx_cal_header\"][0].innerHTML= html;\n\t\tscheduler._table_view=true;\n\t\tscheduler.set_sizes();\n\t}\n};\nscheduler._grid._calcPadding = function(column, parent){\n\treturn (column.paddingLeft !== undefined ? 1*column.paddingLeft : scheduler[parent].defPadding) +\n\t\t(column.paddingRight !== undefined ? 1*column.paddingRight : scheduler[parent].defPadding);\n};\n\nscheduler._grid._getStyles = function(column, items){\n\tvar cell_style = [], style = \"\";\n\tfor(var i=0; items[i]; i++ ){\n\t\tstyle = items[i] + \":\";\n\t\tswitch (items[i]){\n\t\t\tcase \"text-align\":\n\t\t\t\tif(column.align)\n\t\t\t\t\tcell_style.push(style+column.align);\n\t\t\t\tbreak;\n\t\t\tcase \"vertical-align\":\n\t\t\t\tif(column.valign)\n\t\t\t\t\tcell_style.push(style+column.valign);\n\t\t\t\tbreak;\n\t\t\tcase \"padding-left\":\n\t\t\t\tif(column.paddingLeft !== undefined)\n\t\t\t\t\tcell_style.push(style+(column.paddingLeft||'0') + \"px\");\n\t\t\t\tbreak;\n\t\t\tcase \"padding-right\":\n\t\t\t\tif(column.paddingRight !== undefined)\n\t\t\t\t\tcell_style.push(style+(column.paddingRight||'0') + \"px\");\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn cell_style;\n};\n\nscheduler._grid._get_column_node = function(columns, id){\n\tvar index = -1;\n\tfor(var i = 0; i < columns.length; i++){\n\t\tif(columns[i].id == id){\n\t\t\tindex = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(index < 0) return null;\n\n\treturn scheduler._obj.querySelectorAll(\".dhx_grid_line > div\")[index];\n};\n\nscheduler._grid._get_sort_rule = function(objName){\n\tvar grid = scheduler[objName];\n\tvar sort = this._get_sort_state(objName);\n\tvar sortRule;\n\tif(sort){\n\t\tvar column;\n\n\t\tfor(var i = 0; i < grid.columns.length; i++){\n\t\t\tif(grid.columns[i].id == sort.column){\n\t\t\t\tcolumn = grid.columns[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(column){\n\t\t\tvar value = scheduler._grid._get_sort_value_for_column(column);\n\n\t\t\tvar rule = column.sort;\n\t\t\tif(typeof rule != 'function'){\n\t\t\t\trule = scheduler._grid.sort_rules[rule] || scheduler._grid.sort_rules['str'];\n\t\t\t}\n\n\t\t\tsortRule = {direction: sort.direction, rule: rule, value: value};\n\t\t}\n\t}\n\treturn sortRule;\n};\n\nscheduler._grid._fill_grid_tab = function(objName){\n\tvar grid = scheduler[objName];\n\tvar sort = this._get_sort_state(objName);\n\n\tvar sortRule = this._get_sort_rule(objName);\n\n\tif(sortRule) {\n\t\tscheduler._grid.draw_sort_marker(grid.columns, sort);\n\t}\n\n\t//get current date\n\t//var date = scheduler._date;\n\t//select events for which data need to be printed\n\tvar events = scheduler._grid.sort_grid(sortRule);\n\n\t//generate html for the view\n\tvar columns = scheduler[objName].columns;\n\n\tvar html = \"<div>\";\n\tvar left = -1;//column borders at the same pos as header borders...\n\tfor(var i=0; i < columns.length; i++){\n\t//\tvar padding = scheduler._grid._calcPadding(columns[i], objName);\n\t\tleft +=columns[i].width;// + padding;\n\t\tif(i < columns.length - 1){\n\t\t\tvar pos = scheduler.config.rtl ? \"right\" : \"left\";\n\t\t\thtml += \"<div class='dhx_grid_v_border' style='\"+ pos + \":\" + left + \"px'></div>\";\n\t\t}\n\t}\n\thtml += \"</div>\";\n\n\tvar ariaAttr = scheduler._waiAria.gridAttrString();\n\thtml +=\"<div class='dhx_grid_area'><table \"+ariaAttr+\">\";\n\n\tfor (var i=0; i<events.length; i++){\n\t\thtml += scheduler._grid._print_event_row(events[i], objName);\n\t}\n\n\thtml +=\"</table></div>\";\n\t//render html\n\n\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = html;\n\tscheduler._els[\"dhx_cal_data\"][0].lastChild.scrollTop = scheduler._grid._gridScrollTop||0;\n\n\tvar t=scheduler._els[\"dhx_cal_data\"][0].getElementsByTagName(\"tr\");\n\n\tscheduler._rendered=[];\n\tfor (var i=0; i < t.length; i++){\n\t\tscheduler._rendered[i]=t[i];\n\t}\n\n};\n\nscheduler._grid._getCellContent = function(event, column){\n\tvar value;\n\tvar viewName = scheduler.getState().mode;\n\n\tif(column.template){\n\t\tvalue = column.template(event.start_date, event.end_date, event);\n\t}else if(column.id == 'date'){\n\t\tvalue = scheduler.templates[viewName + '_full_date'](event.start_date, event.end_date, event);\n\t}else if(column.id == 'start_date' || column.id == 'end_date' ){\n\t\tvalue = scheduler.templates[viewName + '_single_date'](event[column.id]);\n\t}else{\n\t\tvalue = scheduler.templates[viewName + '_field'](column.id, event);\n\t}\n\treturn value;\n};\n\nscheduler._grid._print_event_row = function(ev, objName){\n\n\tvar styles = [];\n\tif(ev.color)\n\t\tstyles.push(\"--dhx-scheduler-event-background:\"+ev.color);\n\tif(ev.textColor)\n\t\tstyles.push(\"--dhx-scheduler-event-color:\"+ev.textColor);\n\tif(ev._text_style)\n\t\tstyles.push(ev._text_style);\n\tif(scheduler[objName]['rowHeight'])\n\t\t\tstyles.push('height:'+scheduler[objName]['rowHeight'] + 'px');\n\n\tvar style = \"\";\n\tif(styles.length){\n\t\tstyle = \"style='\"+styles.join(\";\")+\"'\";\n\t}\n\n\tvar columns = scheduler[objName].columns;\n\tvar ev_class = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\n\tif(scheduler.getState().select_id == ev.id){\n\t\tev_class += \" dhx_grid_event_selected\";\n\t}\n\n\tvar ariaRowAttr = scheduler._waiAria.gridRowAttrString(ev);\n\n\tvar html =\"<tr \"+ariaRowAttr+\" class='dhx_grid_event\"+(ev_class? ' '+ev_class:'')+\"' event_id='\"+ev.id+\"' \"+scheduler.config.event_attribute+\"='\"+ev.id+\"' \" + style + \">\";\n\n\t//var name = scheduler._grid._getViewName(objName);\n\tvar availStyles = [\"text-align\", \"vertical-align\", \"padding-left\",\"padding-right\"];\n\tfor(var i =0; i < columns.length; i++){\n\t\tvar value = scheduler._grid._getCellContent(ev, columns[i]);\n\t\tvar ariaCellAttribute = scheduler._waiAria.gridCellAttrString(ev, columns[i], value);\n\n\t\tvar cell_style = scheduler._grid._getStyles(columns[i], availStyles);\n\n\t\tvar className = columns[i].css ? (\" class=\\\"\"+columns[i].css+\"\\\"\") : \"\";\n\n\t\thtml+= \"<td \"+ariaCellAttribute+\" style='width:\"+ (columns[i].width )+\"px;\"+cell_style.join(\";\")+\"' \"+className+\">\"+value+\"</td>\";\n\n\t}\n\thtml+=\"<td class='dhx_grid_dummy'></td></tr>\";\n\n\treturn html;\n};\n\nscheduler._grid._print_grid_header = function(objName){\n\tvar head = \"<div class='dhx_grid_line'>\";\n\n\tvar columns = scheduler[objName].columns;\n\tvar widths = [];\n\n\tvar unsized_columns = columns.length;\n\tvar avail_width = scheduler._obj.clientWidth - 2*columns.length -20;//-20 for possible scrollbar, -length for borders\n\tfor(var ind=0; ind < columns.length; ind++){\n\n\t\tvar val = columns[ind].initialWidth*1;\n\t\tif(!isNaN(val) && columns[ind].initialWidth !== '' && columns[ind].initialWidth !== null && typeof columns[ind].initialWidth != 'boolean'){\n\n\t\t\tunsized_columns--;\n\t\t\tavail_width -= val;\n\t\t\twidths[ind] = val;\n\t\t}else {\n\t\t\twidths[ind] = null;\n\t\t}\n\t}\n\n\tvar unsized_width = Math.floor(avail_width / unsized_columns);\n\tvar availStyles = [\"text-align\",  \"padding-left\",\"padding-right\"];\n\tfor(var i=0; i < columns.length; i++){\n\t\tvar column_width = !widths[i] ? unsized_width : widths[i];\n\t\tcolumns[i].width = column_width /*- scheduler._grid._calcPadding(columns[i], objName)*/;\n\t\tvar cell_style = scheduler._grid._getStyles(columns[i], availStyles);\n\t\thead += \"<div class='dhx_grid_column_label' style='line-height: \"+scheduler.xy.scale_height+\"px;width:\"+(columns[i].width)+\"px;\"+cell_style.join(\";\")+\"'>\" + (columns[i].label === undefined ? columns[i].id : columns[i].label) + \"</div>\";\n\t}\n\thead +=\"</div>\";\n\n\treturn head;\n};\n\n\n}","export default function(scheduler){\n\nscheduler.attachEvent(\"onTemplatesReady\",function(){\n\tvar els = document.body.getElementsByTagName(\"DIV\");\n\tfor (var i=0; i < els.length; i++) {\n\t\tvar cs = els[i].className||\"\";\n\t\tcs = cs.split(\":\");\n\t\tif (cs.length == 2 && cs[0] == \"template\"){\n\t\t\tvar code = \"return \\\"\"+(els[i].innerHTML||\"\").replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g,\"\\\\\\\"\").replace(/[\\n\\r]+/g,\"\")+\"\\\";\";\n\t\t\tcode = unescape(code).replace(/\\{event\\.([a-z]+)\\}/g,function(all,mask){\n\t\t\t\treturn '\"+ev.'+mask+'+\"';\n\t\t\t});\n\t\t\tscheduler.templates[cs[1]]=Function(\"start\",\"end\",\"ev\",code);\n\t\t\tels[i].style.display='none';\n\t\t}\n\t}\n});\n\n}","import keyboard_shortcuts from \"./keyboard_navigation/common/keyboard_shortcuts\";\nimport eventhandler from \"./keyboard_navigation/common/eventhandler\";\nimport trap_modal_focus from \"./keyboard_navigation/common/trap_modal_focus\";\nimport marker from \"./keyboard_navigation/marker\";\nimport scheduler_node from \"./keyboard_navigation/elements/scheduler_node\";\nimport nav_node from \"./keyboard_navigation/elements/nav_node\";\nimport header_cell from \"./keyboard_navigation/elements/header_cell\";\nimport event from \"./keyboard_navigation/elements/event\";\nimport time_slot from \"./keyboard_navigation/elements/time_slot\";\nimport minical_button from \"./keyboard_navigation/elements/minical_button\";\nimport minical_cell from \"./keyboard_navigation/elements/minical_cell\";\nimport data_area from \"./keyboard_navigation/elements/data_area\";\nimport modals from \"./keyboard_navigation/modals\";\nimport core from \"./keyboard_navigation/core\";\nimport key_nav_legacy from \"./keyboard_navigation/key_nav_legacy\";\n\n\nimport scheduler_handlers from \"./keyboard_navigation/scheduler_handlers\";\nimport minical_handlers from \"./keyboard_navigation/minical_handlers\";\n\nexport default function(scheduler){\n\t\tscheduler.config.key_nav = true;\n\t\tscheduler.config.key_nav_step = 30;\n\t\tscheduler.addShortcut = function(shortcut, handler, scope){\n\t\t\tvar scopeObject = getScope(scope);\n\t\t\tif(scopeObject){\n\t\t\t\tscopeObject.prototype.bind(shortcut, handler);\n\t\t\t}\n\t\t};\n\n\t\tscheduler.getShortcutHandler = function(shortcut, scope){\n\t\t\tvar scopeObject = getScope(scope);\n\t\t\tif(scopeObject){\n\t\t\t\tvar commands = scheduler.$keyboardNavigation.shortcuts.parse(shortcut);\n\t\t\t\tif(commands.length){\n\t\t\t\t\treturn scopeObject.prototype.findHandler(commands[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tscheduler.removeShortcut = function(shortcut, scope){\n\t\t\tvar scopeObject = getScope(scope);\n\t\t\tif(scopeObject){\n\t\t\t\tscopeObject.prototype.unbind(shortcut);\n\t\t\t}\n\t\t};\n\n\t\tscheduler.focus = function(){\n\t\t\tif(!scheduler.config.key_nav){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar disp = scheduler.$keyboardNavigation.dispatcher;\n\t\t\tdisp.enable();\n\t\t\tvar activeNode = disp.getActiveNode();\n\t\t\tif(!activeNode || activeNode instanceof scheduler.$keyboardNavigation.MinicalButton || activeNode instanceof scheduler.$keyboardNavigation.MinicalCell){\n\t\t\t\tdisp.setDefaultNode();\n\t\t\t}else{\n\t\t\t\tdisp.focusNode(disp.getActiveNode());\n\t\t\t}\n\t\t};\n\n\t\tfunction getScope(mode){\n\t\t\tvar scopes = {\n\t\t\t\t\"minicalButton\":scheduler.$keyboardNavigation.MinicalButton,\n\t\t\t\t\"minicalDate\":scheduler.$keyboardNavigation.MinicalCell,\n\t\t\t\t\"scheduler\":scheduler.$keyboardNavigation.SchedulerNode,\n\t\t\t\t\"dataArea\": scheduler.$keyboardNavigation.DataArea,\n\t\t\t\t\"timeSlot\": scheduler.$keyboardNavigation.TimeSlot,\n\t\t\t\t\"event\": scheduler.$keyboardNavigation.Event\n\t\t\t};\n\n\t\t\tvar searchMap = {};\n\t\t\tfor(var i in scopes)\n\t\t\t\tsearchMap[i.toLowerCase()] = scopes[i];\n\n\t\t\tmode = (mode + \"\").toLowerCase();\n\n\t\t\treturn searchMap[mode] || scopes.scheduler;\n\t\t}\n\n\t\tscheduler.$keyboardNavigation = {};\n\n\t\tscheduler._compose = function(){\n\t\t\tvar parts = Array.prototype.slice.call(arguments, 0);\n\t\t\tvar res = {};\n\t\t\tfor(var i = 0; i < parts.length; i++){\n\t\t\t\tvar obj = parts[i];\n\t\t\t\tif(typeof obj == \"function\"){\n\t\t\t\t\tobj = new obj();\n\t\t\t\t}\n\n\t\t\t\tfor(var p in obj){\n\t\t\t\t\tres[p] = obj[p];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn res;\n\t\t};\n\n\t\tkeyboard_shortcuts(scheduler);\n\t\teventhandler(scheduler);\n\t\ttrap_modal_focus(scheduler);\n\t\tmarker(scheduler);\n\t\tscheduler_node(scheduler);\n\t\tnav_node(scheduler);\n\t\theader_cell(scheduler);\n\t\tevent(scheduler);\n\t\ttime_slot(scheduler);\n\t\tminical_button(scheduler);\n\t\tminical_cell(scheduler);\n\t\tdata_area(scheduler);\n\t\tmodals(scheduler);\n\t\tcore(scheduler);\n\t\tkey_nav_legacy(scheduler);\n\n\t\t(function(){\n\t\t\tscheduler_handlers(scheduler);\n\t\t\tminical_handlers(scheduler);\n\n\t\t\tvar dispatcher = scheduler.$keyboardNavigation.dispatcher;\n\n\t\t\tscheduler.$keyboardNavigation.attachSchedulerHandlers();\n\n\t\t\tif(scheduler.renderCalendar){\n\t\t\t\t// if minical ext loaded before key nav ext - patch it now\n\t\t\t\tscheduler.$keyboardNavigation.patchMinicalendar();\n\t\t\t}else{\n\t\t\t\t// otherwise - wait until everything is loaded and try again\n\t\t\t\tvar attachOnce = scheduler.attachEvent(\"onSchedulerReady\", function(){\n\t\t\t\t\tscheduler.detachEvent(attachOnce);\n\t\t\t\t\tscheduler.$keyboardNavigation.patchMinicalendar();\n\t\t\t\t});\n\t\t\t}\n\n\n\n\t\t\tfunction isSchedulerSelected(){\n\t\t\t\tif(!scheduler.config.key_nav) return;\n\n\t\t\t\tvar enable;\n\t\t\t\tvar focusElement = document.activeElement;\n\t\t\t\t// halt key nav when focus is outside scheduler or in quick info popup\n\t\t\t\tif(!focusElement || scheduler.utils.dom.locateCss(focusElement, \"dhx_cal_quick_info\", false)){\n\t\t\t\t\tenable = false;\n\t\t\t\t}else{\n\t\t\t\t\tenable = scheduler.$keyboardNavigation.isChildOf(focusElement, scheduler.$container) || scheduler.$keyboardNavigation.isMinical(focusElement);\n\t\t\t\t}\n\n\t\t\t\treturn enable;\n\t\t\t}\n\n\n\n\t\t\tfunction changeState(enable){\n\t\t\t\tif(enable && !dispatcher.isEnabled()){\n\t\t\t\t\tdispatcher.enable();\n\t\t\t\t}else if(!enable && dispatcher.isEnabled()){\n\t\t\t\t\tdispatcher.disable();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst intervalId = setInterval(function(){\n\t\t\t\tif(!scheduler.$container || !scheduler.$keyboardNavigation.isChildOf(scheduler.$container, document.body)){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar enable = isSchedulerSelected();\n\n\t\t\t\tif(enable){\n\t\t\t\t\tchangeState(enable);\n\t\t\t\t}else if(!enable && dispatcher.isEnabled()){\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tif(scheduler.$destroyed){\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// doublecheck in case checking is done in handler before focus element is repainted\n\t\t\t\t\t\tif(scheduler.config.key_nav){\n\t\t\t\t\t\t\tchangeState(isSchedulerSelected());\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tscheduler.$container.removeAttribute(\"tabindex\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t\tscheduler.attachEvent(\"onDestroy\", function(){\n\t\t\t\tclearInterval(intervalId);\n\t\t\t});\n\t\t})();\n\t}\n\n\n","export default function(scheduler){\n\nscheduler.$keyboardNavigation.shortcuts = {\n\tcreateCommand: function(){\n\t\treturn {\n\t\t\tmodifiers:{\n\t\t\t\t\"shift\": false,\n\t\t\t\t\"alt\": false,\n\t\t\t\t\"ctrl\": false,\n\t\t\t\t\"meta\": false\n\t\t\t},\n\t\t\tkeyCode: null\n\t\t};\n\t},\n\tparse: function(shortcut){\n\t\tvar commands = [];\n\n\t\tvar expr = this.getExpressions(this.trim(shortcut));\n\t\tfor(var i = 0; i < expr.length; i++){\n\t\t\tvar words = this.getWords(expr[i]);\n\n\t\t\tvar command = this.createCommand();\n\n\t\t\tfor(var j = 0; j < words.length; j++){\n\t\t\t\tif(this.commandKeys[words[j]]){\n\t\t\t\t\tcommand.modifiers[words[j]] = true;\n\t\t\t\t}else if(this.specialKeys[words[j]]){\n\t\t\t\t\tcommand.keyCode = this.specialKeys[words[j]];\n\t\t\t\t}else{\n\t\t\t\t\tcommand.keyCode = words[j].charCodeAt(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcommands.push(command);\n\t\t}\n\t\treturn commands;\n\t},\n\n\tgetCommandFromEvent: function(domEvent){\n\t\tvar command = this.createCommand();\n\t\tcommand.modifiers.shift = !!domEvent.shiftKey;\n\t\tcommand.modifiers.alt = !!domEvent.altKey;\n\t\tcommand.modifiers.ctrl = !!domEvent.ctrlKey;\n\t\tcommand.modifiers.meta = !!domEvent.metaKey;\n\t\tcommand.keyCode = domEvent.which || domEvent.keyCode;\n\n\t\tif(command.keyCode >= 96 && command.keyCode <= 105){\n\t\t\t// numpad keys 96-105 -> 48-57\n\t\t\tcommand.keyCode -= 48;//convert numpad  number code to regular number code\n\t\t}\n\n\t\tvar printableKey = String.fromCharCode(command.keyCode );\n\t\tif(printableKey){\n\t\t\tcommand.keyCode = printableKey.toLowerCase().charCodeAt(0);\n\t\t}\n\t\treturn command;\n\t},\n\n\tgetHashFromEvent: function(domEvent){\n\t\treturn this.getHash(this.getCommandFromEvent(domEvent));\n\t},\n\n\tgetHash: function(command){\n\t\tvar parts = [];\n\t\tfor(var i in command.modifiers){\n\t\t\tif(command.modifiers[i]){\n\t\t\t\tparts.push(i);\n\t\t\t}\n\t\t}\n\t\tparts.push(command.keyCode);\n\n\t\treturn parts.join(this.junctionChar);\n\t},\n\n\tgetExpressions: function(shortcut){\n\t\treturn shortcut.split(this.junctionChar);\n\t},\n\tgetWords: function(term){\n\t\treturn term.split(this.combinationChar);\n\t},\n\ttrim: function(shortcut){\n\t\treturn shortcut.replace(/\\s/g, \"\");\n\t},\n\tjunctionChar:\",\",\n\tcombinationChar:\"+\",\n\tcommandKeys:{\n\t\t\"shift\": 16,\n\t\t\"alt\": 18,\n\t\t\"ctrl\": 17,\n\t\t\"meta\": true\n\t},\n\tspecialKeys:{\n\t\t\"backspace\": 8,\n\t\t\"tab\": 9,\n\t\t\"enter\": 13,\n\t\t\"esc\": 27,\n\t\t\"space\": 32,\n\t\t\"up\": 38,\n\t\t\"down\": 40,\n\t\t\"left\": 37,\n\t\t\"right\": 39,\n\t\t\"home\": 36,\n\t\t\"end\": 35,\n\t\t\"pageup\": 33,\n\t\t\"pagedown\": 34,\n\t\t\"delete\": 46,\n\t\t\"insert\": 45,\n\t\t\"plus\":107,\n\t\t\"f1\": 112,\n\t\t\"f2\": 113,\n\t\t\"f3\": 114,\n\t\t\"f4\": 115,\n\t\t\"f5\": 116,\n\t\t\"f6\": 117,\n\t\t\"f7\": 118,\n\t\t\"f8\": 119,\n\t\t\"f9\": 120,\n\t\t\"f10\": 121,\n\t\t\"f11\": 122,\n\t\t\"f12\": 123\n\t}\n};\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.EventHandler = {\n\t_handlers: null,\n\tfindHandler: function(command){\n\t\tif(!this._handlers) this._handlers = {};\n\t\tvar shortcuts = scheduler.$keyboardNavigation.shortcuts;\n\t\tvar hash = shortcuts.getHash(command);\n\n\t\treturn this._handlers[hash];\n\t},\n\n\tdoAction: function(command, e){\n\t\tvar handler = this.findHandler(command);\n\t\tif(handler){\n\t\t\thandler.call(this, e);\n\n\t\t\tif (e.preventDefault) e.preventDefault();\n\t\t\telse e.returnValue = false;\n\n\t\t}\n\t},\n\tbind: function(shortcut, handler){\n\t\tif(!this._handlers) this._handlers = {};\n\n\t\tvar shortcuts = scheduler.$keyboardNavigation.shortcuts;\n\n\t\tvar commands = shortcuts.parse(shortcut);\n\t\tfor(var i = 0; i < commands.length; i++){\n\t\t\tthis._handlers[shortcuts.getHash(commands[i])] = handler;\n\t\t}\n\t},\n\tunbind: function(shortcut){\n\t\tvar shortcuts = scheduler.$keyboardNavigation.shortcuts;\n\n\t\tvar commands = shortcuts.parse(shortcut);\n\t\tfor(var i = 0; i < commands.length; i++){\n\t\t\tif(this._handlers[shortcuts.getHash(commands[i])]){\n\t\t\t\tdelete this._handlers[shortcuts.getHash(commands[i])];\n\t\t\t}\n\t\t}\n\t},\n\n\tbindAll: function(map){\n\t\tfor(var i in map){\n\t\t\tthis.bind(i, map[i]);\n\t\t}\n\t},\n\tinitKeys: function(){\n\t\tif(!this._handlers)\n\t\t\tthis._handlers = {};\n\t\tif(this.keys){\n\t\t\tthis.bindAll(this.keys);\n\t\t}\n\t}\n};\n\n}","export default function(scheduler){\n\n(function(){\n\tscheduler.$keyboardNavigation.getFocusableNodes = scheduler._getFocusableNodes;\n\n\tscheduler.$keyboardNavigation.trapFocus = function trapFocus(root, e){\n\t\tif(e.keyCode != 9) return false;\n\n\t\tvar focusable = scheduler.$keyboardNavigation.getFocusableNodes(root);\n\t\tvar currentFocus = document.activeElement;\n\t\tvar currentIndex = -1;\n\t\tfor(var i = 0; i < focusable.length; i++){\n\t\t\tif(focusable[i] == currentFocus){\n\t\t\t\tcurrentIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tvar nextIndex, nextItem;\n\t\tif(e.shiftKey){\n\n\t\t\t// back tab\n\t\t\t// go to the last element if we focused on the first\n\t\t\tnextIndex = (currentIndex <= 0) ? (focusable.length - 1) : (currentIndex - 1);\n\n\t\t\tnextItem = focusable[nextIndex];\n\t\t\tif(nextItem){\n\t\t\t\tnextItem.focus();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}else{\n\t\t\t// forward tab\n\t\t\t// forward tab from last element should go back to the first element\n\t\t\tnextIndex = (currentIndex >= focusable.length - 1) ? 0 : (currentIndex + 1);\n\t\t\tnextItem = focusable[nextIndex];\n\t\t\tif(nextItem){\n\t\t\t\tnextItem.focus();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\t};\n})();\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.marker = {\n\tclear: function(){\n\t\tvar divs = scheduler.$container.querySelectorAll(\".dhx_focus_slot\");\n\t\tfor(var i = 0; i < divs.length; i++){\n\t\t\tdivs[i].parentNode.removeChild(divs[i]);\n\t\t}\n\t},\n\tcreateElement: function(){\n\t\tvar element = document.createElement(\"div\");\n\t\telement.setAttribute(\"tabindex\", -1);\n\t\telement.className = \"dhx_focus_slot\";\n\t\treturn element;\n\t},\n\n\trenderMultiple: function(start, end, method){\n\t\tvar divs = [];\n\t\tvar currentStart = new Date(start);\n\t\tvar currentEnd = new Date(Math.min(end.valueOf(), scheduler.date.add(scheduler.date.day_start(new Date(start)), 1, \"day\").valueOf()));\n\t\twhile(currentStart.valueOf() < end.valueOf()){\n\n\t\t\tdivs = divs.concat(method.call(this, currentStart, new Date(Math.min(currentEnd.valueOf(), end.valueOf()))));\n\t\t\tcurrentStart = scheduler.date.day_start(scheduler.date.add(currentStart, 1, \"day\"));\n\n\t\t\tcurrentEnd = scheduler.date.day_start(scheduler.date.add(currentStart, 1, \"day\"));\n\t\t\tcurrentEnd = new Date(Math.min(currentEnd.valueOf(), end.valueOf()));\n\t\t}\n\n\t\treturn divs;\n\t},\n\n\n\trender: function(start, end, section){\n\t\tthis.clear();\n\t\tvar divs = [];\n\n\t\tvar modes = scheduler.$keyboardNavigation.TimeSlot.prototype._modes;\n\t\tvar view = scheduler.$keyboardNavigation.TimeSlot.prototype._getMode();\n\t\tswitch (view){\n\t\t\tcase modes.units:\n\t\t\t\tdivs = this.renderVerticalMarker(start, end, section);\n\t\t\t\tbreak;\n\t\t\tcase modes.timeline:\n\t\t\t\tdivs = this.renderTimelineMarker(start, end, section);\n\t\t\t\tbreak;\n\t\t\tcase modes.year:\n\t\t\t\tdivs = divs.concat(this.renderMultiple(start, end, this.renderYearMarker));\n\t\t\t\tbreak;\n\t\t\tcase modes.month:\n\t\t\t\tdivs = this.renderMonthMarker(start, end);\n\t\t\t\tbreak;\n\t\t\tcase modes.weekAgenda:\n\t\t\t\tdivs = divs.concat(this.renderMultiple(start, end, this.renderWeekAgendaMarker));\n\t\t\t\tbreak;\n\t\t\tcase modes.list:\n\t\t\t\tdivs = this.renderAgendaMarker(start, end);\n\t\t\t\tbreak;\n\t\t\tcase modes.dayColumns:\n\t\t\t\tdivs = divs.concat(this.renderMultiple(start, end, this.renderVerticalMarker));\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.addWaiAriaLabel(divs, start, end, section);\n\t\tthis.addDataAttributes(divs, start, end, section);\n\n\t\tfor(var i = divs.length - 1; i >= 0; i--){\n\t\t\tif(divs[i].offsetWidth){\n\t\t\t\treturn divs[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\taddDataAttributes: function(divs, start, end, section){\n\t\tvar dateToStr = scheduler.date.date_to_str(scheduler.config.api_date);\n\n\t\tvar from = dateToStr(start),\n\t\t\tto = dateToStr(end);\n\n\t\tfor(var i = 0; i < divs.length; i++){\n\t\t\tdivs[i].setAttribute(\"data-start-date\", from);\n\t\t\tdivs[i].setAttribute(\"data-end-date\", to);\n\t\t\tif(section){\n\t\t\t\tdivs[i].setAttribute(\"data-section\", section);\n\t\t\t}\n\t\t}\n\t},\n\n\taddWaiAriaLabel: function(divs, start, end, section){\n\t\tvar label = \"\";\n\t\tvar state = scheduler.getState();\n\t\tvar mode = state.mode;\n\n\t\tvar dateTimeLabel = false;\n\n\t\tlabel += scheduler.templates.day_date(start);\n\n\t\tif((scheduler.date.day_start(new Date(start)).valueOf() != start.valueOf())){\n\t\t\tlabel += \" \" + scheduler.templates.hour_scale(start);\n\t\t\tdateTimeLabel = true;\n\t\t}\n\n\t\tif((scheduler.date.day_start(new Date(start)).valueOf() != scheduler.date.day_start(new Date(end)).valueOf())){\n\n\t\t\tlabel += \" - \" + scheduler.templates.day_date(end);\n\t\t\tif(dateTimeLabel || (scheduler.date.day_start(new Date(end)).valueOf() != end.valueOf())){\n\t\t\t\tlabel += \" \" + scheduler.templates.hour_scale(end);\n\t\t\t}\n\t\t}\n\n\t\tif(section){\n\t\t\tif(scheduler.matrix && scheduler.matrix[mode]){\n\t\t\t\tconst timeline = scheduler.matrix[mode];\n\t\t\t\tconst sectionObject = timeline.y_unit[timeline.order[section]];\n\t\t\t\tlabel += \", \" + scheduler.templates[mode + \"_scale_label\"](sectionObject.key, sectionObject.label, sectionObject);\n\t\t\t}else if(scheduler._props && scheduler._props[mode]){\n\t\t\t\tconst units = scheduler._props[mode];\n\t\t\t\tconst sectionObject = units.options[units.order[section]];\n\n\t\t\t\tlabel += \", \" + scheduler.templates[mode + \"_scale_text\"](sectionObject.key, sectionObject.label, sectionObject);\n\t\t\t}\n\t\t}\n\n\n\t\tfor(var i = 0; i < divs.length; i++){\n\t\t\tscheduler._waiAria.setAttributes(divs[i], {\n\t\t\t\t\"aria-label\": label,\n\t\t\t\t\"aria-live\": \"polite\"\n\t\t\t});\n\t\t}\n\t},\n\n\trenderWeekAgendaMarker: function(start_date, end_date){\n\t\tvar divs = scheduler.$container.querySelectorAll(\".dhx_wa_day_cont .dhx_wa_scale_bar\");\n\n\t\tvar currDate = scheduler.date.week_start(new Date(scheduler.getState().min_date));\n\n\t\tvar index = -1;\n\t\tvar markerDate = scheduler.date.day_start(new Date(start_date));\n\t\tfor(var i = 0; i < divs.length; i++){\n\t\t\tindex++;\n\t\t\tif(scheduler.date.day_start(new Date(currDate)).valueOf() == markerDate.valueOf()){\n\t\t\t\tbreak;\n\t\t\t}else{\n\t\t\t\tcurrDate = scheduler.date.add(currDate, 1, \"day\");\n\t\t\t}\n\t\t}\n\t\tif(index != -1) return this._wrapDiv(divs[index]);\n\t\treturn [];\n\t},\n\n\t_wrapDiv: function(cell){\n\t\tvar marker = this.createElement();\n\t\tmarker.style.top = cell.offsetTop + \"px\";\n\t\tmarker.style.left = cell.offsetLeft + \"px\";\n\t\tmarker.style.width = cell.offsetWidth + \"px\";\n\t\tmarker.style.height = cell.offsetHeight + \"px\";\n\t\tcell.appendChild(marker);\n\t\treturn [marker];\n\t},\n\trenderYearMarker: function(start_date, end_date){\n\t\tvar cell = scheduler._get_year_cell(start_date);\n\t\tcell.style.position = \"relative\";\n\t\tvar marker = this.createElement();\n\t\tmarker.style.top = \"0px\";\n\t\tmarker.style.left = \"0px\";\n\t\tmarker.style.width = \"100%\";\n\t\tmarker.style.height = \"100%\";\n\t\tcell.appendChild(marker);\n\t\treturn [marker];\n\t},\n\n\trenderAgendaMarker: function(start_date, end_date){\n\t\tvar block = this.createElement();\n\t\tblock.style.height = \"1px\";\n\t\tblock.style.width = \"100%\";\n\t\tblock.style.opacity = 1;\n\t\tblock.style.top = \"0px\";\n\t\tblock.style.left = \"0px\";\n\t\tscheduler.$container.querySelector(\".dhx_cal_data\").appendChild(block);\n\t\treturn [block];\n\t},\n\n\trenderTimelineMarker: function(start_date, end_date, section){\n\t\tvar view_opts = scheduler._lame_copy({}, scheduler.matrix[scheduler._mode]);\n\t\tvar areas = view_opts._scales;\n\t\t//timespans must always use actual position, not rounded\n\t\tview_opts.round_position = false;\n\t\tvar blocks = [];\n\n\t\tvar min_date = start_date ? new Date(start_date) : scheduler._min_date;\n\t\tvar max_date = end_date ? new Date(end_date) : scheduler._max_date;\n\n\t\tif(min_date.valueOf() < scheduler._min_date.valueOf())\n\t\t\tmin_date = new Date(scheduler._min_date);\n\t\tif(max_date.valueOf() > scheduler._max_date.valueOf())\n\t\t\tmax_date = new Date(scheduler._max_date);\n\n\t\tif(!view_opts._trace_x) return blocks;\n\n\t\tfor(var i = 0; i < view_opts._trace_x.length; i++){\n\t\t\tif(scheduler._is_column_visible(view_opts._trace_x[i]))\n\t\t\t\tbreak;\n\t\t}\n\t\tif(i == view_opts._trace_x.length)\n\t\t\treturn blocks;\n\n\t\tvar area = areas[section];\n\n\t\tif (!(min_date < end_date && max_date > start_date))\n\t\t\treturn blocks;\n\n\t\tvar block = this.createElement();\n\n\t\tlet start_pos;\n\t\tlet end_pos;\n\n\t\tfunction set_date_part(source, target) {\n\t\t\t// reset to start of the month in order to prevent month change when target is on 31th day, and source month has only 30 days\n\t\t\ttarget.setDate(1);\n\n\t\t\ttarget.setFullYear(source.getFullYear());\n\t\t\ttarget.setMonth(source.getMonth());\n\t\t\ttarget.setDate(source.getDate());\n\t\t}\n\n\t\tif(!scheduler.getView().days){\n\t\t\tstart_pos = scheduler._timeline_getX({start_date: start_date}, false, view_opts);\n\t\t\tend_pos = scheduler._timeline_getX({start_date: end_date}, false, view_opts);\n\t\t}else{\n\t\t\t// daytimeline\n\t\t\tconst tempStart = new Date(start_date);\n\t\t\tset_date_part(scheduler._min_date, tempStart);\n\t\t\tconst tempEnd = new Date(end_date);\n\t\t\tset_date_part(scheduler._min_date, tempEnd);\n\t\t\tstart_pos = scheduler._timeline_getX({start_date: tempStart}, false, view_opts);\n\t\t\tend_pos = scheduler._timeline_getX({start_date: tempEnd}, false, view_opts);\n\t\t}\n\n\t\tvar height = ((view_opts._section_height[section]-1) || (view_opts.dy - 1));\n\n\t\tvar top = 0;\n\t\tif (scheduler._isRender('cell')){\n\t\t\ttop = area.offsetTop;\n\t\t\tstart_pos += view_opts.dx;\n\t\t\tend_pos += view_opts.dx;\n\t\t\tarea = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t\t}else{\n\n\t\t}\n\t\tvar width = Math.max(1, end_pos - start_pos - 1);\n\t\tlet direction = \"left\";\n\t\tif(scheduler.config.rtl){\n\t\t\tdirection = \"right\";\n\t\t}\n\t\tblock.style.cssText = `height:${height}px; ${direction}:${start_pos}px; width:${width}px; top:${top}px;`;\n\n\t\tif(area){\n\t\t\tarea.appendChild(block);\n\t\t\tblocks.push(block);\n\t\t}\n\n\t\treturn blocks;\n\t},\n\n\trenderMonthCell: function(date){\n\t\tvar cells = scheduler.$container.querySelectorAll(\".dhx_month_head\");\n\n\t\tvar divs = [];\n\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\tdivs.push(cells[i].parentNode);\n\t\t}\n\n\t\tvar firstDate = scheduler.date.week_start(new Date(scheduler.getState().min_date));\n\n\t\tvar index = -1;\n\t\tvar weekNumber = 0;\n\t\tvar dayIndex = -1;\n\t\tvar currDate = firstDate;\n\t\tvar markerDate = scheduler.date.day_start(new Date(date));\n\t\tfor(var i = 0; i < divs.length; i++){\n\t\t\tindex++;\n\n\t\t\tif(dayIndex == 6){\n\t\t\t\tweekNumber++;\n\t\t\t\tdayIndex = 0;\n\t\t\t}else{\n\t\t\t\tdayIndex++;\n\t\t\t}\n\n\t\t\tif(scheduler.date.day_start(new Date(currDate)).valueOf() == markerDate.valueOf()){\n\t\t\t\tbreak;\n\t\t\t}else{\n\t\t\t\tcurrDate = scheduler.date.add(currDate, 1, \"day\");\n\t\t\t}\n\t\t}\n\n\t\tif(index == -1){\n\t\t\treturn [];\n\t\t}\n\n\t\tvar left = scheduler._colsS[dayIndex];\n\t\tvar top = scheduler._colsS.heights[weekNumber];\n\n\t\tvar div = this.createElement();\n\t\tdiv.style.top = top + \"px\";\n\t\tdiv.style.left = left + \"px\";\n\t\tdiv.style.width = scheduler._cols[dayIndex] + \"px\";\n\t\tdiv.style.height = ((scheduler._colsS.heights[weekNumber + 1] - top) || scheduler._colsS.height) + \"px\" ;\n\n\n\t\tvar container = scheduler.$container.querySelector(\".dhx_cal_data\");\n\n\t\tvar datatable = container.querySelector(\".dhx_cal_month_table\");\n\t\tif(datatable.nextSibling){\n\t\t\tcontainer.insertBefore(div, datatable.nextSibling);\n\t\t}else{\n\t\t\tcontainer.appendChild(div);\n\t\t}\n\t\treturn div;\n\t},\n\trenderMonthMarker: function(start_date, end_date){\n\t\tvar res = [];\n\t\tvar currentDate = start_date;\n\t\twhile(currentDate.valueOf() < end_date.valueOf()){\n\t\t\tres.push(this.renderMonthCell(currentDate));\n\t\t\tcurrentDate = scheduler.date.add(currentDate, 1, \"day\");\n\t\t}\n\t\treturn res;\n\t},\n\n\trenderVerticalMarker: function(start_date, end_date, section){\n\t\tvar index = scheduler.locate_holder_day(start_date);\n\n\t\tvar divs = [];\n\t\tvar area = null;\n\n\t\tvar c = scheduler.config;\n\t\tif(scheduler._ignores[index]) return divs;\n\n\t\tif (scheduler._props && scheduler._props[scheduler._mode] && section) {\n\t\t\tvar view = scheduler._props[scheduler._mode];\n\t\t\tindex = view.order[section];\n\n\t\t\tvar inner_index = view.order[section];\n\t\t\tif(!(view.days > 1)){\n\t\t\t\tindex = inner_index;\n\t\t\t\tif (view.size && (index > view.position+view.size)) {\n\t\t\t\t\tindex = 0;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t//var units_l = view.size || view.options.length;\n\n\t\t\t\tindex = scheduler.locate_holder_day(start_date) + inner_index;\n\t\t\t\t//index = index*units_l + inner_index;\n\t\t\t}\n\t\t}\n\t\tarea = scheduler.locate_holder(index);\n\t\tif(!area || area.querySelector(\".dhx_scale_hour\")){\n\t\t\t// hour scale instead of date column\n\t\t\treturn document.createElement(\"div\");\n\t\t}\n\n\t\tvar start = Math.max((start_date.getHours()*60 + start_date.getMinutes()), c.first_hour*60);\n\n\n\t\tvar end = Math.min((end_date.getHours()*60 + end_date.getMinutes()), c.last_hour*60);\n\t\tif(!end && (scheduler.date.day_start(new Date(end_date)).valueOf() > scheduler.date.day_start(new Date(start_date)).valueOf())){\n\t\t\tend = c.last_hour*60;\n\t\t}\n\n\t\tif (end <= start) {\n\t\t\treturn [];\n\t\t}\n\n\t\tvar block = this.createElement();\n\n\t\t// +1 for working with section which really takes up whole height (as % would be == 0)\n\t\tvar all_hours_height = scheduler.config.hour_size_px*c.last_hour + 1;\n\t\tvar hour_ms = 60*60*1000;\n\t\tblock.style.top = (Math.round((start*60*1000-scheduler.config.first_hour*hour_ms)*scheduler.config.hour_size_px/hour_ms) % all_hours_height) + \"px\";\n\t\tblock.style.lineHeight = block.style.height = Math.max((Math.round(((end-start)*60*1000)*scheduler.config.hour_size_px/hour_ms)) % all_hours_height, 1)+\"px\";\n\t\tblock.style.width = \"100%\";\n\t\tarea.appendChild(block);\n\t\tdivs.push(block);\n\t\treturn divs[0];\n\n\t}\n};\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.SchedulerNode = function(){};\n\nscheduler.$keyboardNavigation.SchedulerNode.prototype = scheduler._compose(\n\tscheduler.$keyboardNavigation.EventHandler,\n\t{\n\t\tgetDefaultNode: function(){\n\t\t\tvar node = new scheduler.$keyboardNavigation.TimeSlot();\n\n\t\t\tif(!node.isValid()){\n\t\t\t\tnode = node.fallback();\n\t\t\t}\n\t\t\treturn node;\n\t\t},\n\n\t\t_modes:{\n\t\t\tmonth: \"month\",\n\t\t\tyear: \"year\",\n\t\t\tdayColumns: \"dayColumns\",\n\t\t\ttimeline:\"timeline\",\n\t\t\tunits:\"units\",\n\t\t\tweekAgenda: \"weekAgenda\",\n\t\t\tlist: \"list\"\n\t\t},\n\t\tgetMode: function(){\n\t\t\tvar state = scheduler.getState();\n\n\t\t\tvar mode = state.mode;\n\t\t\tif((scheduler.matrix && scheduler.matrix[mode])){\n\t\t\t\treturn this._modes.timeline;\n\t\t\t} else if((scheduler._props && scheduler._props[mode])){\n\t\t\t\treturn this._modes.units;\n\t\t\t}else if(mode == \"month\"){\n\t\t\t\treturn this._modes.month;\n\t\t\t}else if(mode == \"year\"){\n\t\t\t\treturn this._modes.year;\n\t\t\t}else if(mode == \"week_agenda\"){\n\t\t\t\treturn this._modes.weekAgenda;\n\t\t\t}else if(mode == \"map\" || mode == \"agenda\" || (scheduler._grid && scheduler[\"grid_\" + mode])){\n\t\t\t\treturn this._modes.list;\n\t\t\t}else{\n\t\t\t\treturn this._modes.dayColumns;\n\t\t\t}\n\t\t},\n\n\t\tfocus: function(){\n\t\t\tscheduler.focus();\n\t\t},\n\n\t\tblur: function(){\n\n\t\t},\n\n\t\tdisable: function(){\n\t\t\tscheduler.$container.setAttribute(\"tabindex\", \"0\");\n\t\t},\n\t\tenable: function(){\n\t\t\tif(scheduler.$container)\n\t\t\t\tscheduler.$container.removeAttribute(\"tabindex\");\n\t\t},\n\t\tisEnabled: function(){\n\t\t\treturn scheduler.$container.hasAttribute(\"tabindex\");\n\t\t},\n\n\n\t\t_compareEvents: function(a, b){\n\t\t\tif (a.start_date.valueOf() == b.start_date.valueOf())\n\t\t\t\treturn a.id > b.id ? 1 : -1;\n\t\t\treturn a.start_date.valueOf() > b.start_date.valueOf() ? 1 : -1;\n\t\t},\n\n\t\t_pickEvent: function(from, to, startId, reverse){\n\t\t\tvar range = scheduler.getState();\n\t\t\tfrom = new Date(Math.max(range.min_date.valueOf(), from.valueOf()));\n\t\t\tto = new Date(Math.min(range.max_date.valueOf(), to.valueOf()));\n\n\t\t\tvar evs = scheduler.getEvents(from, to);\n\t\t\tevs.sort(this._compareEvents);\n\t\t\tif(reverse){\n\t\t\t\tevs = evs.reverse();\n\t\t\t}\n\n\t\t\tvar trim = !!startId;\n\t\t\tfor(var i =0; i < evs.length && trim; i++){\n\t\t\t\tif(evs[i].id == startId){\n\t\t\t\t\ttrim = false;\n\t\t\t\t}\n\t\t\t\tevs.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < evs.length; i++){\n\t\t\t\tvar eventElement = new scheduler.$keyboardNavigation.Event(evs[i].id);\n\t\t\t\tif(eventElement.getNode())\n\t\t\t\t\treturn evs[i];\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tnextEventHandler: function(id){\n\t\t\tvar activeNode = scheduler.$keyboardNavigation.dispatcher.activeNode;\n\n\t\t\tvar startId = id || (activeNode && activeNode.eventId);\n\n\t\t\tvar nextEvent = null;\n\t\t\tif(startId && scheduler.getEvent(startId)){\n\t\t\t\tvar currEvent = scheduler.getEvent(startId);\n\n\t\t\t\tnextEvent = scheduler.$keyboardNavigation.SchedulerNode.prototype._pickEvent(\n\t\t\t\t\tcurrEvent.start_date,\n\t\t\t\t\tscheduler.date.add(currEvent.start_date, 1, \"year\"),\n\t\t\t\t\tcurrEvent.id,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\n\t\t\t}\n\t\t\tif(!nextEvent && !id){\n\t\t\t\tvar visibleDates = scheduler.getState();\n\n\t\t\t\tnextEvent = scheduler.$keyboardNavigation.SchedulerNode.prototype._pickEvent(\n\t\t\t\t\tvisibleDates.min_date,\n\t\t\t\t\tscheduler.date.add(visibleDates.min_date, 1, \"year\"),\n\t\t\t\t\tnull,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif(nextEvent){\n\n\t\t\t\tvar nextEv = new scheduler.$keyboardNavigation.Event(nextEvent.id);\n\t\t\t\tif(!nextEv.isValid()){// not visible event\n\t\t\t\t\tthis.nextEventHandler(nextEvent.id);\n\t\t\t\t}else{\n\t\t\t\t\tif(activeNode){activeNode.blur();}\n\t\t\t\t\tscheduler.$keyboardNavigation.dispatcher.setActiveNode(nextEv);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tprevEventHandler: function(id){\n\t\t\tvar activeNode = scheduler.$keyboardNavigation.dispatcher.activeNode;\n\n\t\t\tvar startId = id || (activeNode && activeNode.eventId);\n\n\t\t\tvar nextEvent = null;\n\t\t\tif(startId && scheduler.getEvent(startId)){\n\t\t\t\tvar currEvent = scheduler.getEvent(startId);\n\n\t\t\t\tnextEvent = scheduler.$keyboardNavigation.SchedulerNode.prototype._pickEvent(\n\t\t\t\t\tscheduler.date.add(currEvent.end_date, -1, \"year\"),\n\t\t\t\t\tcurrEvent.end_date,\n\t\t\t\t\tcurrEvent.id,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tif(!nextEvent && !id){\n\t\t\t\tvar visibleDates = scheduler.getState();\n\n\t\t\t\tnextEvent = scheduler.$keyboardNavigation.SchedulerNode.prototype._pickEvent(\n\t\t\t\t\tscheduler.date.add(visibleDates.max_date, -1, \"year\"),\n\t\t\t\t\tvisibleDates.max_date,\n\t\t\t\t\tnull,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif(nextEvent){\n\t\t\t\tvar nextEv = new scheduler.$keyboardNavigation.Event(nextEvent.id);\n\t\t\t\tif(!nextEv.isValid()){// not visible event\n\t\t\t\t\tthis.prevEventHandler(nextEvent.id);\n\t\t\t\t}else{\n\t\t\t\t\tif(activeNode){activeNode.blur();}\n\t\t\t\t\tscheduler.$keyboardNavigation.dispatcher.setActiveNode(nextEv);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tkeys: {\n\n\t\t\t\"alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9\": function(e){\n\t\t\t\tvar tabs = scheduler.$keyboardNavigation.HeaderCell.prototype.getNodes(\".dhx_cal_navline .dhx_cal_tab\");\n\t\t\t\tvar key = e.key;\n\t\t\t\tif(key === undefined){\n\t\t\t\t\tkey = e.keyCode - 48;\n\t\t\t\t}\n\t\t\t\tif(tabs[key*1 - 1]){\n\t\t\t\t\ttabs[key*1 - 1].click();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t\"ctrl+left,meta+left\": function(e){\n\t\t\t\tscheduler._click.dhx_cal_prev_button();\n\t\t\t},\n\t\t\t\"ctrl+right,meta+right\": function(e){\n\t\t\t\tscheduler._click.dhx_cal_next_button();\n\t\t\t},\n\t\t\t\"ctrl+up,meta+up\":function(e){\n\t\t\t\tvar dataArea = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t\t\t\tdataArea.scrollTop -= 20;\n\t\t\t},\n\t\t\t\"ctrl+down,meta+down\": function(e){\n\t\t\t\tvar dataArea = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t\t\t\tdataArea.scrollTop += 20;\n\t\t\t},\n\n\n\t\t\t\"e\": function(){\n\t\t\t\tthis.nextEventHandler();\n\t\t\t},\n\n\t\t\t\"home\": function(){\n\t\t\t\tscheduler.setCurrentView(new Date());\n\t\t\t},\n\n\t\t\t\"shift+e\": function(){\n\t\t\t\tthis.prevEventHandler();\n\t\t\t},\n\n\t\t\t\"ctrl+enter,meta+enter\": function(){\n\t\t\t\tscheduler.addEventNow({start_date: new Date(scheduler.getState().date)});\n\t\t\t},\n\n\t\t\t\"ctrl+c,meta+c\": function(e){\n\t\t\t\tscheduler._key_nav_copy_paste(e);\n\t\t\t},\n\t\t\t\"ctrl+v,meta+v\": function(e){\n\t\t\t\tscheduler._key_nav_copy_paste(e);\n\t\t\t},\n\t\t\t\"ctrl+x,meta+x\": function(e){\n\t\t\t\tscheduler._key_nav_copy_paste(e);\n\t\t\t}\n\n\t\t}\n\t}\n);\n\nscheduler.$keyboardNavigation.SchedulerNode.prototype.bindAll(scheduler.$keyboardNavigation.SchedulerNode.prototype.keys);\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.KeyNavNode = function(){};\n\nscheduler.$keyboardNavigation.KeyNavNode.prototype = scheduler._compose(\n\tscheduler.$keyboardNavigation.EventHandler,\n\t{\n\t\tisValid: function(){\n\t\t\treturn true;\n\t\t},\n\t\tfallback: function(){\n\t\t\treturn null;\n\t\t},\n\n\t\tmoveTo: function (element) {\n\t\t\tscheduler.$keyboardNavigation.dispatcher.setActiveNode(element);\n\t\t},\n\n\t\tcompareTo: function(b){\n\t\t\t// good enough comparison of two random objects\n\t\t\tif(!b) return false;\n\t\t\tfor(var i in this){\n\t\t\t\tif(!!this[i] != !!b[i]) return false;\n\n\t\t\t\tvar canStringifyThis = !!(this[i] && this[i].toString);\n\t\t\t\tvar canStringifyThat = !!(b[i] && b[i].toString);\n\t\t\t\tif(canStringifyThat != canStringifyThis) return false;\n\t\t\t\tif(!(canStringifyThat && canStringifyThis)) {\n\t\t\t\t\tif(b[i] != this[i]) return false;\n\t\t\t\t}else{\n\t\t\t\t\tif(b[i].toString() != this[i].toString())\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\tgetNode: function(){},\n\t\tfocus: function(){\n\t\t\tvar node = this.getNode();\n\t\t\tif(node){\n\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\n\t\t\t\t//node.className += \" scheduler_focused\";\n\t\t\t\tif(node.focus) node.focus();\n\t\t\t}\n\n\t\t},\n\t\tblur: function(){\n\t\t\tvar node = this.getNode();\n\t\t\tif(node){\n\t\t\t\tnode.setAttribute(\"tabindex\", \"-1\");\n\t\t\t\t//node.className = (node.className || \"\").replace(/ ?scheduler_focused/g, \"\");\n\t\t\t}\n\t\t}\n\t}\n\n);\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.HeaderCell = function(index){\n\tthis.index = index || 0;\n};\n\nscheduler.$keyboardNavigation.HeaderCell.prototype = scheduler._compose(\n\tscheduler.$keyboardNavigation.KeyNavNode,\n\t{\n\t\tgetNode: function(index){\n\t\t\tindex = index || this.index || 0;\n\t\t\tvar nodes = this.getNodes();\n\t\t\tif(nodes[index]) return nodes[index];\n\t\t},\n\n\t\tgetNodes: function(selector){\n\t\t\tselector = selector || [\n\t\t\t\t\t\".dhx_cal_navline .dhx_cal_prev_button\",\n\t\t\t\t\t\".dhx_cal_navline .dhx_cal_next_button\",\n\t\t\t\t\t\".dhx_cal_navline .dhx_cal_today_button\",\n\t\t\t\t\t\".dhx_cal_navline .dhx_cal_tab\"\n\t\t\t\t].join(\", \");\n\n\t\t\tvar nodes = Array.prototype.slice.call(scheduler.$container.querySelectorAll(selector));\n\t\t\tnodes.sort(function(a, b){\n\t\t\t\treturn a.offsetLeft - b.offsetLeft;\n\t\t\t});\n\t\t\treturn nodes;\n\t\t},\n\n\t\t_handlers:null,\n\n\t\tisValid: function(){\n\t\t\treturn !!this.getNode(this.index);\n\t\t},\n\t\tfallback:function(){\n\t\t\tvar defaultCell = this.getNode(0);\n\t\t\tif(!defaultCell){\n\t\t\t\tdefaultCell = new scheduler.$keyboardNavigation.TimeSlot();\n\t\t\t}\n\t\t\treturn defaultCell;\n\t\t},\n\n\t\tkeys: {\n\t\t\t\"left\": function(){\n\t\t\t\tvar newIndex = this.index - 1;\n\t\t\t\tif(newIndex < 0){\n\t\t\t\t\tnewIndex = this.getNodes().length - 1;\n\t\t\t\t}\n\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.HeaderCell(newIndex));\n\n\t\t\t},\n\t\t\t\"right\": function () {\n\t\t\t\tvar newIndex = this.index + 1;\n\t\t\t\tif(newIndex >= this.getNodes().length){\n\t\t\t\t\tnewIndex = 0;\n\t\t\t\t}\n\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.HeaderCell(newIndex));\n\t\t\t},\n\t\t\t\"down\": function () {\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\n\t\t\t},\n\n\t\t\t\"enter\": function(){\n\t\t\t\tvar node = this.getNode();\n\t\t\t\tif(node){\n\t\t\t\t\tnode.click();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n);\n\nscheduler.$keyboardNavigation.HeaderCell.prototype.bindAll(scheduler.$keyboardNavigation.HeaderCell.prototype.keys);\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.Event = function(id){\n\tthis.eventId = null;\n\tif(scheduler.getEvent(id)){\n\t\tvar ev = scheduler.getEvent(id);\n\t\tthis.start = new Date(ev.start_date);\n\t\tthis.end = new Date(ev.end_date);\n\n\t\tthis.section = this._getSection(ev);\n\t\tthis.eventId = id;\n\t}\n};\n\nscheduler.$keyboardNavigation.Event.prototype = scheduler._compose(\n\tscheduler.$keyboardNavigation.KeyNavNode,\n\t{\n\t\t_getNodes: function(){\n\t\t\treturn Array.prototype.slice.call(scheduler.$container.querySelectorAll(\"[\"+scheduler.config.event_attribute+\"]\"));\n\t\t},\n\n\t\t_modes: scheduler.$keyboardNavigation.SchedulerNode.prototype._modes,\n\n\t\tgetMode: scheduler.$keyboardNavigation.SchedulerNode.prototype.getMode,\n\n\t\t_handlers: null,\n\t\tisValid: function(){\n\t\t\treturn !!(scheduler.getEvent(this.eventId) && this.getNode());\n\t\t},\n\t\tfallback: function(){\n\t\t\tvar eventNode = this._getNodes()[0];\n\t\t\tvar defaultElement = null;\n\t\t\tif(!eventNode || !(scheduler._locate_event(eventNode))){\n\t\t\t\tdefaultElement = new scheduler.$keyboardNavigation.TimeSlot();\n\t\t\t}else{\n\t\t\t\tvar id = scheduler._locate_event(eventNode);\n\t\t\t\tdefaultElement = new scheduler.$keyboardNavigation.Event(id);\n\t\t\t}\n\n\t\t\treturn defaultElement;\n\t\t},\n\n\t\tisScrolledIntoView: function (el) {\n\t\t\tvar eventBox = el.getBoundingClientRect();\n\t\t\tvar viewPort = scheduler.$container.querySelector(\".dhx_cal_data\").getBoundingClientRect();\n\t\t\t\n\t\t\tif(eventBox.bottom < viewPort.top || eventBox.top > viewPort.bottom){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\tgetNode: function(){\n\n\t\t\tvar idSelector = \"[\"+scheduler.config.event_attribute+\"='\"+this.eventId+\"']\";\n\n\t\t\tvar inlineEditor = scheduler.$keyboardNavigation.dispatcher.getInlineEditor(this.eventId);\n\t\t\tif(inlineEditor){// is inline editor visible\n\t\t\t\treturn inlineEditor;\n\t\t\t}else{\n\t\t\t\tif(scheduler.isMultisectionEvent && scheduler.isMultisectionEvent(scheduler.getEvent(this.eventId))){\n\t\t\t\t\tvar nodes = scheduler.$container.querySelectorAll(idSelector);\n\t\t\t\t\tfor(var i = 0; i < nodes.length; i++){\n\t\t\t\t\t\tif(this.isScrolledIntoView(nodes[i])){\n\t\t\t\t\t\t\treturn nodes[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn nodes[0];\n\t\t\t\t}else{\n\t\t\t\t\treturn scheduler.$container.querySelector(idSelector);\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t}\n\n\t\t},\n\n\t\tfocus: function(){\n\t\t\tvar event = scheduler.getEvent(this.eventId);\n\n\t\t\tvar calendar = scheduler.getState();\n\t\t\tif(event.start_date.valueOf() > calendar.max_date.valueOf() || event.end_date.valueOf() <= calendar.min_date.valueOf()){\n\t\t\t\tscheduler.setCurrentView(event.start_date);\n\t\t\t}\n\n\t\t\tvar node = this.getNode();\n\t\t\tif (this.isScrolledIntoView(node)) {\n\t\t\t\tscheduler.$keyboardNavigation.dispatcher.keepScrollPosition((function(){\n\t\t\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n\t\t\t\t}).bind(this));\n\t\t\t} else {\n\t\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n\t\t\t}\n\n\t\t},\n\t\tblur: function(){\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\n\t\t},\n\n\n\t\t_getSection: function(ev){\n\t\t\tvar section = null;\n\t\t\tvar mode = scheduler.getState().mode;\n\t\t\tif(scheduler.matrix && scheduler.matrix[mode]){\n\t\t\t\tvar timeline = scheduler.matrix[scheduler.getState().mode];\n\t\t\t\tsection = ev[timeline.y_property];\n\t\t\t}else if(scheduler._props && scheduler._props[mode]){\n\t\t\t\tvar unit = scheduler._props[mode];\n\t\t\t\tsection = ev[unit.map_to];\n\t\t\t}\n\t\t\treturn section;\n\t\t},\n\t\t_moveToSlot: function(dir){\n\t\t\tvar ev = scheduler.getEvent(this.eventId);\n\t\t\tif(ev){\n\t\t\t\tvar section =this._getSection(ev);\n\t\t\t\tvar slot = new scheduler.$keyboardNavigation.TimeSlot(ev.start_date, null, section);\n\t\t\t\tthis.moveTo(slot.nextSlot(slot, dir));\n\t\t\t}else{\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\n\t\t\t}\n\t\t},\n\n\t\tkeys: {\n\t\t\t\"left\": function(){\n\t\t\t\tthis._moveToSlot(\"left\");\n\t\t\t},\n\n\t\t\t\"right\": function () {\n\t\t\t\tthis._moveToSlot(\"right\");\n\t\t\t},\n\t\t\t\"down\": function () {\n\t\t\t\tif(this.getMode() == this._modes.list){\n\t\t\t\t\tscheduler.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler();\n\t\t\t\t}else {\n\t\t\t\t\tthis._moveToSlot(\"down\");\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t\"space\": function(){\n\t\t\t\tvar node = this.getNode();\n\t\t\t\tif(node && node.click){\n\t\t\t\t\tnode.click();\n\t\t\t\t}else{\n\t\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\t\"up\": function () {\n\t\t\t\tif(this.getMode() == this._modes.list){\n\t\t\t\t\tscheduler.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler();\n\t\t\t\t}else {\n\t\t\t\t\tthis._moveToSlot(\"up\");\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t\"delete\": function(){\n\t\t\t\tif(scheduler.getEvent(this.eventId)) {\n\t\t\t\t\tscheduler._click.buttons[\"delete\"](this.eventId);\n\t\t\t\t}else{\n\t\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// open lightbox\n\t\t\t\"enter\": function () {\n\t\t\t\tif(scheduler.getEvent(this.eventId)) {\n\t\t\t\t\tscheduler.showLightbox(this.eventId);\n\t\t\t\t}else{\n\t\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n);\nscheduler.$keyboardNavigation.Event.prototype.bindAll(scheduler.$keyboardNavigation.Event.prototype.keys);\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.TimeSlot = function(from, to, section, movingDate){\n\tvar state = scheduler.getState();\n\tvar timeline = scheduler.matrix && scheduler.matrix[state.mode];\n\n\tif(!from){\n\t\tfrom = this.getDefaultDate();\n\t}\n\n\tif(!to){\n\n\t\tif(timeline){\n\t\t\tto = scheduler.date.add(from, timeline.x_step, timeline.x_unit);\n\t\t}else{\n\t\t\tto = scheduler.date.add(from, scheduler.config.key_nav_step, \"minute\");\n\t\t}\n\n\t}\n\n\tthis.section = section || this._getDefaultSection();\n\tthis.start_date = new Date(from);\n\tthis.end_date = new Date(to);\n\tthis.movingDate = movingDate || null;\n};\n\nscheduler.$keyboardNavigation.TimeSlot.prototype = scheduler._compose(\n\tscheduler.$keyboardNavigation.KeyNavNode,\n\t{\n\t\t_handlers:null,\n\n\t\tgetDefaultDate: function(){\n\t\t\tvar from;\n\t\t\tvar state = scheduler.getState();\n\t\t\tvar visibleTime = new Date(state.date);\n\t\t\tvisibleTime.setSeconds(0);\n\t\t\tvisibleTime.setMilliseconds(0);\n\n\t\t\tvar nowTime = new Date();\n\t\t\tnowTime.setSeconds(0);\n\t\t\tnowTime.setMilliseconds(0);\n\n\t\t\tvar timeline = scheduler.matrix && scheduler.matrix[state.mode];\n\t\t\tvar showNowTime = false;\n\t\t\tif(visibleTime.valueOf() === nowTime.valueOf()){\n\t\t\t\tshowNowTime = true;\n\t\t\t}\n\n\t\t\tif(timeline){\n\t\t\t\tif(showNowTime){\n\t\t\t\t\tif(timeline.x_unit === \"day\"){\n\t\t\t\t\t\tnowTime.setHours(0);\n\t\t\t\t\t\tnowTime.setMinutes(0);\n\t\t\t\t\t}else if(timeline.x_unit === \"hour\"){\n\t\t\t\t\t\tnowTime.setMinutes(0);\n\t\t\t\t\t}\n\t\t\t\t\tfrom = nowTime;\n\t\t\t\t}else{\n\t\t\t\t\tfrom = scheduler.date[timeline.name + \"_start\"](new Date(state.date));\n\t\t\t\t}\n\n\t\t\t\tfrom = this.findVisibleColumn(from);\n\t\t\t}else{\n\t\t\t\tfrom = new Date(scheduler.getState().min_date);\n\t\t\t\tif(showNowTime){\n\t\t\t\t\tfrom = nowTime;\n\t\t\t\t}\n\t\t\t\tfrom = this.findVisibleColumn(from);\n\t\t\t\tif(!showNowTime){\n\t\t\t\t\tfrom.setHours(scheduler.config.first_hour);\n\t\t\t\t}\n\n\t\t\t\tif(!scheduler._table_view){\n\t\t\t\t\tvar dataContainer = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t\t\t\t\tif(dataContainer.scrollTop){\n\t\t\t\t\t\tfrom.setHours(scheduler.config.first_hour + Math.ceil(dataContainer.scrollTop / scheduler.config.hour_size_px));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn from;\n\t\t},\n\n\t\tclone: function(timeslot){\n\t\t\treturn new scheduler.$keyboardNavigation.TimeSlot(timeslot.start_date, timeslot.end_date, timeslot.section, timeslot.movingDate);\n\t\t},\n\t\t_getMultisectionView: function(){\n\t\t\tvar state = scheduler.getState();\n\t\t\tvar view;\n\t\t\tif(scheduler._props && scheduler._props[state.mode]) {\n\t\t\t\tview = scheduler._props[state.mode];\n\t\t\t}else if(scheduler.matrix && scheduler.matrix[state.mode]){\n\t\t\t\tview = scheduler.matrix[state.mode];\n\t\t\t}\n\t\t\treturn view;\n\t\t},\n\n\t\t_getDefaultSection: function(){\n\t\t\tvar section = null;\n\t\t\tvar view = this._getMultisectionView();\n\t\t\tif(view && !section){\n\t\t\t\tsection = this._getNextSection();\n\t\t\t}\n\t\t\treturn section;\n\t\t},\n\n\t\t_getNextSection: function(sectionId, dir){\n\t\t\tvar view = this._getMultisectionView();\n\t\t\tvar currentIndex = view.order[sectionId];\n\t\t\tvar nextIndex = currentIndex;\n\t\t\tif(currentIndex !== undefined){\n\t\t\t\tnextIndex =  currentIndex + dir;\n\t\t\t}else{\n\t\t\t\tnextIndex = (view.size && view.position) ? view.position : 0;\n\t\t\t}\n\n\t\t\tif(nextIndex < 0){\n\t\t\t\tnextIndex = 0;\n\t\t\t}\n\t\t\tvar options = view.options || view.y_unit;\n\n\t\t\tif(nextIndex >= options.length){\n\t\t\t\tnextIndex = options.length - 1;\n\t\t\t}\n\t\t\t//nextIndex = nextIndex < 0 ? nextIndex = (view.options || view.y_unit).length -1 : nextIndex;\n\n\t\t\tif(options[nextIndex]){\n\t\t\t\treturn options[nextIndex].key;\n\t\t\t}else{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t},\n\n\n\t\tisValid: function(){\n\t\t\tvar state = scheduler.getState();\n\t\t\tvar isInRange = !(this.start_date.valueOf() < state.min_date.valueOf() || this.start_date.valueOf() >= state.max_date.valueOf());\n\n\t\t\tif(!isInRange) return false;\n\n\n\t\t\tif(!this.isVisible(this.start_date, this.end_date)) return false;\n\n\t\t\tvar view = this._getMultisectionView();\n\n\t\t\tif(view){\n\t\t\t\treturn (view.order[this.section] !== undefined);\n\t\t\t}else{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t},\n\n\t\tfallback:function(){\n\n\t\t\tvar defaultSlot = new scheduler.$keyboardNavigation.TimeSlot();\n\t\t\tif(!defaultSlot.isValid()){\n\t\t\t\treturn new scheduler.$keyboardNavigation.DataArea();\n\t\t\t}else{\n\t\t\t\treturn defaultSlot;\n\t\t\t}\n\t\t},\n\n\t\tgetNodes: function(){\n\t\t\treturn Array.prototype.slice.call(scheduler.$container.querySelectorAll(\".dhx_focus_slot\"));\n\t\t},\n\t\tgetNode: function(){\n\t\t\treturn this.getNodes()[0];\n\t\t},\n\n\t\tfocus: function(){\n\t\t\tif(this.section && scheduler.getView() && scheduler.getView().smart_rendering && scheduler.getView().scrollTo && !scheduler.$container.querySelector(`[data-section-id=\"${this.section}\"]`)){\n\t\t\t\tscheduler.getView().scrollTo({section: this.section});\n\t\t\t}\n\t\t\tscheduler.$keyboardNavigation.marker.render(this.start_date, this.end_date, this.section);\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n\t\t\tscheduler.$keyboardNavigation._pasteDate = this.start_date;\n\t\t\tscheduler.$keyboardNavigation._pasteSection = this.section;\n\n\t\t},\n\t\tblur: function(){\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\n\t\t\tscheduler.$keyboardNavigation.marker.clear();\n\t\t},\n\n\t\t_modes: scheduler.$keyboardNavigation.SchedulerNode.prototype._modes,\n\n\t\t_getMode: scheduler.$keyboardNavigation.SchedulerNode.prototype.getMode,\n\n\t\taddMonthDate: function(date, dir, extend){\n\t\t\tvar res;\n\t\t\tswitch (dir){\n\t\t\t\tcase \"up\":\n\t\t\t\t\tres = scheduler.date.add(date, -1, \"week\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tres = scheduler.date.add(date, 1, \"week\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\tres = scheduler.date.day_start(scheduler.date.add(date, -1, \"day\"));\n\t\t\t\t\tres = this.findVisibleColumn(res, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tres = scheduler.date.day_start(scheduler.date.add(date, 1, \"day\"));\n\t\t\t\t\tres = this.findVisibleColumn(res, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tres = scheduler.date.day_start(new Date(date));\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar state = scheduler.getState();\n\t\t\tif(date.valueOf() < state.min_date.valueOf() || (!extend && date.valueOf() >= state.max_date.valueOf())){\n\t\t\t\tres = new Date(state.min_date);\n\t\t\t}\n\n\t\t\treturn res;\n\t\t},\n\n\t\tnextMonthSlot: function(slot, dir, extend){\n\n\t\t\tvar start, end;\n\t\t\tstart = this.addMonthDate(slot.start_date, dir, extend);\n\n\t\t\tstart.setHours(scheduler.config.first_hour);\n\t\t\tend = new Date(start);\n\t\t\tend.setHours(scheduler.config.last_hour);\n\t\t\treturn {start_date: start, end_date: end};\n\t\t},\n\n\t\t_alignTimeSlot: function(date, minDate, unit, step){\n\t\t\tvar currentDate = new Date(minDate);\n\t\t\twhile(currentDate.valueOf() < date.valueOf()){\n\t\t\t\tcurrentDate = scheduler.date.add(currentDate, step, unit);\n\t\t\t}\n\n\t\t\tif(currentDate.valueOf() > date.valueOf()){\n\t\t\t\tcurrentDate = scheduler.date.add(currentDate, -step, unit);\n\t\t\t}\n\n\t\t\treturn currentDate;\n\t\t},\n\n\t\tnextTimelineSlot: function(slot, dir, extend){\n\t\t\tvar state = scheduler.getState();\n\t\t\tvar view = scheduler.matrix[state.mode];\n\n\t\t\tvar startDate  = this._alignTimeSlot(slot.start_date, scheduler.date[view.name + \"_start\"](new Date(slot.start_date)), view.x_unit, view.x_step);\n\t\t\tvar endDate = this._alignTimeSlot(slot.end_date, scheduler.date[view.name + \"_start\"](new Date(slot.end_date)), view.x_unit, view.x_step);\n\n\t\t\tif(endDate.valueOf() <= startDate.valueOf()){\n\t\t\t\tendDate = scheduler.date.add(startDate, view.x_step, view.x_unit);\n\t\t\t}\n\t\t\tvar newPos = this.clone(slot);\n\t\t\tnewPos.start_date = startDate;\n\t\t\tnewPos.end_date = endDate;\n\t\t\tnewPos.section = slot.section || this._getNextSection();\n\n\n\t\t\tswitch (dir){\n\t\t\t\tcase \"up\":\n\t\t\t\t\tnewPos.section = this._getNextSection(slot.section, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tnewPos.section = this._getNextSection(slot.section, +1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\tnewPos.start_date = this.findVisibleColumn(scheduler.date.add(newPos.start_date, -view.x_step, view.x_unit), -1);\n\t\t\t\t\tnewPos.end_date = scheduler.date.add(newPos.start_date, view.x_step, view.x_unit);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tnewPos.start_date = this.findVisibleColumn(scheduler.date.add(newPos.start_date, view.x_step, view.x_unit), 1);\n\t\t\t\t\tnewPos.end_date = scheduler.date.add(newPos.start_date, view.x_step, view.x_unit);\n\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(newPos.start_date.valueOf() < state.min_date.valueOf() || newPos.start_date.valueOf() >= state.max_date.valueOf()){\n\t\t\t\tif(extend && newPos.start_date.valueOf() >= state.max_date.valueOf()){\n\t\t\t\t\tnewPos.start_date = new Date(state.max_date);\n\t\t\t\t}else{\n\t\t\t\t\tnewPos.start_date = scheduler.date[state.mode + \"_start\"](scheduler.date.add(state.date, dir == \"left\" ? -1 : 1, state.mode));\n\t\t\t\t\tnewPos.end_date = scheduler.date.add(newPos.start_date, view.x_step, view.x_unit);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newPos;\n\t\t},\n\n\t\tnextUnitsSlot: function(slot, dir, extend){\n\t\t\tvar newPos = this.clone(slot);\n\t\t\tnewPos.section = slot.section || this._getNextSection();\n\n\t\t\tvar section = slot.section || this._getNextSection();\n\t\t\tvar state = scheduler.getState();\n\t\t\tvar view = scheduler._props[state.mode];\n\t\t\tswitch (dir){\n\t\t\t\tcase \"left\":\n\t\t\t\t\tsection = this._getNextSection(slot.section, -1);\n\t\t\t\t\tvar optionsCount = view.size ? (view.size - 1) : view.options.length;\n\n\t\t\t\t\tif(view.days > 1 && (view.order[section] == optionsCount - 1)){\n\t\t\t\t\t\tif(scheduler.date.add(slot.start_date, -1, \"day\").valueOf() >= state.min_date.valueOf()){\n\t\t\t\t\t\t\tnewPos = this.nextDaySlot(slot, dir, extend);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tsection = this._getNextSection(slot.section, 1);\n\t\t\t\t\tif(view.days > 1 && !view.order[section]){\n\t\t\t\t\t\tif(scheduler.date.add(slot.start_date, 1, \"day\").valueOf() < state.max_date.valueOf()){\n\t\t\t\t\t\t\tnewPos = this.nextDaySlot(slot, dir, extend);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tnewPos = this.nextDaySlot(slot, dir, extend);\n\t\t\t\t\tsection = slot.section;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tnewPos.section = section;\n\t\t\treturn newPos;\n\t\t},\n\n\t\t_moveDate: function(oldDate, dir){\n\t\t\tvar newDate = this.findVisibleColumn(scheduler.date.add(oldDate, dir, \"day\"), dir);\n\t\t\tnewDate.setHours(oldDate.getHours());\n\t\t\tnewDate.setMinutes(oldDate.getMinutes());\n\t\t\treturn newDate;\n\t\t},\n\n\t\tisBeforeLastHour: function(date, isStartDate){\n\t\t\tvar minutes = date.getMinutes(),\n\t\t\t\thours = date.getHours(),\n\t\t\t\tlast_hour = scheduler.config.last_hour;\n\t\t\treturn (hours < last_hour || (!isStartDate && ((last_hour == 24 || hours == last_hour) && !minutes)));\n\t\t},\n\t\tisAfterFirstHour: function(date, isStartDate){\n\t\t\tvar minutes = date.getMinutes(),\n\t\t\t\thours = date.getHours(),\n\t\t\t\tfirst_hour = scheduler.config.first_hour,\n\t\t\t\tlast_hour = scheduler.config.last_hour;\n\t\t\treturn (hours >= first_hour || (!isStartDate && (!minutes && ((!hours &&  last_hour == 24) || (hours == last_hour)))));\n\t\t},\n\t\tisInVisibleDayTime: function(date, isStartDate){\n\t\t\treturn (this.isBeforeLastHour(date, isStartDate) && this.isAfterFirstHour(date, isStartDate));\n\t\t},\n\n\t\tnextDaySlot: function(slot, dir, extend){\n\t\t\tvar start, end;\n\n\t\t\tvar key_nav_step = scheduler.config.key_nav_step;\n\n\t\t\tvar date = this._alignTimeSlot(slot.start_date, scheduler.date.day_start(new Date(slot.start_date)), \"minute\", key_nav_step);\n\n\n\t\t\tvar oldStart = slot.start_date;\n\n\t\t\tswitch (dir){\n\t\t\t\tcase \"up\":\n\t\t\t\t\tstart = scheduler.date.add(date, -key_nav_step, \"minute\");\n\n\t\t\t\t\tif(!this.isInVisibleDayTime(start, true)){\n\t\t\t\t\t\tif (!extend || this.isInVisibleDayTime(oldStart, true)) {\n\n\t\t\t\t\t\t\tvar toNextDay = true;\n\t\t\t\t\t\t\tif(extend && scheduler.date.date_part(new Date(start)).valueOf() != scheduler.date.date_part(new Date(oldStart)).valueOf())\n\t\t\t\t\t\t\t\ttoNextDay = false;\n\t\t\t\t\t\t\tif(toNextDay)\n\t\t\t\t\t\t\t\tstart = this.findVisibleColumn(scheduler.date.add(slot.start_date, -1, \"day\"), -1);\n\n\t\t\t\t\t\t\tstart.setHours(scheduler.config.last_hour);\n\t\t\t\t\t\t\tstart.setMinutes(0);\n\t\t\t\t\t\t\tstart = scheduler.date.add(start, -key_nav_step, \"minute\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tend = scheduler.date.add(start, key_nav_step, \"minute\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"down\":\n\t\t\t\t\tstart = scheduler.date.add(date, key_nav_step, \"minute\");\n\n\t\t\t\t\tvar testEnd = extend ? start : scheduler.date.add(start, key_nav_step, \"minute\");\n\t\t\t\t\tif(!this.isInVisibleDayTime(testEnd, false)){\n\t\t\t\t\t\tif(!extend || this.isInVisibleDayTime(oldStart, false)) {\n\t\t\t\t\t\t\tif (!extend) {\n\t\t\t\t\t\t\t\tstart = this.findVisibleColumn(scheduler.date.add(slot.start_date, 1, \"day\"), 1);\n\t\t\t\t\t\t\t\tstart.setHours(scheduler.config.first_hour);\n\t\t\t\t\t\t\t\tstart.setMinutes(0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar toNextDay = true;\n\t\t\t\t\t\t\t\tif (scheduler.date.date_part(new Date(oldStart)).valueOf() == oldStart.valueOf()) {\n\t\t\t\t\t\t\t\t\ttoNextDay = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (toNextDay) {\n\t\t\t\t\t\t\t\t\tstart = this.findVisibleColumn(scheduler.date.add(slot.start_date, 1, \"day\"), 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstart.setHours(scheduler.config.first_hour);\n\t\t\t\t\t\t\t\tstart.setMinutes(0);\n\t\t\t\t\t\t\t\tstart = scheduler.date.add(start, key_nav_step, \"minute\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tend = scheduler.date.add(start, key_nav_step, \"minute\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"left\":\n\t\t\t\t\tstart = this._moveDate(slot.start_date, -1);\n\t\t\t\t\tend = this._moveDate(slot.end_date, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tstart = this._moveDate(slot.start_date, 1);\n\t\t\t\t\tend = this._moveDate(slot.end_date, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstart = date;\n\t\t\t\t\tend = scheduler.date.add(start, key_nav_step, \"minute\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn {start_date: start, end_date: end};\n\t\t},\n\t\tnextWeekAgendaSlot: function(slot, dir){\n\t\t\tvar start, end;\n\t\t\tvar state = scheduler.getState();\n\n\t\t\tswitch (dir){\n\t\t\t\tcase \"down\":\n\t\t\t\tcase \"left\":\n\t\t\t\t\tstart = scheduler.date.day_start(scheduler.date.add(slot.start_date, -1, \"day\"));\n\t\t\t\t\tstart = this.findVisibleColumn(start, -1);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"up\":\n\t\t\t\tcase \"right\":\n\t\t\t\t\tstart = scheduler.date.day_start(scheduler.date.add(slot.start_date, 1, \"day\"));\n\t\t\t\t\tstart = this.findVisibleColumn(start, 1);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tstart = scheduler.date.day_start(slot.start_date);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(slot.start_date.valueOf() < state.min_date.valueOf() || slot.start_date.valueOf() >= state.max_date.valueOf()){\n\t\t\t\tstart = new Date(state.min_date);\n\n\t\t\t}\n\t\t\tend = new Date(start);\n\t\t\tend.setHours(scheduler.config.last_hour);\n\t\t\treturn {start_date: start, end_date: end};\n\t\t},\n\t\tnextAgendaSlot: function(slot, dir){\n\t\t\treturn {start_date: slot.start_date, end_date: slot.end_date};\n\t\t},\n\n\n\t\tisDateVisible: function(date){\n\t\t\tif(!scheduler._ignores_detected)\n\t\t\t\treturn true;\n\n\t\t\tvar timeline = scheduler.matrix && scheduler.matrix[scheduler.getState().mode];\n\n\t\t\tvar index;\n\t\t\tif(timeline){\n\t\t\t\tindex = scheduler._get_date_index(timeline, date);\n\t\t\t}else{\n\t\t\t\tindex = scheduler.locate_holder_day(date);\n\t\t\t}\n\n\t\t\treturn !scheduler._ignores[index];\n\t\t},\n\n\t\tfindVisibleColumn: function(start, dir){\n\t\t\tvar date = start;\n\t\t\tdir = dir || 1;\n\t\t\tvar range = scheduler.getState();\n\n\t\t\twhile(!this.isDateVisible(date) && ((dir > 0 && date.valueOf() <= range.max_date.valueOf()) || (dir < 0 && date.valueOf() >= range.min_date.valueOf()))){\n\t\t\t\tdate = this.nextDateColumn(date, dir);\n\t\t\t}\n\n\t\t\treturn date;\n\t\t},\n\n\t\tnextDateColumn: function(start, dir){\n\t\t\tdir = dir || 1;\n\t\t\tvar timeline = scheduler.matrix && scheduler.matrix[scheduler.getState().mode];\n\n\t\t\tvar date;\n\t\t\tif(timeline){\n\t\t\t\tdate = scheduler.date.add(start, dir * timeline.x_step, timeline.x_unit);\n\t\t\t}else{\n\t\t\t\tdate = scheduler.date.day_start(scheduler.date.add(start, dir, \"day\"));\n\t\t\t}\n\n\t\t\treturn date;\n\t\t},\n\n\t\tisVisible:function(from, to){\n\t\t\tif(!scheduler._ignores_detected)\n\t\t\t\treturn true;\n\n\t\t\tvar current = new Date(from);\n\n\t\t\twhile(current.valueOf() < to.valueOf()){\n\t\t\t\tif(this.isDateVisible(current)) return true;\n\t\t\t\tcurrent = this.nextDateColumn(current);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tnextSlot: function(slot, dir, view, extend){\n\t\t\tvar next;\n\t\t\tview = view || this._getMode();\n\n\t\t\tvar tempSlot = scheduler.$keyboardNavigation.TimeSlot.prototype.clone(slot);\n\n\t\t\tswitch (view){\n\t\t\t\tcase this._modes.units:\n\t\t\t\t\tnext = this.nextUnitsSlot(tempSlot, dir, extend);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.timeline:\n\t\t\t\t\tnext = this.nextTimelineSlot(tempSlot, dir, extend);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.year:\n\t\t\t\t\tnext = this.nextMonthSlot(tempSlot, dir, extend);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.month:\n\t\t\t\t\tnext = this.nextMonthSlot(tempSlot, dir, extend);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.weekAgenda:\n\t\t\t\t\tnext = this.nextWeekAgendaSlot(tempSlot, dir, extend);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.list:\n\t\t\t\t\tnext = this.nextAgendaSlot(tempSlot, dir, extend);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.dayColumns:\n\t\t\t\t\tnext = this.nextDaySlot(tempSlot, dir, extend);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(next.start_date.valueOf() >= next.end_date.valueOf()){\n\t\t\t\tnext = this.nextSlot(next, dir, view);\n\t\t\t}\n\n\t\t\treturn scheduler.$keyboardNavigation.TimeSlot.prototype.clone(next);\n\n\t\t},\n\n\t\textendSlot: function(slot, dir){\n\t\t\tvar view = this._getMode();\n\t\t\tvar next;\n\t\t\tswitch (view){\n\t\t\t\tcase this._modes.units:\n\t\t\t\t\tif(dir == \"left\" || dir == \"right\"){\n\t\t\t\t\t\tnext = this.nextUnitsSlot(slot, dir);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tnext = this.extendUnitsSlot(slot, dir);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.timeline:\n\t\t\t\t\tif(dir == \"down\" || dir == \"up\"){\n\t\t\t\t\t\tnext = this.nextTimelineSlot(slot, dir);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tnext = this.extendTimelineSlot(slot, dir);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.year:\n\t\t\t\t\tnext = this.extendMonthSlot(slot, dir);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.month:\n\t\t\t\t\tnext = this.extendMonthSlot(slot, dir);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.dayColumns:\n\t\t\t\t\tnext = this.extendDaySlot(slot, dir);\n\t\t\t\t\tbreak;\n\t\t\t\tcase this._modes.weekAgenda:\n\t\t\t\t\tnext = this.extendWeekAgendaSlot(slot, dir);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tnext = slot;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar range = scheduler.getState();\n\t\t\tif(next.start_date.valueOf() < range.min_date.valueOf()){\n\t\t\t\tnext.start_date = this.findVisibleColumn(range.min_date);\n\t\t\t\tnext.start_date.setHours(scheduler.config.first_hour);\n\t\t\t}\n\n\t\t\tif(next.end_date.valueOf() > range.max_date.valueOf()){\n\t\t\t//\tnext.end_date =  new Date(slot.end_date);\n\t\t\t\tnext.end_date = this.findVisibleColumn(range.max_date, -1);\n\t\t\t}\n\n\n\t\t\treturn scheduler.$keyboardNavigation.TimeSlot.prototype.clone(next);\n\t\t},\n\n\t\textendTimelineSlot: function(slot, direction){\n\t\t\treturn this.extendGenericSlot({\n\t\t\t\t\"left\":\"start_date\",\n\t\t\t\t\"right\":\"end_date\"\n\t\t\t\t},\n\t\t\t\tslot,\n\t\t\t\tdirection,\n\t\t\t\t\"timeline\"\n\t\t\t);\n\t\t},\n\n\t\textendWeekAgendaSlot: function(slot, direction){\n\t\t\treturn this.extendGenericSlot({\n\t\t\t\t\t\"left\":\"start_date\",\n\t\t\t\t\t\"right\":\"end_date\"\n\t\t\t\t},\n\t\t\t\tslot,\n\t\t\t\tdirection,\n\t\t\t\t\"weekAgenda\"\n\t\t\t);\n\t\t},\n\n\t\textendGenericSlot: function(allowedDirections, slot, direction, type){\n\t\t\tvar next;\n\t\t\tvar moveDate = slot.movingDate;\n\n\t\t\tif(!moveDate){\n\t\t\t\tmoveDate = allowedDirections[direction];\n\t\t\t}\n\n\t\t\tif(!moveDate || !allowedDirections[direction]){\n\t\t\t\treturn slot;\n\t\t\t}\n\n\t\t\tif(direction){\n\t\t\t\tnext = this.nextSlot({start_date: slot[moveDate], section: slot.section}, direction, type, true);\n\n\t\t\t\tif(next.start_date.valueOf() == slot.start_date.valueOf()){\n\t\t\t\t\tnext = this.nextSlot({start_date: next.start_date, section:next.section}, direction, type, true);\n\t\t\t\t}\n\n\t\t\t\tnext.movingDate = moveDate;\n\t\t\t}else{\n\t\t\t\treturn scheduler.$keyboardNavigation.TimeSlot.prototype.clone(slot);\n\t\t\t}\n\n\t\t\tvar newDates = this.extendSlotDates(slot, next, next.movingDate);\n\n\t\t\tif(newDates.end_date.valueOf() <= newDates.start_date.valueOf()){\n\t\t\t\tnext.movingDate = next.movingDate == \"end_date\" ? \"start_date\" : \"end_date\";\n\t\t\t}\n\t\t\tnewDates = this.extendSlotDates(slot, next, next.movingDate);\n\n\t\t\tnext.start_date = newDates.start_date;\n\t\t\tnext.end_date = newDates.end_date;\n\t\t\treturn next;\n\t\t},\n\n\t\textendSlotDates: function(oldSlot, newSlot, dateDirection){\n\t\t\tvar res = {start_date:null, end_date:null};\n\n\t\t\tif(dateDirection == \"start_date\"){\n\t\t\t\tres.start_date = newSlot.start_date;\n\t\t\t\tres.end_date = oldSlot.end_date;\n\t\t\t}else{\n\t\t\t\tres.start_date = oldSlot.start_date;\n\t\t\t\tres.end_date = newSlot.start_date;\n\t\t\t}\n\t\t\treturn res;\n\n\t\t},\n\n\t\textendMonthSlot: function(slot, direction){\n\t\t\tvar slot = this.extendGenericSlot({\n\t\t\t\t\t\"up\":\"start_date\",\n\t\t\t\t\t\"down\":\"end_date\",\n\t\t\t\t\t\"left\":\"start_date\",\n\t\t\t\t\t\"right\":\"end_date\"\n\t\t\t\t},\n\t\t\t\tslot,\n\t\t\t\tdirection,\n\t\t\t\t\"month\"\n\t\t\t);\n\n\t\t\tslot.start_date.setHours(scheduler.config.first_hour);\n\t\t\tslot.end_date = scheduler.date.add(slot.end_date, -1, \"day\");\n\t\t\tslot.end_date.setHours(scheduler.config.last_hour);\n\t\t\treturn slot;\n\t\t},\n\n\t\textendUnitsSlot: function(slot, direction){\n\t\t\tvar next;\n\n\t\t\tswitch (direction){\n\t\t\t\tcase \"down\":\n\t\t\t\tcase \"up\":\n\t\t\t\t\tnext = this.extendDaySlot(slot, direction);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tnext = slot;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tnext.section = slot.section;\n\t\t\treturn next;\n\t\t},\n\t\textendDaySlot: function(slot, direction){\n\t\t\treturn this.extendGenericSlot({\n\t\t\t\t\t\"up\":\"start_date\",\n\t\t\t\t\t\"down\":\"end_date\",\n\t\t\t\t\t\"left\":\"start_date\",\n\t\t\t\t\t\"right\":\"end_date\"\n\t\t\t\t},\n\t\t\t\tslot,\n\t\t\t\tdirection,\n\t\t\t\t\"dayColumns\"\n\t\t\t);\n\t\t},\n\n\t\tscrollSlot: function(dir){\n\t\t\tvar state = scheduler.getState();\n\n\t\t\tvar slot = this.nextSlot(this, dir);\n\t\t\tif(slot.start_date.valueOf() < state.min_date.valueOf() || slot.start_date.valueOf() >= state.max_date.valueOf()){\n\t\t\t\tscheduler.setCurrentView(new Date(slot.start_date));\n\t\t\t}\n\n\t\t\tthis.moveTo(slot);\n\t\t},\n\n\t\tkeys: {\n\t\t\t\"left\": function(){\n\t\t\t\tthis.scrollSlot(\"left\");\n\t\t\t},\n\t\t\t\"right\": function () {\n\t\t\t\tthis.scrollSlot(\"right\");\n\t\t\t},\n\t\t\t\"down\": function () {\n\n\t\t\t\tvar mode =  this._getMode();\n\t\t\t\tif(mode == this._modes.list){\n\t\t\t\t\tscheduler.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler();\n\t\t\t\t}else{\n\t\t\t\t\tthis.scrollSlot(\"down\");\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\t\"up\": function () {\n\t\t\t\tvar mode =  this._getMode();\n\t\t\t\tif(mode == this._modes.list){\n\t\t\t\t\tscheduler.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler();\n\t\t\t\t}else{\n\t\t\t\t\tthis.scrollSlot(\"up\");\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\t\"shift+down\":function(){\n\t\t\t\tthis.moveTo(this.extendSlot(this, \"down\"));\n\t\t\t},\n\t\t\t\"shift+up\":function(){\n\t\t\t\tthis.moveTo(this.extendSlot(this, \"up\"));\n\t\t\t},\n\t\t\t\"shift+right\":function(){\n\t\t\t\tthis.moveTo(this.extendSlot(this, \"right\"));\n\t\t\t},\n\t\t\t\"shift+left\":function(){\n\t\t\t\tthis.moveTo(this.extendSlot(this, \"left\"));\n\t\t\t},\n\n\n\t\t\t\"enter\": function(){\n\t\t\t\tvar obj = {start_date: new Date(this.start_date), end_date: new Date(this.end_date)};\n\n\t\t\t\tvar mode = scheduler.getState().mode;\n\t\t\t\tif(scheduler.matrix && scheduler.matrix[mode]){\n\n\t\t\t\t\tvar timeline = scheduler.matrix[scheduler.getState().mode];\n\t\t\t\t\tobj[timeline.y_property] = this.section;\n\t\t\t\t}else if(scheduler._props && scheduler._props[mode]){\n\t\t\t\t\tvar unit = scheduler._props[mode];\n\t\t\t\t\tobj[unit.map_to] = this.section;\n\t\t\t\t}\n\n\t\t\t\tscheduler.addEventNow(obj);\n\t\t\t}\n\t\t}\n\t}\n);\n\nscheduler.$keyboardNavigation.TimeSlot.prototype.bindAll(scheduler.$keyboardNavigation.TimeSlot.prototype.keys);\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.MinicalButton = function(div, index){\n\tthis.container = div;\n\tthis.index = index || 0;\n};\n\nscheduler.$keyboardNavigation.MinicalButton.prototype = scheduler._compose(\n\tscheduler.$keyboardNavigation.KeyNavNode,\n\t{\n\n\t\tisValid: function(){\n\t\t\tvar container = this.container;\n\t\t\treturn !!container.offsetWidth;// valid if container is visible\n\t\t},\n\n\t\tfallback: function(){\n\t\t\tvar defaultSlot = new scheduler.$keyboardNavigation.TimeSlot();\n\t\t\tif(defaultSlot.isValid()){\n\t\t\t\treturn defaultSlot;\n\t\t\t}else{\n\t\t\t\treturn new scheduler.$keyboardNavigation.DataArea();\n\t\t\t}\n\t\t},\n\t\tfocus: function(){\n\t\t\tscheduler.$keyboardNavigation.dispatcher.globalNode.disable();\n\t\t\tthis.container.removeAttribute(\"tabindex\");\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n\n\t\t},\n\t\tblur: function(){\n\t\t\tthis.container.setAttribute(\"tabindex\", \"0\");\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\n\t\t},\n\t\tgetNode: function(){\n\t\t\tif(!this.index){\n\t\t\t\treturn this.container.querySelector(\".dhx_cal_prev_button\");\n\t\t\t}else{\n\t\t\t\treturn this.container.querySelector(\".dhx_cal_next_button\");\n\t\t\t}\n\t\t},\n\n\t\tkeys: {\n\t\t\t\"right\": function(e){\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.MinicalButton(this.container, this.index ? 0 : 1));\n\t\t\t},\n\t\t\t\"left\": function(e){\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.MinicalButton(this.container, this.index ? 0 : 1));\n\t\t\t},\n\t\t\t\"down\": function(){\n\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, 0, 0);\n\t\t\t\tif(next && !next.isValid()){\n\t\t\t\t\tnext = next.fallback();\n\t\t\t\t}\n\n\t\t\t\tthis.moveTo(next);\n\t\t\t},\n\t\t\t\"enter\": function(e){\n\t\t\t\tthis.getNode().click();\n\t\t\t}\n\t\t}\n\t}\n);\n\nscheduler.$keyboardNavigation.MinicalButton.prototype.bindAll(scheduler.$keyboardNavigation.MinicalButton.prototype.keys);\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.MinicalCell = function(div, row, col){\n\tthis.container = div;\n\tthis.row = row || 0;\n\tthis.col = col || 0;\n};\n\nscheduler.$keyboardNavigation.MinicalCell.prototype = scheduler._compose(\n\tscheduler.$keyboardNavigation.KeyNavNode,\n\t{\n\n\t\tisValid: function(){\n\t\t\tvar grid = this._getGrid();\n\t\t\treturn !!(grid[this.row] && grid[this.row][this.col]);\n\t\t},\n\t\tfallback: function(){\n\t\t\tvar row = this.row;\n\t\t\tvar col = this.col;\n\t\t\tvar grid = this._getGrid();\n\t\t\tif(!grid[row]){\n\t\t\t\trow = 0;\n\t\t\t}\n\t\t\tvar dir = true;\n\t\t\tif(row > grid.length / 2){\n\t\t\t\tdir = false;\n\t\t\t}\n\n\t\t\tif(!grid[row]){\n\t\t\t\tvar defaultSlot = new scheduler.$keyboardNavigation.TimeSlot();\n\t\t\t\tif(defaultSlot.isValid()){\n\t\t\t\t\treturn defaultSlot;\n\t\t\t\t}else{\n\t\t\t\t\treturn new scheduler.$keyboardNavigation.DataArea();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(dir){\n\t\t\t\tfor(var c = col; grid[row] && c < grid[row].length; c++){\n\t\t\t\t\tif(!grid[row][c] && c == grid[row].length - 1){\n\t\t\t\t\t\trow++;\n\t\t\t\t\t\tcol = 0;\n\t\t\t\t\t}\n\t\t\t\t\tif(grid[row][c]){\n\t\t\t\t\t\treturn new scheduler.$keyboardNavigation.MinicalCell(this.container, row, c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tfor(var c = col; grid[row] && c < grid[row].length; c--){\n\t\t\t\t\tif(!grid[row][c] && !c){\n\t\t\t\t\t\trow--;\n\t\t\t\t\t\tcol = grid[row].length - 1;\n\t\t\t\t\t}\n\t\t\t\t\tif(grid[row][c]){\n\t\t\t\t\t\treturn new scheduler.$keyboardNavigation.MinicalCell(this.container, row, c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new scheduler.$keyboardNavigation.MinicalButton(this.container, 0);\n\t\t},\n\t\tfocus: function(){\n\t\t\tscheduler.$keyboardNavigation.dispatcher.globalNode.disable();\n\n\t\t\tthis.container.removeAttribute(\"tabindex\");\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this);\n\t\t},\n\t\tblur: function(){\n\t\t\tthis.container.setAttribute(\"tabindex\", \"0\");\n\t\t\tscheduler.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this);\n\t\t},\n\t\t_getNode: function(row, col){\n\t\t\treturn this.container.querySelector(\".dhx_year_body tr:nth-child(\"+(row + 1) + \") td:nth-child(\"+(col + 1)+\")\");\n\t\t},\n\t\tgetNode: function(){\n\t\t\treturn this._getNode(this.row, this.col);\n\t\t},\n\n\t\t_getGrid: function(){\n\t\t\tvar rows = this.container.querySelectorAll(\".dhx_year_body tr\");\n\t\t\tvar grid = [];\n\t\t\tfor(var i = 0; i < rows.length; i++){\n\t\t\t\tgrid[i] = [];\n\t\t\t\tvar row = rows[i];\n\t\t\t\tvar cells = row.querySelectorAll(\"td\");\n\t\t\t\tfor(var c = 0; c < cells.length; c++){\n\t\t\t\t\tvar cell = cells[c];\n\t\t\t\t\tvar enabled = true;\n\t\t\t\t\tvar css = scheduler._getClassName(cell);\n\t\t\t\t\tif(css.indexOf(\"dhx_after\") > -1 || css.indexOf(\"dhx_before\") > -1 || css.indexOf(\"dhx_scale_ignore\") > -1){\n\t\t\t\t\t\tenabled = false;\n\t\t\t\t\t}\n\t\t\t\t\tgrid[i][c] = enabled;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn grid;\n\t\t},\n\n\n\t\tkeys: {\n\t\t\t\"right\": function(e){\n\t\t\t\tvar grid = this._getGrid();\n\t\t\t\tvar newRow = this.row;\n\t\t\t\tvar newCol = this.col + 1;\n\t\t\t\tif(!grid[newRow] || !grid[newRow][newCol]){\n\t\t\t\t\tif(grid[newRow + 1]){\n\t\t\t\t\t\tnewRow = newRow + 1;\n\t\t\t\t\t\tnewCol = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tnewCol = this.col;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, newRow, newCol);\n\t\t\t\tif(!next.isValid()){\n\t\t\t\t\tnext = next.fallback();\n\t\t\t\t}\n\n\t\t\t\tthis.moveTo(next);\n\t\t\t},\n\t\t\t\"left\": function(e){\n\t\t\t\tvar grid = this._getGrid();\n\t\t\t\tvar newRow = this.row;\n\t\t\t\tvar newCol = this.col - 1;\n\t\t\t\tif(!grid[newRow] || !grid[newRow][newCol]){\n\t\t\t\t\tif(grid[newRow - 1]){\n\t\t\t\t\t\tnewRow = newRow - 1;\n\t\t\t\t\t\tnewCol = grid[newRow].length - 1;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tnewCol = this.col;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, newRow, newCol);\n\t\t\t\tif(!next.isValid()){\n\t\t\t\t\tnext = next.fallback();\n\t\t\t\t}\n\n\t\t\t\tthis.moveTo(next);\n\t\t\t},\n\t\t\t\"down\": function(){\n\t\t\t\tvar grid = this._getGrid();\n\t\t\t\tvar newRow = this.row + 1;\n\t\t\t\tvar newCol = this.col;\n\n\t\t\t\tif(!grid[newRow] || !grid[newRow][newCol]){\n\t\t\t\t\tnewRow = this.row;\n\t\t\t\t}\n\n\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, newRow, newCol);\n\t\t\t\tif(!next.isValid()){\n\t\t\t\t\tnext = next.fallback();\n\t\t\t\t}\n\n\t\t\t\tthis.moveTo(next);\n\t\t\t},\n\t\t\t\"up\": function(){\n\t\t\t\tvar grid = this._getGrid();\n\t\t\t\tvar newRow = this.row - 1;\n\t\t\t\tvar newCol = this.col;\n\n\t\t\t\tif(!grid[newRow] || !grid[newRow][newCol]){\n\t\t\t\t\tvar index = 0;\n\t\t\t\t\tif(this.col > grid[this.row].length / 2){\n\t\t\t\t\t\tindex = 1;\n\t\t\t\t\t}\n\t\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.MinicalButton(this.container, index));\n\t\t\t\t}else{\n\t\t\t\t\tvar next = new scheduler.$keyboardNavigation.MinicalCell(this.container, newRow, newCol);\n\t\t\t\t\tif(!next.isValid()){\n\t\t\t\t\t\tnext = next.fallback();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.moveTo(next);\n\t\t\t\t}\n\n\t\t\t},\n\t\t\t\"enter\": function(e){\n\t\t\t\tthis.getNode().querySelector(\".dhx_month_head\").click();\n\t\t\t}\n\t\t}\n\t}\n);\n\nscheduler.$keyboardNavigation.MinicalCell.prototype.bindAll(scheduler.$keyboardNavigation.MinicalCell.prototype.keys);\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.DataArea = function(index){\n\tthis.index = index || 0;\n};\n\nscheduler.$keyboardNavigation.DataArea.prototype = scheduler._compose(\n\tscheduler.$keyboardNavigation.KeyNavNode,\n\t{\n\t\tgetNode: function(index){\n\t\t\treturn scheduler.$container.querySelector(\".dhx_cal_data\");\n\t\t},\n\n\t\t_handlers:null,\n\n\t\tisValid: function(){\n\t\t\treturn true;\n\t\t},\n\t\tfallback:function(){\n\t\t\treturn this;\n\t\t},\n\n\t\tkeys: {\n\t\t\t\"up,down,right,left\":function(){\n\t\t\t\tthis.moveTo(new scheduler.$keyboardNavigation.TimeSlot());\n\t\t\t}\n\t\t}\n\t}\n);\n\nscheduler.$keyboardNavigation.DataArea.prototype.bindAll(scheduler.$keyboardNavigation.DataArea.prototype.keys);\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation.dispatcher = {\n\tisActive: false,\n\tactiveNode: null,\n\tglobalNode: new scheduler.$keyboardNavigation.SchedulerNode(),\n\n\tkeepScrollPosition: function (callback) {\n\t\tvar top, left;\n\n\t\tvar scrollable = scheduler.$container.querySelector(\".dhx_timeline_scrollable_data\");\n\t\tif(!scrollable){\n\t\t\tscrollable = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t\t}\n\n\t\tif(scrollable){\n\t\t\ttop = scrollable.scrollTop;\n\t\t\tleft = scrollable.scrollLeft;\n\t\t}\n\n\t\tcallback();\n\n\t\tif(scrollable){\n\t\t\tscrollable.scrollTop = top;\n\t\t\tscrollable.scrollLeft = left;\n\t\t}\n\t},\n\tenable: function(){\n\t\tif(!scheduler.$container){\n\t\t\t// do nothing if not initialized\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isActive = true;\n\t\tvar self = this;\n\t\tthis.keepScrollPosition(function () {\n\t\t\tself.globalNode.enable();\n\t\t\tself.setActiveNode(self.getActiveNode());\n\t\t});\n\t},\n\n\tdisable: function(){\n\t\tthis.isActive = false;\n\t\tthis.globalNode.disable();\n\t},\n\n\tisEnabled: function(){\n\t\treturn !!this.isActive;\n\t},\n\n\tgetDefaultNode: function(){\n\t\treturn this.globalNode.getDefaultNode();\n\t},\n\n\tsetDefaultNode: function() {\n\t\tthis.setActiveNode(this.getDefaultNode());\n\t},\n\n\tgetActiveNode: function(){\n\t\tvar node = this.activeNode;\n\t\tif(node && !node.isValid()){\n\t\t\tnode = node.fallback();\n\t\t}\n\t\treturn node;\n\t},\n\n\tfocusGlobalNode: function(){\n\t\tthis.blurNode(this.globalNode);\n\t\tthis.focusNode(this.globalNode);\n\t},\n\n\tsetActiveNode: function(el){\n\t\tif(!el || !el.isValid())\n\t\t\treturn;\n\n\t\tif(this.activeNode){\n\t\t\tif(this.activeNode.compareTo(el)){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif(this.isEnabled()){\n\t\t\tthis.blurNode(this.activeNode);\n\t\t\tthis.activeNode = el;\n\t\t\tthis.focusNode(this.activeNode);\n\t\t}\n\t},\n\n\tfocusNode: function(el){\n\t\tif(el && el.focus){\n\t\t\tel.focus();\n\t\t\tif(el.getNode && document.activeElement != el.getNode()){\n\t\t\t\tthis.setActiveNode(new scheduler.$keyboardNavigation.DataArea());\n\t\t\t}\n\t\t}\n\t},\n\tblurNode: function(el){\n\t\tif(el && el.blur){\n\t\t\tel.blur();\n\t\t}\n\t},\n\n\tgetInlineEditor: function(id){\n\t\tvar editor = scheduler.$container.querySelector(\".dhx_cal_editor[\"+scheduler.config.event_attribute+\"='\"+id+\"'] textarea\");\n\t\tif(editor && editor.offsetWidth){\n\t\t\t// if exists and visible\n\t\t\treturn editor;\n\t\t}\n\t\treturn null;\n\t},\n\n\tkeyDownHandler: function (e) {\n\n\t\tif(e.defaultPrevented){\n\t\t\treturn;\n\t\t}\n\n\t\tvar activeElement = this.getActiveNode();\n\n\t\tif(scheduler.$keyboardNavigation.isModal() &&\n\t\t\t!(activeElement && activeElement.container && scheduler.utils.dom.locateCss({target:activeElement.container}, \"dhx_minical_popup\", false)))\n\t\t\treturn;\n\n\t\tif(scheduler.getState().editor_id && this.getInlineEditor(scheduler.getState().editor_id))\n\t\t\treturn;\n\n\t\tif (!this.isEnabled())\n\t\t\treturn;\n\n\t\te = e || window.event;\n\n\t\tvar schedulerNode = this.globalNode;\n\n\t\tvar command = scheduler.$keyboardNavigation.shortcuts.getCommandFromEvent(e);\n\n\t\tif(!activeElement){\n\t\t\tthis.setDefaultNode();\n\t\t}else if(activeElement.findHandler(command)){\n\t\t\tactiveElement.doAction(command, e);\n\t\t}else if(schedulerNode.findHandler(command)){\n\t\t\tschedulerNode.doAction(command, e);\n\t\t}\n\n\t},\n\n\t_timeout: null,\n\tdelay: function(callback, delay){\n\n\t\tclearTimeout(this._timeout);\n\t\tthis._timeout = setTimeout(callback, delay || 1);\n\n\t}\n};\n\n}","export default function(scheduler){\n\nscheduler.$keyboardNavigation._minicalendars = [];\n\nscheduler.$keyboardNavigation.isMinical = function(node){\n\tvar minicalendars = scheduler.$keyboardNavigation._minicalendars;\n\tfor(var i = 0; i < minicalendars.length; i++){\n\t\tif(this.isChildOf(node, minicalendars[i]))\n\t\t\treturn true;\n\t}\n\treturn false;\n};\n\nscheduler.$keyboardNavigation.isChildOf = function(child, parent){\n\twhile(child && child !== parent){\n\t\tchild = child.parentNode;\n\t}\n\n\treturn !!(child === parent);\n};\n\nscheduler.$keyboardNavigation.patchMinicalendar = function(){\n\tvar dispatcher = scheduler.$keyboardNavigation.dispatcher;\n\n\tfunction focusMinical(e){\n\t\tvar target = e.target;\n\n\t\tdispatcher.enable();\n\t\tdispatcher.setActiveNode(new scheduler.$keyboardNavigation.MinicalButton(target, 0));\n\t}\n\n\tfunction minicalClick(e){\n\t\tvar target = e.target || e.srcElement;\n\n\t\tvar prev = scheduler.utils.dom.locateCss(e, \"dhx_cal_prev_button\", false);\n\t\tvar next = scheduler.utils.dom.locateCss(e, \"dhx_cal_next_button\", false);\n\t\tvar cell = scheduler.utils.dom.locateCss(e, \"dhx_year_body\", false);\n\n\t\tvar rowIndex = 0;\n\t\tvar cellIndex = 0;\n\t\tif(cell){\n\t\t\tvar tr;\n\t\t\tvar td;\n\t\t\tvar current = target;\n\t\t\twhile(current && current.tagName.toLowerCase() != \"td\"){\n\t\t\t\tcurrent = current.parentNode;\n\t\t\t}\n\t\t\tif(current){\n\t\t\t\ttd = current;\n\t\t\t\ttr = td.parentNode;\n\t\t\t}\n\n\t\t\tif(tr && td){\n\t\t\t\tvar rows = tr.parentNode.querySelectorAll(\"tr\");\n\t\t\t\tfor(var i = 0; i < rows.length; i++){\n\t\t\t\t\tif(rows[i] == tr){\n\t\t\t\t\t\trowIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar cells = tr.querySelectorAll(\"td\");\n\t\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\t\tif(cells[i] == td){\n\t\t\t\t\t\tcellIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar root = e.currentTarget;\n\t\tdispatcher.delay(function(){\n\t\t\tif(prev || next || cell){\n\n\t\t\t\tvar element;\n\t\t\t\tif(prev){\n\t\t\t\t\telement = new scheduler.$keyboardNavigation.MinicalButton(root, 0);\n\t\t\t\t\tdispatcher.setActiveNode(new scheduler.$keyboardNavigation.MinicalButton(root, 0));\n\t\t\t\t}else if(next){\n\t\t\t\t\telement = new scheduler.$keyboardNavigation.MinicalButton(root, 1);\n\t\t\t\t}else if(cell){\n\t\t\t\t\telement = new scheduler.$keyboardNavigation.MinicalCell(root, rowIndex, cellIndex);\n\n\t\t\t\t}\n\n\t\t\t\tif(element){\n\n\t\t\t\t\tdispatcher.enable();\n\t\t\t\t\tif(element.isValid()){\n\t\t\t\t\t\tdispatcher.activeNode = null;\n\t\t\t\t\t\tdispatcher.setActiveNode(element);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t}\n\n\tif(scheduler.renderCalendar){\n\t\tvar renderMinical = scheduler.renderCalendar;\n\t\tscheduler.renderCalendar = function(){\n\t\t\tvar cal = renderMinical.apply(this, arguments);\n\t\t\tvar minicalendars = scheduler.$keyboardNavigation._minicalendars;\n\n\t\t\tscheduler.eventRemove(cal, \"click\", minicalClick);\n\t\t\tscheduler.event(cal, \"click\", minicalClick);\n\n\t\t\tscheduler.eventRemove(cal, \"focus\", focusMinical);\n\t\t\tscheduler.event(cal, \"focus\", focusMinical);\n\n\t\t\tvar added = false;\n\t\t\tfor(var i = 0; i < minicalendars.length; i++){\n\t\t\t\tif(minicalendars[i] == cal){\n\t\t\t\t\tadded = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!added)\n\t\t\t\tminicalendars.push(cal);\n\n\t\t\tif(dispatcher.isEnabled()){\n\t\t\t\tvar node = dispatcher.getActiveNode();\n\t\t\t\tif(node && node.container == cal){\n\t\t\t\t\tdispatcher.focusNode(node);\n\t\t\t\t}else{\n\t\t\t\t\tcal.setAttribute(\"tabindex\", \"0\");\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tcal.setAttribute(\"tabindex\", \"0\");\n\t\t\t}\n\t\t\treturn cal;\n\t\t};\n\t}\n\n\tif(scheduler.destroyCalendar){\n\t\tvar destroyMinical = scheduler.destroyCalendar;\n\t\tscheduler.destroyCalendar = function(cal, force){\n\t\t\tcal = cal || (scheduler._def_count ? scheduler._def_count.firstChild : null);\n\t\t\tvar res = destroyMinical.apply(this, arguments);\n\n\t\t\tif(!cal || !cal.parentNode){\n\t\t\t\tvar minicalendars = scheduler.$keyboardNavigation._minicalendars;\n\t\t\t\tfor(var i = 0; i < minicalendars.length; i++){\n\t\t\t\t\tif(minicalendars[i] == cal){\n\t\t\t\t\t\tscheduler.eventRemove(minicalendars[i], \"focus\", focusMinical);\n\t\t\t\t\t\tminicalendars.splice(i, 1);\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn res;\n\t\t};\n\t}\n};\n\n}","export default function(scheduler){\n\nscheduler.attachEvent(\"onTemplatesReady\",function(){\n\n\tthis.layers.sort(function(a, b){\n\t\treturn a.zIndex - b.zIndex;\n\t});\n\n\tscheduler._dp_init=function(dp){\n\t\tdp._methods=[\"_set_event_text_style\",\"\",\"changeEventId\",\"deleteEvent\"];\n\n\t\tthis.attachEvent(\"onEventAdded\",function(id){\n\t\t\tif (!this._loading && this.validId(id) && this.getEvent(id) && this.getEvent(id).layer == dp.layer)\n\t\t\t\tdp.setUpdated(id,true,\"inserted\");\n\t\t});\n\t\tthis.attachEvent(\"onBeforeEventDelete\",function(id){\n\t\t\tif(this.getEvent(id) && this.getEvent(id).layer == dp.layer) {\n\t\t\t\tif (!this.validId(id)) return;\n\t\t\t\tvar z=dp.getState(id);\n\n\t\t\t\tif (z==\"inserted\" || this._new_event) {  dp.setUpdated(id,false);\t\treturn true; }\n\t\t\t\tif (z==\"deleted\")  return false;\n\t\t\t\tif (z==\"true_deleted\")  return true;\n\n\t\t\t\tdp.setUpdated(id,true,\"deleted\");\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse return true;\n\t\t});\n\t\tthis.attachEvent(\"onEventChanged\",function(id){\n\t\t\tif (!this._loading && this.validId(id) && this.getEvent(id) && this.getEvent(id).layer == dp.layer)\n\t\t\t\tdp.setUpdated(id,true,\"updated\");\n\t\t});\n\n\t\tdp._getRowData=function(id,pref){\n\t\t\tvar ev=this.obj.getEvent(id);\n\t\t\tvar data = {};\n\n\t\t\tfor (var a in ev){\n\t\t\t\tif (a.indexOf(\"_\")===0) continue;\n\t\t\t\tif (ev[a] && ev[a].getUTCFullYear) //not very good, but will work\n\t\t\t\t\tdata[a] = this.obj._helpers.formatDate(ev[a]);\n\t\t\t\telse\n\t\t\t\t\tdata[a] = ev[a];\n\t\t\t}\n\t\t\treturn data;\n\t\t};\n\t\tdp._clearUpdateFlag=function(){};\n\n\t\tdp.attachEvent(\"insertCallback\", scheduler._update_callback);\n\t\tdp.attachEvent(\"updateCallback\", scheduler._update_callback);\n\t\tdp.attachEvent(\"deleteCallback\", function(upd, id) {\n\t\t\tthis.obj.setUserData(id, this.action_param, \"true_deleted\");\n\t\t\tthis.obj.deleteEvent(id);\n\t\t});\n\t};\n\n\t(function() {\n        var _cloneObj = function(obj){\n            if(obj === null || typeof(obj) != 'object')\n                return obj;\n            var temp = new obj.constructor();\n            for(var key in obj)\n                temp[key] = _cloneObj(obj[key]);\n            return temp;\n        };\n\n\t\tscheduler._dataprocessors = [];\n\t\tscheduler._layers_zindex = {};\n\t\tfor(var i=0; i<scheduler.layers.length; i++) {\n\t\t\tscheduler.config['lightbox_'+scheduler.layers[i].name] = { };\n            scheduler.config['lightbox_'+scheduler.layers[i].name].sections = _cloneObj(scheduler.config.lightbox.sections);\n\t\t\tscheduler._layers_zindex[scheduler.layers[i].name] = scheduler.config.initial_layer_zindex||5 + i*3;\n\t\t\tif(scheduler.layers[i].url) {\n\t\t\t\tvar dp = scheduler.createDataProcessor({\n\t\t\t\t\turl: scheduler.layers[i].url\n\t\t\t\t});\n\t\t\t\tdp.layer = scheduler.layers[i].name;\n\t\t\t\tscheduler._dataprocessors.push(dp);\n\t\t\t\tscheduler._dataprocessors[i].init(scheduler);\n\t\t\t}\n\t\t\tif(scheduler.layers[i].isDefault)\n\t\t\t\tscheduler.defaultLayer = scheduler.layers[i].name;\n\t\t}\n\t})();\n\n\n\tscheduler.showLayer = function(tlayer) {\n\t\tthis.toggleLayer(tlayer, true);\n\t};\n\n\tscheduler.hideLayer = function(tlayer) {\n\t\tthis.toggleLayer(tlayer, false);\n\t};\n\n\tscheduler.toggleLayer = function(tlayer, visible) { // visible is optional\n\t\tvar layer = this.getLayer(tlayer);\n\n\t\tif(typeof visible != 'undefined')\n\t\t\tlayer.visible = !!visible;\n\t\telse\n\t\t\tlayer.visible = !layer.visible;\n\n\t\tthis.setCurrentView(this._date, this._mode);\n\t};\n\n\tscheduler.getLayer = function(tlayer) { // either string with layer name or event with layer property\n\t\tvar layer,\n\t\t\tlayer_name;\n\t\tif(typeof tlayer == 'string')\n\t\t\tlayer_name = tlayer;\n\t\tif(typeof tlayer == 'object')\n\t\t\tlayer_name = tlayer.layer;\n\t\tfor (var i=0; i<scheduler.layers.length; i++) {\n\t\t\tif(scheduler.layers[i].name == layer_name)\n\t\t\t\tlayer = scheduler.layers[i];\n\t\t}\n\t\treturn layer;\n\t};\n\n\tscheduler.attachEvent(\"onBeforeLightbox\", function (event_id){\n\t\tvar ev = this.getEvent(event_id);\n        this.config.lightbox.sections = this.config['lightbox_'+ev.layer].sections;\n        scheduler.resetLightbox();\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onClick\", function (event_id, native_event_object){\n\t\tvar ev = scheduler.getEvent(event_id);\n        return !scheduler.getLayer(ev.layer).noMenu;\n\t});\n\n\tscheduler.attachEvent('onEventCollision', function(ev, evs) {\n\t\tvar layer = this.getLayer(ev);\n\t\tif(!layer.checkCollision)\n\t\t\treturn false;\n\t\tvar count = 0;\n\t\tfor(var i = 0; i<evs.length; i++) {\n\t\t\tif(evs[i].layer == layer.name && evs[i].id != ev.id)\n\t\t\t\tcount++;\n\t\t}\n\t\treturn (count >= scheduler.config.collision_limit);\n\t});\n\n\tscheduler.addEvent=function(start_date,end_date,text,id,extra_data){\n\t\tvar ev=start_date;\n\t\tif (arguments.length!=1){\n\t\t\tev=extra_data||{};\n\t\t\tev.start_date=start_date;\n\t\t\tev.end_date=end_date;\n\t\t\tev.text=text;\n\t\t\tev.id=id;\n\t\t\tev.layer = this.defaultLayer;\n\t\t}\n\t\tev.id = ev.id||scheduler.uid();\n\t\tev.text = ev.text||\"\";\n\n\n\t\tif (typeof ev.start_date == \"string\")  ev.start_date=this.templates.api_date(ev.start_date);\n\t\tif (typeof ev.end_date == \"string\")  ev.end_date=this.templates.api_date(ev.end_date);\n\t\tev._timed=this.isOneDayEvent(ev);\n\n\t\tvar is_new=!this._events[ev.id];\n\t\tthis._events[ev.id]=ev;\n\t\tthis.event_updated(ev);\n\t\tif (!this._loading)\n\t\t\tthis.callEvent(is_new?\"onEventAdded\":\"onEventChanged\",[ev.id,ev]);\n\t};\n\n\tthis._evs_layer = {};\n\tfor (var i = 0; i < this.layers.length; i++) { // array in object for each layer\n\t\tthis._evs_layer[this.layers[i].name] = [];\n\t}\n\n\tscheduler.addEventNow=function(start,end,e){\n\t\tvar base = {};\n\t\tif (typeof start == \"object\"){\n\t\t\tbase = start;\n\t\t\tstart = null;\n\t\t}\n\n\t\tvar d = (this.config.event_duration||this.config.time_step)*60000;\n\t\tif (!start) start = Math.round((scheduler._currentDate()).valueOf()/d)*d;\n\t\tvar start_date = new Date(start);\n\t\tif (!end){\n\t\t\tvar start_hour = this.config.first_hour;\n\t\t\tif (start_hour > start_date.getHours()){\n\t\t\t\tstart_date.setHours(start_hour);\n\t\t\t\tstart = start_date.valueOf();\n\t\t\t}\n\t\t\tend = start+d;\n\t\t}\n\n\n\t\tbase.start_date = base.start_date||start_date;\n\t\tbase.end_date =  base.end_date||new Date(end);\n\t\tbase.text = base.text||this.locale.labels.new_event;\n\t\tbase.id = this._drag_id = this.uid();\n\t\tbase.layer = this.defaultLayer;\n\t\tthis._drag_mode=\"new-size\";\n\n\t\tthis._loading=true;\n\t\tthis.addEvent(base);\n\t\tthis.callEvent(\"onEventCreated\",[this._drag_id,e]);\n\t\tthis._loading=false;\n\n\t\tthis._drag_event={}; //dummy , to trigger correct event updating logic\n\t\tthis._on_mouse_up(e);\n\t};\n\n\tscheduler._t_render_view_data = function(events) { // helper\n\t\tif (this.config.multi_day && !this._table_view) {\n\t\t\tvar tvs = [];\n\t\t\tvar tvd = [];\n\t\t\tfor (var k = 0; k < events.length; k++) {\n\t\t\t\tif (events[k]._timed)\n\t\t\t\t\ttvs.push(events[k]);\n\t\t\t\telse\n\t\t\t\t\ttvd.push(events[k]);\n\t\t\t}\n\t\t\tthis._table_view = true;\n\t\t\tthis.render_data(tvd);\n\t\t\tthis._table_view = false;\n\t\t\tthis.render_data(tvs);\n\t\t}\n\t\telse\n\t\t\tthis.render_data(events);\n\t};\n\n\tscheduler.render_view_data = function(){\n\t\tif (this._not_render) {\n\t\t\tthis._render_wait = true;\n\t\t\treturn;\n\t\t}\n\t\tthis._render_wait = false;\n\n\t\tthis.clear_view();\n\n\t\tthis._evs_layer = {};\n\t\tfor (var i = 0; i < this.layers.length; i++) { // array in object for each layer\n\t\t\tthis._evs_layer[this.layers[i].name] = [];\n\t\t}\n\n\t\tvar evs = this.get_visible_events();\n\t\tfor (var i = 0; i < evs.length; i++) { // filling layer arrays with events\n\t\t\tif(this._evs_layer[evs[i].layer])\n\t\t\t\tthis._evs_layer[evs[i].layer].push(evs[i]);\n\t\t}\n\n\t\tif(this._mode == 'month') { // old logic is used\n\t\t\tvar tevs = [];\n\t\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\t\tif (this.layers[i].visible)\n\t\t\t\t\ttevs = tevs.concat(this._evs_layer[this.layers[i].name]);\n\t\t\t}\n\t\t\tthis._t_render_view_data(tevs);\n\t\t}\n\t\telse { // week, day; should use new logic\n\t\t\tfor (var i = 0; i < this.layers.length; i++) {\n\t\t\t\tif (this.layers[i].visible) {\n\t\t\t\t\tvar evs_layer = this._evs_layer[this.layers[i].name];\n\t\t\t\t\tthis._t_render_view_data(evs_layer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tscheduler._render_v_bar=function(ev,x,y,w,h,style,contentA,contentB,bottom){\n\t\tvar id = ev.id;\n\n\t\tif(contentA.indexOf('<div class=') == -1)\n\t\t\tcontentA = (scheduler.templates['event_header_'+ev.layer])?scheduler.templates['event_header_'+ev.layer](ev.start_date,ev.end_date,ev):contentA;\n\t\tif(contentB.indexOf('<div class=') == -1)\n\t\tcontentB = (scheduler.templates['event_text_'+ev.layer])?scheduler.templates['event_text_'+ev.layer](ev.start_date,ev.end_date,ev):contentB;\n\n\t\tvar d=document.createElement(\"div\");\n\t\tvar cs = \"dhx_cal_event\";\n\t\tvar cse = (scheduler.templates['event_class_'+ev.layer])?scheduler.templates['event_class_'+ev.layer](ev.start_date,ev.end_date,ev):scheduler.templates.event_class(ev.start_date,ev.end_date,ev);\n\t\tif (cse) cs=cs+\" \"+cse;\n\n\t\tvar borderBox = scheduler._border_box_events();\n\n\t\tvar borderBoxWidth = w - 2;\n\t\tvar boxWidth = borderBox ? borderBoxWidth : (w-4),\n\t\theaderWidth = borderBox ? borderBoxWidth : (w-6),\n\t\tbodyWidth = borderBox ? borderBoxWidth : (w-14),\n\t\tfooterWidth = borderBox ? (borderBoxWidth - 2) : (w-8);\n\n\t\tvar bodyHeight = borderBox ? (h - this.xy.event_header_height) : (h-30 + 1);\n\n\t\tvar html='<div event_id=\"'+id+'\" '+scheduler.config.event_attribute+'=\"'+id+'\" class=\"'+cs+'\" style=\"position:absolute; top:'+y+'px; left:'+x+'px; width:'+boxWidth+'px; height:'+h+'px;'+(style||\"\")+'\">';\n\t\thtml+='<div class=\"dhx_header\" style=\" width:'+headerWidth+'px;\" >&nbsp;</div>';\n\t\thtml+='<div class=\"dhx_title\">'+contentA+'</div>';\n\t\thtml+='<div class=\"dhx_body\" style=\" width:'+bodyWidth+'px; height:'+bodyHeight+'px;\">'+contentB+'</div>';\n\t\thtml+='<div class=\"dhx_footer\" style=\" width:'+footerWidth+'px;'+(bottom?' margin-top:-1px;':'')+'\" ></div></div>';\n\n\t\td.innerHTML=html;\n\t\td.style.zIndex = 100;\n\t\treturn d.firstChild;\n\t};\n\n\tscheduler.render_event_bar=function(ev){\n\t\tvar parent=this._els[\"dhx_cal_data\"][0];\n\n\t\tvar x=this._colsS[ev._sday];\n\t\tvar x2=this._colsS[ev._eday];\n\t\tif (x2==x) x2=this._colsS[ev._eday+1];\n\t\tvar hb = this.xy.bar_height;\n\n\t\tvar y=this._colsS.heights[ev._sweek]+(this._colsS.height?(this.xy.month_scale_height+2):2)+ev._sorder*hb;\n\n\t\tvar d=document.createElement(\"div\");\n\t\tvar cs = ev._timed?\"dhx_cal_event_clear\":\"dhx_cal_event_line\";\n\t\tvar cse = (scheduler.templates['event_class_'+ev.layer])?scheduler.templates['event_class_'+ev.layer](ev.start_date,ev.end_date,ev):scheduler.templates.event_class(ev.start_date,ev.end_date,ev);\n\t\tif (cse) cs=cs+\" \"+cse;\n\n\t\tvar html='<div event_id=\"'+ev.id+'\" '+this.config.event_attribute+'=\"'+ev.id+'\" class=\"'+cs+'\" style=\"position:absolute; top:'+y+'px; left:'+x+'px; width:'+(x2-x-15)+'px;'+(ev._text_style||\"\")+'\">';\n\n\t\tif (ev._timed)\n\t\t\thtml+=(scheduler.templates['event_bar_date_'+ev.layer])?scheduler.templates['event_bar_date_'+ev.layer](ev.start_date,ev.end_date,ev):scheduler.templates.event_bar_date(ev.start_date,ev.end_date,ev);\n\t\thtml+=( (scheduler.templates['event_bar_text_'+ev.layer])?scheduler.templates['event_bar_text_'+ev.layer](ev.start_date,ev.end_date,ev):scheduler.templates.event_bar_text(ev.start_date,ev.end_date,ev) + '</div>)');\n\t\thtml+='</div>';\n\n\t\td.innerHTML=html;\n\n\t\tthis._rendered.push(d.firstChild);\n\t\tparent.appendChild(d.firstChild);\n\t};\n\n\tscheduler.render_event=function(ev){\n\t\tvar menu = scheduler.xy.menu_width;\n\t\tif(scheduler.getLayer(ev.layer).noMenu)\n\t\t\tmenu = 0;\n\n\t\tif (ev._sday<0) return; //can occur in case of recurring event during time shift\n\t\tvar parent=scheduler.locate_holder(ev._sday);\n\t\tif (!parent) return; //attempt to render non-visible event\n\t\tvar sm = ev.start_date.getHours()*60+ev.start_date.getMinutes();\n\t\tvar em = (ev.end_date.getHours()*60+ev.end_date.getMinutes())||(scheduler.config.last_hour*60);\n\n\t\tvar top = (Math.round((sm*60*1000-this.config.first_hour*60*60*1000)*this.config.hour_size_px/(60*60*1000)))%(this.config.hour_size_px*24)+1; //42px/hour\n\t\tvar height = Math.max(scheduler.xy.min_event_height,(em-sm)*this.config.hour_size_px/60)+1; //42px/hour\n\t\t\n\t\tvar width=Math.floor((parent.clientWidth-menu)/ev._count);\n\t\tvar left=ev._sorder*width+1;\n\t\tif (!ev._inner) width=width*(ev._count-ev._sorder);\n\n\n\n\t\tvar d=this._render_v_bar(ev.id,menu+left,top,width,height,ev._text_style,scheduler.templates.event_header(ev.start_date,ev.end_date,ev),scheduler.templates.event_text(ev.start_date,ev.end_date,ev));\n\n\t\tthis._rendered.push(d);\n\t\tparent.appendChild(d);\n\n\t\tleft=left+parseInt(parent.style.left,10)+menu;\n\n\t\ttop+=this._dy_shift; //corrupt top, to include possible multi-day shift\n\t\td.style.zIndex = this._layers_zindex[ev.layer];\n\n\t\tif (this._edit_id==ev.id){\n\t\t\td.style.zIndex = parseInt(d.style.zIndex)+1; //fix overlapping issue\n\t\t\tvar new_zIndex = d.style.zIndex;\n\t\t\twidth=Math.max(width-4,scheduler.xy.editor_width);\n\t\t\tvar d=document.createElement(\"div\");\n\t\t\td.setAttribute(\"event_id\",ev.id); // for backward compatibility\n\t\t\td.setAttribute(this.config.event_attribute,ev.id);\n\t\t\tthis.set_xy(d,width,height-20,left,top+14);\n\t\t\td.className=\"dhx_cal_editor\";\n\t\t\td.style.zIndex = new_zIndex;\n\t\t\tvar d2=document.createElement(\"div\");\n\t\t\tthis.set_xy(d2,width-6,height-26);\n\t\t\td2.style.cssText+=\";margin:2px 2px 2px 2px;overflow:hidden;\";\n\n\n\t\t\td2.style.zIndex = new_zIndex;\n\t\t\td.appendChild(d2);\n\t\t\tthis._els[\"dhx_cal_data\"][0].appendChild(d);\n\t\t\tthis._rendered.push(d);\n\n\t\t\td2.innerHTML=\"<textarea class='dhx_cal_editor'>\"+ev.text+\"</textarea>\";\n\n\t\t\tthis._editor=d2.firstChild;\n\t\t\tthis._editor.addEventListener(\"keypress\", function(e){\n\t\t\t\tif (e.shiftKey) return true;\n\t\t\t\tvar code= e.keyCode;\n\t\t\t\tif (code==scheduler.keys.edit_save) scheduler.editStop(true);\n\t\t\t\tif (code==scheduler.keys.edit_cancel) scheduler.editStop(false);\n\t\t\t});\n\t\t\tthis._editor.addEventListener(\"selectstart\", function(e){ e.cancelBubble=true; return true; });\n\t\t\td2.firstChild.focus();\n\t\t\t//IE and opera can add x-scroll during focusing\n\t\t\tthis._els[\"dhx_cal_data\"][0].scrollLeft=0;\n\t\t\td2.firstChild.select();\n\t\t}\n\t\tif (this._select_id==ev.id){\n\t\t\td.style.zIndex = parseInt(d.style.zIndex)+1; //fix overlapping issue\n\t\t\tvar icons=this.config[\"icons_\"+((this._edit_id==ev.id)?\"edit\":\"select\")];\n\t\t\tvar icons_str=\"\";\n\t\t\tfor (var i=0; i<icons.length; i++)\n\t\t\t\ticons_str+=\"<div class='dhx_menu_icon \"+icons[i]+\"' title='\"+this.locale.labels[icons[i]]+\"'></div>\";\n\t\t\tvar obj = this._render_v_bar(ev.id,left-menu+1,top,menu,icons.length*20+26,\"\",\"<div class='dhx_menu_head'></div>\",icons_str,true);\n\t\t\tobj.style.left=left-menu+1;\n\t\t\tobj.style.zIndex = d.style.zIndex;\n\t\t\tthis._els[\"dhx_cal_data\"][0].appendChild(obj);\n\t\t\tthis._rendered.push(obj);\n\t\t}\n\n\t};\n\n    scheduler.filter_agenda = function(id, event) {\n        var layer = scheduler.getLayer(event.layer);\n        return (layer && layer.visible);\n    };\n});\n\n\n}","import definition from \"../legacy/dhtmlxcommon\";\n\n\nexport default function(scheduler){\n\tdefinition();\n}","import global from \"../global\";\nimport dhtmlxErrorConstructor from \"./dhtmlx_error\";\nexport default function extend() {\n\n/* eslint-disable  */\n\nif (!global.dhtmlx) {\n\tglobal.dhtmlx = function (obj) {\n\t\tfor (var a in obj) dhtmlx[a] = obj[a];\n\t\treturn dhtmlx; //simple singleton\n\t};\n}\nlet dhtmlx = global.dhtmlx;\n\ndhtmlx.extend_api = function (name, map, ext) {\n\tvar t = global[name];\n\tif (!t) return; //component not defined\n\tglobal[name] = function (obj) {\n\t\tvar that;\n\n\t\tif (obj && typeof obj == \"object\" && !obj.tagName) {\n\t\t\tthat = t.apply(this, (map._init ? map._init(obj) : arguments));\n\t\t\t//global settings\n\t\t\tfor (var a in dhtmlx)\n\t\t\t\tif (map[a]) this[map[a]](dhtmlx[a]);\n\t\t\t//local settings\n\t\t\tfor (var a in obj) {\n\t\t\t\tif (map[a]) this[map[a]](obj[a]);\n\t\t\t\telse if (a.indexOf(\"on\") === 0) {\n\t\t\t\t\tthis.attachEvent(a, obj[a]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else\n\t\t\tthat = t.apply(this, arguments);\n\t\tif (map._patch) map._patch(this);\n\t\treturn that || this;\n\t};\n\tglobal[name].prototype = t.prototype;\n\tif (ext)\n\t\tdhtmlXHeir(global[name].prototype, ext);\n};\n\n// TODO: remove\nglobal.dhtmlxAjax = {\n\tget: function (url, callback) {\n\t\tvar t = new dtmlXMLLoaderObject(true);\n\t\tt.async = (arguments.length < 3);\n\t\tt.waitCall = callback;\n\t\tt.loadXML(url);\n\t\treturn t;\n\t},\n\tpost: function (url, post, callback) {\n\t\tvar t = new dtmlXMLLoaderObject(true);\n\t\tt.async = (arguments.length < 4);\n\t\tt.waitCall = callback;\n\t\tt.loadXML(url, true, post);\n\t\treturn t;\n\t},\n\tgetSync: function (url) {\n\t\treturn this.get(url, null, true);\n\t},\n\tpostSync: function (url, post) {\n\t\treturn this.post(url, post, null, true);\n\t}\n};\n\n\n// TODO: remove\n/**\n *\t @desc: xmlLoader object\n\t*\t @type: private\n\t*\t @param: funcObject - xml parser function\n\t*\t @param: object - jsControl object\n\t*\t @param: async - sync/async mode (async by default)\n\t*\t @param: rSeed - enable/disable random seed ( prevent IE caching)\n\t*\t @topic: 0\n\t*/\nfunction dtmlXMLLoaderObject(funcObject, dhtmlObject, async, rSeed) {\n\tthis.xmlDoc = \"\";\n\n\tif (typeof (async) != \"undefined\")\n\t\tthis.async = async;\n\telse\n\t\tthis.async = true;\n\n\tthis.onloadAction = funcObject || null;\n\tthis.mainObject = dhtmlObject || null;\n\tthis.waitCall = null;\n\tthis.rSeed = rSeed || false;\n\treturn this;\n}\n\nglobal.dtmlXMLLoaderObject = dtmlXMLLoaderObject;\n\ndtmlXMLLoaderObject.count = 0;\n\n/**\n *\t @desc: xml loading handler\n\t*\t @type: private\n\t*\t @param: dtmlObject - xmlLoader object\n\t*\t @topic: 0\n\t*/\ndtmlXMLLoaderObject.prototype.waitLoadFunction = function (dhtmlObject) {\n\tvar once = true;\n\tthis.check = function () {\n\t\tif ((dhtmlObject) && (dhtmlObject.onloadAction)) {\n\t\t\tif ((!dhtmlObject.xmlDoc.readyState) || (dhtmlObject.xmlDoc.readyState == 4)) {\n\t\t\t\tif (!once)\n\t\t\t\t\treturn;\n\n\t\t\t\tonce = false; //IE 5 fix\n\t\t\t\tdtmlXMLLoaderObject.count++;\n\t\t\t\tif (typeof dhtmlObject.onloadAction == \"function\")\n\t\t\t\t\tdhtmlObject.onloadAction(dhtmlObject.mainObject, null, null, null, dhtmlObject);\n\n\t\t\t\tif (dhtmlObject.waitCall) {\n\t\t\t\t\tdhtmlObject.waitCall.call(this, dhtmlObject);\n\t\t\t\t\tdhtmlObject.waitCall = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\treturn this.check;\n};\n\n/**\n *\t @desc: return XML top node\n\t*\t @param: tagName - top XML node tag name (not used in IE, required for Safari and Mozilla)\n\t*\t @type: private\n\t*\t @returns: top XML node\n\t*\t @topic: 0\n\t*/\ndtmlXMLLoaderObject.prototype.getXMLTopNode = function (tagName, oldObj) {\n\tvar z;\n\n\tif (this.xmlDoc.responseXML) {\n\t\tvar temp = this.xmlDoc.responseXML.getElementsByTagName(tagName);\n\t\tif (temp.length === 0 && tagName.indexOf(\":\") != -1)\n\t\t\tvar temp = this.xmlDoc.responseXML.getElementsByTagName((tagName.split(\":\"))[1]);\n\t\tz = temp[0];\n\t} else\n\t\tz = this.xmlDoc.documentElement;\n\n\tif (z) {\n\t\tthis._retry = false;\n\t\treturn z;\n\t}\n\n\tif (!this._retry && _isIE) {\n\t\tthis._retry = true;\n\t\tvar oldObj = this.xmlDoc;\n\t\tthis.loadXMLString(this.xmlDoc.responseText.replace(/^[\\s]+/, \"\"), true);\n\t\treturn this.getXMLTopNode(tagName, oldObj);\n\t}\n\n\tdhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [\n\t\t(oldObj || this.xmlDoc),\n\t\tthis.mainObject\n\t]);\n\n\treturn document.createElement(\"div\");\n};\n\n/**\n *\t @desc: load XML from string\n\t*\t @type: private\n\t*\t @param: xmlString - xml string\n\t*\t @topic: 0\n\t*/\ndtmlXMLLoaderObject.prototype.loadXMLString = function (xmlString, silent) {\n\n\tif (!_isIE) {\n\t\tvar parser = new DOMParser();\n\t\tthis.xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n\t} else {\n\t\tthis.xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\tthis.xmlDoc.async = this.async;\n\t\tthis.xmlDoc.onreadystatechange = function () { };\n\t\tthis.xmlDoc[\"loadXM\" + \"L\"](xmlString);\n\t}\n\n\tif (silent)\n\t\treturn;\n\n\tif (this.onloadAction)\n\t\tthis.onloadAction(this.mainObject, null, null, null, this);\n\n\tif (this.waitCall) {\n\t\tthis.waitCall();\n\t\tthis.waitCall = null;\n\t}\n};\n/**\n *\t @desc: load XML\n\t*\t @type: private\n\t*\t @param: filePath - xml file path\n\t*\t @param: postMode - send POST request\n\t*\t @param: postVars - list of vars for post request\n\t*\t @topic: 0\n\t*/\ndtmlXMLLoaderObject.prototype.loadXML = function (filePath, postMode, postVars, rpc) {\n\tif (this.rSeed)\n\t\tfilePath += ((filePath.indexOf(\"?\") != -1) ? \"&\" : \"?\") + \"a_dhx_rSeed=\" + (new Date()).valueOf();\n\tthis.filePath = filePath;\n\n\tif ((!_isIE) && (global.XMLHttpRequest))\n\t\tthis.xmlDoc = new XMLHttpRequest();\n\telse {\n\t\tthis.xmlDoc = new ActiveXObject(\"Microsoft.XMLHTTP\");\n\t}\n\n\tif (this.async)\n\t\tthis.xmlDoc.onreadystatechange = new this.waitLoadFunction(this);\n\tif (typeof postMode == \"string\")\n\t\tthis.xmlDoc.open(postMode, filePath, this.async);\n\telse\n\t\tthis.xmlDoc.open(postMode ? \"POST\" : \"GET\", filePath, this.async);\n\n\tif (rpc) {\n\t\tthis.xmlDoc.setRequestHeader(\"User-Agent\", \"dhtmlxRPC v0.1 (\" + navigator.userAgent + \")\");\n\t\tthis.xmlDoc.setRequestHeader(\"Content-type\", \"text/xml\");\n\t}\n\n\telse if (postMode)\n\t\tthis.xmlDoc.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n\tthis.xmlDoc.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\tthis.xmlDoc.send(null || postVars);\n\n\tif (!this.async)\n\t\t(new this.waitLoadFunction(this))();\n};\n/**\n *\t @desc: destructor, cleans used memory\n\t*\t @type: private\n\t*\t @topic: 0\n\t*/\ndtmlXMLLoaderObject.prototype.destructor = function () {\n\tthis._filterXPath = null;\n\tthis._getAllNamedChilds = null;\n\tthis._retry = null;\n\tthis.async = null;\n\tthis.rSeed = null;\n\tthis.filePath = null;\n\tthis.onloadAction = null;\n\tthis.mainObject = null;\n\tthis.xmlDoc = null;\n\tthis.doXPath = null;\n\tthis.doXPathOpera = null;\n\tthis.doXSLTransToObject = null;\n\tthis.doXSLTransToString = null;\n\tthis.loadXML = null;\n\tthis.loadXMLString = null;\n\t// this.waitLoadFunction = null;\n\tthis.doSerialization = null;\n\tthis.xmlNodeToJSON = null;\n\tthis.getXMLTopNode = null;\n\tthis.setXSLParamValue = null;\n\treturn null;\n};\n\ndtmlXMLLoaderObject.prototype.xmlNodeToJSON = function (node) {\n\tvar t = {};\n\tfor (var i = 0; i < node.attributes.length; i++)\n\t\tt[node.attributes[i].name] = node.attributes[i].value;\n\tt[\"_tagvalue\"] = node.firstChild ? node.firstChild.nodeValue : \"\";\n\tfor (var i = 0; i < node.childNodes.length; i++) {\n\t\tvar name = node.childNodes[i].tagName;\n\t\tif (name) {\n\t\t\tif (!t[name]) t[name] = [];\n\t\t\tt[name].push(this.xmlNodeToJSON(node.childNodes[i]));\n\t\t}\n\t}\n\treturn t;\n};\n\nfunction dhtmlDragAndDropObject() {\n\tif (global.dhtmlDragAndDrop)\n\t\treturn global.dhtmlDragAndDrop;\n\n\tthis.lastLanding = 0;\n\tthis.dragNode = 0;\n\tthis.dragStartNode = 0;\n\tthis.dragStartObject = 0;\n\tthis.tempDOMU = null;\n\tthis.tempDOMM = null;\n\tthis.waitDrag = 0;\n\tglobal.dhtmlDragAndDrop = this;\n\n\treturn this;\n}\n\nglobal.dhtmlDragAndDropObject = dhtmlDragAndDropObject;\n\ndhtmlDragAndDropObject.prototype.removeDraggableItem = function (htmlNode) {\n\thtmlNode.onmousedown = null;\n\thtmlNode.dragStarter = null;\n\thtmlNode.dragLanding = null;\n};\n\ndhtmlDragAndDropObject.prototype.addDraggableItem = function (htmlNode, dhtmlObject) {\n\thtmlNode.onmousedown = this.preCreateDragCopy;\n\thtmlNode.dragStarter = dhtmlObject;\n\tthis.addDragLanding(htmlNode, dhtmlObject);\n};\n\ndhtmlDragAndDropObject.prototype.addDragLanding = function (htmlNode, dhtmlObject) {\n\thtmlNode.dragLanding = dhtmlObject;\n};\n\ndhtmlDragAndDropObject.prototype.preCreateDragCopy = function (e) {\n\tif ((e || global.event) && (e || event).button == 2)\n\t\treturn;\n\n\tif (global.dhtmlDragAndDrop.waitDrag) {\n\t\tglobal.dhtmlDragAndDrop.waitDrag = 0;\n\t\tdocument.body.onmouseup = global.dhtmlDragAndDrop.tempDOMU;\n\t\tdocument.body.onmousemove = global.dhtmlDragAndDrop.tempDOMM;\n\t\treturn false;\n\t}\n\n\tif (global.dhtmlDragAndDrop.dragNode)\n\t\tglobal.dhtmlDragAndDrop.stopDrag(e);\n\n\tglobal.dhtmlDragAndDrop.waitDrag = 1;\n\tglobal.dhtmlDragAndDrop.tempDOMU = document.body.onmouseup;\n\tglobal.dhtmlDragAndDrop.tempDOMM = document.body.onmousemove;\n\tglobal.dhtmlDragAndDrop.dragStartNode = this;\n\tglobal.dhtmlDragAndDrop.dragStartObject = this.dragStarter;\n\tdocument.body.onmouseup = global.dhtmlDragAndDrop.preCreateDragCopy;\n\tdocument.body.onmousemove = global.dhtmlDragAndDrop.callDrag;\n\tglobal.dhtmlDragAndDrop.downtime = new Date().valueOf();\n\n\n\tif ((e) && (e.preventDefault)) {\n\t\te.preventDefault();\n\t\treturn false;\n\t}\n\treturn false;\n};\n\ndhtmlDragAndDropObject.prototype.callDrag = function (e) {\n\tif (!e)\n\t\te = global.event;\n\tvar dragger = global.dhtmlDragAndDrop;\n\tif ((new Date()).valueOf() - dragger.downtime < 100) return;\n\n\t//if ((e.button == 0)&&(_isIE))\n\t//\treturn dragger.stopDrag();\n\n\tif (!dragger.dragNode) {\n\t\tif (dragger.waitDrag) {\n\t\t\tdragger.dragNode = dragger.dragStartObject._createDragNode(dragger.dragStartNode, e);\n\n\t\t\tif (!dragger.dragNode)\n\t\t\t\treturn dragger.stopDrag();\n\n\t\t\tdragger.dragNode.onselectstart = function () { return false; };\n\t\t\tdragger.gldragNode = dragger.dragNode;\n\t\t\tdocument.body.appendChild(dragger.dragNode);\n\t\t\tdocument.body.onmouseup = dragger.stopDrag;\n\t\t\tdragger.waitDrag = 0;\n\t\t\tdragger.dragNode.pWindow = global;\n\t\t\tdragger.initFrameRoute();\n\t\t}\n\t\telse return dragger.stopDrag(e, true);\n\t}\n\n\tif (dragger.dragNode.parentNode != global.document.body && dragger.gldragNode) {\n\t\tvar grd = dragger.gldragNode;\n\n\t\tif (dragger.gldragNode.old)\n\t\t\tgrd = dragger.gldragNode.old;\n\n\t\t//if (!document.all) dragger.calculateFramePosition();\n\t\tgrd.parentNode.removeChild(grd);\n\t\tvar oldBody = dragger.dragNode.pWindow;\n\n\t\tif (grd.pWindow && grd.pWindow.dhtmlDragAndDrop.lastLanding)\n\t\t\tgrd.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(grd.pWindow.dhtmlDragAndDrop.lastLanding);\n\n\t\t//\t\tvar oldp=dragger.dragNode.parentObject;\n\t\tif (_isIE) {\n\t\t\tvar div = document.createElement(\"div\");\n\t\t\tdiv.innerHTML = dragger.dragNode.outerHTML;\n\t\t\tdragger.dragNode = div.childNodes[0];\n\t\t} else\n\t\t\tdragger.dragNode = dragger.dragNode.cloneNode(true);\n\n\t\tdragger.dragNode.pWindow = global;\n\t\t//\t\tdragger.dragNode.parentObject=oldp;\n\n\t\tdragger.gldragNode.old = dragger.dragNode;\n\t\tdocument.body.appendChild(dragger.dragNode);\n\t\toldBody.dhtmlDragAndDrop.dragNode = dragger.dragNode;\n\t}\n\n\tdragger.dragNode.style.left = e.clientX + 15 +\n\t\t(dragger.fx ? dragger.fx * (-1) : 0) +\n\t\t(document.body.scrollLeft || document.documentElement.scrollLeft) + \"px\";\n\tdragger.dragNode.style.top = e.clientY + 3 +\n\t\t(dragger.fy ? dragger.fy * (-1) : 0) +\n\t\t(document.body.scrollTop || document.documentElement.scrollTop) + \"px\";\n\n\tvar z;\n\tif (!e.srcElement)\n\t\tz = e.target;\n\telse\n\t\tz = e.srcElement;\n\tdragger.checkLanding(z, e);\n};\n\ndhtmlDragAndDropObject.prototype.calculateFramePosition = function (n) {\n\t//this.fx = 0, this.fy = 0;\n\tif (global.name) {\n\t\tvar el = parent.frames[global.name].frameElement.offsetParent;\n\t\tvar fx = 0;\n\t\tvar fy = 0;\n\n\t\twhile (el) {\n\t\t\tfx += el.offsetLeft;\n\t\t\tfy += el.offsetTop;\n\t\t\tel = el.offsetParent;\n\t\t}\n\n\t\tif ((parent.dhtmlDragAndDrop)) {\n\t\t\tvar ls = parent.dhtmlDragAndDrop.calculateFramePosition(1);\n\t\t\tfx += ls.split('_')[0] * 1;\n\t\t\tfy += ls.split('_')[1] * 1;\n\t\t}\n\n\t\tif (n)\n\t\t\treturn fx + \"_\" + fy;\n\t\telse\n\t\t\tthis.fx = fx;\n\t\tthis.fy = fy;\n\t}\n\treturn \"0_0\";\n};\n\ndhtmlDragAndDropObject.prototype.checkLanding = function (htmlObject, e) {\n\tif ((htmlObject) && (htmlObject.dragLanding)) {\n\t\tif (this.lastLanding)\n\t\t\tthis.lastLanding.dragLanding._dragOut(this.lastLanding);\n\t\tthis.lastLanding = htmlObject;\n\t\tthis.lastLanding = this.lastLanding.dragLanding._dragIn(this.lastLanding, this.dragStartNode, e.clientX,\n\t\t\te.clientY, e);\n\t\tthis.lastLanding_scr = (_isIE ? e.srcElement : e.target);\n\t} else {\n\t\tif ((htmlObject) && (htmlObject.tagName != \"BODY\"))\n\t\t\tthis.checkLanding(htmlObject.parentNode, e);\n\t\telse {\n\t\t\tif (this.lastLanding)\n\t\t\t\tthis.lastLanding.dragLanding._dragOut(this.lastLanding, e.clientX, e.clientY, e);\n\t\t\tthis.lastLanding = 0;\n\n\t\t\tif (this._onNotFound)\n\t\t\t\tthis._onNotFound();\n\t\t}\n\t}\n};\n\ndhtmlDragAndDropObject.prototype.stopDrag = function (e, mode) {\n\tvar dragger = global.dhtmlDragAndDrop;\n\n\tif (!mode) {\n\t\tdragger.stopFrameRoute();\n\t\tvar temp = dragger.lastLanding;\n\t\tdragger.lastLanding = null;\n\n\t\tif (temp)\n\t\t\ttemp.dragLanding._drag(dragger.dragStartNode, dragger.dragStartObject, temp,\n\t\t\t\t(_isIE ? event.srcElement : e.target));\n\t}\n\tdragger.lastLanding = null;\n\n\tif ((dragger.dragNode) && (dragger.dragNode.parentNode == document.body))\n\t\tdragger.dragNode.parentNode.removeChild(dragger.dragNode);\n\tdragger.dragNode = 0;\n\tdragger.gldragNode = 0;\n\tdragger.fx = 0;\n\tdragger.fy = 0;\n\tdragger.dragStartNode = 0;\n\tdragger.dragStartObject = 0;\n\tdocument.body.onmouseup = dragger.tempDOMU;\n\tdocument.body.onmousemove = dragger.tempDOMM;\n\tdragger.tempDOMU = null;\n\tdragger.tempDOMM = null;\n\tdragger.waitDrag = 0;\n};\n\ndhtmlDragAndDropObject.prototype.stopFrameRoute = function (win) {\n\tif (win)\n\t\tglobal.dhtmlDragAndDrop.stopDrag(1, 1);\n\n\tfor (var i = 0; i < global.frames.length; i++) {\n\t\ttry {\n\t\t\tif ((global.frames[i] != win) && (global.frames[i].dhtmlDragAndDrop))\n\t\t\t\tglobal.frames[i].dhtmlDragAndDrop.stopFrameRoute(global);\n\t\t} catch (e) { }\n\t}\n\n\ttry {\n\t\tif ((parent.dhtmlDragAndDrop) && (parent != global) && (parent != win))\n\t\t\tparent.dhtmlDragAndDrop.stopFrameRoute(global);\n\t} catch (e) { }\n};\n\ndhtmlDragAndDropObject.prototype.initFrameRoute = function (win, mode) {\n\tif (win) {\n\t\tglobal.dhtmlDragAndDrop.preCreateDragCopy();\n\t\tglobal.dhtmlDragAndDrop.dragStartNode = win.dhtmlDragAndDrop.dragStartNode;\n\t\tglobal.dhtmlDragAndDrop.dragStartObject = win.dhtmlDragAndDrop.dragStartObject;\n\t\tglobal.dhtmlDragAndDrop.dragNode = win.dhtmlDragAndDrop.dragNode;\n\t\tglobal.dhtmlDragAndDrop.gldragNode = win.dhtmlDragAndDrop.dragNode;\n\t\tglobal.document.body.onmouseup = global.dhtmlDragAndDrop.stopDrag;\n\t\tglobal.waitDrag = 0;\n\n\t\tif (((!_isIE) && (mode)) && ((!_isFF) || (_FFrv < 1.8)))\n\t\t\tglobal.dhtmlDragAndDrop.calculateFramePosition();\n\t}\n\ttry {\n\t\tif ((parent.dhtmlDragAndDrop) && (parent != global) && (parent != win))\n\t\t\tparent.dhtmlDragAndDrop.initFrameRoute(global);\n\t} catch (e) { }\n\n\tfor (var i = 0; i < global.frames.length; i++) {\n\t\ttry {\n\t\t\tif ((global.frames[i] != win) && (global.frames[i].dhtmlDragAndDrop))\n\t\t\t\tglobal.frames[i].dhtmlDragAndDrop.initFrameRoute(global, ((!win || mode) ? 1 : 0));\n\t\t} catch (e) { }\n\t}\n};\n\nvar _isFF = false;\nvar _isIE = false;\nvar _isOpera = false;\nvar _isKHTML = false;\nvar _isMacOS = false;\nvar _isChrome = false;\nvar _FFrv = false;\nvar _KHTMLrv = false;\nvar _OperaRv = false;\n\nif (navigator.userAgent.indexOf('Macintosh') != -1)\n\t_isMacOS = true;\n\n\nif (navigator.userAgent.toLowerCase().indexOf('chrome') > -1)\n\t_isChrome = true;\n\nif ((navigator.userAgent.indexOf('Safari') != -1) || (navigator.userAgent.indexOf('Konqueror') != -1)) {\n\t_KHTMLrv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf('Safari') + 7, 5));\n\n\tif (_KHTMLrv > 525) { //mimic FF behavior for Safari 3.1+\n\t\t_isFF = true;\n\t\t_FFrv = 1.9;\n\t} else\n\t\t_isKHTML = true;\n} else if (navigator.userAgent.indexOf('Opera') != -1) {\n\t_isOpera = true;\n\t_OperaRv = parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf('Opera') + 6, 3));\n}\n\n\nelse if (navigator.appName.indexOf(\"Microsoft\") != -1) {\n\t_isIE = true;\n\tif ((navigator.appVersion.indexOf(\"MSIE 8.0\") != -1 || navigator.appVersion.indexOf(\"MSIE 9.0\") != -1 || navigator.appVersion.indexOf(\"MSIE 10.0\") != -1) && document.compatMode != \"BackCompat\") {\n\t\t_isIE = 8;\n\t}\n} else if (navigator.appName == 'Netscape' && navigator.userAgent.indexOf(\"Trident\") != -1) {\n\t//ie11\n\t_isIE = 8;\n} else {\n\t_isFF = true;\n\t_FFrv = parseFloat(navigator.userAgent.split(\"rv:\")[1]);\n}\n\n\n//multibrowser Xpath processor\ndtmlXMLLoaderObject.prototype.doXPath = function (xpathExp, docObj, namespace, result_type) {\n\tif (_isKHTML || (!_isIE && !global.XPathResult))\n\t\treturn this.doXPathOpera(xpathExp, docObj);\n\n\tif (_isIE) { //IE\n\t\tif (!docObj)\n\t\t\tif (!this.xmlDoc.nodeName)\n\t\t\t\tdocObj = this.xmlDoc.responseXML;\n\t\t\telse\n\t\t\t\tdocObj = this.xmlDoc;\n\n\t\tif (!docObj)\n\t\t\tdhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [\n\t\t\t\t(docObj || this.xmlDoc),\n\t\t\t\tthis.mainObject\n\t\t\t]);\n\n\t\tif (namespace)\n\t\t\tdocObj.setProperty(\"SelectionNamespaces\", \"xmlns:xsl='\" + namespace + \"'\"); //\n\n\t\tif (result_type == 'single') {\n\t\t\treturn docObj.selectSingleNode(xpathExp);\n\t\t}\n\t\telse {\n\t\t\treturn docObj.selectNodes(xpathExp) || new Array(0);\n\t\t}\n\t} else { //Mozilla\n\t\tvar nodeObj = docObj;\n\n\t\tif (!docObj) {\n\t\t\tif (!this.xmlDoc.nodeName) {\n\t\t\t\tdocObj = this.xmlDoc.responseXML;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdocObj = this.xmlDoc;\n\t\t\t}\n\t\t}\n\n\t\tif (!docObj)\n\t\t\tdhtmlxError.throwError(\"LoadXML\", \"Incorrect XML\", [\n\t\t\t\t(docObj || this.xmlDoc),\n\t\t\t\tthis.mainObject\n\t\t\t]);\n\n\t\tif (docObj.nodeName.indexOf(\"document\") != -1) {\n\t\t\tnodeObj = docObj;\n\t\t}\n\t\telse {\n\t\t\tnodeObj = docObj;\n\t\t\tdocObj = docObj.ownerDocument;\n\t\t}\n\t\tvar retType = XPathResult.ANY_TYPE;\n\n\t\tif (result_type == 'single')\n\t\t\tretType = XPathResult.FIRST_ORDERED_NODE_TYPE;\n\t\tvar rowsCol = [];\n\t\tvar col = docObj.evaluate(xpathExp, nodeObj, function (pref) {\n\t\t\treturn namespace;\n\t\t}, retType, null);\n\n\t\tif (retType == XPathResult.FIRST_ORDERED_NODE_TYPE) {\n\t\t\treturn col.singleNodeValue;\n\t\t}\n\t\tvar thisColMemb = col.iterateNext();\n\n\t\twhile (thisColMemb) {\n\t\t\trowsCol[rowsCol.length] = thisColMemb;\n\t\t\tthisColMemb = col.iterateNext();\n\t\t}\n\t\treturn rowsCol;\n\t}\n};\n\n\nglobal.dhtmlxError = new dhtmlxErrorConstructor();\n\n\n//opera fake, while 9.0 not released\n//multibrowser Xpath processor\ndtmlXMLLoaderObject.prototype.doXPathOpera = function (xpathExp, docObj) {\n\t//this is fake for Opera\n\tvar z = xpathExp.replace(/[\\/]+/gi, \"/\").split('/');\n\tvar obj = null;\n\tvar i = 1;\n\n\tif (!z.length)\n\t\treturn [];\n\n\tif (z[0] == \".\")\n\t\tobj = [docObj]; else if (z[0] === \"\") {\n\t\t\tobj = (this.xmlDoc.responseXML || this.xmlDoc).getElementsByTagName(z[i].replace(/\\[[^\\]]*\\]/g, \"\"));\n\t\t\ti++;\n\t\t} else\n\t\treturn [];\n\n\tfor (i; i < z.length; i++)obj = this._getAllNamedChilds(obj, z[i]);\n\n\tif (z[i - 1].indexOf(\"[\") != -1)\n\t\tobj = this._filterXPath(obj, z[i - 1]);\n\treturn obj;\n};\n\ndtmlXMLLoaderObject.prototype._filterXPath = function (a, b) {\n\tvar c = [];\n\tvar b = b.replace(/[^\\[]*\\[\\@/g, \"\").replace(/[\\[\\]\\@]*/g, \"\");\n\n\tfor (var i = 0; i < a.length; i++)\n\t\tif (a[i].getAttribute(b))\n\t\t\tc[c.length] = a[i];\n\n\treturn c;\n};\n\ndtmlXMLLoaderObject.prototype._getAllNamedChilds = function (a, b) {\n\tvar c = [];\n\n\tif (_isKHTML)\n\t\tb = b.toUpperCase();\n\n\tfor (var i = 0; i < a.length; i++)for (var j = 0; j < a[i].childNodes.length; j++) {\n\t\tif (_isKHTML) {\n\t\t\tif (a[i].childNodes[j].tagName && a[i].childNodes[j].tagName.toUpperCase() == b)\n\t\t\t\tc[c.length] = a[i].childNodes[j];\n\t\t}\n\n\t\telse if (a[i].childNodes[j].tagName == b)\n\t\t\tc[c.length] = a[i].childNodes[j];\n\t}\n\n\treturn c;\n};\n\nfunction dhtmlXHeir(a, b) {\n\tfor (var c in b)\n\t\tif (typeof (b[c]) == \"function\")\n\t\t\ta[c] = b[c];\n\treturn a;\n}\n\nif (typeof (global.dhtmlxEvent) == 'undefined') {\n\tglobal.dhtmlxEvent = function dhtmlxEvent(el, event, handler) {\n\t\tif (el.addEventListener)\n\t\t\tel.addEventListener(event, handler, false);\n\n\t\telse if (el.attachEvent)\n\t\t\tel.attachEvent(\"on\" + event, handler);\n\t};\n}\n\n//============= XSL Extension ===================================\n\ndtmlXMLLoaderObject.prototype.xslDoc = null;\ndtmlXMLLoaderObject.prototype.setXSLParamValue = function (paramName, paramValue, xslDoc) {\n\tif (!xslDoc)\n\t\txslDoc = this.xslDoc;\n\n\tif (xslDoc.responseXML)\n\t\txslDoc = xslDoc.responseXML;\n\tvar item =\n\t\tthis.doXPath(\"/xsl:stylesheet/xsl:variable[@name='\" + paramName + \"']\", xslDoc,\n\t\t\t\"http:/\\/www.w3.org/1999/XSL/Transform\", \"single\");\n\n\tif (item)\n\t\titem.firstChild.nodeValue = paramValue;\n};\n\ndtmlXMLLoaderObject.prototype.doXSLTransToObject = function (xslDoc, xmlDoc) {\n\tif (!xslDoc)\n\t\txslDoc = this.xslDoc;\n\n\tif (xslDoc.responseXML)\n\t\txslDoc = xslDoc.responseXML;\n\n\tif (!xmlDoc)\n\t\txmlDoc = this.xmlDoc;\n\n\tif (xmlDoc.responseXML)\n\t\txmlDoc = xmlDoc.responseXML;\n\n\n\tvar result;\n\t//Mozilla\n\tif (!_isIE) {\n\t\tif (!this.XSLProcessor) {\n\t\t\tthis.XSLProcessor = new XSLTProcessor();\n\t\t\tthis.XSLProcessor.importStylesheet(xslDoc);\n\t\t}\n\t\tresult = this.XSLProcessor.transformToDocument(xmlDoc);\n\t} else {\n\t\tresult = new ActiveXObject(\"Msxml2.DOMDocument.3.0\");\n\t\ttry {\n\t\t\txmlDoc.transformNodeToObject(xslDoc, result);\n\t\t} catch (e) {\n\t\t\tresult = xmlDoc.transformNode(xslDoc);\n\t\t}\n\t}\n\treturn result;\n};\n\ndtmlXMLLoaderObject.prototype.doXSLTransToString = function (xslDoc, xmlDoc) {\n\tvar res = this.doXSLTransToObject(xslDoc, xmlDoc);\n\tif (typeof (res) == \"string\")\n\t\treturn res;\n\treturn this.doSerialization(res);\n};\n\ndtmlXMLLoaderObject.prototype.doSerialization = function (xmlDoc) {\n\tif (!xmlDoc)\n\t\txmlDoc = this.xmlDoc;\n\tif (xmlDoc.responseXML)\n\t\txmlDoc = xmlDoc.responseXML;\n\tif (!_isIE) {\n\t\tvar xmlSerializer = new XMLSerializer();\n\t\treturn xmlSerializer.serializeToString(xmlDoc);\n\t} else\n\t\treturn xmlDoc.xml;\n};\n\n/**\n *   @desc:\n *   @type: private\n */\nglobal.dhtmlxEventable = function (obj) {\n\tobj.attachEvent = function (name, catcher, callObj) {\n\t\tname = 'ev_' + name.toLowerCase();\n\t\tif (!this[name])\n\t\t\tthis[name] = new this.eventCatcher(callObj || this);\n\n\t\treturn (name + ':' + this[name].addEvent(catcher)); //return ID (event name & event ID)\n\t};\n\tobj.callEvent = function (name, arg0) {\n\t\tname = 'ev_' + name.toLowerCase();\n\t\tif (this[name])\n\t\t\treturn this[name].apply(this, arg0);\n\t\treturn true;\n\t};\n\tobj.checkEvent = function (name) {\n\t\treturn (!!this['ev_' + name.toLowerCase()]);\n\t};\n\tobj.eventCatcher = function (obj) {\n\t\tvar dhx_catch = [];\n\t\tvar z = function () {\n\t\t\tvar res = true;\n\t\t\tfor (var i = 0; i < dhx_catch.length; i++) {\n\t\t\t\tif (dhx_catch[i]) {\n\t\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\n\t\t\t\t\tres = res && zr;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn res;\n\t\t};\n\t\tz.addEvent = function (ev) {\n\t\t\tif (typeof (ev) != \"function\")\n\t\t\t\tthrow new Error(`Invalid argument addEvent(${ev})`);\n\t\t\tif (ev)\n\t\t\t\treturn dhx_catch.push(ev) - 1;\n\t\t\treturn false;\n\t\t};\n\t\tz.removeEvent = function (id) {\n\t\t\tdhx_catch[id] = null;\n\t\t};\n\t\treturn z;\n\t};\n\tobj.detachEvent = function (id) {\n\t\tif (id) {\n\t\t\tvar list = id.split(':');//get EventName and ID\n\t\t\tthis[list[0]].removeEvent(list[1]); //remove event\n\t\t}\n\t};\n\tobj.detachAllEvents = function () {\n\t\tfor (var name in this) {\n\t\t\tif (name.indexOf(\"ev_\") === 0) {\n\t\t\t\tthis.detachEvent(name);\n\t\t\t\tthis[name] = null;\n\t\t\t}\n\t\t}\n\t};\n\tobj = null;\n};\n\n}","export default function(scheduler){\n\nscheduler.config.limit_start = null;\nscheduler.config.limit_end   = null;\nscheduler.config.limit_view  = false;\nscheduler.config.check_limits = true;\n\nscheduler._temp_limit_scope = function(){\n\tvar before = null;\n\tvar dhx_time_block = \"dhx_time_block\";\n\n\tscheduler.attachEvent(\"onBeforeViewChange\",function(om,od,nm,nd){\n\n\t\tfunction isBlocked(date, mode){\n\t\t\tvar limit_start = scheduler.config.limit_start,\n\t\t\t\tlimit_end = scheduler.config.limit_end,\n\t\t\t\tdate_end =  scheduler.date.add(date,1,mode);\n\n\t\t\treturn (date.valueOf() > limit_end.valueOf() || date_end <= limit_start.valueOf());\n\t\t}\n\n\t\tif (scheduler.config.limit_view){\n\t\t\tnd = nd||od; nm = nm||om;\n\t\t\tif (isBlocked(nd, nm) && !(od.valueOf() == nd.valueOf())){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tif(scheduler.$destroyed){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tvar resetDate = !isBlocked(od, nm) ? od : scheduler.config.limit_start;\n\n\t\t\t\t\tscheduler.setCurrentView(!isBlocked(resetDate, nm) ? resetDate : null, nm);\n\t\t\t\t},1);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onMouseDown\", function(classname) {\n\t\treturn !(classname == dhx_time_block);\n\t});\n\tscheduler.attachEvent(\"onBeforeDrag\",function(id){\n\t\tif (!id) return true;\n\t\treturn scheduler.checkLimitViolation(scheduler.getEvent(id));\n\t});\n\tscheduler.attachEvent(\"onClick\", function (event_id, native_event_object){\n\t\treturn scheduler.checkLimitViolation(scheduler.getEvent(event_id));\n    });\n\tscheduler.attachEvent(\"onBeforeLightbox\",function(id){\n\n\t\tvar ev = scheduler.getEvent(id);\n\t\tbefore = [ev.start_date, ev.end_date];\n\t\treturn scheduler.checkLimitViolation(ev);\n\t});\n\tscheduler.attachEvent(\"onEventSave\", function(id, data, is_new_event) {\n\n\t\t//lightbox may not have 'time' section\n\t\tif(!(data.start_date && data.end_date)){\n\t\t\tvar ev = scheduler.getEvent(id);\n\t\t\tdata.start_date = new Date(ev.start_date);\n\t\t\tdata.end_date = new Date(ev.end_date);\n\t\t}\n\n\t\tif(data.rec_type){\n\t\t\t//_roll_back_dates modifies start_date of recurring event, need to check limits after modification\n\t\t\t// use a copy to keep original event unchanged\n\t\t\tvar data_copy = scheduler._lame_clone(data);\n\t\t\tscheduler._roll_back_dates(data_copy);\n\t\t\treturn scheduler.checkLimitViolation(data_copy);\n\t\t}\n\t\treturn scheduler.checkLimitViolation(data);\n\t});\n\tscheduler.attachEvent(\"onEventAdded\",function(id){\n\t\tif (!id) return true;\n\t\tvar ev = scheduler.getEvent(id);\n\t\tif (!scheduler.checkLimitViolation(ev) && scheduler.config.limit_start && scheduler.config.limit_end) {\n\t\t\t//if newly created event is outside of limited time - crop it, leaving only allowed time\n\t\t\tif (ev.start_date < scheduler.config.limit_start) {\n\t\t\t\tev.start_date = new Date(scheduler.config.limit_start);\n\t\t\t}\n\t\t\tif (ev.start_date.valueOf() >= scheduler.config.limit_end.valueOf()) {\n\t\t\t\tev.start_date = this.date.add(scheduler.config.limit_end, -1, \"day\");\n\t\t\t}\n\t\t\tif (ev.end_date < scheduler.config.limit_start) {\n\t\t\t\tev.end_date = new Date(scheduler.config.limit_start);\n\t\t\t}\n\t\t\tif (ev.end_date.valueOf() >= scheduler.config.limit_end.valueOf()) {\n\t\t\t\tev.end_date = this.date.add(scheduler.config.limit_end, -1, \"day\");\n\t\t\t}\n\t\t\tif (ev.start_date.valueOf() >= ev.end_date.valueOf()) {\n\t\t\t\tev.end_date = this.date.add(ev.start_date, (this.config.event_duration||this.config.time_step), \"minute\");\n\t\t\t}\n\t\t\tev._timed=this.isOneDayEvent(ev);\n\t\t}\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventChanged\",function(id){\n\t\tif (!id) return true;\n\t\tvar ev = scheduler.getEvent(id);\n\t\tif (!scheduler.checkLimitViolation(ev)){\n\t\t\tif (!before) return false;\n\t\t\tev.start_date = before[0];\n\t\t\tev.end_date = before[1];\n\t\t\tev._timed=this.isOneDayEvent(ev);\n\t\t}\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onBeforeEventChanged\",function(ev, native_object, is_new){\n\t\treturn scheduler.checkLimitViolation(ev);\n\t});\n\tscheduler.attachEvent(\"onBeforeEventCreated\", function(ev) { // native event\n\t\tvar start_date = scheduler.getActionData(ev).date;\n\t\tvar event = {\n\t\t\t_timed: true,\n\t\t\tstart_date: start_date,\n\t\t\tend_date: scheduler.date.add(start_date, scheduler.config.time_step, \"minute\")\n\t\t};\n\t\treturn scheduler.checkLimitViolation(event);\n\t});\n\n\tscheduler.attachEvent(\"onViewChange\", function(){\n\t\tscheduler._mark_now();\n\t});\n\n\tscheduler.attachEvent(\"onAfterSchedulerResize\", function(){\n\t\twindow.setTimeout(function(){ \n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tscheduler._mark_now(); \n\t\t}, 1);\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onTemplatesReady\", function() {\n\t\tscheduler._mark_now_timer = window.setInterval(function() {\n\t\t\tif(!scheduler._is_initialized())\n\t\t\t\treturn;\n\t\t\tscheduler._mark_now();\n\t\t}, 60000);\n\t});\n\n\tscheduler.attachEvent(\"onDestroy\", function(){\n\t\tclearInterval(scheduler._mark_now_timer);\n\t});\n\n};\nscheduler._temp_limit_scope();\n\n\n}","import  { GoogleMapAdapter } from \"./gMapAdapter\";\nimport { OpenStreetMapAdapter } from \"./osmMapAdapter\";\nimport { MapboxAdapter } from \"./mapboxAdapter\";\nimport { IMapAdapter, ICalendarEvent, IMapSettings } from \"./types\";\n\ndeclare let google: any;\n\nexport default function(scheduler: any){\n\t\nlet mapAdapter: IMapAdapter | null = null;\nlet eventHandlerIds: number[] = [];\nconst adapters: { [name:string]: IMapAdapter } = {\n\tgoogleMap: new GoogleMapAdapter(scheduler),\n\topenStreetMaps: new OpenStreetMapAdapter(scheduler),\n\tmapbox: new MapboxAdapter(scheduler)\n}\n\nif(!scheduler.ext){\n\tscheduler.ext = {};\n}\nscheduler.ext.mapView = {\n\tcreateAdapter: function():IMapAdapter{\n\t\treturn adapters[scheduler.config.map_view_provider];\n\t},\n\tcreateMarker: function(config){\n\t\treturn new google.maps.Marker(config);\n\t},\n\tcurrentAdapter: null,\n\tadapters\n};\nscheduler._latLngUpdate  = false;  // flag for updating events which don't have event.lat and event.lng\nscheduler._eventLocationChanged = false;  // flag for checking if the location of the event is changed\nscheduler.config.map_view_provider = \"googleMap\";\nscheduler.config.map_settings = {\n\tinitial_position: {\n\t   lat: 48.724,\n\t   lng: 8.215\n\t},\n\terror_position: {\n\t   lat: 15,\n\t   lng: 15\n\t},\n\tinitial_zoom: 1,\n\tzoom_after_resolve: 15,\n\tinfo_window_max_width: 300,\n\tresolve_user_location: true,\n\tresolve_event_location: true,\n\tview_provider: \"googleMap\"\n}\nif (scheduler.config.map_initial_position) {\n\tscheduler.config.map_settings.initial_position = {\n\t\tlat: scheduler.config.map_initial_position.lat(),\n\t\tlng: scheduler.config.map_initial_position.lng(), \n\t};\n}\n\nif (scheduler.config.map_error_position) {\n\tscheduler.config.map_settings.error_position = {\n\t\tlat: scheduler.config.map_error_position.lat(),\n\t\tlng: scheduler.config.map_error_position.lng(), \n\t};\n}\n\nscheduler.xy.map_date_width = 188; // date column width\nscheduler.xy.map_icon_width = 25; // event details icon width\nscheduler.xy.map_description_width = 400; // description column width\nscheduler.date.add_map = function(date, inc, mode) {\n\treturn (new Date(date.valueOf()));\n};\nscheduler.templates.map_date = function(dd, ed, mode) {\n\treturn '';\n};\nscheduler.templates.map_time = function(start, end, ev) {\n\tif (scheduler.config.rtl && !ev._timed) {\n\t\treturn scheduler.templates.day_date(end) + \" &ndash; \" + scheduler.templates.day_date(start);\n\t} else if (ev._timed) {\n\t\treturn this.day_date(ev.start_date, ev.end_date, ev) + \" \" + this.event_date(start);\n\t} else {\n\t\treturn scheduler.templates.day_date(start) + \" &ndash; \" + scheduler.templates.day_date(end);\n\t}\n};\nscheduler.templates.map_text = function(start, end, ev) {\n\treturn ev.text;\n};\nscheduler.templates.map_info_content = function(event){\n    return `<div><b>Event's text:</b> ${event.text}\n\t\t\t\t<div><b>Location:</b> ${event.event_location}</div>\n\t\t\t\t<div><b>Starts:</b> ${scheduler.templates.tooltip_date_format(event.start_date)}</div>\n\t\t\t\t<div><b>Ends:</b> ${scheduler.templates.tooltip_date_format(event.end_date)}</div>\n\t\t\t</div>`;\n};\nscheduler.date.map_start = function(d) {\n\treturn d;\n};\n\nfunction setupMapView(scheduler) {\n\t// Initialization logic, possibly including creation of a new mapAdapter\n\tmapAdapter = scheduler.ext.mapView.createAdapter();\n\tattachSchedulerEvents();\n}\nasync function addEventWithLocation(event: ICalendarEvent, mapAdapter: IMapAdapter){\n\tlet coordinates = await mapAdapter.resolveAddress(event.event_location);\n\tevent.lat = coordinates.lat;\n\tevent.lng = coordinates.lng;\n\tmapAdapter.removeEventMarker(String(event.id));\n\tmapAdapter.addEventMarker(event);\n\treturn event;\n}\nfunction setUserLocation(options: IMapSettings, adapter: IMapAdapter): void{\n\tif (options.resolve_user_location) {\n\t\tif (navigator.geolocation) {\n\t\t\tnavigator.geolocation.getCurrentPosition(function(position) {\n\t\t\t\tadapter.setView(position.coords.latitude, position.coords.longitude, options.zoom_after_resolve ||  options.initial_zoom);\n\t\t\t});\n\t\t}\n\t} else {\n\t\tadapter.setView(options.initial_position.lat, options.initial_position.lng, options.initial_zoom);\n\t}\n}\nscheduler.dblclick_dhx_map_area = function(e) {\n\tlet eventNode = e.target.closest(`[${scheduler.config.event_attribute}]`);\n\tif (eventNode){\n\t\tlet eventId = eventNode.getAttribute(`${scheduler.config.event_attribute}`);\n\t\tscheduler.showLightbox(eventId);\n\t}\n\tif (!this.config.readonly && this.config.dblclick_create && !eventNode) {\n\t\tthis.addEventNow({\n\t\t\tstart_date:  scheduler.config.map_start,\n\t\t\tend_date: scheduler.date.add( scheduler.config.map_start, scheduler.config.time_step, \"minute\"),\n\t\t});\n\t}\t\n};\n\nfunction attachSchedulerEvents() { \n  eventHandlerIds.push(\n\tscheduler.attachEvent(\"onEventSave\",function(id,ev,is_new){\n\t\tlet unmodifiedEvent = scheduler.getEvent(id);\n\t\tif (unmodifiedEvent && unmodifiedEvent.event_location != ev.event_location) {\n\t\t\tscheduler._eventLocationChanged = true;\n\t\t}\n\t\treturn true;\n\t}),\n    scheduler.attachEvent(\"onEventChanged\", (id, event) => {\n\t\tconst {start_date, end_date} = event;\n\t\tconst {min_date, max_date} = scheduler.getState();\n\t\tif(start_date.valueOf() < max_date.valueOf() && end_date.valueOf() > min_date.valueOf()){\n\t\t\tif (mapAdapter) {\n\t\t\t\tif (scheduler.config.map_settings.resolve_event_location && event.event_location && !scheduler._latLngUpdate ) {\n\t\t\t\t \taddEventWithLocation(event, mapAdapter);\n\t\t\t\t} else {\n\t\t\t\t\tmapAdapter.updateEventMarker(event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tscheduler._latLngUpdate  = false;\n\t\treturn true;\n    }),\n\tscheduler.attachEvent(\"onEventIdChange\", function(old_id,new_id){\n\t\tlet newIdEvent = scheduler.getEvent(new_id);\n\t\tmapAdapter?.removeEventMarker(old_id);\n\t\tmapAdapter?.addEventMarker(newIdEvent);\n\t}),\n    scheduler.attachEvent(\"onEventAdded\", (id, event) => {\n\t\tconst {start_date, end_date} = event;\n\t\tconst {min_date, max_date} = scheduler.getState();\n\t\tif(start_date.valueOf() < max_date.valueOf() && end_date.valueOf() > min_date.valueOf()){\n      \t\tif (mapAdapter) {\n\t\t\t\tif (scheduler.config.map_settings.resolve_event_location && event.event_location && scheduler._eventLocationChanged) {\n\t\t\t\t\taddEventWithLocation(event, mapAdapter);\n\t\t\t\t\tscheduler._eventLocationChanged = false;\n\t\t\t\t} else {\n\t\t\t\t\tmapAdapter.addEventMarker(event);\n\t\t\t\t\tmapAdapter.onEventClick(event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    }),\n    scheduler.attachEvent(\"onClick\", function (id, e){\n\t\tconst event = scheduler.getEvent(id);\n\t\tif (mapAdapter && event) mapAdapter.onEventClick(event);\n\t\treturn false;\n    }),\n    scheduler.attachEvent(\"onBeforeEventDelete\", (id, event) => {\n\t\tif (mapAdapter) {\n\t\t\tmapAdapter.removeEventMarker(id);\n\t\t}\n\t\treturn true;\n    })\n  );\n}\nfunction detachSchedulerEvents() {\n\teventHandlerIds.forEach(id => scheduler.detachEvent(id));\n\teventHandlerIds = [];\n}\n\nscheduler.attachEvent(\"onSchedulerReady\", function() {\n\n\tif(scheduler.config.map_initial_zoom !== undefined){\n\t\tscheduler.config.map_settings.initial_zoom = scheduler.config.map_initial_zoom;\n\t}\n\tif(scheduler.config.map_zoom_after_resolve  !== undefined){\n\t\tscheduler.config.map_settings.zoom_after_resolve = scheduler.config.map_zoom_after_resolve;\n\t}\n\tif(scheduler.config.map_infowindow_max_width !== undefined){\n\t\tscheduler.config.map_settings.info_window_max_width = scheduler.config.map_infowindow_max_width;\n\t}\n\tif(scheduler.config.map_resolve_user_location !== undefined){\n\t\tscheduler.config.map_settings.resolve_user_location = scheduler.config.map_resolve_user_location;\n\t}\n\tif(scheduler.config.map_view_provider !== undefined){\n\t\tscheduler.config.map_settings.view_provider = scheduler.config.map_view_provider;\n\t}\n\tif(scheduler.config.map_type !== undefined){\n\t\tscheduler.config.map_settings.type = scheduler.config.map_type;\n\t}\n\tif(scheduler.config.map_resolve_event_location !== undefined){\n\t\tscheduler.config.map_settings.resolve_event_location = scheduler.config.map_resolve_event_location;\n\t}\n\tscheduler.ext.mapView.currentAdapter = scheduler.config.map_view_provider;\n\n\tlet map = document.createElement('div');\n\tmap.className = 'mapContainer';\n\tmap.id = 'mapContainer';\n\tmap.style.display = \"none\";\n\tmap.style.zIndex = \"1\";\n\tscheduler._obj.appendChild(map);\n\n\tconst old = scheduler.render_data;\n\tscheduler.render_data = function(evs, hold) {\n\t\tif (this._mode == \"map\") {\n\t\t\tfill_map_tab();\n\t\t\tlet events = scheduler.get_visible_events();\n\t\t\tif (mapAdapter) {\n\t\t\t\tmapAdapter.clearEventMarkers();\n\t\t\t\tevents.forEach((event) => mapAdapter?.addEventMarker(event));\n\t\t\t}\n\t\t} else\n\t\t\treturn old.apply(this, arguments);\n\t};\n\n\tscheduler.map_view = function(mode) {\n\t\tscheduler._els.dhx_cal_data[0].style.width = (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 1) + 'px';\n\t\tscheduler._min_date = scheduler.config.map_start || (scheduler._currentDate());\n\t\tscheduler._max_date = scheduler.config.map_end || scheduler.date.add(scheduler._currentDate(), 1, \"year\");\n\t\tscheduler._table_view = true;\n\t\tset_full_view(mode);\n\t\tlet mapContainer = document.getElementById('mapContainer');\n\t\t_setMapSize('mapContainer');\n\n\t\t// creating the new logic\n\t\tif (mode && mapContainer) {\n\t\t\tmap.style.display = 'block';\n\t\t\tfill_map_tab();\n\t\t\t// case to display several maps and has the opportunity to switch between them\n\t\t\tif (scheduler.config.map_view_provider == scheduler.ext.mapView.currentAdapter) {\n\t\t\t\tmapAdapter?.destroy(mapContainer);\n\t\t\t\tsetupMapView(scheduler);\n\t\t\t\tmapAdapter?.initialize(mapContainer, scheduler.config.map_settings);\n\t\t\t} else {\n\t\t\t\tmapAdapter?.destroy(mapContainer);\n\t\t\t\tsetupMapView(scheduler);\n\t\t\t\tmapAdapter?.initialize(mapContainer, scheduler.config.map_settings);\n\t\t\t \tscheduler.ext.mapView.currentAdapter = scheduler.config.map_view_provider;\n\t\t\t}\n\t\t\tif(mapAdapter) {\n\t\t\t\tsetUserLocation(scheduler.config.map_settings, mapAdapter);\n\t\t\t}\t\n\t\t} else {\n\t\t\tmap.style.display = 'none';\n\t\t\tscheduler._els.dhx_cal_data[0].style.width = \"100%\";\n\t\t \tif (mapAdapter && mapContainer ) {\n\t\t\t\tmapAdapter.destroy(mapContainer);\n\t\t\t\tmapAdapter = null;\n\t\t\t\tscheduler.ext.mapView.currentAdapter = scheduler.config.map_view_provider;\n\t\t    }\n\t\t  \tdetachSchedulerEvents();\n\t\t}\n\t};\n\n\tfunction _setMapSize(elem_id) { //input - map's div id\n\t\tlet map = document.getElementById(elem_id);\n\t\tif (map) {\n\t\t\tconst nav_height = scheduler.$container.querySelector(\".dhx_cal_navline\").offsetHeight;\n\t\t\tlet height = scheduler.$container.querySelector(\".dhx_cal_data\").offsetHeight + scheduler.$container.querySelector(\".dhx_cal_header\").offsetHeight;\n\t\t\tif (height < 0)\n\t\t\t\theight = 0;\n\t\t\tlet width = scheduler._x - scheduler.xy.map_date_width - scheduler.xy.map_description_width - 1;\n\t\t\tif (width < 0)\n\t\t\t\twidth = 0;\n\t\t\tmap.style.height = height + 'px';\n\t\t\tmap.style.width = width + 'px';\n\t\t\tmap.style.position = \"absolute\";\n\t\t\tmap.style.top = nav_height + \"px\";\n\t\t\tif (scheduler.config.rtl) {\n\t\t\t\tmap.style.marginRight = (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 1) + 'px';\n\t\t\t} else {\n\t\t\t\tmap.style.marginLeft = (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 1) + 'px';\n\t\t\t}\n\t\t\tmap.style.marginTop = (scheduler.xy.nav_height + 2) + 'px';\n\t\t}\n\t}\t\n\tfunction fill_map_tab() {\n\t\t//select events for which data need to be printed\n\t\tlet events = scheduler.get_visible_events();\n\t\tevents.sort(function(a, b) {\n\t\t\tif(a.start_date.valueOf()==b.start_date.valueOf())\n\t\t\t\treturn a.id>b.id?1:-1;\n\t\t\treturn a.start_date>b.start_date?1:-1;\n\t\t});\n\n\t\t//generate html for the view\n\t\tlet ariaAttr = scheduler._waiAria.mapAttrString();\n\n\t\tlet html = \"<div \"+ariaAttr+\" class='dhx_map_area'>\";\n\t\tfor (let i = 0; i < events.length; i++) {\n\t\t\tlet ev = events[i];\n\t\t\tlet event_class = (ev.id == scheduler._selected_event_id) ? 'dhx_map_line highlight' : 'dhx_map_line';\n\t\t\tlet bg_color = (ev.color ? (\"--dhx-scheduler-event-background:\" + ev.color + \";\") : \"\");\n\t\t\tlet color = (ev.textColor ? (\"--dhx-scheduler-event-color:\" + ev.textColor + \";\") : \"\");\n\n\t\t\tlet ariaAttr = scheduler._waiAria.mapRowAttrString(ev);\n\t\t\tlet ariaButtonAttr = scheduler._waiAria.mapDetailsBtnString();\n\n\t\t\thtml += \"<div \"+ariaAttr+\" class='\" + event_class + \"' event_id='\" + ev.id + \"' \"+scheduler.config.event_attribute+\"='\"+ev.id+\"' style='\" + bg_color + \"\" + color + \"\" + (ev._text_style || \"\") + \" width: \" + (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 2) + \"px;'><div class='dhx_map_event_time' style='width: \" + scheduler.xy.map_date_width + \"px;' >\" + scheduler.templates.map_time(ev.start_date, ev.end_date, ev) + \"</div>\";\n\t\t\thtml += `<div ${ariaButtonAttr} class='dhx_event_icon icon_details'><svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path d=\"M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z\" fill=\"#A1A4A6\"/>\n\t\t\t</svg></div>`;\n\t\t\thtml += \"<div class='line_description' style='width:\" + (scheduler.xy.map_description_width - scheduler.xy.map_icon_width) + \"px;'>\" + scheduler.templates.map_text(ev.start_date, ev.end_date, ev) + \"</div></div>\"; // -25 = icon size 20 and padding 5\n\t\t}\n\t\thtml += \"<div class='dhx_v_border' style=\"+(scheduler.config.rtl ? \"'right: \" : \"'left: \") + (scheduler.xy.map_date_width - 1) + \"px;'></div><div class='dhx_v_border_description'></div></div>\";\n\n\t\t//render html\n\t\tscheduler._els[\"dhx_cal_data\"][0].scrollTop = 0; //fix flickering in FF\n\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = html;\n\t//\tscheduler._els[\"dhx_cal_data\"][0].style.width = (scheduler.xy.map_date_width + scheduler.xy.map_description_width + 1) + 'px';\n\n\t\tlet t = scheduler._els[\"dhx_cal_data\"][0].firstChild.childNodes;\n\n\t\tlet dateElement = scheduler._getNavDateElement();\n\t\tif(dateElement){\n\t\t\tdateElement.innerHTML=scheduler.templates[scheduler._mode + \"_date\"](scheduler._min_date, scheduler._max_date, scheduler._mode);\n\t\t}\n\n\t\tscheduler._rendered = [];\n\t\tfor (let i = 0; i < t.length - 2; i++) {\n\t\t\tscheduler._rendered[i] = t[i];\n\t\t}\n\t}\n\tfunction set_full_view(mode) {\n\t\tif (mode) {\n\t\t\tconst l = scheduler.locale.labels;\n\t\t\tscheduler._els[\"dhx_cal_header\"][0].innerHTML = \"<div class='dhx_map_head' style='width: \" + \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(scheduler.xy.map_date_width + scheduler.xy.map_description_width + 2) + \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"px;' ><div class='headline_date' style='width: \" + \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscheduler.xy.map_date_width + \"px;'>\" + l.date + \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"</div><div class='headline_description' style='width: \" + \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tscheduler.xy.map_description_width + \"px;'>\" + l.description + \"</div></div>\";\n\t\t\tscheduler._table_view = true;\n\t\t\tscheduler.set_sizes();\n\t\t}\n\t}\n\t\n\tscheduler.attachEvent(\"onLocationError\", function (id){\n\t\talert(\"Location can't be found\");\n\t\treturn google.maps.LatLng(51.477840, -0.001492); \n\t\t//the coordinates of the Greenwich Royal Observatory\n\t})\n\tlet _updateEventLocation = async function(event) {\n\t\tif (mapAdapter){\n\t\t\tconst coordinates = await mapAdapter.resolveAddress(event.event_location);\n\t\t\tif (coordinates.lat && coordinates.lng) {\n\t\t\t\tevent.lat = +coordinates.lat;\n\t\t\t\tevent.lng = +coordinates.lng;\n\t\t\t} else {\n\t\t\t\tscheduler.callEvent(\"onLocationError\", [event.id]);\n\t\t\t\tevent.lng = scheduler.config.map_settings.error_position.lng;\n\t\t\t\tevent.lat = scheduler.config.map_settings.error_position.lat;\n\t\t\t}\n\t\t\tscheduler._latLngUpdate = true;\n\t\t\tscheduler.callEvent(\"onEventChanged\", [event.id, event]);\n\t\t}\n\t};\n\tlet _delay = function(method, object, params, delay) {\n\t\tsetTimeout(function() {\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tlet ret = method.apply(object, params);\n\t\t\tmethod = object = params = null;\n\t\t\treturn ret;\n\t\t}, delay || 1);\n\t};\n\tscheduler._event_resolve_delay = 1500;\n\tscheduler.attachEvent(\"onEventLoading\", function(event) {\n\t\tif (event.lat && event.lng) {\n\t\t\tevent.lat = +event.lat;\n\t\t\tevent.lng = +event.lng;\n\t\t}\n\t\tif (scheduler.config.map_settings.resolve_event_location && event.event_location && !event.lat && !event.lng) { // don't delete !event.lat && !event.lng as location could change\n\t\t\tscheduler._event_resolve_delay += 1500;\n\t\t\t_delay(_updateEventLocation, this, [event], scheduler._event_resolve_delay);\n\t\t}\n\t\treturn true;\n\t});\n})\n\n}","export default function(scheduler){\n\nconst minicalDomEvents = scheduler._createDomEventScope();\n\t\n\nscheduler.config.minicalendar = {\n\tmark_events: true\n};\nscheduler._synced_minicalendars = [];\nscheduler.renderCalendar = function(obj, _prev, is_refresh) {\n\tvar cal = null;\n\tvar date = obj.date || (scheduler._currentDate());\n\tif (typeof date == \"string\")\n\t\tdate = this.templates.api_date(date);\n\n\tif (!_prev) {\n\t\tvar cont = obj.container;\n\t\tvar pos = obj.position;\n\n\t\tif (typeof cont == \"string\")\n\t\t\tcont = document.getElementById(cont);\n\n\t\tif (typeof pos == \"string\")\n\t\t\tpos = document.getElementById(pos);\n\t\tif (pos && (typeof pos.left == \"undefined\" && typeof pos.right == \"undefined\")) {\n\t\t\tvar tpos = scheduler.$domHelpers.getOffset(pos);\n\t\t\tpos = {\n\t\t\t\ttop: tpos.top + pos.offsetHeight,\n\t\t\t\tleft: tpos.left\n\t\t\t};\n\t\t}\n\t\tif (!cont)\n\t\t\tcont = scheduler._get_def_cont(pos);\n\n\t\tcal = this._render_calendar(cont, date, obj);\n\t\n\t\tif (!cal.$_eventAttached) {\n\t\t\tcal.$_eventAttached = true;\n\t\t\tminicalDomEvents.attach(cal, \"click\", (function(e) {\n\t\t\t\tvar src = e.target || e.srcElement;\n\n\t\t\t\tvar $dom = scheduler.$domHelpers;\n\t\t\t\tif ($dom.closest(src, \".dhx_month_head\")) {\n\t\t\t\t\tif (!$dom.closest(src, \".dhx_after\") && !$dom.closest(src, \".dhx_before\")) {\n\n\t\t\t\t\t\tvar cellRoot = $dom.closest(src, \"[data-cell-date]\");\n\t\t\t\t\t\tvar dateAttribute = cellRoot.getAttribute(\"data-cell-date\");\n\t\t\t\t\t\tvar newDate = scheduler.templates.parse_date(dateAttribute);\n\t\t\t\t\t\n\t\t\t\t\t\tscheduler.unmarkCalendar(this);\n\t\t\t\t\t\tscheduler.markCalendar(this, newDate, \"dhx_calendar_click\");\n\t\t\t\t\t\tthis._last_date = newDate;\n\n\t\t\t\t\t\tif(this.conf.events && this.conf.events.onDateClick){\n\t\t\t\t\t\t\tthis.conf.events.onDateClick.call(this, newDate, e);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.conf.handler) this.conf.handler.call(scheduler, newDate, this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).bind(cal));\n\n\t\t\tminicalDomEvents.attach(cal, \"mouseover\", (function(e) {\n\t\t\t\tconst target = e.target;\n\n\t\t\t\tif (target.classList.contains('dhx_cal_month_cell')) {\n\t\t\t\t\tvar dateAttribute = target.getAttribute(\"data-cell-date\");\n\t\t\t\t\tvar newDate = scheduler.templates.parse_date(dateAttribute);\n\t\t\t\n\t\t\t\t\tif(this.conf.events && this.conf.events.onDateMouseOver){\n\t\t\t\t\t\tthis.conf.events.onDateMouseOver.call(this, newDate, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).bind(cal));\n\t\t}\n\t\n\t} else {\n\t\tcal = this._render_calendar(_prev.parentNode, date, obj, _prev);\n\t\tscheduler.unmarkCalendar(cal);\n\t}\n\n\tif (scheduler.config.minicalendar.mark_events) {\n\t\tvar start = scheduler.date.month_start(date);\n\t\tvar end = scheduler.date.add(start, 1, \"month\");\n\t\tvar evs = this.getEvents(start, end);\n\t\tvar filter = this[\"filter_\" + this._mode];\n\t\tvar markedDates = {};\n\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\tvar ev = evs[i];\n\t\t\tif (filter && !filter(ev.id, ev))\n\t\t\t\tcontinue;\n\t\t\tvar d = ev.start_date;\n\t\t\tif (d.valueOf() < start.valueOf())\n\t\t\t\td = start;\n\t\t\td = scheduler.date.date_part(new Date(d.valueOf()));\n\t\t\twhile (d < ev.end_date) {\n\t\t\t\tif(!markedDates[+d]) {\n\t\t\t\t\tmarkedDates[+d] = true;\n\t\t\t\t\tthis.markCalendar(cal, d, \"dhx_year_event\");\n\t\t\t\t}\n\t\t\t\td = this.date.add(d, 1, \"day\");\n\t\t\t\tif (d.valueOf() >= end.valueOf())\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tthis._markCalendarCurrentDate(cal);\n\n\tcal.conf = obj;\n\tif (obj.sync && !is_refresh)\n\t\tthis._synced_minicalendars.push(cal);\n\n\tif(!cal.conf._on_xle_handler){\n\t\tcal.conf._on_xle_handler = scheduler.attachEvent(\"onXLE\", function refreshOnLoad(){\n\t\t\tscheduler.updateCalendar(cal, cal.conf.date);\n\t\t});\n\t}\n\n\tif(this.config.wai_aria_attributes && this.config.wai_aria_application_role){\n\t\tcal.setAttribute(\"role\", \"application\");\n\t}\n\n\treturn cal;\n};\nscheduler._get_def_cont = function(pos) {\n\tif (!this._def_count) {\n\t\tthis._def_count = document.createElement(\"div\");\n\t\tthis._def_count.className = \"dhx_minical_popup\";\n\t\tscheduler.event(this._def_count, \"click\", function(e) { e.cancelBubble = true; });\n\t\tdocument.body.appendChild(this._def_count);\n\t}\n\n\tif(pos.left){\n\t\tthis._def_count.style.left = pos.left + \"px\";\n\t}\n\tif(pos.right){\n\t\tthis._def_count.style.right = pos.right + \"px\";\n\t}\n\tif(pos.top){\n\t\tthis._def_count.style.top = pos.top + \"px\";\n\t}\n\tif(pos.bottom){\n\t\tthis._def_count.style.bottom = pos.bottom + \"px\";\n\t}\n\n\tthis._def_count._created = new Date();\n\n\treturn this._def_count;\n};\nscheduler._locateCalendar = function(cal, date) {\n\tif (typeof date == \"string\")\n\t\tdate = scheduler.templates.api_date(date);\n\n\tif(+date > +cal._max_date || +date < +cal._min_date)\n\t\treturn null;\n\n\tvar table = cal.querySelector(\".dhx_year_body\").childNodes[0];\n\n\tvar weekNum = 0;\n\tvar dat = new Date(cal._min_date);\n\twhile(+this.date.add(dat, 1, \"week\") <= +date){\n\t\tdat = this.date.add(dat, 1, \"week\");\n\t\tweekNum++;\n\t}\n\n\tvar sm = scheduler.config.start_on_monday;\n\tvar day = (date.getDay() || (sm ? 7 : 0)) - (sm ? 1 : 0);\n\n\tconst dayCell = table.querySelector(`.dhx_cal_month_row:nth-child(${weekNum + 1}) .dhx_cal_month_cell:nth-child(${day + 1})`);\n\tif(dayCell) {\n\t\treturn dayCell.firstChild;\n\t} else {\n\t\treturn null;\n\t}\n};\nscheduler.markCalendar = function(cal, date, css) {\n\tvar div = this._locateCalendar(cal, date);\n\tif(!div)\n\t\treturn;\n\n\tdiv.className += \" \" + css;\n};\nscheduler.unmarkCalendar = function(cal, date, css) {\n\tdate = date || cal._last_date;\n\tcss = css || \"dhx_calendar_click\";\n\tif (!date) return;\n\tvar el = this._locateCalendar(cal, date);\n\tif(!el)\n\t\treturn;\n\tel.className = (el.className || \"\").replace(RegExp(css, \"g\"));\n};\nscheduler._week_template = function(width) {\n\tvar summ = (width || 250);\n\tvar left = 0;\n\n\tvar week_template = document.createElement(\"div\");\n\tvar dummy_date = this.date.week_start(scheduler._currentDate());\n\tfor (var i = 0; i < 7; i++) {\n\t\tthis._cols[i] = Math.floor(summ / (7 - i));\n\t\tthis._render_x_header(i, left, dummy_date, week_template);\n\t\tdummy_date = this.date.add(dummy_date, 1, \"day\");\n\t\tsumm -= this._cols[i];\n\t\tleft += this._cols[i];\n\t}\n\tweek_template.lastChild.className += \" dhx_scale_bar_last\";\n\treturn week_template;\n};\nscheduler.updateCalendar = function(obj, sd) {\n\tif(obj.conf.date && obj.conf.events){\n\t\tif(obj.conf.events.onBeforeMonthChange){\n\t\t\tconst res = obj.conf.events.onBeforeMonthChange.call(obj, obj.conf.date, sd, obj);\n\t\t\tif(res === false){\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\tconst oldDate = obj.conf.date;\n\n\tobj.conf.date = sd;\n\tthis.renderCalendar(obj.conf, obj, true);\n\tif(obj.conf.events){\n\t\tif(obj.conf.events.onMonthChange){\n\t\t\tobj.conf.events.onMonthChange.call(obj, oldDate, sd);\n\t\t}\n\t}\n};\nscheduler._mini_cal_arrows = [\"&nbsp;\", \"&nbsp;\"];\nscheduler._render_calendar = function(obj, sd, conf, previous) {\n\t/*store*/\n\tvar ts = scheduler.templates;\n\tvar temp = this._cols;\n\tthis._cols = [];\n\tvar temp2 = this._mode;\n\tthis._mode = \"calendar\";\n\tvar temp3 = this._colsS;\n\tthis._colsS = {height: 0};\n\tvar temp4 = new Date(this._min_date);\n\tvar temp5 = new Date(this._max_date);\n\tvar temp6 = new Date(scheduler._date);\n\tvar temp7 = ts.month_day;\n\tvar temp8 = this._ignores_detected; this._ignores_detected = 0;\n\tts.month_day = ts.calendar_date;\n\n\tsd = this.date.month_start(sd);\n\tvar week_template = this._week_template(obj.offsetWidth - 1 - this.config.minicalendar.padding );\n\n\tvar d;\n\tif (previous){\n\t\td = previous;\n\t} else {\n\t\td = document.createElement(\"div\");\n\t\td.className = \"dhx_cal_container dhx_mini_calendar\";\n\t\tif (this.config.rtl) d.className += \" dhx_cal_container_rtl\";\n\t}\n\td.setAttribute(\"date\", this._helpers.formatDate(sd));\n\td.innerHTML = \"<div class='dhx_year_month'></div>\" +\n\t\t\t\"<div class='dhx_year_grid\" +\n\t\t\t(scheduler.config.rtl ? \" dhx_grid_rtl'>\" : \"'>\") +\n\t\t\t\"<div class='dhx_year_week'>\"+(week_template ? week_template.innerHTML : \"\")+\"</div>\" +\n\t\t\t\"<div class='dhx_year_body'></div>\" +\n\t\t\"</div>\";\n\tvar header = d.querySelector(\".dhx_year_month\");\n\tvar weekHeader = d.querySelector(\".dhx_year_week\");\n\tvar body = d.querySelector(\".dhx_year_body\");\n\n\theader.innerHTML = this.templates.calendar_month(sd);\n\tif (conf.navigation) {\n\t\tvar move_minicalendar_date = function(calendar, diff) {\n\t\t\tvar date = scheduler.date.add(calendar._date, diff, \"month\");\n\t\t\tscheduler.updateCalendar(calendar, date);\n\t\t\tif (scheduler._date.getMonth() == calendar._date.getMonth() && scheduler._date.getFullYear() == calendar._date.getFullYear()) {\n\t\t\t\tscheduler._markCalendarCurrentDate(calendar);\n\t\t\t}\n\t\t};\n\n\t\tvar css_classnames = [\"dhx_cal_prev_button\", \"dhx_cal_next_button\"];\n\t\tvar css_texts = [\"left:1px;top:4px;position:absolute;\", \"left:auto; right:1px;top:4px;position:absolute;\"];\n\t\tvar diffs = [-1, 1];\n\t\tvar handler = function(diff) {\n\t\t\treturn function() {\t\n\t\t\t\tif (conf.sync) {\n\t\t\t\t\tvar calendars = scheduler._synced_minicalendars;\n\t\t\t\t\tfor (var k = 0; k < calendars.length; k++) {\n\t\t\t\t\t\tmove_minicalendar_date(calendars[k], diff);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (scheduler.config.rtl) {\n\t\t\t\t\t\tdiff = -diff;\n\t\t\t\t\t}\n\t\t\t\t\tmove_minicalendar_date(d, diff);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tvar labels = [scheduler.locale.labels.prev, scheduler.locale.labels.next];\n\t\tfor (var j = 0; j < 2; j++) {\n\t\t\tvar arrow = document.createElement(\"div\");\n\t\t\t//var diff = diffs[j];\n\t\t\tarrow.className = css_classnames[j];\n\n\t\t\tscheduler._waiAria.headerButtonsAttributes(arrow, labels[j]);\n\n\t\t\tarrow.style.cssText = css_texts[j];\n\t\t\tarrow.innerHTML = this._mini_cal_arrows[j];\n\t\t\theader.appendChild(arrow);\n\t\t\tminicalDomEvents.attach(arrow, \"click\", handler(diffs[j]));\n\t\t}\n\t}\n\td._date = new Date(sd);\n\n\td.week_start = (sd.getDay() - (this.config.start_on_monday ? 1 : 0) + 7) % 7;\n\n\tvar dd = d._min_date = this.date.week_start(sd);\n\td._max_date = this.date.add(d._min_date, 6, \"week\");\n\n\tthis._reset_month_scale(body, sd, dd, 6);\n\n\tif (!previous)\n\t\tobj.appendChild(d);\n\n\tweekHeader.style.height = (weekHeader.childNodes[0].offsetHeight - 1) + \"px\"; // dhx_year_week should have height property so that day dates would get correct position. dhx_year_week height = height of it's child (with the day name)\n\n\tvar headerId = scheduler.uid();\n\tscheduler._waiAria.minicalHeader(header, headerId);\n\tscheduler._waiAria.minicalGrid(d.querySelector(\".dhx_year_grid\"), headerId);\n\tscheduler._waiAria.minicalRow(weekHeader);\n\n\tvar dayHeaders = weekHeader.querySelectorAll(\".dhx_scale_bar\");\n\tfor(var i = 0; i < dayHeaders.length; i++){\n\t\tscheduler._waiAria.minicalHeadCell(dayHeaders[i]);\n\t}\n\tvar dayCells = body.querySelectorAll(\".dhx_cal_month_cell\");\n\tvar firstDate = new Date(dd);\n\tfor(var i = 0; i < dayCells.length; i++){\n\n\t\tscheduler._waiAria.minicalDayCell(dayCells[i], new Date(firstDate));\n\t\tfirstDate = scheduler.date.add(firstDate, 1, \"day\");\n\t}\n\n\tscheduler._waiAria.minicalHeader(header, headerId);\n\n\t/*restore*/\n\tthis._cols = temp;\n\tthis._mode = temp2;\n\tthis._colsS = temp3;\n\tthis._min_date = temp4;\n\tthis._max_date = temp5;\n\tscheduler._date = temp6;\n\tts.month_day = temp7;\n\tthis._ignores_detected = temp8;\n\treturn d;\n};\nscheduler.destroyCalendar = function(cal, force) {\n\tif (!cal && this._def_count && this._def_count.firstChild) {\n\t\tif (force || (new Date()).valueOf() - this._def_count._created.valueOf() > 500)\n\t\t\tcal = this._def_count.firstChild;\n\t}\n\tif (!cal) return;\n\tminicalDomEvents.detachAll();\n\t//cal.onclick = null;\n\tcal.innerHTML = \"\";\n\tif (cal.parentNode)\n\t\tcal.parentNode.removeChild(cal);\n\tif (this._def_count)\n\t\tthis._def_count.style.top = \"-1000px\";\n\n\tif(cal.conf && cal.conf._on_xle_handler)\n\t\tscheduler.detachEvent(cal.conf._on_xle_handler);\n};\nscheduler.isCalendarVisible = function() {\n\tif (this._def_count && parseInt(this._def_count.style.top, 10) > 0)\n\t\treturn this._def_count;\n\treturn false;\n};\n\nscheduler.attachEvent(\"onTemplatesReady\", function() {\n\tscheduler.event(document.body, \"click\", function() { scheduler.destroyCalendar(); });\n}, {once: true});\n\n\n\nscheduler.form_blocks.calendar_time = {\n\trender: function(sns) {\n\t\tvar html = \"<span class='dhx_minical_input_wrapper'><input class='dhx_readonly dhx_minical_input' type='text' readonly='true'></span>\";\n\n\t\tvar cfg = scheduler.config;\n\t\tvar dt = this.date.date_part(scheduler._currentDate());\n\n\t\tvar last = 24 * 60, first = 0;\n\t\tif (cfg.limit_time_select) {\n\t\t\tfirst = 60 * cfg.first_hour;\n\t\t\tlast = 60 * cfg.last_hour + 1;  // to include \"17:00\" option if time select is limited\n\t\t}\n\t\tdt.setHours(first / 60);\n\n\t\tsns._time_values = [];\n\t\thtml += \" <select class='dhx_lightbox_time_select'>\";\n\t\tfor (var i = first; i < last; i += this.config.time_step * 1) { // `<` to exclude last \"00:00\" option\n\t\t\tvar time = this.templates.time_picker(dt);\n\t\t\thtml += \"<option value='\" + i + \"'>\" + time + \"</option>\";\n\t\t\tsns._time_values.push(i);\n\t\t\tdt = this.date.add(dt, this.config.time_step, \"minute\");\n\t\t}\n\t\thtml += \"</select>\";\n\n\t\t//var full_day = scheduler.config.full_day;\n\n\t\treturn \"<div class='dhx_section_time dhx_lightbox_minical'>\" + html + \"<span class='dhx_lightbox_minical_spacer'> &nbsp;&ndash;&nbsp; </span>\" + html + \"</div>\";\n\t},\n\tset_value: function(node, value, ev, config) {\n\n\t\tvar inputs = node.getElementsByTagName(\"input\");\n\t\tvar selects = node.getElementsByTagName(\"select\");\n\t\tvar start_date,\n\t\t\tend_date;\n\n\t\tvar _init_once = function(inp, date, number) {\n\t\t\tscheduler.event(inp, \"click\", function() {\n\t\t\t\tscheduler.destroyCalendar(null, true);\n\t\t\t\tscheduler.renderCalendar({\n\t\t\t\t\tposition: inp,\n\t\t\t\t\tdate: new Date(this._date),\n\t\t\t\t\tnavigation: true,\n\t\t\t\t\thandler: function(new_date) {\n\t\t\t\t\t\tinp.value = scheduler.templates.calendar_time(new_date);\n\t\t\t\t\t\tinp._date = new Date(new_date);\n\t\t\t\t\t\tscheduler.destroyCalendar();\n\t\t\t\t\t\tif (scheduler.config.event_duration && scheduler.config.auto_end_date && number === 0) { //first element = start date\n\t\t\t\t\t\t\t_update_minical_select();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tif (scheduler.config.full_day) {\n\t\t\tif (!node._full_day) {\n\t\t\t\tvar html = \"<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> \" + scheduler.locale.labels.full_day + \"&nbsp;</label></input>\";\n\t\t\t\tif (!scheduler.config.wide_form)\n\t\t\t\t\thtml = node.previousSibling.innerHTML + html;\n\t\t\t\tnode.previousSibling.innerHTML = html;\n\t\t\t\tnode._full_day = true;\n\t\t\t}\n\t\t\tvar input = node.previousSibling.getElementsByTagName(\"input\")[0];\n\n\t\t\tvar isFulldayEvent = (scheduler.date.time_part(ev.start_date) === 0 && scheduler.date.time_part(ev.end_date) === 0);\n\t\t\tinput.checked = isFulldayEvent;\n\n\t\t\tselects[0].disabled = input.checked;\n\t\t\tselects[1].disabled = input.checked;\n\n\t\t\tif (!input.$_eventAttached) {\n\t\t\t\tinput.$_eventAttached = true;\n\t\t\t\tscheduler.event(input, \"click\", function() {\n\t\t\t\t\tif (input.checked === true) {\n\t\t\t\t\t\tvar obj = {};\n\t\t\t\t\t\tscheduler.form_blocks.calendar_time.get_value(node, obj);\n\n\t\t\t\t\t\tstart_date = scheduler.date.date_part(obj.start_date);\n\t\t\t\t\t\tend_date = scheduler.date.date_part(obj.end_date);\n\n\t\t\t\t\t\tif (+end_date == +start_date || (+end_date >= +start_date && (ev.end_date.getHours() !== 0 || ev.end_date.getMinutes() !== 0)))\n\t\t\t\t\t\t\tend_date = scheduler.date.add(end_date, 1, \"day\");\n\t\t\t\t\t}else{\n\t\t\t\t\t\tstart_date = null;\n\t\t\t\t\t\tend_date = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar start = start_date || ev.start_date;\n\t\t\t\t\tvar end = end_date || ev.end_date;\n\t\t\t\t\t_attach_action(inputs[0], start);\n\t\t\t\t\t_attach_action(inputs[1], end);\n\t\t\t\t\tselects[0].value = start.getHours() * 60 + start.getMinutes();\n\t\t\t\t\tselects[1].value = end.getHours() * 60 + end.getMinutes();\n\n\t\t\t\t\tselects[0].disabled = input.checked;\n\t\t\t\t\tselects[1].disabled = input.checked;\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (scheduler.config.event_duration && scheduler.config.auto_end_date) {\n\n\t\t\tvar _update_minical_select = function () {\n\t\t\t\tif (!(scheduler.config.auto_end_date && scheduler.config.event_duration)){\n\t\t\t\t\t// setting may be disabled after the handler is attached\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tstart_date = scheduler.date.add(inputs[0]._date, selects[0].value, \"minute\");\n\t\t\t\tend_date = new Date(start_date.getTime() + (scheduler.config.event_duration * 60 * 1000));\n\n\t\t\t\tinputs[1].value = scheduler.templates.calendar_time(end_date);\n\t\t\t\tinputs[1]._date = scheduler.date.date_part(new Date(end_date));\n\n\t\t\t\tselects[1].value = end_date.getHours() * 60 + end_date.getMinutes();\n\t\t\t};\n\n\t\t\tif(!selects[0].$_eventAttached){\n\t\t\t\tselects[0].addEventListener(\"change\", _update_minical_select); // only update on first select should trigger update so user could define other end date if he wishes too\n\t\t\t}\n\t\t}\n\n\t\tfunction _attach_action(inp, date, number) {\n\t\t\t_init_once(inp, date, number);\n\t\t\tinp.value = scheduler.templates.calendar_time(date);\n\t\t\tinp._date = scheduler.date.date_part(new Date(date));\n\t\t}\n\n\t\t_attach_action(inputs[0], ev.start_date, 0);\n\t\t_attach_action(inputs[1], ev.end_date, 1);\n\t\t_init_once = function() {};\n\n\t\tfunction _round_minutes(date) {\n\t\t\tvar time_values = config._time_values;\n\t\t\tvar direct_value = date.getHours() * 60 + date.getMinutes();\n\t\t\tvar fixed_value = direct_value;\n\t\t\tvar value_found = false;\n\n\t\t\tfor (var k = 0; k < time_values.length; k++) {\n\t\t\t\tvar t_v = time_values[k];\n\t\t\t\tif (t_v === direct_value) {\n\t\t\t\t\tvalue_found = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (t_v < direct_value)\n\t\t\t\t\tfixed_value = t_v;\n\t\t\t}\n\n\t\t\tif(!(value_found || fixed_value))\n\t\t\t\treturn -1;\n\n\t\t\treturn (value_found) ? direct_value : fixed_value;\n\t\t}\n\n\t\tselects[0].value = _round_minutes(ev.start_date);\n\t\tselects[1].value = _round_minutes(ev.end_date);\n\n\t},\n\tget_value: function(node, ev) {\n\t\tvar inputs = node.getElementsByTagName(\"input\");\n\t\tvar selects = node.getElementsByTagName(\"select\");\n\n\t\tev.start_date = scheduler.date.add(inputs[0]._date, selects[0].value, \"minute\");\n\t\tev.end_date = scheduler.date.add(inputs[1]._date, selects[1].value, \"minute\");\n\n\t\tif (ev.end_date <= ev.start_date)\n\t\t\tev.end_date = scheduler.date.add(ev.start_date, scheduler.config.time_step, \"minute\");\n\t\treturn {\n\t\t\tstart_date: new Date(ev.start_date),\n\t\t\tend_date: new Date(ev.end_date)\n\t\t};\n\t},\n\tfocus: function(node) {\n\t}\n};\nscheduler.linkCalendar = function(calendar, datediff) {\n\tvar action = function() {\n\t\tvar date = scheduler._date;\n\t\tvar dateNew = new Date(date.valueOf());\n\t\tif (datediff) dateNew = datediff(dateNew);\n\t\tdateNew.setDate(1);\n\t\tscheduler.updateCalendar(calendar, dateNew);\n\t\treturn true;\n\t};\n\n\tscheduler.attachEvent(\"onViewChange\", action);\n\tscheduler.attachEvent(\"onXLE\", action);\n\tscheduler.attachEvent(\"onEventAdded\", action);\n\tscheduler.attachEvent(\"onEventChanged\", action);\n\tscheduler.attachEvent(\"onEventDeleted\", action);\n\taction();\n};\n\nscheduler._markCalendarCurrentDate = function(calendar) {\n\tvar state = scheduler.getState();\n\tvar from = state.min_date;\n\tvar to = state.max_date;\n\tvar mode = state.mode;\n\n\tvar month_start = scheduler.date.month_start(new Date(calendar._date));\n\tvar month_end = scheduler.date.add(month_start, 1, \"month\");\n\n\tvar noHighlight = {\n\t\t\"month\":true,\n\t\t\"year\":true,\n\t\t\"agenda\":true,\n\t\t\"grid\":true\n\t};\n\t// no need to highlight current dates for a large range views - agenda, year, etc.\n\tif(noHighlight[mode] || (from.valueOf() <= month_start.valueOf() && to.valueOf() >= month_end.valueOf())){\n\t\treturn;\n\t}\n\n\tvar current = from;\n\twhile(current.valueOf() < to.valueOf()){\n\t\tif (month_start.valueOf() <= current.valueOf() && month_end > current) {\n\t\t\tscheduler.markCalendar(calendar, current, \"dhx_calendar_click\");\n\t\t}\n\t\tcurrent = scheduler.date.add(current, 1, \"day\");\n\t}\n};\n\nscheduler.attachEvent(\"onEventCancel\", function(){\n\tscheduler.destroyCalendar(null, true);\n});\n\nscheduler.attachEvent(\"onDestroy\", function(){\n\tscheduler.destroyCalendar();\n});\n\n}","export default function(scheduler){\n\nscheduler.attachEvent(\"onTemplatesReady\",function(){\n\tscheduler.xy.scroll_width = 0;\n\n\tvar old = scheduler.render_view_data;\n\tscheduler.render_view_data=function(){\n\t\tvar data = this._els[\"dhx_cal_data\"][0];\n\t\tdata.firstChild._h_fix = true;\n\n\t\told.apply(scheduler,arguments);\n\n\n\n\t\tvar height = parseInt(data.style.height);\n\t\tdata.style.height=\"1px\";\n\t\tdata.style.height=data.scrollHeight+\"px\";\n\n\t\tthis._obj.style.height = this._obj.clientHeight + data.scrollHeight - height + \"px\";\n\t};\n\n\tvar old_s=scheduler._reset_month_scale;\n\tscheduler._reset_month_scale=function(a,b,c,d){\n\t\tvar dummy = {clientHeight:100};\n\t\told_s.apply(scheduler,[dummy,b,c,d]);\n\t\ta.innerHTML = dummy.innerHTML;\n\t};\n\n});\n\n}","import virtual_events_helpers from \"../core/virtual_events_helpers\";\n\nexport default function(scheduler){\n\nscheduler.config.multisection = true;\nscheduler.config.multisection_shift_all = true;\nscheduler.config.section_delimiter = \",\";\nscheduler.attachEvent(\"onSchedulerReady\", function(){\n\tvirtual_events_helpers(scheduler);\n\t// #include core/virtual_events_helpers.js\n\n\tvar old_unit = scheduler._update_unit_section;\n\tscheduler._update_unit_section = function(action){\n\t\treturn scheduler._update_sections(action, old_unit);\n\t};\n\tvar old_timeline = scheduler._update_timeline_section;\n\tscheduler._update_timeline_section =function(action){\n\t\treturn scheduler._update_sections(action, old_timeline);\n\t};\n\n\n\tscheduler.isMultisectionEvent = function(ev){\n\t\tif(ev && this._get_multisection_view()){\n\t\t\tvar units = this._get_event_sections(ev);\n\t\t\treturn (units.length > 1);\n\t\t}\n\t\treturn false;\n\t};\n\n\tscheduler._get_event_sections = function(event){\n\t\tvar mapping = this._get_section_property();\n\t\tvar units = event[mapping] || \"\";\n\t\treturn this._parse_event_sections(units);\n\t};\n\tscheduler._parse_event_sections = function(value){\n\t\tif(value instanceof Array){\n\t\t\treturn value;\n\t\t}else{\n\t\t\treturn value.toString().split(scheduler.config.section_delimiter);\n\t\t}\n\t};\n\n\tscheduler._clear_copied_events();\n\n\tscheduler._split_events = function(evs) {\n\t\tvar stack = [];\n\t\tvar pr = this._get_multisection_view();\n\n\t\tif(pr) {\n\t\t\tfor (var i=0; i<evs.length; i++) {\n\t\t\t\tscheduler._split_one_event(evs[i], pr, stack);\n\t\t\t}\n\t\t}else{\n\t\t\tstack = evs;\n\t\t}\n\t\treturn stack;\n\t};\n\n\tscheduler._split_one_event = function(event, view, stack) {\n\t\tconst units = this._get_event_sections(event);\n\t\tconst mapping = this._get_section_property();\n\n\t\tif(units.length > 1) {\n\t\t\tfor (var j=0; j<units.length; j++) {\n\t\t\t\tif(typeof view.order[units[j]] === \"undefined\")\n\t\t\t\t\tcontinue;\n\n\t\t\t\tconst ev = scheduler._copy_event(event);\n\t\t\t\tev[mapping] = units[j];\n\t\t\t\tstack.push(ev);\n\t\t\t}\n\t\t} else {\n\t\t\tstack.push(event);\n\t\t}\n\t};\n\n\n\tscheduler._get_multisection_view = function(){\n\t\tif(!this.config.multisection){\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn scheduler._get_section_view();\n\t\t}\n\t};\n\n\tvar vis_evs = scheduler.get_visible_events;\n\tscheduler.get_visible_events = function(only_timed) {\n\t\tthis._clear_copied_events();\n\t\tvar evs = vis_evs.apply(this,arguments);\n\n\t\tif (this._get_multisection_view()){\n\t\t\tevs = this._split_events(evs);\n\n\t\t\tfor(var i=0; i <evs.length; i++){\n\t\t\t\tif(!this.is_visible_events(evs[i])){\n\t\t\t\t\tevs.splice(i, 1);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._register_copies_array(evs);\n\t\t}\n\n\t\treturn evs;\n\t};\n\n\tscheduler._rendered_events = {};\n\tvar old_view_data = scheduler.render_view_data;\n\tscheduler.render_view_data = function(evs, hold) {\n\t\tif (this._get_multisection_view() && evs) {\n\t\t\t//render single event during dnd, restore flags that were calculated during full render\n\t\t\tevs = this._split_events(evs);\n\t\t\tthis._restore_render_flags(evs);\n\t\t}\n\n\t\treturn old_view_data.apply(this,[evs, hold]);\n\t};\n\n\tscheduler._update_sections = function(action, def_handler){\n\t\tvar view = action.view,\n\t\t\tevent = action.event,\n\t\t\tpos = action.pos;\n\t\t//\tdrag_single = true;\n\t\t//view - timeline or units view object. both stores displayed sections in 'view.order' hash\n\t\t// pos - mouse position, calculated in _mouse_coords method\n\t\t// event - scheduler event\n\n\t\tif(!scheduler.isMultisectionEvent(event)){\n\t\t\tdef_handler.apply(scheduler, [action]);\n\t\t}else{\n\t\t\tif(!scheduler._drag_event._orig_section){\n\t\t\t\tscheduler._drag_event._orig_section = pos.section;\n\t\t\t}\n\n\t\t\tif(scheduler._drag_event._orig_section != pos.section){\n\t\t\t\tvar shift = (view.order[pos.section] - view.order[scheduler._drag_event._orig_section]);\n\t\t\t\tif(shift){\n\t\t\t\t\tvar sections = this._get_event_sections(event);\n\t\t\t\t\tvar new_sections = [];\n\t\t\t\t\tvar shifted = true;\n\t\t\t\t\tif(scheduler.config.multisection_shift_all){\n\t\t\t\t\t\tfor(var i=0; i<sections.length; i++){\n\t\t\t\t\t\t\tvar new_section = scheduler._shift_sections(view, sections[i], shift);\n\t\t\t\t\t\t\tif(new_section !== null){\n\t\t\t\t\t\t\t\tnew_sections[i] = new_section;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tnew_sections = sections;\n\t\t\t\t\t\t\t\tshifted = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tfor(var i=0; i<sections.length; i++){\n\t\t\t\t\t\t\t// if section is occupied return\n\t\t\t\t\t\t\tif(sections[i] == pos.section){\n\t\t\t\t\t\t\t\tnew_sections = sections;\n\t\t\t\t\t\t\t\tshifted = false;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// find and shift only one section\n\t\t\t\t\t\t\tif(sections[i] == scheduler._drag_event._orig_section){\n\t\t\t\t\t\t\t\tvar new_section = scheduler._shift_sections(view, sections[i], shift);\n\t\t\t\t\t\t\t\tif(new_section !== null){\n\t\t\t\t\t\t\t\t\tnew_sections[i] = new_section;\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tnew_sections = sections;\n\t\t\t\t\t\t\t\t\tshifted = false;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tnew_sections[i] = sections[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(shifted)\n\t\t\t\t\t\tscheduler._drag_event._orig_section = pos.section;\n\t\t\t\t\t\n\t\t\t\t\tevent[scheduler._get_section_property()] = new_sections.join(scheduler.config.section_delimiter);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t};\n\n\tscheduler._shift_sections = function(matrix, orig_section, shift){\n\t\tvar orig_order = null;\n\t\tvar units=  matrix.y_unit || matrix.options;\n\t\tfor(var i=0; i < units.length; i++){\n\t\t\tif(units[i].key == orig_section){\n\t\t\t\torig_order = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tvar new_unit = units[orig_order + shift];\n\t\tif(!new_unit){\n\t\t\treturn null;\n\t\t}\n\n\t\treturn new_unit.key;\n\t};\n\n\n\t// limit extension\n\n\tvar old_get_blocked_zones = scheduler._get_blocked_zones;\n\tscheduler._get_blocked_zones = function(timespans, property, day_index, day_value, timespan_type){\n\t\tif(property && this.config.multisection){\n\t\t\tproperty = this._parse_event_sections(property);\n\t\t\tvar zones = [];\n\t\t\tfor(var i =0; i < property.length; i++){\n\t\t\t\tzones = zones.concat(old_get_blocked_zones.apply(this, [timespans, property[i], day_index, day_value, timespan_type]));\n\t\t\t}\n\t\t\treturn zones;\n\t\t}else{\n\t\t\treturn old_get_blocked_zones.apply(this, arguments);\n\t\t}\n\t};\n\n\n\t// collision extension\n\tvar old_check_secions_collision = scheduler._check_sections_collision;\n\n\tscheduler._check_sections_collision = function(a, b){\n\t\tif(this.config.multisection && this._get_section_view()){\n\t\t\ta = this._split_events([a]);\n\t\t\tb = this._split_events([b]);\n\n\t\t\tvar collision = false;\n\t\t\tfor(var a_ind = 0, a_len = a.length; a_ind < a_len; a_ind++){\n\t\t\t\tif(collision){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tfor(var b_ind = 0, b_len = b.length; b_ind < b_len; b_ind++){\n\t\t\t\t\tif(old_check_secions_collision.apply(this, [a[a_ind], b[b_ind]])){\n\t\t\t\t\t\tcollision = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn collision;\n\t\t}else{\n\t\t\treturn old_check_secions_collision.apply(this, arguments);\n\t\t}\n\t};\n});\n\n}","export default function(scheduler){\n\n\nfunction parseXMLOptions(loader, config){\n\tvar items = scheduler.ajax.xpath(\"//data/item\", loader.xmlDoc);\n\tvar ids = {};\n\tfor (var i = 0; i < items.length; i++) {\n\t\tids[items[i].getAttribute(config.map_to)] = true;\n\t}\n\treturn ids;\n}\n\nfunction parseJSONOptions(loader, config){\n\ttry{\n\t\tvar items = JSON.parse(loader.xmlDoc.responseText);\n\t\tvar ids = {};\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tvar option = items[i];\n\n\t\t\tids[option.value || option.key || option.id] = true;\n\t\t}\n\t\treturn ids;\n\t}catch(e){\n\t\treturn null;\n\t}\n}\n\nscheduler.form_blocks[\"multiselect\"]={\n\trender:function(sns) {\n\t\tvar css = \"dhx_multi_select_control dhx_multi_select_\"+sns.name;\n\t\tif(!!sns.vertical){\n\t\t\tcss += \" dhx_multi_select_control_vertical\";\n\t\t}\n\n\t\tvar _result = \"<div class='\"+css+\"' style='overflow: auto; height: \"+sns.height+\"px; position: relative;' >\";\n\t\tfor (var i=0; i<sns.options.length; i++) {\n\t\t\t_result += \"<label><input type='checkbox' value='\"+sns.options[i].key+\"'/>\"+sns.options[i].label+\"</label>\";\n\t\t}\n\t\t_result += \"</div>\";\n\t\treturn _result;\n\t},\n\tset_value:function(node,value,ev,config){\n\n\t\tvar _children = node.getElementsByTagName('input');\n\t\tfor(var i=0;i<_children.length;i++) {\n\t\t\t_children[i].checked = false; //unchecking all inputs on the form\n\t\t}\n\n\t\tfunction _mark_inputs(ids) { // ids = [ 0: undefined, 1: undefined, 2: true, 'custom_name': false ... ]\n\t\t\tvar _children = node.getElementsByTagName('input');\n\t\t\tfor(var i=0;i<_children.length; i++) {\n\t\t\t\t_children[i].checked = !! ids[_children[i].value];\n\t\t\t}\n\t\t}\n\n\t\tvar _ids = {};\n\t\tif (ev[config.map_to]) {\n\t\t\tvar results = (ev[config.map_to] + \"\").split(config.delimiter || scheduler.config.section_delimiter || \",\");\n\t\t\tfor (var i = 0; i < results.length; i++) {\n\t\t\t\t_ids[results[i]] = true;\n\t\t\t}\n\t\t\t_mark_inputs(_ids);\n\t\t} else {\n\t\t\tif (scheduler._new_event || !config.script_url)\n\t\t\t\treturn;\n\t\t\tvar divLoading = document.createElement('div');\n\t\t\tdivLoading.className = 'dhx_loading';\n\t\t\tdivLoading.style.cssText = \"position: absolute; top: 40%; left: 40%;\";\n\t\t\tnode.appendChild(divLoading);\n\n\t\t\tvar url = [\n\t\t\t\tconfig.script_url,\n\t\t\t\t(config.script_url.indexOf(\"?\") == -1 ? \"?\" : \"&\"),\n\t\t\t\t'dhx_crosslink_' + config.map_to + '=' + ev.id + '&uid=' + scheduler.uid()\n\t\t\t].join(\"\");\n\n\t\t\tscheduler.ajax.get(url, function(loader) {\n\t\t\t\tvar options = parseJSONOptions(loader, config);\n\t\t\t\tif(!options){\n\t\t\t\t\toptions = parseXMLOptions(loader, config);\n\t\t\t\t}\n\t\t\t\t_mark_inputs(options);\n\t\t\t\tnode.removeChild(divLoading);\n\t\t\t});\n\t\t}\n\t},\n\tget_value:function(node,ev,config){\n\t\tvar _result = [];\n\t\tvar _children = node.getElementsByTagName(\"input\");\n\t\tfor(var i=0;i<_children.length;i++) {\n\t\t\tif(_children[i].checked)\n\t\t\t\t_result.push(_children[i].value);\n\t\t}\n\t\treturn _result.join(config.delimiter || scheduler.config.section_delimiter || \",\");\n\t},\n\n\tfocus:function(node){\n\t}\n};\n\n}","export default function(scheduler){\n\n\n\tfunction backup(obj){\n\t\tvar t = function(){};\n\t\tt.prototype = obj;\n\t\treturn t;\n\t}\n\n\tvar old = scheduler._load;\n\tscheduler._load=function(url,from){\n\t\turl=url||this._load_url;\n\t\tif (typeof url == \"object\"){\n\t\t\tvar t = backup(this._loaded);\n\t\t\tfor (var i=0; i < url.length; i++) {\n\t\t\t\tthis._loaded=new t();\n\t\t\t\told.call(this,url[i],from);\n\t\t\t}\n\t\t} else\n\t\t\told.apply(this,arguments);\n\t};\n\n}","export default function(scheduler){\n\t/* global Backbone */\n\tvar cfg = {\n\t\tuse_id : false\n\t};\n\n\t//remove private properties\n\tfunction sanitize(ev){\n\t\tvar obj = {};\n\t\tfor (var key in ev)\n\t\t\tif (key.indexOf(\"_\") !== 0)\n\t\t\t\tobj[key] = ev[key];\n\n\t\tif (!cfg.use_id)\n\t\t\tdelete obj.id;\n\n\t\treturn obj;\n\t}\n\n\tvar update_timer;\n\tfunction update_view(){\n\t\tclearTimeout(update_timer);\n\t\tupdate_timer = setTimeout(function(){\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tscheduler.updateView();\n\t\t},1);\n\t}\n\n\tfunction _start_ext_load(cal){\n\t\tcal._loading = true;\n\t\tcal._not_render = true;\n\n\t\tcal.callEvent(\"onXLS\", []);\n\t}\n\tfunction _finish_ext_load(cal){\n\t\tcal._not_render = false;\n\t\tif (cal._render_wait)\n\t\t\tcal.render_view_data();\n\t\tcal._loading = false;\n\n\t\tcal.callEvent(\"onXLE\", []);\n\t}\n\n\n\tfunction _get_id(model){\n\t\treturn cfg.use_id ? model.id : model.cid;\n\t}\n\nscheduler.backbone = function(events, config){\n\tif (config) cfg = config;\n\n\tevents.bind(\"change\", function(model, info){\n\t\tvar cid = _get_id(model);\n\t\tvar ev = scheduler._events[cid] = model.toJSON();\n\t\tev.id = cid;\n\n\t\tscheduler._init_event(ev);\n\t\tupdate_view();\n\t});\n\tevents.bind(\"remove\", function(model, changes){\n\t\tvar cid = _get_id(model);\n\t\tif (scheduler._events[cid])\n\t\t\tscheduler.deleteEvent(cid);\n\t});\n\n\tvar queue = [];\n\tfunction add_from_queue(){\n\t\tif(scheduler.$destroyed){\n\t\t\treturn true;\n\t\t}\n\t\tif (queue.length){\n\t\t\tscheduler.parse(queue, \"json\");\n\t\t\tqueue = [];\n\t\t}\n\t}\n\n\tevents.bind(\"add\", function(model, changes){\n\t\tvar cid = _get_id(model);\n\t\tif (!scheduler._events[cid]){\n\t\t\tvar ev =  model.toJSON();\n\t\t\tev.id = cid;\n\t\t\tscheduler._init_event(ev);\n\n\t\t\tqueue.push(ev);\n\t\t\tif (queue.length == 1)\n\t\t\t\tsetTimeout(add_from_queue,1);\n\t\t}\n\t});\n\n\tevents.bind(\"request\", function(obj){\n\t\tif (obj instanceof Backbone.Collection)\n\t\t\t_start_ext_load(scheduler);\n\t});\n\tevents.bind(\"sync\", function(obj){\n\t\tif (obj instanceof Backbone.Collection)\n\t\t\t_finish_ext_load(scheduler);\n\t});\n\tevents.bind(\"error\", function(obj){\n\t\tif (obj instanceof Backbone.Collection)\n\t\t\t_finish_ext_load(scheduler);\n\t});\n\n\n\tscheduler.attachEvent(\"onEventCreated\", function(id){\n\t\tvar ev = new events.model(scheduler.getEvent(id));\n\t\tscheduler._events[id] = ev.toJSON();\n\t\tscheduler._events[id].id = id;\n\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onEventAdded\", function(id){\n\t\tif (!events.get(id)){\n\t\t\tvar data = sanitize(scheduler.getEvent(id));\n\t\t\tvar model = new events.model(data);\n\n\t\t\tvar cid = _get_id(model);\n\t\t\tif (cid != id)\n\t\t\t\tthis.changeEventId(id, cid);\n\t\t\tevents.add(model);\n\t\t\tevents.trigger(\"scheduler:add\", model);\n\t\t}\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventChanged\", function(id){\n\t\tvar ev = events.get(id);\n\t\tvar upd = sanitize(scheduler.getEvent(id));\n\n\t\tev.set(upd);\n\t\tevents.trigger(\"scheduler:change\", ev);\n\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventDeleted\", function(id){\n\t\tvar model = events.get(id);\n\t\tif (model){\n\t\t\tevents.trigger(\"scheduler:remove\", model);\n\t\t\tevents.remove(id);\n\t\t}\n\t\treturn true;\n\t});\n};\n\n}","export default function(scheduler){\n\n\t/* global dhtmlDragAndDropObject, dhtmlx */\n// lame old code doesn't provide raw event object\n\tscheduler.attachEvent(\"onTemplatesReady\", function() {\n\t\tvar dragger = (new dhtmlDragAndDropObject());\n\t\tvar old = dragger.stopDrag;\n\t\tvar last_event;\n\t\tdragger.stopDrag = function(e) {\n\t\t\tlast_event = e;\n\t\t\treturn old.apply(this, arguments);\n\t\t};\n\n\t\tfunction on_drop(sourceHtmlObject, dhtmlObject, targetHtmlObject, targetHtml) {\n\n\t\t\tif (scheduler.checkEvent(\"onBeforeExternalDragIn\") && !scheduler.callEvent(\"onBeforeExternalDragIn\", [sourceHtmlObject, dhtmlObject, targetHtmlObject, targetHtml, last_event]))\n\t\t\t\treturn;\n\n\t\t\tvar temp = scheduler.attachEvent(\"onEventCreated\", function (id) {\n\t\t\t\tif (!scheduler.callEvent(\"onExternalDragIn\", [id, sourceHtmlObject, last_event])) {\n\t\t\t\t\tthis._drag_mode = this._drag_id = null;\n\t\t\t\t\tthis.deleteEvent(id);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar action_data = scheduler.getActionData(last_event);\n\t\t\tvar event_data = {\n\t\t\t\tstart_date: new Date(action_data.date)\n\t\t\t};\n\n\t\t\t// custom views, need to assign section id, fix dates\n\t\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\t\t\tvar view_options = scheduler.matrix[scheduler._mode];\n\t\t\t\tevent_data[view_options.y_property] = action_data.section;\n\n\t\t\t\tvar pos = scheduler._locate_cell_timeline(last_event);\n\t\t\t\tevent_data.start_date = view_options._trace_x[pos.x];\n\t\t\t\tevent_data.end_date = scheduler.date.add(event_data.start_date, view_options.x_step, view_options.x_unit);\n\t\t\t}\n\t\t\tif (scheduler._props && scheduler._props[scheduler._mode]) {\n\t\t\t\tevent_data[scheduler._props[scheduler._mode].map_to] = action_data.section;\n\t\t\t}\n\n\t\t\tscheduler.addEventNow(event_data);\n\n\t\t\tscheduler.detachEvent(temp);\n\t\t}\n\n\t\tdragger.addDragLanding(scheduler._els[\"dhx_cal_data\"][0], {\n\t\t\t_drag: function(sourceHtmlObject, dhtmlObject, targetHtmlObject, targetHtml) {\n\t\t\t\ton_drop(sourceHtmlObject, dhtmlObject, targetHtmlObject, targetHtml);\n\t\t\t},\n\t\t\t_dragIn: function(htmlObject, shtmlObject) {\n\t\t\t\treturn htmlObject;\n\t\t\t},\n\t\t\t_dragOut: function(htmlObject) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t});\n\n\t\tif(dhtmlx.DragControl) {\n\t\t\tdhtmlx.DragControl.addDrop(scheduler._els[\"dhx_cal_data\"][0], {\n\t\t\t\tonDrop: function (source, target, d, e) {\n\t\t\t\t\tvar sourceDhtmlx = dhtmlx.DragControl.getMaster(source);\n\t\t\t\t\tlast_event = e;\n\t\t\t\t\ton_drop(source, sourceDhtmlx, target, e.target || e.srcElement);\n\t\t\t\t},\n\n\t\t\t\tonDragIn: function (source, target, e) {\n\t\t\t\t\treturn target;\n\t\t\t\t}\n\t\t\t}, true);\n\t\t}\n\t});\n\n}","export default function(scheduler){\n\n\tvar dx, dy,\n\t\thtml_regexp = new RegExp(\"<[^>]*>\", \"g\"),\n\t\tnewline_regexp = new RegExp(\"<br[^>]*>\", \"g\");\n\n\tfunction clean_html(val) {\n\t\treturn val.replace(newline_regexp, \"\\n\").replace(html_regexp, \"\");\n\t}\n\n\tfunction x_norm(x, offset) {\n\t\tx = parseFloat(x);\n\t\toffset = parseFloat(offset);\n\t\tif (!isNaN(offset)) x -= offset;\n\n\t\tvar w = colsWidth(x);\n\t\tx = x - w.width + w.cols*dx;\n\t\treturn isNaN(x)?\"auto\":(100*x/(dx));\n\t}\n\n\tfunction x_norm_event(x, offset, is_left) {\n\t\tx = parseFloat(x);\n\t\toffset = parseFloat(offset);\n\t\tif (!isNaN(offset) && is_left) x -= offset;\n\n\t\tvar w = colsWidth(x);\n\t\tx = x - w.width + w.cols*dx;\n\t\treturn isNaN(x)?\"auto\":(100*x/(dx-(!isNaN(offset)?offset:0)));\n\t}\n\tfunction colsWidth(width) {\n\t\tvar r = 0;\n\t\tvar header = scheduler._els.dhx_cal_header[0].childNodes;\n\t\tvar els = header[1] ? header[1].childNodes : header[0].childNodes;\n\t\tfor (var i = 0; i < els.length; i++) {\n\t\t\tvar el = els[i].style ? els[i] : els[i].parentNode;\n\t\t\tvar w = parseFloat(el.style.width);\n\t\t\tif (width > w){\n\t\t\t\twidth -= (w+1);\n\t\t\t\tr+=(w+1);\n\t\t\t}\n\t\t\telse\n\t\t\t\tbreak;\n\t\t}\n\t\treturn { width: r, cols: i };\n\t}\n\n\tfunction y_norm(y) {\n\t\ty = parseFloat(y);\n\t\tif (isNaN(y)) return \"auto\";\n\t\treturn 100 * y / dy;\n\t}\n\n\tfunction get_style(node, style){\n\t\treturn (window.getComputedStyle?(window.getComputedStyle(node, null)[style]):(node.currentStyle?node.currentStyle[style]:null))||\"\";\n\t}\n\n\tfunction de_day(node, n) {\n\t\tvar x = parseInt(node.style.left, 10);\n\n\t\tfor (var dx = 0; dx < scheduler._cols.length; dx++) {\n\t\t\tx -= scheduler._cols[dx];\n\t\t\tif (x < 0) return dx;\n\t\t}\n\t\treturn n;\n\t}\n\n\tfunction de_week(node, n) {\n\t\tvar y = parseInt(node.style.top, 10);\n\t\tfor (var dy = 0; dy < scheduler._colsS.heights.length; dy++)\n\t\t\tif (scheduler._colsS.heights[dy] > y) return dy;\n\t\treturn n;\n\t}\n\n\tfunction xml_start(tag) {\n\t\treturn tag ? \"<\"+tag+\">\" : \"\";\n\t}\n\tfunction xml_end(tag) {\n\t\treturn tag ? \"</\"+tag+\">\" : \"\";\n\t}\n\n\tfunction xml_top(tag, profile, header, footer) {\n\t\tvar xml = \"<\"+tag+\" profile='\" + profile + \"'\";\n\t\tif (header)\n\t\t\txml += \" header='\" + header + \"'\";\n\t\tif (footer)\n\t\t\txml += \" footer='\" + footer + \"'\";\n\t\txml += \">\";\n\t\treturn xml;\n\t}\n\n\tfunction xml_body_header() {\n\t\tvar xml = \"\";\n\t\t// detects if current mode is timeline\n\t\tvar mode = scheduler._mode;\n\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode])\n\t\t\tmode = (scheduler.matrix[scheduler._mode].render == \"cell\") ? \"matrix\" : \"timeline\";\n\t\txml += \"<scale mode='\" + mode + \"' today='\" + scheduler._els.dhx_cal_date[0].innerHTML + \"'>\";\n\n\t\tif (scheduler._mode == \"week_agenda\") {\n\t\t\tvar xh = scheduler._els.dhx_cal_data[0].getElementsByTagName(\"DIV\");\n\t\t\tfor (var i = 0; i < xh.length; i++)\n\t\t\t\tif (xh[i].className == \"dhx_wa_scale_bar\")\n\t\t\t\t\txml += \"<column>\" + clean_html(xh[i].innerHTML) + \"</column>\";\n\t\t} else if (scheduler._mode == \"agenda\" || scheduler._mode == \"map\") {\n\t\t\tvar xh = scheduler._els.dhx_cal_header[0].childNodes[0].childNodes;\n\n\t\t\txml += \"<column>\" + clean_html(xh[0].innerHTML) + \"</column><column>\" + clean_html(xh[1].innerHTML) + \"</column>\";\n\t\t} else if (scheduler._mode == \"year\") {\n\t\t\tvar xh = scheduler._els.dhx_cal_data[0].childNodes;\n\t\t\tfor (var i = 0; i < xh.length; i++) {\n\t\t\t\txml += \"<month label='\" + clean_html(xh[i].querySelector(\".dhx_year_month\").innerHTML) + \"'>\";\n\t\t\t\txml += xml_month_scale(xh[i].querySelector(\".dhx_year_week\").childNodes);\n\t\t\t\txml += xml_month(xh[i].querySelector(\".dhx_year_body\"));\n\t\t\t\txml += \"</month>\";\n\t\t\t}\n\t\t} else {\n\t\t\txml += \"<x>\";\n\t\t\tvar xh = scheduler._els.dhx_cal_header[0].childNodes;\n\t\t\txml += xml_month_scale(xh);\n\t\t\txml += \"</x>\";\n\n\t\t\tvar yh = scheduler._els.dhx_cal_data[0];\n\t\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\t\t\txml += \"<y>\";\n\t\t\t\tfor (var i = 0; i < yh.firstChild.rows.length; i++) {\n\t\t\t\t\tvar el = yh.firstChild.rows[i];\n\t\t\t\t\txml += \"<row><![CDATA[\" + clean_html(el.cells[0].innerHTML) + \"]]></row>\";\n\t\t\t\t}\n\t\t\t\txml += \"</y>\";\n\t\t\t\tdy = yh.firstChild.rows[0].cells[0].offsetHeight;\n\t\t\t} else if (yh.firstChild.tagName == \"TABLE\") {\n\t\t\t\txml += xml_month(yh);\n\t\t\t} else {\n\t\t\t\tyh = yh.childNodes[yh.childNodes.length - 1];\n\t\t\t\twhile (yh.className.indexOf(\"dhx_scale_holder\") == -1)\n\t\t\t\t\tyh = yh.previousSibling;\n\t\t\t\tyh = yh.childNodes;\n\n\t\t\t\txml += \"<y>\";\n\t\t\t\tfor (var i = 0; i < yh.length; i++)\n\t\t\t\t\txml += \"\\n<row><![CDATA[\" + clean_html(yh[i].innerHTML) + \"]]></row>\";\n\t\t\t\txml += \"</y>\";\n\t\t\t\tdy = yh[0].offsetHeight;\n\t\t\t}\n\t\t}\n\t\txml += \"</scale>\";\n\t\treturn xml;\n\t}\n\n\tfunction xml_month(yh) {\n\t\tvar xml = \"\";\n\t\tvar r = yh.querySelectorAll(\"tr\");\n\t\tfor (var i = 0; i < r.length; i++) {\n\t\t\tvar days = [];\n\t\t\tvar cells = r[i].querySelectorAll(\"td\");\n\n\t\t\tfor (var j = 0; j < cells.length; j++)\n\t\t\t\tdays.push(cells[j].querySelector(\".dhx_month_head\").innerHTML);\n\n\t\t\txml += \"\\n<row height='\" + cells[0].offsetHeight + \"'><![CDATA[\" + clean_html(days.join(\"|\")) + \"]]></row>\";\n\t\t\tdy = cells[0].offsetHeight;\n\t\t}\n\t\treturn xml;\n\t}\n\n\tfunction xml_month_scale(xh) {\n\t\tvar xhs,\n\t\t\txml = \"\";\n\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\t\tif (scheduler.matrix[scheduler._mode].second_scale)\n\t\t\t\txhs = xh[1].childNodes;\n\n\t\t\txh = xh[0].childNodes;\n\t\t}\n\n\t\tfor (var i = 0; i < xh.length; i++)\n\t\t\txml += \"\\n<column><![CDATA[\" + clean_html(xh[i].innerHTML) + \"]]></column>\";\n\t\tdx = xh[0].offsetWidth;\n\n\t\tif (xhs) {\n\t\t\tvar width = 0;\n\t\t\tvar top_width = xh[0].offsetWidth;\n\t\t\tvar top_col = 1;\n\t\t\tfor (var i = 0; i < xhs.length; i++) {\n\t\t\t\txml += \"\\n<column second_scale='\" + top_col + \"'><![CDATA[\" + clean_html(xhs[i].innerHTML) + \"]]></column>\";\n\t\t\t\twidth += xhs[i].offsetWidth;\n\t\t\t\tif (width >= top_width) {\n\t\t\t\t\ttop_width += (xh[top_col] ? xh[top_col].offsetWidth : 0);\n\t\t\t\t\ttop_col++;\n\t\t\t\t}\n\t\t\t\tdx = xhs[0].offsetWidth;\n\t\t\t}\n\t\t}\n\t\treturn xml;\n\t}\n\n\tfunction xml_body(colors) {\n\t\tvar xml = \"\";\n\t\tvar evs = scheduler._rendered;\n\t\tvar matrix = scheduler.matrix && scheduler.matrix[scheduler._mode];\n\n\t\tif (scheduler._mode == \"agenda\" || scheduler._mode == \"map\") {\n\n\t\t\tfor (var i = 0; i < evs.length; i++)\n                xml += \"<event><head><![CDATA[\" + clean_html(evs[i].childNodes[0].innerHTML) + \"]]></head><body><![CDATA[\" + clean_html(evs[i].childNodes[2].innerHTML) + \"]]></body></event>\";\n\n\t\t} else if (scheduler._mode == \"week_agenda\") {\n\n\t\t\tfor (var i = 0; i < evs.length; i++)\n\t\t\t\txml += \"<event day='\" + evs[i].parentNode.getAttribute(\"day\") + \"'><body>\" + clean_html(evs[i].innerHTML) + \"</body></event>\";\n\n\t\t} else if (scheduler._mode == \"year\") {\n\n\t\t\tvar evs = scheduler.get_visible_events();\n\t\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\t\tvar d = evs[i].start_date;\n\t\t\t\tif (d.valueOf() < scheduler._min_date.valueOf())\n\t\t\t\t\td = scheduler._min_date;\n\n\t\t\t\twhile (d < evs[i].end_date) {\n\t\t\t\t\tvar m = d.getMonth() + 12 * (d.getFullYear() - scheduler._min_date.getFullYear()) - scheduler.week_starts._month;\n\t\t\t\t\tvar day = scheduler.week_starts[m] + d.getDate() - 1;\n\t\t\t\t\tvar text_color = colors ? get_style(scheduler._get_year_cell(d), \"color\") : \"\";\n\t\t\t\t\tvar bg_color = colors ? get_style(scheduler._get_year_cell(d), \"backgroundColor\") : \"\";\n\n\t\t\t\t\txml += \"<event day='\" + (day % 7) + \"' week='\" + Math.floor(day / 7) + \"' month='\" + m + \"' backgroundColor='\" + bg_color + \"' color='\" + text_color + \"'></event>\";\n\t\t\t\t\td = scheduler.date.add(d, 1, \"day\");\n\t\t\t\t\tif (d.valueOf() >= scheduler._max_date.valueOf())\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (matrix && matrix.render == \"cell\") {\n\t\t\tvar evs = scheduler._els.dhx_cal_data[0].getElementsByTagName(\"TD\");\n\t\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\t\tvar text_color = colors ? get_style(evs[i], \"color\") : \"\";\n\t\t\t\tvar bg_color = colors ? get_style(evs[i], \"backgroundColor\") : \"\";\n\t\t\t\txml += \"\\n<event><body backgroundColor='\" + bg_color + \"' color='\" + text_color + \"'><![CDATA[\" + clean_html(evs[i].innerHTML) + \"]]></body></event>\";\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\t\tvar zx, zdx;\n\t\t\t\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\t\t\t\t// logic for timeline view\n\t\t\t\t\tzx = x_norm(evs[i].style.left);\n\t\t\t\t\tzdx = x_norm(evs[i].offsetWidth)-1;\n\t\t\t\t} else {\n\t\t\t\t\t// we should use specific logic for day/week/units view\n\t\t\t\t\tvar left_norm = scheduler.config.use_select_menu_space ? 0 : 26;\n\t\t\t\t\tzx = x_norm_event(evs[i].style.left, left_norm, true);\n\t\t\t\t\tzdx = x_norm_event(evs[i].style.width, left_norm)-1;\n\t\t\t\t}\n\t\t\t\tif (isNaN(zdx * 1)) continue;\n\t\t\t\tvar zy = y_norm(evs[i].style.top);\n\t\t\t\tvar zdy = y_norm(evs[i].style.height);\n\n\t\t\t\tvar e_type = evs[i].className.split(\" \")[0].replace(\"dhx_cal_\", \"\");\n\t\t\t\tif (e_type === 'dhx_tooltip_line') continue;\n\n\t\t\t\tvar dets = scheduler.getEvent(evs[i].getAttribute(scheduler.config.event_attribute));\n                if (!dets) continue;\n\t\t\t\tvar day = dets._sday;\n\t\t\t\tvar week = dets._sweek;\n\t\t\t\tvar length = dets._length || 0;\n\n\t\t\t\tif (scheduler._mode == \"month\") {\n\t\t\t\t\tzdy = parseInt(evs[i].offsetHeight, 10);\n\t\t\t\t\tzy = parseInt(evs[i].style.top, 10) - scheduler.xy.month_head_height;\n\n\t\t\t\t\tday = de_day(evs[i], day);\n\t\t\t\t\tweek = de_week(evs[i], week);\n\t\t\t\t} else if (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\t\t\t\tday = 0;\n\t\t\t\t\tvar el = evs[i].parentNode.parentNode.parentNode;\n\t\t\t\t\tweek = el.rowIndex;\n\t\t\t\t\tvar dy_copy = dy;\n\t\t\t\t\tdy = evs[i].parentNode.offsetHeight;\n\t\t\t\t\tzy = y_norm(evs[i].style.top);\n\t\t\t\t\tzy -= zy * 0.2;\n\t\t\t\t\tdy = dy_copy;\n\t\t\t\t} else {\n\t\t\t\t\tif (evs[i].parentNode == scheduler._els.dhx_cal_data[0]) continue;\n\t\t\t\t\tvar parent = scheduler._els[\"dhx_cal_data\"][0].childNodes[0];\n\t\t\t\t\tvar offset = parseFloat(parent.className.indexOf(\"dhx_scale_holder\") != -1 ? parent.style.left : 0);\n\t\t\t\t\tzx += x_norm(evs[i].parentNode.style.left, offset);\n\t\t\t\t}\n\n\t\t\t\txml += \"\\n<event week='\" + week + \"' day='\" + day + \"' type='\" + e_type + \"' x='\" + zx + \"' y='\" + zy + \"' width='\" + zdx + \"' height='\" + zdy + \"' len='\" + length + \"'>\";\n\n\t\t\t\tif (e_type == \"event\") {\n\t\t\t\t\txml += \"<header><![CDATA[\" + clean_html(evs[i].childNodes[1].innerHTML) + \"]]></header>\";\n\t\t\t\t\tvar text_color = colors ? get_style(evs[i].childNodes[2], \"color\") : \"\";\n\t\t\t\t\tvar bg_color = colors ? get_style(evs[i].childNodes[2], \"backgroundColor\") : \"\";\n\t\t\t\t\txml += \"<body backgroundColor='\" + bg_color + \"' color='\" + text_color + \"'><![CDATA[\" + clean_html(evs[i].childNodes[2].innerHTML) + \"]]></body>\";\n\t\t\t\t} else {\n\t\t\t\t\tvar text_color = colors ? get_style(evs[i], \"color\") : \"\";\n\t\t\t\t\tvar bg_color = colors ? get_style(evs[i], \"backgroundColor\") : \"\";\n\t\t\t\t\txml += \"<body backgroundColor='\" + bg_color + \"' color='\" + text_color + \"'><![CDATA[\" + clean_html(evs[i].innerHTML) + \"]]></body>\";\n\t\t\t\t}\n\t\t\t\txml += \"</event>\";\n\t\t\t}\n\t\t\t}\n\n\t\treturn xml;\n\t}\n\n\tfunction toXML(start, end, view, mode, header, footer){\n\t\tvar colors = false;\n\t\tif (mode == \"fullcolor\") {\n\t\t\tcolors = true;\n\t\t\tmode = \"color\";\n\t\t}\n\n\t\tmode = mode || \"color\";\n\n\t\tvar xml = \"\";\n\t\tif (start) {\n\n\t\t\tvar original_date = scheduler._date;\n\t\t\tvar original_mode = scheduler._mode;\n\t\t\tend = scheduler.date[view+\"_start\"](end);\n\t\t\tend = scheduler.date[\"get_\"+view+\"_end\"] ? scheduler.date[\"get_\"+view+\"_end\"](end) : scheduler.date.add(end, 1, view);\n\n\t\t\txml = xml_top(\"pages\", mode, header, footer);\n\t\t\tfor (var temp_date = new Date(start); +temp_date < +end; temp_date = this.date.add(temp_date, 1, view)) {\n\t\t\t\tthis.setCurrentView(temp_date, view);\n\t\t\t\txml += xml_start(\"page\") + xml_body_header().replace(\"\\u2013\", \"-\") + xml_body(colors) + xml_end(\"page\");\n\t\t\t}\n\t\t\txml += xml_end(\"pages\");\n\n\t\t\tthis.setCurrentView(original_date, original_mode);\n\t\t} else {\n\t\t\txml = xml_top(\"data\", mode, header, footer) + xml_body_header().replace(\"\\u2013\", \"-\") + xml_body(colors) + xml_end(\"data\");\n\t\t}\n\t\treturn xml;\n\t}\n\tscheduler.getPDFData = toXML;\n\tfunction send_xml(xml, url){\n\t\tvar uid = scheduler.uid();\n\t\tvar d = document.createElement(\"div\");\n\t\td.style.display = \"none\";\n\t\tdocument.body.appendChild(d);\n\n\t\td.innerHTML = '<form id=\"' + uid + '\" method=\"post\" target=\"_blank\" action=\"' + url + '\" accept-charset=\"utf-8\" enctype=\"application/x-www-form-urlencoded\"><input type=\"hidden\" name=\"mycoolxmlbody\"/> </form>';\n\t\tdocument.getElementById(uid).firstChild.value = encodeURIComponent(xml);\n\t\tdocument.getElementById(uid).submit();\n\t\td.parentNode.removeChild(d);\n\t}\n\n\tfunction to_pdf(start, end, view, url, mode, header, footer) {\n\t\tvar xml = \"\";\n\t\tif(typeof mode == \"object\"){\n\t\t\txml = schedulersToPdf(mode);\n\t\t}else{\n\t\t\txml = toXML.apply(this, [start, end, view, mode, header, footer]);\n\t\t}\n\n\t\tsend_xml(xml, url);\n\t}\n\n\tfunction schedulersToPdf(objects){\n\t\tvar xml = \"<data>\";\n\t\tfor(var i=0; i < objects.length; i++){\n\t\t\txml += objects[i].source.getPDFData(objects[i].start, objects[i].end, objects[i].view, objects[i].mode, objects[i].header, objects[i].footer);\n\t\t}\n\t\txml += \"</data>\";\n\t\treturn xml;\n\t}\n\n\t/*\n\t * scheduler.toPDF(url, mode, header, footer) - for a single scheduler\n\t * scheduler.toPDF(url, [scheduler1, scheduler2,...]) - for multiple schedulers\n\t * example:\n\t * scheduler.toPDF(\"generate.ashx\", [\n\t *     { source: scheduler1, mode: \"color\" },\n\t *     { source: scheduler2, mode: \"gray\", view:\"week\", start:new Date(2013, 06, 1), end:new Date(2013, 06, 28) },\n\t *     { source: scheduler3 }\n\t * ]);\n\t *\n\t */\n\tscheduler.toPDF = function(url, mode, header, footer) {\n\t\treturn to_pdf.apply(this, [null, null, null, url, mode, header, footer]);\n\t};\n\tscheduler.toPDFRange = function(start, end, view, url, mode, header, footer) {\n\t\tif (typeof start == \"string\") {\n\t\t\tstart = scheduler.templates.api_date(start);\n\t\t\tend = scheduler.templates.api_date(end);\n\t\t}\n\n\t\treturn to_pdf.apply(this, arguments);\n\t};\n\n}","export default function(scheduler){\n\nscheduler.config.icons_select = [\"icon_form\", \"icon_delete\"];\nscheduler.config.details_on_create = true;\nscheduler.config.show_quick_info = true;\nscheduler.xy.menu_width = 0;\n\n\n\nlet clickedElementPosition = null;\nscheduler.attachEvent(\"onSchedulerReady\", function(){\n\tconst container = scheduler.$container;\n\tif(container._$quickInfoHandler){\n\t\treturn;\n\t}else{\n\t\tcontainer._$quickInfoHandler = true;\n\t\t// store coordinates of clicked segment of an event\n\t\t// in case multi section events or multi-line month events\n\t\tscheduler.event(container, \"mousedown\", function(e){\n\t\t\tconst eventElement = e.target.closest(`[${scheduler.config.event_attribute}]`);\n\t\t\tif (eventElement) {\n\t\t\t\tclickedElementPosition = {\n\t\t\t\t\tid: eventElement.getAttribute(scheduler.config.event_attribute),\n\t\t\t\t\tposition: getPositionInsideScheduler(eventElement)\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tscheduler.attachEvent(\"onDestroy\", () => {\n\t\t\tdelete container._$quickInfoHandler;\n\t\t});\n\t}\n});\n\nscheduler.attachEvent(\"onClick\", function(id){\n\tif(!scheduler.config.show_quick_info){\n\t\treturn;\n\t}\n\tscheduler.showQuickInfo(id);\n\treturn true;\n});\n\n(function(){\n\t// pass `force` argument in order to hide quick info synchronously\n\t// so it won't affect showQuickInfo call that can follow\n\tvar events = [\"onEmptyClick\", \"onViewChange\", \"onLightbox\", \"onBeforeEventDelete\", \"onBeforeDrag\"];\n\tvar hiding_function = function(){\n\t\tscheduler.hideQuickInfo(true);\n\t\treturn true;\n\t};\n\tfor (var i=0; i<events.length; i++){\n\t\tscheduler.attachEvent(events[i], hiding_function);\n\t}\n})();\n\nscheduler.templates.quick_info_title = function(start, end, ev){ return ev.text.substr(0,50); };\nscheduler.templates.quick_info_content = function(start, end, ev){ return ev.details || \"\"; };\nscheduler.templates.quick_info_date = function(start, end, ev){\n\tif (scheduler.isOneDayEvent(ev) && scheduler.config.rtl){\n\t\treturn scheduler.templates.day_date(start, end, ev) + \" \" +scheduler.templates.event_header(end, start, ev);\n\t} else if (scheduler.isOneDayEvent(ev)) {\n\t\treturn scheduler.templates.day_date(start, end, ev) + \" \" +scheduler.templates.event_header(start, end, ev);\n\t} else if (scheduler.config.rtl) {\n\t\treturn scheduler.templates.week_date(end, start, ev);\n\t} else {\n\t\treturn scheduler.templates.week_date(start, end, ev);\n\t}\n};\n\nscheduler.showQuickInfo = function(id){\n\tif (id == this._quick_info_box_id) return;\n\tthis.hideQuickInfo(true);\n\tif(this.callEvent(\"onBeforeQuickInfo\", [id]) === false){\n\t\treturn;\n\t}\n\n\tlet pos;\n\tif(clickedElementPosition && clickedElementPosition.id == id){\n\t\tpos = clickedElementPosition.position;\n\t} else {\n\t\tpos = this._get_event_counter_part(id);\n\t}\n\n\n\tif (pos){\n\t\tthis._quick_info_box = this._init_quick_info(pos);\n\t\tthis._fill_quick_data(id);\n\t\tthis._show_quick_info(pos);\n\n\t\tthis.callEvent(\"onQuickInfo\", [id]);\n\t}\n};\n\n(function(){\n\nfunction cssTimeToMs(time) {\n\ttime = time || \"\";\n\n\tvar num = parseFloat(time),\n\t\tunit = time.match(/m?s/),\n\t\tmilliseconds;\n\n\tif (unit) {\n\t\tunit = unit[0];\n\t}\n\n\tswitch (unit) {\n\t\tcase \"s\": // seconds\n\t\t\tmilliseconds = num * 1000;\n\t\t\tbreak;\n\t\tcase \"ms\": // milliseconds\n\t\t\tmilliseconds = num;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tmilliseconds = 0;\n\t\t\tbreak;\n\t}\n\n\treturn milliseconds;\n}\n\nscheduler.hideQuickInfo = function(forced){\n\tvar qi = this._quick_info_box;\n\tvar eventId = this._quick_info_box_id;\n\tthis._quick_info_box_id = 0;\n\n\tif (qi && qi.parentNode){\n\t\tvar width = qi.offsetWidth;\n\t\tif (scheduler.config.quick_info_detached) {\n\t\t\tthis.callEvent(\"onAfterQuickInfo\", [eventId]);\n\t\t\treturn qi.parentNode.removeChild(qi);\n\t\t}\n\n\t\tif (qi.style.right == \"auto\")\n\t\t\tqi.style.left = -width + \"px\";\n\t\telse\n\t\t\tqi.style.right = -width + \"px\";\n\n\t\tif (forced) {\n\t\t\tqi.parentNode.removeChild(qi);\n\t\t}else{\n\n\t\t\tvar style;\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tstyle = window.getComputedStyle(qi, null);\n\t\t\t}else if(qi.currentStyle){\n\t\t\t\tstyle = qi.currentStyle;\n\t\t\t}\n\t\t\tvar delay = cssTimeToMs(style[\"transition-delay\"]) + cssTimeToMs(style[\"transition-duration\"]);\n\t\t\tsetTimeout(function(){\n\t\t\t\tif(qi.parentNode){\n\t\t\t\t\tqi.parentNode.removeChild(qi);\n\t\t\t\t}\n\t\t\t}, delay);\n\t\t}\n\n\t\tthis.callEvent(\"onAfterQuickInfo\", [eventId]);\n\t}\n};\n\n})();\n\nscheduler.event(window, \"keydown\", function(e){\n\tif (e.keyCode == 27)\n\t\tscheduler.hideQuickInfo();\n});\n\nscheduler._show_quick_info = function(pos){\n\tvar qi = scheduler._quick_info_box;\n\tscheduler._obj.appendChild(qi);\n\tvar width = qi.offsetWidth;\n\tvar height = qi.offsetHeight;\n\n\tif (scheduler.config.quick_info_detached){\n\t\tvar left = pos.left - pos.dx*(width - pos.width);\n\t\tif(scheduler.getView() && scheduler.getView()._x_scroll){\n\t\t\t// scrollable timeline\n\t\t\tif(scheduler.config.rtl){\n\t\t\t\tleft += scheduler.getView()._x_scroll;\n\t\t\t}else{\n\t\t\t\tleft -= scheduler.getView()._x_scroll;\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\tvar right = left + width;\n\t\tif(right > window.innerWidth){\n\t\t\tleft = window.innerWidth - width;\n\t\t}\n\t\tleft = Math.max(0, left);\n\n\t\tqi.style.left = left + \"px\";\n\t\tqi.style.top = pos.top - (pos.dy?height:-pos.height) + \"px\";\n\t} else {\n\n\t\tconst dataPos = scheduler.$container.querySelector('.dhx_cal_data').offsetTop;\n\t\tqi.style.top = dataPos + 20 + \"px\";\n\t\tif (pos.dx == 1){\n\t\t\tqi.style.right = \"auto\";\n\t\t\tqi.style.left = -width + \"px\";\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tqi.style.left = \"-10px\";\n\t\t\t},1);\n\t\t} else {\n\t\t\tqi.style.left = \"auto\";\n\t\t\tqi.style.right = -width + \"px\";\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tqi.style.right = \"-10px\";\n\t\t\t},1);\n\t\t}\n\t\tqi.className = qi.className.replace(\" dhx_qi_left\",\"\").replace(\" dhx_qi_right\",\"\")+\" dhx_qi_\"+(pos.dx==1?\"left\":\"right\");\n\t}\n\n\tqi.ontransitionend = () => {\n\t\tfitQIInsideWindow(qi);\n\t\tqi.ontransitionend = null;\n\t};\n\tsetTimeout(() => {\n\t\tfitQIInsideWindow(qi);\n\t}, 1);\n};\n\nfunction fitQIInsideWindow(quickInfoPopup){\n\tconst popupRect = quickInfoPopup.getBoundingClientRect();\n\tconst containerRect = scheduler.$container.getBoundingClientRect();\n\n\t// calculate the bottom offset of the Quick Info relative to the scheduler container\n\tconst offsetBottom = containerRect.bottom - popupRect.bottom;\n\n\t// If the popup extends outside the scheduler container, adjust its top position\n\tif (offsetBottom < 0) {\n\t\tquickInfoPopup.style.top = `${parseFloat(quickInfoPopup.style.top) + offsetBottom}px`;\n\t}\n}\n\nscheduler.attachEvent(\"onTemplatesReady\", function(){\n\tscheduler.hideQuickInfo();\n\tif(this._quick_info_box){\n\t\tvar box = this._quick_info_box;\n\t\tif(box.parentNode){\n\t\t\tbox.parentNode.removeChild(box);\n\t\t}\n\t\tthis._quick_info_box = null;\n\t}\n});\nscheduler._quick_info_onscroll_handler = function(e){\n\tscheduler.hideQuickInfo();\n};\nscheduler._init_quick_info = function(){\n\tif (!this._quick_info_box){\n\n\n\t\tvar qi = this._quick_info_box = document.createElement(\"div\");\n\n\t\tthis._waiAria.quickInfoAttr(qi);\n\n\t\tqi.className = \"dhx_cal_quick_info\";\n\t\tif (scheduler.$testmode)\n\t\t\tqi.className += \" dhx_no_animate\";\n\t\tif (scheduler.config.rtl) qi.className += \" dhx_quick_info_rtl\";\n\t//title\n\t\tvar ariaAttr = this._waiAria.quickInfoHeaderAttrString();\n\t\tvar html = `\n\t\t<div class=\"dhx_cal_qi_tcontrols\">\n\t\t\t<a class=\"dhx_cal_qi_close_btn scheduler_icon close\"></a>\n\t\t</div>\n\t\t<div class=\"dhx_cal_qi_title\" ${ariaAttr}>\n\t\t\t\t\n\t\t\t\t<div class=\"dhx_cal_qi_tcontent\"></div>\n\t\t\t\t<div class=\"dhx_cal_qi_tdate\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"dhx_cal_qi_content\"></div>`;\n\n\t//buttons\n\t\thtml += \"<div class=\\\"dhx_cal_qi_controls\\\">\";\n\t\tvar buttons = scheduler.config.icons_select;\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\n\t\t\t\tvar ariaAttr = this._waiAria.quickInfoButtonAttrString(this.locale.labels[buttons[i]]);\n\t\t\t\thtml += `<div ${ariaAttr} class=\"dhx_qi_big_icon ${buttons[i]}\" title=\"${scheduler.locale.labels[buttons[i]]}\">\n\t\t\t\t<div class='dhx_menu_icon ${buttons[i]}'></div><div>${scheduler.locale.labels[buttons[i]]}</div></div>`;\n\t\t\t}\n\t\t// }\n\t\thtml += \"</div>\";\n\n\t\tqi.innerHTML = html;\n\t\tscheduler.event(qi, \"click\", function(ev){\n\t\t\tscheduler._qi_button_click(ev.target || ev.srcElement);\n\t\t});\n\t\tif (scheduler.config.quick_info_detached){\n\t\t\tscheduler._detachDomEvent(scheduler._els[\"dhx_cal_data\"][0], \"scroll\", scheduler._quick_info_onscroll_handler);\n\t\t\tscheduler.event(scheduler._els[\"dhx_cal_data\"][0], \"scroll\", scheduler._quick_info_onscroll_handler);\n\t\t}\n\t}\n\n\treturn this._quick_info_box;\n};\n\nscheduler._qi_button_click = function(node){\n\tvar box = scheduler._quick_info_box;\n\tif (!node || node == box) return;\n\n\tif(node.closest(\".dhx_cal_qi_close_btn\")){\n\t\tscheduler.hideQuickInfo();\n\t\treturn;\n\t}\n\n\tvar mask = scheduler._getClassName(node);\n\tif (mask.indexOf(\"_icon\")!=-1){\n\t\tvar id = scheduler._quick_info_box_id;\n\t\tscheduler._click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\n\t} else\n\t\tscheduler._qi_button_click(node.parentNode);\n};\n\nfunction getPositionInsideScheduler(element){\n\tlet left = 0;\n\tlet top = 0;\n\n\tlet node = element;\n\twhile (node && node != scheduler._obj){\n\t\tleft += node.offsetLeft;\n\t\ttop += node.offsetTop-node.scrollTop;\n\t\tnode = node.offsetParent;\n\t}\n\tif(node){\n\t\tlet dx = (left + element.offsetWidth/2) > (scheduler._x/2) ? 1 : 0;\n\t\tlet dy = (top + element.offsetHeight/2) > (scheduler._y/2) ? 1 : 0;\n\n\t\treturn { left:left, top:top, dx:dx, dy:dy,\n\t\t\twidth:element.offsetWidth, height:element.offsetHeight };\n\t}\n\treturn 0;\n}\n\nscheduler._get_event_counter_part = function(id){\n\tvar domEv = scheduler.getRenderedEvent(id);\n\treturn getPositionInsideScheduler(domEv);\n};\n\nscheduler._fill_quick_data  = function(id){\n\tvar ev = scheduler.getEvent(id);\n\tvar qi = scheduler._quick_info_box;\n\n\tscheduler._quick_info_box_id = id;\n\n//title content\n\n\tvar header = {\n\t\tcontent: scheduler.templates.quick_info_title(ev.start_date, ev.end_date, ev),\n\t\tdate: scheduler.templates.quick_info_date(ev.start_date, ev.end_date, ev)\n\t};\n\tvar titleContent = qi.querySelector(\".dhx_cal_qi_tcontent\");\n\ttitleContent.innerHTML = `<span>${header.content}</span>`;\n\tvar titleDate = qi.querySelector(\".dhx_cal_qi_tdate\");\n\ttitleDate.innerHTML = header.date;\n\n\tscheduler._waiAria.quickInfoHeader(qi, [header.content, header.date].join(\" \"));\n\n//main content\n\tvar main = qi.querySelector(\".dhx_cal_qi_content\");\n\tconst mainContent = scheduler.templates.quick_info_content(ev.start_date, ev.end_date, ev);\n\tif(mainContent){\n\t\tmain.classList.remove(\"dhx_hidden\");\n\t\tmain.innerHTML = mainContent;\n\t}else{\n\t\tmain.classList.add(\"dhx_hidden\");\n\t}\n};\n\n\n}","export default function(scheduler){\n\t\nscheduler.attachEvent(\"onTemplatesReady\", function() {\n\tvar originalRecurringSetValue;\n\tif (scheduler.form_blocks.recurring) {\n\t\toriginalRecurringSetValue = scheduler.form_blocks.recurring.set_value;\n\t}\n\tvar original_left_buttons = scheduler.config.buttons_left.slice();\n\tvar original_right_buttons = scheduler.config.buttons_right.slice();\n\n\tscheduler.attachEvent(\"onBeforeLightbox\", function(id) {\n\t\tif (this.config.readonly_form || this.getEvent(id).readonly) {\n\t\t\tthis.config.readonly_active = true;\n\t\t}\n\t\telse {\n\t\t\tthis.config.readonly_active = false;\n\t\t\tscheduler.config.buttons_left = original_left_buttons.slice();\n\t\t\tscheduler.config.buttons_right = original_right_buttons.slice();\n\t\n\t\t\t// initial value\n\t\t\tif(scheduler.form_blocks.recurring) {\n\t\t\t\tscheduler.form_blocks.recurring.set_value = originalRecurringSetValue;\n\t\t\t}\n\t\t}\n\n\t\tif (this.config.readonly_active) {\n\t\t\tvar forbidden_buttons = [\"dhx_delete_btn\", \"dhx_save_btn\"];\n\t\t\tvar button_arrays = [scheduler.config.buttons_left, scheduler.config.buttons_right];\n\t\t\tfor (var i = 0; i < forbidden_buttons.length; i++) {\n\t\t\t\tvar forbidden_button = forbidden_buttons[i];\n\t\t\t\tfor (var k = 0; k < button_arrays.length; k++) {\n\t\t\t\t\tvar button_array = button_arrays[k];\n\t\t\t\t\tvar index = -1;\n\t\t\t\t\tfor (var p = 0; p < button_array.length; p++) {\n\t\t\t\t\t\tif (button_array[p] == forbidden_button) {\n\t\t\t\t\t\t\tindex = p;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (index != -1) {\n\t\t\t\t\t\tbutton_array.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.resetLightbox();\n\n\t\treturn true;\n\t});\n\n\tfunction txt_replace(tag, d, n, text) {\n\t\tvar txts = d.getElementsByTagName(tag);\n\t\tvar txtt = n.getElementsByTagName(tag);\n\t\tfor (var i = txtt.length - 1; i >= 0; i--) {\n\t\t\tvar n = txtt[i];\n\t\t\tif (!text){\n\t\t\t\tn.disabled = true;\n\t\t\t\t//radio and checkboxes loses state after .cloneNode in IE\n\t\t\t\tif(d.checked)\n\t\t\t\t\tn.checked = true;\n\t\t\t}else {\n\t\t\t\tvar t = document.createElement(\"span\");\n\t\t\t\tt.className = \"dhx_text_disabled\";\n\t\t\t\tt.innerHTML = text(txts[i]);\n\t\t\t\tn.parentNode.insertBefore(t, n);\n\t\t\t\tn.parentNode.removeChild(n);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar old = scheduler._fill_lightbox;\n\tscheduler._fill_lightbox = function() {\n\n\t\tvar lb = this.getLightbox();\n\t\tif (this.config.readonly_active) {\n\t\t\tlb.style.visibility = 'hidden';\n\t\t\t// lightbox should have actual sizes before rendering controls\n\t\t\t// currently only matters for dhtmlxCombo\n\t\t\tlb.style.display = 'block';\n\t\t}\n\t\tvar res = old.apply(this, arguments);\n\t\tif (this.config.readonly_active) {\n\t\t\t//reset visibility and display\n\t\t\tlb.style.visibility = '';\n\t\t\tlb.style.display = 'none';\n\t\t}\n\n\t\tif (this.config.readonly_active) {\n\n\t\t\tvar originalForm = this.getLightbox();\n\t\t\tvar readonlyForm = this._lightbox_r = originalForm.cloneNode(true);\n\t\t\treadonlyForm.id = scheduler.uid();\n\t\t\treadonlyForm.className += \" dhx_cal_light_readonly\";\n\t\t\ttxt_replace(\"textarea\", originalForm, readonlyForm, function(a) {\n\t\t\t\treturn a.value;\n\t\t\t});\n\t\t\ttxt_replace(\"input\", originalForm, readonlyForm, false);\n\t\t\ttxt_replace(\"select\", originalForm, readonlyForm, function(a) {\n\t\t\t\tif(!a.options.length) return \"\";\n\t\t\t\treturn a.options[Math.max((a.selectedIndex || 0), 0)].text;\n\t\t\t});\n\n\t\t\toriginalForm.parentNode.insertBefore(readonlyForm, originalForm);\n\n\t\t\tthis.showCover(readonlyForm);\n\t\t\tif (scheduler._lightbox)\n\t\t\t\tscheduler._lightbox.parentNode.removeChild(scheduler._lightbox);\n\t\t\tthis._lightbox = readonlyForm;\n\n\t\t\tif (scheduler.config.drag_lightbox)\n\t\t\t\tscheduler.event(readonlyForm.firstChild, \"mousedown\", scheduler._ready_to_dnd);\n\t\t\t\t\n\t\t\tscheduler._init_lightbox_events();\n\t\t\tthis.setLightboxSize();\n\t\t}\n\t\treturn res;\n\t};\n\n\tvar hold = scheduler.hide_lightbox;\n\tscheduler.hide_lightbox = function() {\n\t\tif (this._lightbox_r) {\n\t\t\tthis._lightbox_r.parentNode.removeChild(this._lightbox_r);\n\t\t\tthis._lightbox_r = this._lightbox = null;\n\t\t}\n\n\t\treturn hold.apply(this, arguments);\n\t};\n});\n\n\n}","import { RRule, rrulestr } from 'rrule';\n\nexport default function (scheduler) {\n\n\tfunction clearMilliseconds(date) {\n\t\treturn new Date(\n\t\t\tdate.getFullYear(),\n\t\t\tdate.getMonth(),\n\t\t\tdate.getDate(),\n\t\t\tdate.getHours(),\n\t\t\tdate.getMinutes(),\n\t\t\tdate.getSeconds(),\n\t\t\t0\n\t\t);\n\t}\n\n\tfunction isDeletedOccurrence(event) {\n\t\treturn !!event.deleted;\n\t}\n\n\tfunction isSeries(event) {\n\t\treturn !!event.rrule && !event.recurring_event_id;\n\t}\n\n\tfunction clearRecurringProperties(event) {\n\t\tevent.rrule = \"\";\n\t\tevent.original_start = null;\n\t\tevent.recurring_event_id = null;\n\t\tevent.duration = null;\n\t\tevent.deleted = null;\n\t}\n\n\tfunction createException(ev) {\n\t\tlet id = ev.id.split(\"#\");\n\n\t\tlet nid = scheduler.uid();\n\t\tscheduler._not_render = true;\n\t\tlet nev = scheduler._copy_event(ev);\n\t\tnev.id = nid;\n\t\tnev.recurring_event_id = id[0];\n\n\t\tlet timestamp = id[1];\n\n\t\tnev.original_start = new Date(Number(timestamp));\n\n\t\tscheduler._add_rec_marker(nev, timestamp);\n\t\tscheduler.addEvent(nev);\n\t\tscheduler._not_render = false;\n\t}\n\n\tfunction toUTCDate(date){\n\t\treturn new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(),date.getSeconds()));\n\t}\n\n\tfunction setUTCPartsToDate(d) {\n\t\treturn new Date(\n\t\t\td.getUTCFullYear(),\n\t\t\td.getUTCMonth(),\n\t\t\td.getUTCDate(),\n\t\t\td.getUTCHours(),\n\t\t\td.getUTCMinutes(),\n\t\t\td.getUTCSeconds()\n\t\t);\n\t}\n\n\tfunction updateFollowingEventsRRULE(ev){\n\t\tif(ev.rrule.includes(\";UNTIL=\")){\n\t\t\tev.rrule = ev.rrule.split(\";UNTIL=\")[0];\n\t\t}\n\t\tlet parsedRRule = rrulestr(`RRULE:${ev.rrule};UNTIL=${toIcalString(ev._end_date || ev.end_date)}`, { dtstart: ev.start_date });\n\t\tlet newRRULE = new RRule(parsedRRule.origOptions).toString().replace(\"RRULE:\", \"\");\n\t\tnewRRULE = newRRULE.split(\"\\n\")[1];\n\t\tev.rrule = newRRULE;\n\t}\n\t// need to remove BYDAY from rrule to avoid incorrect checkboxes in lightbox\n\tfunction updateFollowingWithWEEKLY(id, ev){\n\t\tif(!ev){\n\t\t\tev = scheduler.getEvent(id);\n\t\t}\n\t\tlet rruleStringparts = ev.rrule.split(\";\");\n\t\tlet updatedRRULE = [];\n\t\tfor (let i = 0; i < rruleStringparts.length; i++) {\n\t\t\tlet splited = rruleStringparts[i].split(\"=\");\n\t\t\tlet code = splited[0];\n\t\t\tlet name = splited[1];\n\t\t\tif (code === \"BYDAY\") {\n\t\t\t\t// case when rrule WEEKLY;BYDAY with one specified day\n\t\t\t\tif(!(ev.rrule.includes(\"WEEKLY\") && name.length > 3)){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tupdatedRRULE.push(code);\n\t\t\tupdatedRRULE.push(\"=\");\n\t\t\tupdatedRRULE.push(name);\n\t\t\tupdatedRRULE.push(\";\");\n\t\t}\n\t\tupdatedRRULE.pop(); // delete last ;\n\t\tev.rrule = updatedRRULE.join(\"\");\n\t}\n\n\tscheduler._isFollowing = function(id){\n\t\tlet ev = scheduler.getEvent(id);\n\t\treturn !!(ev && ev._thisAndFollowing);\n\t};\n\n\tscheduler._isFirstOccurrence = function(ev){\n\t\t// check for first copy dummy\n\t\tif(scheduler._is_virtual_event(ev.id)){\n\t\t\tlet pid = ev.id.split(\"#\")[0];\n\t\t\tlet recEvent = scheduler.getEvent(pid);\n\t\t\treturn !!(recEvent.start_date.valueOf() === ev.start_date.valueOf());\n\t\t}\n\t};\n\n\tscheduler._isExceptionFirstOccurrence = function(ev){\n\t\t// check for first exception \n\t\tif(scheduler._is_modified_occurrence(ev)){\n\t\t\tlet pid = ev.recurring_event_id;\n\t\t\tlet recEvent = scheduler.getEvent(pid);\n\t\t\treturn !!(ev.original_start && ev.original_start.valueOf() && ev.original_start.valueOf() === recEvent.start_date.valueOf());\n\t\t}\n\t};\n\n\tscheduler._rec_temp = [];\n\tscheduler._rec_markers_pull = {};\n\tscheduler._rec_markers = {};\n\tscheduler._add_rec_marker = function (ev, time) {\n\t\tev._pid_time = time;\n\t\tthis._rec_markers[ev.id] = ev;\n\t\tif (!this._rec_markers_pull[ev.event_pid]) this._rec_markers_pull[ev.event_pid] = {};\n\t\tthis._rec_markers_pull[ev.event_pid][time] = ev;\n\t};\n\tscheduler._get_rec_marker = function (time, id) {\n\t\tlet ch = this._rec_markers_pull[id];\n\t\tif (ch) return ch[time];\n\t\treturn null;\n\t};\n\tscheduler._get_rec_markers = function (id) {\n\t\treturn (this._rec_markers_pull[id] || []);\n\t};\n\n\t(function () {\n\t\tvar old_add_event = scheduler.addEvent;\n\t\tscheduler.addEvent = function (start_date, end_date, text, id, extra_data) {\n\t\t\tvar ev_id = old_add_event.apply(this, arguments);\n\n\t\t\tif (ev_id && scheduler.getEvent(ev_id)) {\n\t\t\t\tvar ev = scheduler.getEvent(ev_id);\n\n\t\t\t\tif (ev.start_date) {\n\t\t\t\t\tev.start_date = clearMilliseconds(ev.start_date);\n\t\t\t\t}\n\t\t\t\tif (ev.end_date) {\n\t\t\t\t\tev.end_date = clearMilliseconds(ev.end_date);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ev_id;\n\t\t};\n\t})();\n\n\tscheduler.attachEvent(\"onEventLoading\", function (event) {\n\n\t\tif (event.original_start && !event.original_start.getFullYear) {\n\t\t\tevent.original_start = scheduler.templates.parse_date(event.original_start);\n\t\t}\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onEventIdChange\", function (id, new_id) {\n\t\tif (this._ignore_call) return;\n\t\tthis._ignore_call = true;\n\n\t\tif (scheduler._rec_markers[id]) {\n\t\t\t//important for for correct work of scheduler.getEvents(from, to) and collision detection\n\t\t\tscheduler._rec_markers[new_id] = scheduler._rec_markers[id];\n\t\t\tdelete scheduler._rec_markers[id];\n\t\t}\n\n\t\tif (scheduler._rec_markers_pull[id]) {\n\t\t\tscheduler._rec_markers_pull[new_id] = scheduler._rec_markers_pull[id];\n\t\t\tdelete scheduler._rec_markers_pull[id];\n\t\t}\n\n\t\tfor (var i = 0; i < this._rec_temp.length; i++) {\n\t\t\tvar tev = this._rec_temp[i];\n\t\t\tif (this._is_virtual_event(tev.id) && tev.id.split(\"#\")[0] == id) {\n\t\t\t\ttev.recurring_event_id = new_id;\n\t\t\t\tthis.changeEventId(tev.id, new_id + \"#\" + tev.id.split(\"#\")[1]);\n\t\t\t}\n\t\t}\n\n\t\tfor (var i in this._rec_markers) {\n\t\t\tvar tev = this._rec_markers[i];\n\t\t\tif (tev.recurring_event_id == id) {\n\t\t\t\ttev.recurring_event_id = new_id;\n\t\t\t\ttev._pid_changed = true;\n\t\t\t}\n\t\t}\n\n\t\tvar el = scheduler._rec_markers[new_id];\n\t\tif (el && el._pid_changed) {\n\t\t\tdelete el._pid_changed;\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (scheduler.$destroyed) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tscheduler.callEvent(\"onEventChanged\", [new_id, scheduler.getEvent(new_id)]);\n\t\t\t}, 1);\n\t\t}\n\n\t\tdelete this._ignore_call;\n\t});\n\tfunction setPropsForFirstOccurrence(ev, occurrence){\n\t\tev._end_date = ev.end_date;\n\t\tif (scheduler._isExceptionFirstOccurrence(occurrence)){\n\t\t\tev.start_date = occurrence.start_date;\n\t\t\tev.end_date = new Date(occurrence.start_date.valueOf() + ev.duration * 1000);\n\t\t\tev._start_date = occurrence.original_start;\n\t\t\tev._modified = true;\n\t\t} else {\n\t\t\tev.end_date = new Date(occurrence.start_date.valueOf() + ev.duration * 1000);\n\t\t\tev.start_date = occurrence.start_date;\n\t\t\tev._firstOccurrence = true;\n\t\t}\n\t\tev._thisAndFollowing = occurrence.id;\n\t}\n\n\tfunction setPropsForStorageEvent(index, data, ev, tempEvent) {\n\t\t//  index based on whether it's an exception\n\t\tconst targetIndex = ev._modified ? tempEvent.id : index;\n\n\t\tscheduler._events[targetIndex] = {\n\t\t\t...tempEvent,\n\t\t\ttext: data.text,\n\t\t\tduration: data.duration,\n\t\t\tstart_date: data.start_date,\n\t\t\trrule: data.rrule,\n\t\t\tend_date: tempEvent._end_date,\n\t\t\t_start_date: tempEvent.start_date,\n\t\t\t_thisAndFollowing: null,\n\t\t\t_end_date: null\n\t\t};\n\t\n\t\t// If it's an exception, delete the it from storage\n\t\tif (ev._modified) {\n\t\t\tdelete scheduler._events[index];\n\t\t}\n\t\n\t\tscheduler.callEvent(\"onEventChanged\", [scheduler._events[targetIndex].id, scheduler._events[targetIndex]]);\n\t}\n\n\tfunction deleteExceptionFromStorage(exception) {\n\t\tfor (const i in scheduler._events) {\n\t\t\tlet tev = scheduler._events[i];\n\t\t\tif(tev.id == exception.id){\n\t\t\t\tdelete scheduler._events[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction updateTextEvents(id, data){\n\t\tfor (let i in scheduler._events) {\n\t\t\tlet tev = scheduler._events[i];\n\t\t\tif (tev.recurring_event_id == id || (scheduler._is_virtual_event(tev.id) && tev.id.split(\"#\")[0] == id)) {\n\t\t\t\ttev.text = data.text;\n\t\t\t\tscheduler.updateEvent(tev.id);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction deleteEventFromSeries(idTimestamp, ev) {\n\t\tlet id = idTimestamp;\n\t\tlet originalStartTimestamp = new Date(ev.original_start).valueOf(); // GS-2643: in case if an exception has already came from backend\n\t\tidTimestamp = String(id).split(\"#\") || ev._pid_time || originalStartTimestamp; // id can be number\n\t\tlet nid = scheduler.uid();\n\t\tlet tid = (idTimestamp[1]) ? idTimestamp[1] : (ev._pid_time || originalStartTimestamp);\n\t\tlet nev = scheduler._copy_event(ev);\n\t\tnev.id = nid;\n\t\tnev.recurring_event_id = ev.recurring_event_id || idTimestamp[0];\n\t\tnev.original_start = new Date(Number(tid));\n\t\tnev.deleted = true;\n\t\tscheduler.addEvent(nev);\n\t}\n\n\tscheduler.attachEvent(\"onConfirmedBeforeEventDelete\", function (id) {\n\t\tvar ev = this.getEvent(id);\n\t\tif (this._is_virtual_event(id) || (this._is_modified_occurrence(ev) && !isDeletedOccurrence(ev))) {\n\t\t\tdeleteEventFromSeries(id, ev);\n\t\t} else {\n\t\t\tif (isSeries(ev) && this._lightbox_id)\n\t\t\t\tthis._roll_back_dates(ev);\n\n\t\t\tvar sub = this._get_rec_markers(id);\n\t\t\tfor (var i in sub) {\n\t\t\t\tif (sub.hasOwnProperty(i)) {\n\t\t\t\t\tid = sub[i].id;\n\t\t\t\t\tif (this.getEvent(id))\n\t\t\t\t\t\tthis.deleteEvent(id, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onEventDeleted\", function (id, ev) {\n\t\tif (!this._is_virtual_event(id) && this._is_modified_occurrence(ev)) {\n\t\t\tif (!scheduler._events[id]) {\n\t\t\t\tev.deleted = true;\n\t\t\t\tthis.setEvent(id, ev);\n\t\t\t\tscheduler.render();\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction removeTempDraggedEvent(){\n\t\tfor (const i in scheduler._events) {\n\t\t\tif(i === \"$dnd_recurring_placeholder\"){\n\t\t\t\tdelete scheduler._events[i];\n\t\t\t}\n\t\t}\n\t\tscheduler.render();\n\t}\n\n\tscheduler.attachEvent(\"onBeforeEventChanged\", function(ev, e, is_new, original){\n\t\tif(!is_new && ev && (scheduler._is_virtual_event(ev.id) || scheduler._is_modified_occurrence(ev))){\n\t\t\tif (original.start_date.getDate() !== ev.start_date.getDate()){\n\t\t\t\tev._beforeEventChangedFlag = \"edit\";\n\t\t\t} else {\n\t\t\t\tev._beforeEventChangedFlag = \"ask\";\n\t\t\t}\n\t\t\t// check collision before create\n\t\t\tif (!scheduler.config.collision_limit || scheduler.checkCollision(ev)) {\n\t\t\t\tscheduler._events[\"$dnd_recurring_placeholder\"] = scheduler._lame_clone(ev); // adding temp event to the event store\n\t\t\t\tscheduler._showRequiredModalBox(ev.id, ev._beforeEventChangedFlag);\n\t\t\t\treturn false;\n\t\t\t}\t\n\t\t}\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onEventChanged\", function (id, event) {\n\t\tif (this._loading) return true;\n\n\t\tlet ev = this.getEvent(id);\n\t\tif (this._is_virtual_event(id)) {\n\t\t\tcreateException(ev);\n\n\t\t} else {\n\t\t\tif (ev.start_date) {\n\t\t\t\tev.start_date = clearMilliseconds(ev.start_date);\n\t\t\t}\n\t\t\tif (ev.end_date) {\n\t\t\t\tev.end_date = clearMilliseconds(ev.end_date);\n\t\t\t}\n\n\t\t\tif (isSeries(ev) && this._lightbox_id) {\n\t\t\t\tif(ev._removeFollowing || this._isFollowing(id)){\n\t\t\t\t\tev._removeFollowing = null;\n\t\t\t\t} else {\n\t\t\t\t\tthis._roll_back_dates(ev);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar sub = this._get_rec_markers(id);\n\t\t\tfor (var i in sub) {\n\t\t\t\tif (sub.hasOwnProperty(i)) {\n\t\t\t\t\tdelete this._rec_markers[sub[i].id];\n\t\t\t\t\tthis.deleteEvent(sub[i].id, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdelete this._rec_markers_pull[id];\n\n\t\t\t// it's possible that after editing event is no longer exists, in such case we need to remove _select_id flag\n\t\t\tvar isEventFound = false;\n\t\t\tfor (var k = 0; k < this._rendered.length; k++) {\n\t\t\t\tif (this._rendered[k].getAttribute(this.config.event_attribute) == id)\n\t\t\t\t\tisEventFound = true;\n\t\t\t}\n\t\t\tif (!isEventFound)\n\t\t\t\tthis._select_id = null;\n\t\t}\n\t\tremoveTempDraggedEvent();\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventAdded\", function (id) {\n\t\tif (!this._loading) {\n\t\t\tvar ev = this.getEvent(id);\n\t\t\tif (isSeries(ev)) {\n\t\t\t\tthis._roll_back_dates(ev);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventSave\", function (id, data, is_new_event) {\n\t\tlet ev = this.getEvent(id);\n\t\tlet tempEvent = scheduler._lame_clone(ev); // copy of the event before it have been cut\n\t\tlet tempDataRRULE = data.rrule; // copy for following events\n\t\tif (ev && isSeries(ev)){\n\t\t\t//GS-2578: FollowingEvents\n\t\t\tif(!is_new_event && (this._isFollowing(id))){\n\t\t\t\t// removing FollowingEvents\n\t\t\t\tif (ev._removeFollowing) {\n\t\t\t\t\tlet occurrence = scheduler.getEvent(ev._thisAndFollowing);\n\t\t\t\t\tif (occurrence && (ev._firstOccurrence || ev._modified)) {\n\t\t\t\t\t\tscheduler.hideLightbox();\n\t\t\t\t\t\tscheduler.deleteEvent(ev.id);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// cut off main rec event\n\t\t\t\t\t\tev.end_date = new Date(ev.start_date.valueOf() - 1000);\n\t\t\t\t\t\tev._end_date = ev._shorten_end_date;\n\t\t\t\t\t\tev.start_date = ev._start_date;\n\t\t\t\t\t\tev._shorten = true;\n\t\t\t\t\t\tupdateFollowingEventsRRULE(ev);\n\t\t\t\t\t\tscheduler.callEvent(\"onEventChanged\", [ev.id, ev]);\n\t\t\t\t\t\t// need to delete exceptions\n\t\t\t\t\t\tlet occurrence = scheduler.getEvent(ev._thisAndFollowing);\n\t\t\t\t\t\tif (occurrence) {\n\t\t\t\t\t\t\tfor (const i in scheduler._events) {\n\t\t\t\t\t\t\t\tlet tev = scheduler._events[i];\n\t\t\t\t\t\t\t\tif (tev.recurring_event_id === id) {\n\t\t\t\t\t\t\t\t\tif (tev.start_date.valueOf() > tempEvent.start_date.valueOf()) {\n\t\t\t\t\t\t\t\t\t\tdeleteEventFromSeries(tev.id, tev);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tscheduler.hideLightbox();\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tlet occurrence = scheduler.getEvent(ev._thisAndFollowing);\n\t\t\t\t\t// case first occurence is a copy dummy\n\t\t\t\t\tif(occurrence && ev._firstOccurrence){\n\t\t\t\t\t\tfor (const i in scheduler._events) {\n\t\t\t\t\t\t\tlet tev = scheduler._events[i];\n\t\t\t\t\t\t\tif (tev.id == ev.id) {\n\t\t\t\t\t\t\t\tsetPropsForStorageEvent(i, data, ev, tempEvent);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t// case first occurrence is a exception\n\t\t\t\t\t} else if (occurrence && ev._modified){\n\t\t\t\t\t\tfor (const i in scheduler._events) {\n\t\t\t\t\t\t\tlet tev = scheduler._events[i];\n\t\t\t\t\t\t\tif(tev.recurring_event_id == id && tev.id == tempEvent._thisAndFollowing){\n\t\t\t\t\t\t\t\tsetPropsForStorageEvent(i, data, ev, tempEvent);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// case for exception\n\t\t\t\t\t\tif (scheduler._is_modified_occurrence(occurrence)){\n\t\t\t\t\t\t\tdeleteExceptionFromStorage(occurrence);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// cut off main rec event\n\t\t\t\t\t\tev.end_date = ev._shorten_end_date;\n\t\t\t\t\t\tev._end_date = ev._shorten_end_date;\n\t\t\t\t\t\tev.start_date = ev._start_date;\n\t\t\t\t\t\tev._shorten = true;\n\t\t\t\t\t\tupdateFollowingEventsRRULE(ev);\n\t\t\t\t\t\tscheduler.callEvent(\"onEventChanged\", [ev.id, ev]);\n\t\t\t\t\t\t// creating FollowingEvents\n\t\t\t\t\t\tlet followingEv = {...tempEvent};\n\t\t\t\t\t\tfollowingEv.text = data.text;\n\t\t\t\t\t\tfollowingEv.duration = data.duration;\n\t\t\t\t\t\tfollowingEv.rrule = tempDataRRULE;\n\t\t\t\t\t\tfollowingEv._start_date = null;\n\t\t\t\t\t\tfollowingEv.id = scheduler.uid();\n\t\t\t\t\t\tscheduler.addEvent(followingEv.start_date, followingEv.end_date, followingEv.text, followingEv.id, followingEv);\n\t\t\t\t\t}\n\t\t\t\t\t// if following events updates only text, we update text in all copy dummies and exceptions\n\t\t\t\t\tif (!is_new_event){\n\t\t\t\t\t\tupdateTextEvents(id, data);\n\t\t\t\t\t}\n\t\t\t\t\tscheduler.hideLightbox();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// if rec event updates only text, we update text in all copy dummies and exceptions\n\t\tif (!is_new_event){\n\t\t\tupdateTextEvents(id, data);\n\t\t}\n\t\t// case for dragged occurence that is temp event\n\t\tif (tempEvent._ocr && tempEvent._beforeEventChangedFlag){\n\t\t\tev.start_date = tempEvent.start_date; \n\t\t\tev.end_date = tempEvent.end_date; \n\t\t\tev._start_date = tempEvent._start_date;\n\t\t\tev._end_date = tempEvent._end_date;\n\t\t\tscheduler.updateEvent(ev.id);\n\t\t\treturn true;\n\t\t}\n\t\t\tthis._select_id = null;\n\t\t\tremoveTempDraggedEvent();\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventCreated\", function (id) {\n\t\tvar ev = this.getEvent(id);\n\t\tif (!isSeries(ev)) {\n\t\t\tclearRecurringProperties(ev);\n\t\t}\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventCancel\", function (id) {\n\t\tvar ev = this.getEvent(id);\n\t\tif (isSeries(ev)) {\n\t\t\tthis._roll_back_dates(ev);\n\t\t\t// a bit expensive, but we need to be sure that event re-rendered, because view can be corrupted by resize , during edit process\n\t\t\tthis.render_view_data();\n\t\t}\n        removeTempDraggedEvent();\n\t});\n\tscheduler._roll_back_dates = function (ev) {\n\t\t//// !!!!! calc temp properties\n\t\tif (ev.start_date) {\n\t\t\tev.start_date = clearMilliseconds(ev.start_date);\n\t\t}\n\t\tif (ev.end_date) {\n\t\t\tev.end_date = clearMilliseconds(ev.end_date);\n\t\t}\n\t\tif (ev._end_date) {\n\t\t\tif (!ev._shorten){\n\t\t\t\tev.duration = Math.round((ev.end_date.valueOf() - ev.start_date.valueOf()) / 1000);\n\t\t\t}\n\t\t\tev.end_date = ev._end_date;\n\t\t}\n\t\tif (ev._start_date) {\n\t\t\tev.start_date.setMonth(0);\n\t\t\tev.start_date.setDate(ev._start_date.getDate());\n\t\t\tev.start_date.setMonth(ev._start_date.getMonth());\n\t\t\tev.start_date.setFullYear(ev._start_date.getFullYear());\n\t\t\tif (this._isFollowing(ev.id)){\n\t\t\t\tev.start_date.setHours(ev._start_date.getHours());\n\t\t\t\tev.start_date.setMinutes(ev._start_date.getMinutes());\n\t\t\t\tev.start_date.setSeconds(ev._start_date.getSeconds());\n\t\t\t}\n\t\t}\n\t\tev._thisAndFollowing = null;\n\t\tif(ev._shorten_end_date)\n\t\t\tev._shorten_end_date = null;\n\t\tif(ev._removeFollowing)\n\t\t\tev._removeFollowing = null;\n\t\tif(ev._firstOccurrence)\n\t\t\tev._firstOccurrence = null;\n\t\tif(ev._modified)\n\t\t\tev._modified = null;\n\t};\n\n\tscheduler._is_virtual_event = function (id) {\n\t\treturn id.toString().indexOf(\"#\") != -1;\n\t};\n\tscheduler._is_modified_occurrence = function (ev) {\n\t\treturn (ev.recurring_event_id && ev.recurring_event_id != \"0\");\n\t};\n\n\tscheduler.showLightbox_rec = scheduler.showLightbox;\n\tscheduler.showLightbox = function (id) {\n\t\tconst locale = this.locale;\n\t\tlet formSetting = scheduler.config.lightbox_recurring;\n\t\tlet ev = this.getEvent(id);\n\t\tlet pid = ev.recurring_event_id;\n\t\tlet isVirtual = this._is_virtual_event(id);\n\t\tif (isVirtual) {\n\t\t\tpid = id.split(\"#\")[0];\n\t\t}\n\n\t\tconst showRequiredLightbox = function (id, type) {\n\t\t\tconst occurrence = scheduler.getEvent(id);\n\t\t\tconst event = scheduler.getEvent(pid);\n\t\t\tconst view = scheduler.getView();\n\t\t\t// for timeline and units\n\t\t\tif (view && occurrence[view.y_property]){\n\t\t\t\tevent[view.y_property] = occurrence[view.y_property];\n\t\t\t}\n\t\t\tif (view && occurrence[view.property]){\n\t\t\t\tevent[view.property] = occurrence[view.property];\n\t\t\t}\n\n\t\t\tif (type === \"Occurrence\") {\n\t\t\t\treturn scheduler.showLightbox_rec(id);\n\t\t\t}\n\n\t\t\tif (type === \"Following\"){\n\t\t\t\t// case when  first occurrence is an exception\n\t\t\t\tif(scheduler._isExceptionFirstOccurrence(occurrence)){\n\t\t\t\t\tsetPropsForFirstOccurrence(event, occurrence);\n\t\t\t\t\treturn scheduler.showLightbox_rec(pid);\n\t\t\t\t}\n\t\t\t\t// for the first occurrence\n\t\t\t\tif (scheduler._isFirstOccurrence(occurrence)){\n\t\t\t\t\tsetPropsForFirstOccurrence(event, occurrence);\n\t\t\t\t\treturn scheduler.showLightbox_rec(pid);\n\t\t\t\t} else {\n\t\t\t\t\t// editing series\n\t\t\t\t\tevent._end_date = event.end_date;\n\t\t\t\t\tconst originalStart = occurrence.original_start || occurrence.start_date;\n\t\t\t\t\tevent._shorten_end_date = new Date(originalStart.valueOf() - 1000);\n\t\t\t\t\tevent.end_date = new Date(occurrence.start_date.valueOf() + event.duration * 1000);\n\t\t\t\t\tevent._start_date = event.start_date;\n\t\t\t\t\tevent.start_date = occurrence.start_date;\n\t\t\t\t\tevent._thisAndFollowing = occurrence.id;\n\n\t\t\t\t\t// to indicate that occurence was created by drag\n\t\t\t\t\tif(ev._beforeEventChangedFlag){\n\t\t\t\t\t\tevent._beforeEventChangedFlag = ev._beforeEventChangedFlag;\n\t\t\t\t\t\tevent._shorten_end_date = new Date(originalStart.valueOf() - 1000);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn scheduler.showLightbox_rec(pid);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (type === \"AllEvents\"){\n\t\t\t\t// for the first occurrence that is exception\n\t\t\t\tif(scheduler._isExceptionFirstOccurrence(occurrence)){\n\t\t\t\t\tsetPropsForFirstOccurrence(event, occurrence);\n\t\t\t\t\treturn scheduler.showLightbox_rec(pid);\n\t\t\t\t}\n\t\t\t\t// for the first occurrence GS-2710\n\t\t\t\tif (scheduler._isFirstOccurrence(occurrence)){\n\t\t\t\t\tsetPropsForFirstOccurrence(event, occurrence);\n\t\t\t\t\treturn scheduler.showLightbox_rec(pid);\n\t\t\t\t}\n\t\t\t\t// for n-part of series\n\t\t\t\tconst tempStart = new Date(event.start_date);\n\t\t\t\tevent._end_date = event.end_date;\n\t\t\t\tevent._start_date = tempStart;\n\t\t\t\tevent.start_date.setHours(occurrence.start_date.getHours());\n\t\t\t\tevent.start_date.setMinutes(occurrence.start_date.getMinutes());\n\t\t\t\tevent.start_date.setSeconds(occurrence.start_date.getSeconds());\n\t\t\t\tevent.end_date = new Date(event.start_date.valueOf() + event.duration * 1000);\n\t\t\t\tevent._thisAndFollowing = null;\n\t\t\t\treturn scheduler.showLightbox_rec(pid);\n\t\t\t}\n\t\t};\n\t\tif ((pid || pid * 1 === 0) && isSeries(ev)) {\n\t\t\t// direct API call on series id\n\t\t\treturn showRequiredLightbox(id, \"AllEvents\");\n\t\t}\n\n\t\tif (!pid || pid === '0' || ((!locale.labels.confirm_recurring || formSetting == 'instance') || (formSetting == 'series' && !isVirtual))) {\n\t\t\t// editing instance or non recurring event\n\t\t\treturn this.showLightbox_rec(id);\n\t\t}\n\n\t\tif (formSetting === 'ask') {\n\t\t\tconst locale = scheduler.locale;\n\t\t\tshowModalbox([\n\t\t\t\t{value: \"Occurrence\", label: locale.labels.button_edit_occurrence, checked: true,\n\t\t\t\t\tcallback: () => showRequiredLightbox(id, \"Occurrence\")},\n\t\t\t\t{value: \"Following\", label: locale.labels.button_edit_occurrence_and_following,\n\t\t\t\t\tcallback: () => showRequiredLightbox(id, \"Following\")},\n\t\t\t\t{value: \"AllEvents\", label: locale.labels.button_edit_series,\n\t\t\t\t\tcallback: () => showRequiredLightbox(id, \"AllEvents\")}\n\t\t\t]);\n\t\t}\n\t};\n\n\tfunction showModalbox(options, callback){\n\t\tconst locale = scheduler.locale;\n\t\tconst haveChecked = options.find(o => o.checked);\n\t\tif(!haveChecked){\n\t\t\toptions[0].checked = true;\n\t\t}\n\t\tconst callbacks = options.reduce((result, o) => {\n\t\t\tresult[o.value] = o.callback;\n\t\t\treturn result;\n\t\t}, {});\n\t\tscheduler.modalbox({\n\t\t\ttext: `<div class=\"dhx_edit_recurrence_options\">\n\t\t\t\t${options.map((option) => `<label class=\"dhx_styled_radio\">\n\t\t\t\t\t<input type=\"radio\" value=\"${option.value}\" name=\"option\" ${option.checked ? \"checked\" : \"\"}>\n\t\t\t\t\t${option.label}\n\t\t\t\t</label>`).join(\"\")}\n\t\t\t</div>`,\n\t\t\ttype: \"recurring_mode\",\n\t\t\ttitle: locale.labels.confirm_recurring,\n\t\t\twidth: \"auto\",\n\t\t\tposition: \"middle\",\n\t\t\tbuttons: [\n\t\t\t\t{label: locale.labels.message_ok, value:\"ok\", css:\"rec_ok\"},\n\t\t\t\t{label: locale.labels.message_cancel, value: \"cancel\"}\n\t\t\t],\n\t\t\tcallback: function (value, e) {\n\t\t\t\tif(callback){\n\t\t\t\t\tcallback(value, e);\n\t\t\t\t}\n\t\t\t\tif(value === \"cancel\"){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst box = e.target.closest(\".scheduler_modal_box\");\n\t\t\t\tconst checked = box.querySelector(\"input[type='radio']:checked\");\n\t\t\t\tlet selectedOption;\n\t\t\t\tif(checked){\n\t\t\t\t\tselectedOption = checked.value;\n\t\t\t\t}\n\t\t\t\tif(selectedOption){\n\t\t\t\t\tcallbacks[selectedOption]();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t});\n\t}\n\tscheduler._showRequiredModalBox = function(id, type) {\n\t\tlet buttons;\n\n\t\tconst locale = scheduler.locale;\n\t\tlet occurrence = scheduler.getEvent(id);\n\t\tlet pid = occurrence.recurring_event_id;\n\t\t\n\t\tlet isVirtual = scheduler._is_virtual_event(occurrence.id);\n\t\tif (isVirtual) {\n\t\t\tpid = occurrence.id.split(\"#\")[0];\n\t\t}\n\t\tlet event = scheduler.getEvent(pid);\n\t\tconst view = scheduler.getView();\n\t\tlet tempEvent = scheduler._lame_clone(event);\n\t\t// for timeline and units\n\t\tif (view && occurrence[view.y_property]){\n\t\t\ttempEvent[view.y_property] = occurrence[view.y_property];\n\t\t}\n\t\tif (view && occurrence[view.property]){\n\t\t\ttempEvent[view.property] = occurrence[view.property];\n\t\t}\n\t\t// for case with edit following events\n\t\tlet tempStartDate;\n\t\tlet tempEndDate;\n\t\tif (occurrence && occurrence._beforeEventChangedFlag){\n\t\t\ttempStartDate = occurrence.start_date;\n\t\t\ttempEndDate = occurrence.end_date;\n\t\t}\n\t\tconst handleOccurrence = function(occurrence){\n\t\t\tlet tempEvent = {...event, ...scheduler.getEvent(\"$dnd_recurring_placeholder\")};\n\t\t\tif (tempEndDate && tempStartDate) {\n\t\t\t\ttempEvent.start_date = tempStartDate;\n\t\t\t\ttempEvent.end_date = tempEndDate;\n\t\t\t\ttempEvent._beforeEventChangedFlag = occurrence._beforeEventChangedFlag;\n\t\t\t\ttempEvent._ocr = true;\n\t\t\t}\n\t\t\t// check collision before create\n\t\t\tif (!scheduler.config.collision_limit || scheduler.checkCollision(tempEvent)) {\n\t\t\t\tfor (const i in scheduler._events) {\n\t\t\t\t\tlet tev = scheduler._events[i];\n\t\t\t\t\tif(i === \"$dnd_recurring_placeholder\"){\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif(tev.id == tempEvent.id){\n\t\t\t\t\t\tscheduler._events[i] = {...tempEvent};\n\t\t\t\t\t\tscheduler.callEvent(\"onEventChanged\", [scheduler._events[i].id, scheduler._events[i]]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst handleFollowing = function(occurrence){\n\t\t\tlet initialOccurrence = scheduler._lame_clone(occurrence);\n\t\t\tif (tempEndDate && tempStartDate) {\n\t\t\t\toccurrence._start_date = occurrence.start_date;\n\t\t\t\toccurrence.start_date = tempStartDate;\n\t\t\t\toccurrence.end_date = tempEndDate;\n\t\t\t}\n\t\t\t// for the first occurrence\n\t\t\tif (scheduler._isFirstOccurrence(initialOccurrence) || scheduler._isExceptionFirstOccurrence(initialOccurrence)){\n\t\t\t\tif(scheduler._isExceptionFirstOccurrence(initialOccurrence)){\n\t\t\t\t\tdeleteExceptionFromStorage(initialOccurrence);\n\t\t\t\t}\n\t\t\t\ttempEvent._start_date = event.start_date;\n\t\t\t\ttempEvent.start_date = occurrence.start_date;\n\t\t\t\ttempEvent.duration = (+occurrence.end_date - +occurrence.start_date) / 1000;\n\t\t\t\ttempEvent._beforeEventChangedFlag = occurrence._beforeEventChangedFlag;\n\t\t\t\t// to avoid problem with weekly events\n\t\t\t\tif (tempEvent.rrule){\n\t\t\t\t\tupdateFollowingWithWEEKLY(tempEvent.id, tempEvent);\n\t\t\t\t}\n\t\t\t\t// check collision before create\n\t\t\t\tif (!scheduler.config.collision_limit || scheduler.checkCollision(tempEvent)) {\n\t\t\t\t\tfor (const i in scheduler._events) {\n\t\t\t\t\t\tlet tev = scheduler._events[i];\n\t\t\t\t\t\tif(tev.id == tempEvent.id){\n\t\t\t\t\t\t\tscheduler._events[i] = {...tempEvent};\n\t\t\t\t\t\t\tscheduler.callEvent(\"onEventChanged\", [scheduler._events[i].id, scheduler._events[i]]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// editing series\n\t\t\t\ttempEvent._end_date = event.end_date;\n\t\t\t\tconst originalStart = occurrence.original_start || scheduler.date.date_part(new Date(occurrence._start_date));\n\t\t\t\ttempEvent._shorten_end_date = new Date(originalStart.valueOf() - 1000);\n\t\t\t\ttempEvent.end_date = occurrence.end_date;\n\t\t\t\ttempEvent._start_date = event.start_date;\n\t\t\t\ttempEvent.start_date = occurrence.start_date;\n\t\t\t\ttempEvent._thisAndFollowing = occurrence.id;\n\t\t\t\t// to avoid problem with weekly events\n\t\t\t\tif (tempEvent.rrule){\n\t\t\t\t\tupdateFollowingWithWEEKLY(tempEvent.id, tempEvent);\n\t\t\t\t}\n\n\t\t\t\t// check collision before create\n\t\t\t\tlet tempEnd = tempEvent.end_date;\n\t\t\t\ttempEvent.end_date = tempEvent._end_date;\n\t\t\t\tif (!scheduler.config.collision_limit || scheduler.checkCollision(tempEvent)) {\n\t\t\t\t\ttempEvent.end_date = tempEnd;\n\t\t\t\t\tfor (const i in scheduler._events) {\n\t\t\t\t\t\tlet tev = scheduler._events[i];\n\t\t\t\t\t\tif(tev.id == tempEvent.id){\n\t\t\t\t\t\t\tscheduler._events[i] = {...tempEvent};\n\t\t\t\t\t\t\tscheduler.callEvent(\"onEventSave\", [scheduler._events[i].id, scheduler._events[i], scheduler._new_event]);\n\t\t\t\t\t\t\tscheduler.callEvent(\"onEventChanged\", [scheduler._events[i].id, scheduler._events[i]]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconst handleAllEvents = function(occurrence){\n\t\t\tlet initialOccurrence = scheduler._lame_clone(occurrence);\n\t\t\tif(scheduler._isExceptionFirstOccurrence(initialOccurrence)){\n\t\t\t\tdeleteExceptionFromStorage(initialOccurrence);\n\t\t\t}\n\t\t\tif (tempEndDate && tempStartDate) {\n\t\t\t\ttempEvent.start_date.setHours(tempStartDate.getHours());\n\t\t\t\ttempEvent.start_date.setMinutes(tempStartDate.getMinutes());\n\t\t\t\ttempEvent.start_date.setSeconds(tempStartDate.getSeconds());\n\t\t\t\ttempEvent.duration = (+tempEndDate - +tempStartDate) / 1000;\n\t\t\t}\n\t\t\ttempEvent._beforeEventChangedFlag = occurrence._beforeEventChangedFlag;\n\t\t\ttempEvent._thisAndFollowing = null;\n\t\t\t// check collision before create\n\t\t\tif (!scheduler.config.collision_limit || scheduler.checkCollision(tempEvent)) {\n\t\t\t\tfor (const i in scheduler._events) {\n\t\t\t\t\tlet tev = scheduler._events[i];\n\t\t\t\t\tif(tev.id == tempEvent.id){\n\t\t\t\t\t\tscheduler._events[i] = {...tempEvent};\n\t\t\t\t\t\tscheduler.callEvent(\"onEventChanged\", [scheduler._events[i].id, scheduler._events[i]]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\tconst btnAll = {value: \"AllEvents\", label: locale.labels.button_edit_series, callback: () => handleAllEvents(occurrence)};\n\t\tconst btnFollowing = {value: \"Following\", label: locale.labels.button_edit_occurrence_and_following, callback: () => handleFollowing(occurrence)};\n\t\tconst btnOccurrence = {value: \"Occurrence\", label: locale.labels.button_edit_occurrence, callback: () => handleOccurrence(occurrence), checked: true};\n\t\tif (type === 'ask') {\n\t\t\tbuttons = [\n\t\t\t\tbtnOccurrence,\n\t\t\t\tbtnFollowing,\n\t\t\t\tbtnAll\n\t\t\t];\n\t\t} else { \n\t\t\tbuttons = [\n\t\t\t\tbtnOccurrence,\n\t\t\t\tbtnFollowing\n\t\t\t];\n\t\t}\n\n\t\tshowModalbox(buttons, (result) => {\n\t\t\tif(result === \"cancel\"){\n\t\t\t\tremoveTempDraggedEvent(); \n\t\t\t}\n\t\t});\n\t};\n\n\tfunction groupExceptions() {\n\t\tconst exceptions = {};\n\t\tfor (const i in scheduler._events) {\n\t\t\tconst ev = scheduler._events[i];\n\t\t\tif (ev.recurring_event_id && ev.original_start) {\n\t\t\t\tif (!exceptions[ev.recurring_event_id]) {\n\t\t\t\t\texceptions[ev.recurring_event_id] = {};\n\t\t\t\t}\n\t\t\t\texceptions[ev.recurring_event_id][ev.original_start.valueOf()] = ev;\n\t\t\t}\n\t\t}\n\t\treturn exceptions;\n\t}\n\tfunction removeDraggedEventFromVisibleEvents(array) {\n\t\tconst result = {};\n\t\tarray.forEach(item => {\n\t\t\tconst existingItem = result[item.id];\n\t\t\t// removing the existed event without `_beforeEventChangedFlag` property\n\t\t\tif (!existingItem || (existingItem._beforeEventChangedFlag || item._beforeEventChangedFlag)) {\n\t\t\t\tresult[item.id] = item;\n\t\t\t}\n\t\t});\n\t\treturn Object.values(result);\n\t}\n\tscheduler.get_visible_events_rec = scheduler.get_visible_events;\n\tscheduler.get_visible_events = function (only_timed) {\n\t\tfor (var i = 0; i < this._rec_temp.length; i++)\n\t\t\tdelete this._events[this._rec_temp[i].id];\n\t\tthis._rec_temp = [];\n\n\t\tconst exceptions = groupExceptions();\n\t\tvar stack = this.get_visible_events_rec(only_timed);\n\t\tvar out = [];\n\t\tfor (var i = 0; i < stack.length; i++) {\n\t\t\tif (stack[i].deleted || stack[i].recurring_event_id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (isSeries(stack[i])) {\n\t\t\t\tthis.repeat_date(stack[i], out, undefined, undefined, undefined, undefined, exceptions);\n\t\t\t} else {\n\t\t\t\tout.push(stack[i]);\n\t\t\t}\n\t\t}\n\t\tlet result = removeDraggedEventFromVisibleEvents(out);\n\t\treturn result;\n\t};\n\n\t(function () {\n\t\tvar old = scheduler.isOneDayEvent;\n\t\tscheduler.isOneDayEvent = function (ev) {\n\t\t\tif (isSeries(ev)) return true;\n\t\t\treturn old.call(this, ev);\n\t\t};\n\t\tvar old_update_event = scheduler.updateEvent;\n\t\tscheduler.updateEvent = function (id) {\n\t\t\tvar ev = scheduler.getEvent(id);\n\n\t\t\tif (ev && isSeries(ev) && !this._is_virtual_event(id)) {\n\t\t\t\tscheduler.update_view();\n\t\t\t} else {\n\t\t\t\told_update_event.call(this, id);\n\t\t\t}\n\t\t};\n\t})();\n\n\tconst toIcalString = scheduler.date.date_to_str(\"%Y%m%dT%H%i%s\");\n\n\tscheduler.repeat_date = function (ev, stack, non_render, from, to, maxCount, exceptions) {\n\t\tif (!ev.rrule) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet seriesExceptions = exceptions ? exceptions[ev.id] : groupExceptions()[ev.id];\n\t\tif (!seriesExceptions) {\n\t\t\tseriesExceptions = {};\n\t\t}\n\n\t\t// GS-2596: from and to should be in UTC,\n\t\t// GS-2698,GS-2710: take into account the event that crosses scheduler._min_date\n\t\tfrom = toUTCDate(from || new Date(scheduler._min_date.valueOf() - 7 * 24 * 60 * 60 * 1000));\n\t\tto = toUTCDate(to ||new Date(scheduler._max_date.valueOf() - 1000));\n\n\t\tconst utcStart = toUTCDate(ev.start_date);\n\t\tlet parsedRRule;\n\t\tif (maxCount){\n\t\t\t// for getRecDates() method\n\t\t\tparsedRRule = rrulestr(`RRULE:${ev.rrule};UNTIL=${toIcalString(ev.end_date)};COUNT=${maxCount}`, { dtstart: utcStart });\n\t\t} else {\n\t\t\tparsedRRule = rrulestr(`RRULE:${ev.rrule};UNTIL=${toIcalString(ev.end_date)}`, { dtstart: utcStart });\n\t\t}\n\n\t\tconst repeatedDates = parsedRRule.between(from, to, true).map(date => {\n\t\t\tconst adjustedDate = setUTCPartsToDate(date);\n\t\t\tadjustedDate.setHours(ev.start_date.getHours());\n\t\t\tadjustedDate.setMinutes(ev.start_date.getMinutes());\n\t\t\tadjustedDate.setSeconds(ev.start_date.getSeconds());\n\t\t\treturn adjustedDate;\n\t\t});\n\t\tlet visibleCount = 0;\n\n\t\tconst eventDuration = ev.duration;\n\n\t\tfor (let i = 0; i < repeatedDates.length; i++) {\n\t\t\tif (maxCount && visibleCount >= maxCount) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst date = repeatedDates[i];\n\n\t\t\tlet exception = seriesExceptions[date.valueOf()];\n\t\t\tif (exception) {\n\t\t\t\t//skip deleted exception and the exception that not crosses scheduler._min_date, connected to GS-2698\n\t\t\t\t// GS-2741: skip exception if it is not in filter\n\t\t\t\tif (exception.deleted || exception.end_date.valueOf() < scheduler._min_date.valueOf() || !scheduler.filter_event(exception.id, exception)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\tvisibleCount++;\n\t\t\t\t\tstack.push(exception);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst copy = scheduler._copy_event(ev);\n\t\t\t\t//copy._timed = ev._timed;\n\t\t\t\tcopy.text = ev.text;\n\t\t\t\tcopy.start_date = date;\n\t\t\t\tcopy.id = ev.id + \"#\" + Math.ceil(date.valueOf());\n\t\t\t\tcopy.end_date = new Date(date.valueOf() + eventDuration * 1000);\n\t\t\t\tif(copy.end_date.valueOf() < scheduler._min_date.valueOf()){\n\t\t\t\t\tcontinue; //skip the event that not crosses scheduler._min_date, connected to GS-2698\n\t\t\t\t}\n\t\t\t\tcopy.end_date = scheduler._fix_daylight_saving_date(copy.start_date, copy.end_date, ev, date, copy.end_date);\n\t\t\t\tcopy._timed = scheduler.isOneDayEvent(copy);\n\n\t\t\t\tif (!copy._timed && !scheduler._table_view && !scheduler.config.multi_day) continue;\n\t\t\t\tstack.push(copy);\n\n\t\t\t\tif (!non_render) {\n\t\t\t\t\tscheduler._events[copy.id] = copy;\n\t\t\t\t\tscheduler._rec_temp.push(copy);\n\t\t\t\t}\n\t\t\t\tvisibleCount++;\n\t\t\t}\n\t\t}\n\t\t//GS-2534: case when exceptions have different dates\n\t\tif (seriesExceptions && repeatedDates.length == 0 ){\n\t\t\tfor (let a in seriesExceptions){\n\t\t\t\tlet exception = seriesExceptions[a];\n\t\t\t\tif (exception) {\n\t\t\t\t\t//skip deleted exception and the exception that not crosses scheduler._min_date, connected to GS-2698\n\t\t\t\t\t// GS-2741: skip exception if it is not in filter\n\t\t\t\t\tif (exception.deleted || exception.end_date.valueOf() < scheduler._min_date.valueOf() || !scheduler.filter_event(exception.id, exception)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (from && to && exception.start_date < to && exception.end_date > from) {\n\t\t\t\t\t\tstack.push(exception);\n\t\t\t\t\t}\t\t\t\t\n\t\t\t\t} \n\t\t\t}\n\t\t}\n\t};\n\n\tscheduler._fix_daylight_saving_date = function (start_date, end_date, ev, counter, default_date) {\n\t\tvar shift = start_date.getTimezoneOffset() - end_date.getTimezoneOffset();\n\t\tif (shift) {\n\t\t\tif (shift > 0) {\n\t\t\t\t// e.g. 24h -> 23h\n\t\t\t\treturn new Date(counter.valueOf() + ev.duration * 1000 - shift * 60 * 1000);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// e.g. 24h -> 25h\n\t\t\t\treturn new Date(end_date.valueOf() - shift * 60 * 1000);\n\t\t\t}\n\t\t}\n\t\treturn new Date(default_date.valueOf());\n\t};\n\tscheduler.getRecDates = function (id, max) {\n\t\tvar ev = typeof id == \"object\" ? id : scheduler.getEvent(id);\n\t\tvar recurrings = [];\n\t\tmax = max || 100;\n\n\t\tif (!isSeries(ev)) {\n\t\t\treturn [\n\t\t\t\t{ start_date: ev.start_date, end_date: ev.end_date }\n\t\t\t];\n\t\t}\n\t\tif (ev.deleted) {\n\t\t\treturn [];\n\t\t}\n\n\t\tscheduler.repeat_date(ev, recurrings, true, ev.start_date, ev.end_date, max);\n\n\t\tvar result = [];\n\t\tfor (var i = 0; i < recurrings.length; i++) {\n\t\t\tif (!recurrings[i].deleted) {\n\t\t\t\tresult.push({ start_date: recurrings[i].start_date, end_date: recurrings[i].end_date });\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\tscheduler.getEvents = function (from, to) {\n\t\tvar result = [];\n\t\tconst exceptions = groupExceptions();\n\t\tfor (var a in this._events) {\n\t\t\tvar ev = this._events[a];\n\t\t\tif (ev.recurring_event_id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (from && to && ev.start_date < to && ev.end_date > from) {\n\t\t\t\tif (isSeries(ev)) {\n\t\t\t\t\tvar sev = [];\n\t\t\t\t\tthis.repeat_date(ev, sev, true, from, to, undefined, exceptions);\n\t\t\t\t\tsev.forEach(function(occurrence){\n\t\t\t\t\t\tif (occurrence.start_date < to && occurrence.end_date > from) {\n\t\t\t\t\t\t\tresult.push(occurrence);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t// if it's virtual event we can skip it\n\t\t\t\t} else if (!this._is_virtual_event(ev.id)) {\n\t\t\t\t\tresult.push(ev);\n\t\t\t\t}\n\t\t\t} else if (!from && !to && !this._is_virtual_event(ev.id)) {\n\t\t\t\tresult.push(ev);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\n\t//drop secondary attributes\n\tscheduler._copy_dummy = function (ev) {\n\t\tvar start_date = new Date(this.start_date);\n\t\tvar end_date = new Date(this.end_date);\n\t\tthis.start_date = start_date;\n\t\tthis.end_date = end_date;\n\t\tthis.duration = this.rrule = null;\n\t};\n\n\tscheduler.config.include_end_by = false;\n\tscheduler.config.lightbox_recurring = 'ask'; // cancel, instance, this and following, series\n\tscheduler.config.recurring_workdays = [RRule.MO.weekday,RRule.TU.weekday,RRule.WE.weekday,RRule.TH.weekday,RRule.FR.weekday];\n\tscheduler.config.repeat_date = \"%m.%d.%Y\";\n\tscheduler.config.lightbox.sections = [\n\t\t{ name: \"description\", map_to: \"text\", type: \"textarea\", focus: true },\n\t\t{ name: \"recurring\", type: \"recurring\", map_to: \"rrule\" },\n\t\t{ name: \"time\", height: 72, type: \"time\", map_to: \"auto\" }\n\t];\n\n\tscheduler.attachEvent(\"onClearAll\", function () {\n\t\tscheduler._rec_markers = {}; //clear recurring events data\n\t\tscheduler._rec_markers_pull = {};\n\t\tscheduler._rec_temp = [];\n\t});\n\n\n\tfunction getTopLevelOption(rruleObj, untilDate) {\n\t\tconst options = rruleObj.options;\n\t\tconst until = options.until || untilDate;\n\n\t\tconst hasEndCondition = options.count || (until && until.getFullYear() !== 9999);\n\n\t\tif (hasEndCondition) {\n\t\t\treturn 'CUSTOM';\n\t\t}\n\n\t\tif (options.freq === RRule.DAILY && options.interval === 1 && !options.byweekday) {\n\t\t\treturn 'DAILY';\n\t\t} else if (options.freq === RRule.WEEKLY && options.interval === 1 && !options.byweekday) {\n\t\t\treturn 'WEEKLY';\n\t\t} else if (options.freq === RRule.MONTHLY && options.interval === 1 && !options.bysetpos) {\n\t\t\treturn 'MONTHLY';\n\t\t} else if (options.freq === RRule.YEARLY && options.interval === 1 && !options.bysetpos) {\n\t\t\treturn 'YEARLY';\n\t\t} else if (options.freq === RRule.DAILY && options.byweekday && options.byweekday.length === scheduler.config.recurring_workdays.length &&\n\t\t\toptions.byweekday.includes(RRule.MO) &&\n\t\t\toptions.byweekday.includes(RRule.TU) &&\n\t\t\toptions.byweekday.includes(RRule.WE) &&\n\t\t\toptions.byweekday.includes(RRule.TH) &&\n\t\t\toptions.byweekday.includes(RRule.FR)) {\n\t\t\treturn 'WORKDAYS';\n\t\t} else {\n\t\t\treturn 'CUSTOM';\n\t\t}\n\t}\n\t\n\tfunction getWeekdayOfMonth(date) {\n\t\tconst dayOfWeek = date.getDay();\n\t\tconst dayOfMonth = date.getDate();\n\t\tconst dayNumber = Math.ceil(dayOfMonth / 7);\n\t\treturn { dayOfWeek, dayNumber };\n\t}\n\n\n\tconst jsDaysToRRULEDays = {\n\t\t0: \"SU\",\n\t\t1: \"MO\",\n\t\t2: \"TU\",\n\t\t3: \"WE\",\n\t\t4: \"TH\",\n\t\t5: \"FR\",\n\t\t6: \"SA\"\n\t};\n\tconst RruleDayNumsToJs = {\n\t\t0: 1,\n\t\t1: 2,\n\t\t2: 3,\n\t\t3: 4,\n\t\t4: 5,\n\t\t5: 6,\n\t\t6: 0\n\t};\n\n\tfunction fillIntervalInput(node, rule) {\n\t\tconst intervalInput = node.querySelector(\"[name='repeat_interval_value']\");\n\t\tif (intervalInput) {\n\t\t\tintervalInput.value = (rule ? rule.interval : 1) || 1;\n\t\t}\n\t}\n\n\tfunction fillCustomDaily(node, rule) {\n\t\tfillIntervalInput(node, rule);\n\t}\n\n\tfunction fillCustomWeekly(node, rule, event) {\n\t\tfillIntervalInput(node, rule);\n\n\t\tconst dayCheckboxes = node.querySelectorAll(`.dhx_form_repeat_custom_week input`);\n\t\tdayCheckboxes.forEach((ch) => ch.checked = false);\n\t\tif (rule && rule.byweekday) {\n\t\t\trule.byweekday.forEach((day) => {\n\t\t\t\tconst dayNum = RruleDayNumsToJs[day.weekday];\n\t\t\t\tconst dayLabel = jsDaysToRRULEDays[dayNum];\n\t\t\t\tconst checkbox = node.querySelector(`.dhx_form_repeat_custom_week input[value=\"${dayLabel}\"]`);\n\t\t\t\tif(checkbox) {\n\t\t\t\t\tcheckbox.checked = true;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tconst dayLabel = jsDaysToRRULEDays[event.start_date.getDay()];\n\t\t\tconst checkbox = node.querySelector(`.dhx_form_repeat_custom_week input[value=\"${dayLabel}\"]`);\n\t\t\tif(checkbox) {\n\t\t\t\tcheckbox.checked = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction fillCustomMonthly(node, rule, event) {\n\t\tfillIntervalInput(node, rule);\n\n\t\tconst dateOfMonth = node.querySelector(`.dhx_form_repeat_custom_month [value=\"month_date\"]`);\n\t\tconst nthWeekDayOfMonth = node.querySelector(`.dhx_form_repeat_custom_month [value=\"month_nth_weekday\"]`);\n\t\tif(dateOfMonth && nthWeekDayOfMonth){\n\t\t\tdateOfMonth.innerText = scheduler.templates.repeat_monthly_date(event.start_date, event);\n\t\t\tnthWeekDayOfMonth.innerText = scheduler.templates.repeat_monthly_weekday(event.start_date, event);\n\t\t\t\n\t\t\tconst option = node.querySelector(`[name=\"dhx_custom_month_option\"]`);\n\t\t\tif (option) {\n\t\t\t\toption.value = (rule && rule.bysetpos && !(rule.byweekday && rule.byweekday.length)) ? \"month_date\" : \"month_nth_weekday\";\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction formatDayNumber(date){\n\t\tswitch (date) {\n\t\t\tcase 1:\n\t\t\tcase 31:\n\t\t\t\treturn `${date}st`;\n\t\t\tcase 2:\n\t\t\t\treturn `${date}nd`;\n\t\t\tcase 3:\n\t\t\t\treturn `${date}rd`;\n\t\t\tdefault:\n\t\t\t\treturn `${date}th`;\n\t\t}\n\t}\n\n\tscheduler.templates.repeat_monthly_date = function(startDate, event) {\n\t\tconst date = startDate.getDate();\n\t\treturn `Every ${formatDayNumber(date)}`;\n\t};\n\tscheduler.templates.repeat_monthly_weekday = function(startDate, event) {\n\t\tconst nthDayOfMonth = getWeekdayOfMonth(startDate);\n\t\treturn `Every ${formatDayNumber(nthDayOfMonth.dayNumber)} ${scheduler.locale.date.day_full[nthDayOfMonth.dayOfWeek]}`;\n\t};\n\t\n\tscheduler.templates.repeat_yearly_month_date = function(startDate, event) {\n\t\tconst date = startDate.getDate();\n\t\tconst monthLabel = scheduler.locale.date.month_full[startDate.getMonth()];\n\t\treturn `Every ${formatDayNumber(date)} day of ${monthLabel}`;\n\t};\n\tscheduler.templates.repeat_yearly_month_weekday = function(startDate, event) {\n\t\tconst nthDayOfMonth = getWeekdayOfMonth(startDate);\n\t\tconst monthLabel = scheduler.locale.date.month_full[startDate.getMonth()];\n\t\treturn `Every ${formatDayNumber(nthDayOfMonth.dayNumber)} ${scheduler.locale.date.day_full[nthDayOfMonth.dayOfWeek]} of ${monthLabel}`;\n\t};\n\n\tfunction fillCustomYearly(node, rule, event) {\n\t\tconst dateOfYear = node.querySelector(`.dhx_form_repeat_custom_year [value=\"month_date\"]`);\n\t\tconst nthWeekDayOfYear = node.querySelector(`.dhx_form_repeat_custom_year [value=\"month_nth_weekday\"]`);\n\t\tif(dateOfYear && nthWeekDayOfYear){\n\t\t\tdateOfYear.innerText = scheduler.templates.repeat_yearly_month_date(event.start_date, event);\n\t\t\tnthWeekDayOfYear.innerText = scheduler.templates.repeat_yearly_month_weekday(event.start_date, event);\n\n\t\t\tif (!rule || (rule.bysetpos && !(rule.byweekday && rule.byweekday.length))) {\n\t\t\t\tnode.querySelector(`[name=\"dhx_custom_year_option\"]`).value = \"month_date\";\n\t\t\t} else {\n\t\t\t\tnode.querySelector(`[name=\"dhx_custom_year_option\"]`).value = \"month_nth_weekday\";\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction fillEndRule(node, rule, event) {\n\t\tconst countInput = node.querySelector(`.dhx_form_repeat_ends_extra [name=\"dhx_form_repeat_ends_after\"]`);\n\t\tconst ondateInput = node.querySelector(`.dhx_form_repeat_ends_extra [name=\"dhx_form_repeat_ends_ondate\"]`);\n\t\tconst endOptionSelect = node.querySelector(`[name='dhx_custom_repeat_ends']`);\n\n\t\tif(countInput && ondateInput && endOptionSelect){\n\t\t\tcountInput.value = 1;\n\n\t\t\tlet formatter = scheduler.date.date_to_str(\"%Y-%m-%d\");\n\t\t\tif (!scheduler.config.repeat_date_of_end) {\n\t\t\t\tscheduler.config.repeat_date_of_end = formatter(scheduler.date.add(scheduler._currentDate(), 30, \"day\"));\n\t\t\t}\n\t\t\tondateInput.value = scheduler.config.repeat_date_of_end;\n\n\t\t\tif (rule && rule.count) {\n\t\t\t\tendOptionSelect.value = \"AFTER\";\n\t\t\t\tcountInput.value = rule.count;\n\t\t\t} else if (event._end_date && event._end_date.getFullYear() !== 9999) {\n\t\t\t\tendOptionSelect.value = \"ON\";\n\t\t\t\tondateInput.value = formatter(event._end_date);\n\t\t\t} else {\n\t\t\t\tendOptionSelect.value = \"NEVER\";\n\t\t\t}\n\t\t\tendOptionSelect.dispatchEvent(new Event(\"change\"));\n\t\t}\n\t}\n\n\tconst getRecValue = {\n\t\tMONTHLY: function (dates) {\n\t\t\tconst rrule = {\n\t\t\t\tfreq: RRule.MONTHLY,\n\t\t\t\tinterval: 1,\n\t\t\t\tbymonthday: dates.start.getDate()\n\t\t\t};\n\t\t\tconst until = new Date(9999, 1, 1);\n\t\t\treturn {rrule, until};\n\t\t},\n\t\tWEEKLY: function (dates) {\n\t\t\tlet day = dates.start.getDay() - 1;\n\t\t\tif (day == -1) day = 6;\n\t\t\tconst rrule = {\n\t\t\t\tfreq: RRule.WEEKLY,\n\t\t\t\tinterval: 1,\n\t\t\t\tbyweekday: [day]\n\t\t\t};\n\t\t\tconst until = new Date(9999, 1, 1);\n\t\t\treturn {rrule, until};\n\t\t},\n\t\tDAILY: function (dates) {\n\t\t\tconst rrule = {\n\t\t\t\tfreq: RRule.DAILY,\n\t\t\t\tinterval: 1\n\t\t\t};\n\t\t\tconst until = new Date(9999, 1, 1);\n\t\t\treturn {rrule, until};\n\t\t},\n\t\tYEARLY: function (dates) {\n\t\t\tconst rrule = {\n\t\t\t\tfreq: RRule.YEARLY,\n\t\t\t\tbymonth: dates.start.getMonth() + 1,\n\t\t\t\tinterval: 1,\n\t\t\t\tbymonthday: dates.start.getDate()\n\t\t\t};\n\t\t\tconst until = new Date(9999, 1, 1);\n\t\t\treturn {rrule, until};\n\t\t},\n\t\tWORKDAYS: function (dates) {\n\t\t\tconst rrule = {\n\t\t\t\tfreq: RRule.WEEKLY,\n\t\t\t\tinterval: 1,\n\t\t\t\tbyweekday: scheduler.config.recurring_workdays\n\t\t\t};\n\t\t\tconst until = new Date(9999, 1, 1);\n\t\t\treturn {rrule, until};\n\t\t},\n\t\tCUSTOM: function (dates, node) {\n\t\t\tconst rrule = {};\n\t\t\tconst freq = node.querySelector(`[name=\"repeat_interval_unit\"]`).value;\n\t\t\tconst interval = Math.max(1, node.querySelector(`[name=\"repeat_interval_value\"]`).value);\n\t\t\tconst monthRepeat = node.querySelector(`[name=\"dhx_custom_month_option\"]`) ? node.querySelector(`[name=\"dhx_custom_month_option\"]`).value : null;\n\t\t\tconst yearRepeat = node.querySelector(`[name=\"dhx_custom_year_option\"]`) ? node.querySelector(`[name=\"dhx_custom_year_option\"]`).value : null;\n\t\t\trrule.interval = interval;\n\t\t\tlet days;\n\t\t\tlet day;\n\n\t\t\tswitch (freq) {\n\t\t\t\tcase \"DAILY\":\n\t\t\t\t\trrule.freq = RRule.DAILY;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"WEEKLY\": \n\t\t\t\t\trrule.freq = RRule.WEEKLY;\n\t\t\t\t\tdays = [];\n\t\t\t\t\tnode.querySelectorAll(`.dhx_form_repeat_custom_week [name=\"week_day\"]`).forEach((ch) => {\n\t\t\t\t\t\tif(ch.checked){\n\t\t\t\t\t\t\tdays.push(ch.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\trrule.byweekday = days.map((day) => {\n\t\t\t\t\t\tswitch (day) {\n\t\t\t\t\t\t\tcase \"MO\":\n\t\t\t\t\t\t\t\treturn RRule.MO.weekday;\n\t\t\t\t\t\t\tcase \"TU\":\n\t\t\t\t\t\t\t\treturn RRule.TU.weekday;\n\t\t\t\t\t\t\tcase \"WE\":\n\t\t\t\t\t\t\t\treturn RRule.WE.weekday;\n\t\t\t\t\t\t\tcase \"TH\":\n\t\t\t\t\t\t\t\treturn RRule.TH.weekday;\n\t\t\t\t\t\t\tcase \"FR\":\n\t\t\t\t\t\t\t\treturn RRule.FR.weekday;\n\t\t\t\t\t\t\tcase \"SA\":\n\t\t\t\t\t\t\t\treturn RRule.SA.weekday;\n\t\t\t\t\t\t\tcase \"SU\":\n\t\t\t\t\t\t\t\treturn RRule.SU.weekday;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"MONTHLY\":\n\t\t\t\t\trrule.freq = RRule.MONTHLY;\n\t\t\t\t\t\n\t\t\t\t\tif (monthRepeat === \"month_date\") {\n\t\t\t\t\t\trrule.bymonthday = dates.start.getDate();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tday = dates.start.getDay() - 1;\n\t\t\t\t\t\tif (day == -1) day = 6;\n\t\t\t\t\t\trrule.byweekday = [day];\n\t\t\t\t\t\trrule.bysetpos = getWeekdayOfMonth(dates.start).dayNumber;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"YEARLY\":\n\t\t\t\t\trrule.freq = RRule.YEARLY;\n\t\t\t\t\trrule.bymonth = dates.start.getMonth() + 1;\n\t\t\t\t\t\n\t\t\t\t\tif (yearRepeat == \"month_date\") {\n\t\t\t\t\t\trrule.bymonthday = dates.start.getDate();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tday = dates.start.getDay() - 1;\n\t\t\t\t\t\tif (day == -1) day = 6;\n\t\t\t\t\t\trrule.byweekday = [day];\n\t\t\t\t\t\trrule.bysetpos = getWeekdayOfMonth(dates.start).dayNumber;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst formatFunc = scheduler.date.str_to_date(\"%Y-%m-%d\");\n\t\t\tlet until = new Date(9999, 1, 1);\n\t\t\tconst endRule = node.querySelector(`[name=\"dhx_custom_repeat_ends\"]`);\n\t\t\tif(endRule && endRule.value === \"ON\"){\n\t\t\t\tuntil = formatFunc(node.querySelector(`[name=\"dhx_form_repeat_ends_ondate\"]`).value);\n\t\t\t\trrule.until = new Date(until);\n\t\t\t} else if(endRule && endRule.value === \"AFTER\") {\n\t\t\t\trrule.count = Math.max(1, node.querySelector(`[name=\"dhx_form_repeat_ends_after\"]`).value);\n\t\t\t}\n\t\t\t\n\t\t\treturn {rrule, until};\n\t\t},\n\t\tNEVER: function () {\n\t\t}\n\t};\n\n\tfunction fillInDefaults(node, rule, event) {\n\t\tfillCustomDaily(node, rule, event);\n\t\tfillCustomWeekly(node, rule, event);\n\t\tfillCustomMonthly(node, rule, event);\n\t\tfillCustomYearly(node, rule, event);\n\t\tfillEndRule(node, rule, event);\n\t}\n\tscheduler.form_blocks[\"recurring\"] = {\n\t\t_get_node : function(node){\n\t\t\tif (typeof node == \"string\"){\n\t\t\t\tlet element = scheduler._lightbox.querySelector(`#${node}`);\n\t\t\t\tif(!element){\n\t\t\t\t\t// form is detached from lightbox \n\t\t\t\t\t// search globally, won't work in LWC\n\t\t\t\t\telement = document.getElementById(node);\n\t\t\t\t}\n\t\t\t\tnode = element;\n\t\t\t}\n\t\t\tif (node.style.display == 'none')\n\t\t\t\tnode.style.display = \"\";\n\t\t\treturn node;\n\t\t},\n\t\t_outer_html: function(node){\n\t\t\treturn node.outerHTML || getOuterHTML(node);\n\t\n\t\t\t//probably not needed, FF v10- only\n\t\t\tfunction getOuterHTML(n){\n\t\t\t\tvar div = document.createElement('div'), h;\n\t\t\t\tdiv.appendChild( n.cloneNode(true) );\n\t\t\t\th = div.innerHTML;\n\t\t\t\tdiv = null;\n\t\t\t\treturn h;\n\t\t\t}\n\t\t},\n\t\trender: function (sns) {\n\t\t\tif (sns.form) {\n\t\t\t\tlet rec = scheduler.form_blocks[\"recurring\"];\n\t\t\t\tlet form = rec._get_node(sns.form);\n\t\t\t\tlet html = rec._outer_html(form);\n\t\t\t\tform.style.display = 'none';\n\t\t\t\treturn html;\n\t\t\t}\n\t\t\tlet loc = scheduler.locale.labels;\n\n\t\t\treturn `<div class=\"dhx_form_rrule\">\n\t\t<div class=\"dhx_form_repeat_pattern\">\n\t\t\t<select>\n\t\t\t\t<option value=\"NEVER\">${loc.repeat_never}</option>\n\t\t\t\t<option value=\"DAILY\">${loc.repeat_daily}</option>\n\t\t\t\t<option value=\"WEEKLY\">${loc.repeat_weekly}</option>\n\t\t\t\t<option value=\"MONTHLY\">${loc.repeat_monthly}</option>\n\t\t\t\t<option value=\"YEARLY\">${loc.repeat_yearly}</option>\n\t\t\t\t<option value=\"WORKDAYS\">${loc.repeat_workdays}</option>\n\t\t\t\t<option value=\"CUSTOM\">${loc.repeat_custom}</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class=\"dhx_form_repeat_custom dhx_hidden\">\n\t\t\t<div class=\"dhx_form_repeat_custom_interval\">\n\t\t\t\t<input name=\"repeat_interval_value\" type=\"number\" min=\"1\">\n\t\t\t\t<select name=\"repeat_interval_unit\">\n\t\t\t\t\t<option value=\"DAILY\">${loc.repeat_freq_day}</option>\n\t\t\t\t\t<option value=\"WEEKLY\">${loc.repeat_freq_week}</option>\n\t\t\t\t\t<option value=\"MONTHLY\">${loc.repeat_freq_month}</option>\n\t\t\t\t\t<option value=\"YEARLY\">${loc.repeat_freq_year}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\n\t\t\t<div class=\"dhx_form_repeat_custom_additional\">\n\t\t\t\t<div class=\"dhx_form_repeat_custom_week dhx_hidden\">\n\t\t\t\t\t<label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"MO\" />${loc.day_for_recurring[1]}</label>\n\t\t\t\t\t<label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"TU\" />${loc.day_for_recurring[2]}</label>\n\t\t\t\t\t<label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"WE\" />${loc.day_for_recurring[3]}</label>\n\t\t\t\t\t<label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"TH\" />${loc.day_for_recurring[4]}</label>\n\t\t\t\t\t<label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"FR\" />${loc.day_for_recurring[5]}</label>\n\t\t\t\t\t<label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"SA\" />${loc.day_for_recurring[6]}</label>\n\t\t\t\t\t<label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"SU\" />${loc.day_for_recurring[0]}</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"dhx_form_repeat_custom_month dhx_hidden\">\n\t\t\t\t\t<select name=\"dhx_custom_month_option\">\n\t\t\t\t\t\t<option value=\"month_date\"></option>\n\t\t\t\t\t\t<option value=\"month_nth_weekday\"></option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"dhx_form_repeat_custom_year dhx_hidden\">\n\t\t\t\t\t<select name=\"dhx_custom_year_option\">\n\t\t\t\t\t\t<option value=\"month_date\"></option>\n\t\t\t\t\t\t<option value=\"month_nth_weekday\"></option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"dhx_form_repeat_ends\">\n\t\t\t\t<div>${loc.repeat_ends}</div>\n\t\t\t\t<div class=\"dhx_form_repeat_ends_options\">\n\t\t\t\t\t<select name=\"dhx_custom_repeat_ends\">\n\t\t\t\t\t\t<option value=\"NEVER\">${loc.repeat_never}</option>\n\t\t\t\t\t\t<option value=\"AFTER\">${loc.repeat_radio_end2}</option>\n\t\t\t\t\t\t<option value=\"ON\">${loc.repeat_on_date}</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<div class=\"dhx_form_repeat_ends_extra\">\n\t\t\t\t\t\t<div class=\"dhx_form_repeat_ends_after dhx_hidden\">\n\t\t\t\t\t\t\t<label><input type=\"number\" min=\"1\" name=\"dhx_form_repeat_ends_after\">${loc.repeat_text_occurrences_count}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"dhx_form_repeat_ends_on dhx_hidden\">\n\t\t\t\t\t\t\t<input type=\"date\" name=\"dhx_form_repeat_ends_ondate\">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\t</div>`;\n\t\t},\n\n\t\n\t\t_init_set_value: function (node, value, event) {\n\t\t\tscheduler.form_blocks[\"recurring\"]._ds = { start: event.start_date, end: event.end_date };\n\t\t\tfunction hide(node) {\n\t\t\t\tif(node) node.classList.add(\"dhx_hidden\");\n\t\t\t}\n\t\t\tfunction show(node) {\n\t\t\t\tif(node) node.classList.remove(\"dhx_hidden\");\n\t\t\t}\n\t\t\tfunction onRepeatOptionChange(value) {\n\t\t\t\tconst repeat = node.querySelector(\".dhx_form_repeat_custom\");\n\t\t\t\tif (value === \"CUSTOM\") {\n\t\t\t\t\tshow(repeat);\n\t\t\t\t} else {\n\t\t\t\t\thide(repeat);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction onCustomRepeatIntervalChange(value) {\n\t\t\t\tconst nodes = {\n\t\t\t\t\tweekly: node.querySelector(\".dhx_form_repeat_custom_week\"),\n\t\t\t\t\tmonthly: node.querySelector(\".dhx_form_repeat_custom_month\"),\n\t\t\t\t\tyearly: node.querySelector(\".dhx_form_repeat_custom_year\")\n\t\t\t\t};\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase \"DAILY\":\n\t\t\t\t\t\thide(nodes.weekly);\n\t\t\t\t\t\thide(nodes.monthly);\n\t\t\t\t\t\thide(nodes.yearly);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"WEEKLY\":\n\t\t\t\t\t\tshow(nodes.weekly);\n\t\t\t\t\t\thide(nodes.monthly);\n\t\t\t\t\t\thide(nodes.yearly);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"MONTHLY\":\n\t\t\t\t\t\thide(nodes.weekly);\n\t\t\t\t\t\tshow(nodes.monthly);\n\t\t\t\t\t\thide(nodes.yearly);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"YEARLY\":\n\t\t\t\t\t\thide(nodes.weekly);\n\t\t\t\t\t\thide(nodes.monthly);\n\t\t\t\t\t\tshow(nodes.yearly);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction onCustomRepeatEndRule(value) {\n\t\t\t\tconst nodes = {\n\t\t\t\t\tafter: node.querySelector(\".dhx_form_repeat_ends_extra .dhx_form_repeat_ends_after\"),\n\t\t\t\t\ton: node.querySelector(\".dhx_form_repeat_ends_extra .dhx_form_repeat_ends_on\")\n\t\t\t\t};\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase \"NEVER\":\n\t\t\t\t\t\thide(nodes.after);\n\t\t\t\t\t\thide(nodes.on);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"AFTER\":\n\t\t\t\t\t\tshow(nodes.after);\n\t\t\t\t\t\thide(nodes.on);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ON\":\n\t\t\t\t\t\thide(nodes.after);\n\t\t\t\t\t\tshow(nodes.on);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// repeat section change\n\t\t\tconst repeatSelect = node.querySelector(\".dhx_form_repeat_pattern select\");\n\t\t\tif(repeatSelect){\n\t\t\t\trepeatSelect.addEventListener(\"change\", function () {\n\t\t\t\t\tonRepeatOptionChange(this.value);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\t\n\t\t\t// custom repeat interval change\n\t\t\tconst customRepeatUnitInput = node.querySelector(\".dhx_form_repeat_custom_interval [name='repeat_interval_unit']\");\n\t\t\tif(customRepeatUnitInput){\n\t\t\t\tcustomRepeatUnitInput.addEventListener(\"change\", function () {\n\t\t\t\t\tonCustomRepeatIntervalChange(this.value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// custom repeat end rule\n\t\t\tconst customRepeatEndInput = node.querySelector(\".dhx_form_repeat_ends [name='dhx_custom_repeat_ends']\");\n\t\t\tif(customRepeatEndInput){\n\t\t\t\tcustomRepeatEndInput.addEventListener(\"change\", function () {\n\t\t\t\t\tonCustomRepeatEndRule(this.value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tscheduler._lightbox._rec_init_done = true;\n\t\t},\n\t\tbutton_click: function(){},\n\t\tset_value: function (node, value, ev) {\n\t\t\tlet rf = scheduler.form_blocks[\"recurring\"];\n\t\t\tif (!scheduler._lightbox._rec_init_done)\n\t\t\t\trf._init_set_value(node, value, ev);\n\t\t\tnode.open = !ev.rrule;\n\n\t\t\tnode.blocked = this._is_modified_occurrence(ev);\n\n\t\t\tlet ds = rf._ds;\n\t\t\tds.start = ev.start_date;\n\t\t\tds.end = ev._end_date;\n\n\t\t\tif (ev.rrule) {\n\t\t\t\tconst rruleset = rrulestr(ev.rrule);\n\t\t\t\tfillInDefaults(node, rruleset.origOptions, ev);\n\t\t\t\tconst topOption = getTopLevelOption(rruleset, ev._end_date);\n\t\t\t\tnode.querySelector(\".dhx_form_repeat_pattern select\").value = topOption;\n\t\t\t\tif(topOption === \"CUSTOM\"){\n\t\t\t\t\tlet customFreq;\n\t\t\t\t\tswitch (rruleset.origOptions.freq) {\n\t\t\t\t\t\tcase RRule.DAILY:\n\t\t\t\t\t\t\tcustomFreq = \"DAILY\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase RRule.WEEKLY:\n\t\t\t\t\t\t\tcustomFreq = \"WEEKLY\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase RRule.MONTHLY:\n\t\t\t\t\t\t\tcustomFreq = \"MONTHLY\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase RRule.YEARLY:\n\t\t\t\t\t\t\tcustomFreq = \"YEARLY\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif(customFreq){\n\t\t\t\t\t\tnode.querySelector(`[name=\"repeat_interval_unit\"]`).value = customFreq;\n\t\t\t\t\t\tnode.querySelector(`[name=\"repeat_interval_unit\"]`).dispatchEvent(new Event(\"change\"));\n\t\t\t\t\t}\n\t\t\t\t//\trepeat_interval_unit\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tfillInDefaults(node, null, ev);\n\t\t\t\tconst repeatSelect = node.querySelector(\".dhx_form_repeat_pattern select\");\n\t\t\t\tif(repeatSelect) {\n\t\t\t\t\trepeatSelect.value = \"NEVER\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst repeatSelect = node.querySelector(\".dhx_form_repeat_pattern select\");\n\t\t\tif(repeatSelect) {\n\t\t\t\trepeatSelect.dispatchEvent(new Event(\"change\"));\n\t\t\t} \n\n\t\t},\n\t\tget_value: function (node, ev) {\n\t\t\tconst repeatSelect = node.querySelector(\".dhx_form_repeat_pattern select\");\n\t\t\tif(!node.blocked && (!repeatSelect || repeatSelect.value !== \"NEVER\") ) {\n\t\t\t\tlet ds = scheduler.form_blocks[\"recurring\"]._ds;\n\t\t\t\tlet actual_dates = {};\n\n\t\t\t\tlet timeControl = getTimeSection();\n\n\t\t\t\ttimeControl.getValue(actual_dates);\n\t\t\t\tds.start = actual_dates.start_date;\n\t\t\t\tconst pattern = repeatSelect ? repeatSelect.value : \"CUSTOM\";\n\t\t\t\tconst recurrence = getRecValue[pattern](ds, node);\n\t\t\t\tev.rrule = new RRule(recurrence.rrule).toString().replace(\"RRULE:\", \"\");\n\t\t\t\tds.end = recurrence.until;\n\n\t\t\t\tev.duration = Math.floor((actual_dates.end_date - actual_dates.start_date) / 1000);\n\n\t\t\t\tif (ds._start) {\n\t\t\t\t\tev.start_date = new Date(ds.start);\n\t\t\t\t\tev._start_date = new Date(ds.start);\n\t\t\t\t\tds._start = false;\n\t\t\t\t} else\n\t\t\t\t\tev._start_date = null;\n\n\t\t\t\tev._end_date = ds.end;\n\t\t\t}else{\n\t\t\t\tev.rrule = ev.rrule = \"\";\n\t\t\t\tev._end_date = ev.end_date;\n\t\t\t}\n\n\t\t\treturn ev.rrule;\n\t\t},\n\n\t\tfocus: function (node) {\n\t\t}\n\t};\n\n\tfunction getTimeSection() {\n\t\tlet timeControl = scheduler.formSection('time');\n\t\tif (!timeControl) {\n\t\t\ttimeControl = getFirstSectionOfType('time');\n\t\t}\n\t\tif (!timeControl) {\n\t\t\ttimeControl = getFirstSectionOfType('calendar_time');\n\t\t}\n\n\n\t\tif (!timeControl) {\n\t\t\tthrow new Error([\"Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.\",\n\t\t\t\t\"You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. \",\n\t\t\t\t\"In the latter case, make sure the control is named \\\"time\\\":\",\n\t\t\t\t\"\",\n\t\t\t\t\"scheduler.config.lightbox.sections = [\",\n\t\t\t\t\"{name:\\\"time\\\", height:72, type:\\\"YOU CONTROL\\\", map_to:\\\"auto\\\" }];\"]\n\t\t\t\t.join(\"\\n\"));\n\t\t}\n\n\t\treturn timeControl;\n\t}\n\n\tfunction getFirstSectionOfType(type) {\n\t\tfor (let i = 0; i < scheduler.config.lightbox.sections.length; i++) {\n\t\t\tlet section = scheduler.config.lightbox.sections[i];\n\t\t\tif (section.type === type) {\n\t\t\t\treturn scheduler.formSection(section.name);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n}","export default function(scheduler){\n\nscheduler.config.occurrence_timestamp_in_utc = false;\nscheduler.config.recurring_workdays = [1,2,3,4,5];\nscheduler.form_blocks[\"recurring\"] = {\n\t_get_node : function(node){\n\t\tif (typeof node == \"string\"){\n\t\t\tlet element = scheduler._lightbox.querySelector(`#${node}`);\n\t\t\tif(!element){\n\t\t\t\t// form is detached from lightbox \n\t\t\t\t// search globally, won't work in LWC\n\t\t\t\telement = document.getElementById(node);\n\t\t\t}\n\t\t\tnode = element;\n\t\t}\n\t\tif (node.style.display == 'none')\n\t\t\tnode.style.display = \"\";\n\t\treturn node;\n\t},\n\t_outer_html: function(node){\n\t\treturn node.outerHTML || getOuterHTML(node);\n\n\t\t//probably not needed, FF v10- only\n\t\tfunction getOuterHTML(n){\n\t\t\tvar div = document.createElement('div'), h;\n\t\t\tdiv.appendChild( n.cloneNode(true) );\n\t\t\th = div.innerHTML;\n\t\t\tdiv = null;\n\t\t\treturn h;\n\t\t}\n\t},\n\trender:function(sns) {\n\t\tif(sns.form){\n\t\t\tvar rec = scheduler.form_blocks[\"recurring\"];\n\t\t\tvar form = rec._get_node(sns.form);\n\t\t\tvar html = rec._outer_html(form);\n\t\t\tform.style.display = 'none';\n\t\t\treturn html;\n\t\t}\n\t\tvar loc = scheduler.locale.labels;\n\t\treturn '<div class=\"dhx_form_repeat\"> '+\n\t\t\t\t\t'<form> '+\n\t\t\t\t\t\t'<div class=\"dhx_repeat_left\"> '+\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"day\" />'+loc.repeat_radio_day+'</label></div> '+\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"week\"/>'+loc.repeat_radio_week+'</label></div> '+\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"month\" checked />'+loc.repeat_radio_month+'</label></div> '+\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"repeat\" value=\"year\" />'+loc.repeat_radio_year+'</label></div> '+\n\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t\t'<div class=\"dhx_repeat_divider\">'+\n\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t\t'<div class=\"dhx_repeat_center\"> '+\n\t\t\t\t\t\t\t'<div style=\"display:none;\" id=\"dhx_repeat_day\"> '+\n\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"day_type\" value=\"d\"/>'+loc.repeat_radio_day_type+'</label>'+\n\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"day_count\" value=\"1\" />'+loc.repeat_text_day_count+'</label></div> '+\n\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"day_type\" checked value=\"w\"/>'+loc.repeat_radio_day_type2+'</label></div> '+\n\t\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t\t\t'<div style=\"display:none;\" id=\"dhx_repeat_week\">'+\n\t\t\t\t\t\t\t\t'<div><label>'+loc.repeat_week+'<input class=\"dhx_repeat_text\" type=\"text\" name=\"week_count\" value=\"1\" /></label>'+\n\t\t\t\t\t\t\t\t'<span>'+loc.repeat_text_week_count+'</span></div>  '+\n\t\t\t\t\t\t\t\t'<table class=\"dhx_repeat_days\"> '+\n\t\t\t\t\t\t\t\t\t'<tr> '+\n\t\t\t\t\t\t\t\t\t\t'<td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"1\" />'+loc.day_for_recurring[1]+'</label></div> '+\n\t\t\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"4\" />'+loc.day_for_recurring[4]+'</label></div></td> '+\n\t\t\t\t\t\t\t\t\t\t'<td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"2\" />'+loc.day_for_recurring[2]+'</label></div> '+\n\t\t\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"5\" />'+loc.day_for_recurring[5]+'</label></div></td> '+\n\t\t\t\t\t\t\t\t\t\t'<td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"3\" />'+loc.day_for_recurring[3]+'</label></div> '+\n\t\t\t\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"6\" />'+loc.day_for_recurring[6]+'</label></div></td> '+\n\t\t\t\t\t\t\t\t\t\t'<td><div><label><input class=\"dhx_repeat_checkbox\" type=\"checkbox\" name=\"week_day\" value=\"0\" />'+loc.day_for_recurring[0]+'</label></div> </td> '+\n\t\t\t\t\t\t\t\t\t'</tr> '+\n\t\t\t\t\t\t\t\t'</table> '+\n\t\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t\t\t'<div id=\"dhx_repeat_month\"> '+\n\t\t\t\t\t\t\t\t'<div><label class = \"dhx_repeat_month_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"month_type\" value=\"d\"/>'+loc.repeat_radio_month_type+'</label>'+\n\t\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_day\" value=\"1\" />'+loc.repeat_text_month_day+'</label>'+\n\t\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_count\" value=\"1\" />'+loc.repeat_text_month_count+'</label></div> '+\n\t\t\t\t\t\t\t\t\t'<div><label class = \"dhx_repeat_month_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"month_type\" checked value=\"w\"/>'+loc.repeat_radio_month_start+'</label>'+\n\t\t\t\t\t\t\t\t\t'<input class=\"dhx_repeat_text\" type=\"text\" name=\"month_week2\" value=\"1\" />'+\n\t\t\t\t\t\t\t\t\t'<label>'+\n\t\t\t\t\t\t\t\t\t\t'<select name=\"month_day2\">'+\n\t\t\t\t\t\t\t\t\t\t'\t<option value=\"1\" selected >'+scheduler.locale.date.day_full[1]+\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"2\">'+scheduler.locale.date.day_full[2]+\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"3\">'+scheduler.locale.date.day_full[3]+\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"4\">'+scheduler.locale.date.day_full[4]+\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"5\">'+scheduler.locale.date.day_full[5]+\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"6\">'+scheduler.locale.date.day_full[6]+\n\t\t\t\t\t\t\t\t\t\t\t'<option value=\"0\">'+scheduler.locale.date.day_full[0]+\n\t\t\t\t\t\t\t\t\t\t'</select>'+\n\t\t\t\t\t\t\t\t\t\tloc.repeat_text_month_count2_before+\n\t\t\t\t\t\t\t\t\t'</label>'+\n\t\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"month_count2\" value=\"1\" />'+loc.repeat_text_month_count2_after+'</label></div> '+\n\t\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t\t\t'<div style=\"display:none;\" id=\"dhx_repeat_year\"> '+\n\t\t\t\t\t\t\t\t'<div><label class = \"dhx_repeat_year_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"year_type\" value=\"d\"/>'+loc.repeat_radio_day_type+'</label>'+\n\t\t\t\t\t\t\t\t'<label><input class=\"dhx_repeat_text\" type=\"text\" name=\"year_day\" value=\"1\" />'+loc.repeat_text_year_day+'</label>'+\n\t\t\t\t\t\t\t\t'<label>'+\n\t\t\t\t\t\t\t\t\t'<select name=\"year_month\">'+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"0\" selected >'+loc.month_for_recurring[0]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"1\">'+loc.month_for_recurring[1]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"2\">'+loc.month_for_recurring[2]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"3\">'+loc.month_for_recurring[3]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"4\">'+loc.month_for_recurring[4]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"5\">'+loc.month_for_recurring[5]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"6\">'+loc.month_for_recurring[6]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"7\">'+loc.month_for_recurring[7]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"8\">'+loc.month_for_recurring[8]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"9\">'+loc.month_for_recurring[9]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"10\">'+loc.month_for_recurring[10]+\n\t\t\t\t\t\t\t\t\t\t'<option value=\"11\">'+loc.month_for_recurring[11]+\n\t\t\t\t\t\t\t\t\t'</select>'+\n\t\t\t\t\t\t\t\t\tloc.select_year_month+\n\t\t\t\t\t\t\t\t'</label></div> '+\n\t\t\t\t\t\t\t\t'<div><label class = \"dhx_repeat_year_label\"><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"year_type\" checked value=\"w\"/>'+loc.repeat_year_label+'</label>'+\n\t\t\t\t\t\t\t\t'<input class=\"dhx_repeat_text\" type=\"text\" name=\"year_week2\" value=\"1\" />'+\n\t\t\t\t\t\t\t\t'<select name=\"year_day2\">'+\n\t\t\t\t\t\t\t\t\t'<option value=\"1\" selected >'+scheduler.locale.date.day_full[1]+\n\t\t\t\t\t\t\t\t\t'<option value=\"2\">'+scheduler.locale.date.day_full[2]+\n\t\t\t\t\t\t\t\t\t'<option value=\"3\">'+scheduler.locale.date.day_full[3]+\n\t\t\t\t\t\t\t\t\t'<option value=\"4\">'+scheduler.locale.date.day_full[4]+\n\t\t\t\t\t\t\t\t\t'<option value=\"5\">'+scheduler.locale.date.day_full[5]+\n\t\t\t\t\t\t\t\t\t'<option value=\"6\">'+scheduler.locale.date.day_full[6]+\n\t\t\t\t\t\t\t\t\t'<option value=\"7\">'+scheduler.locale.date.day_full[0]+\n\t\t\t\t\t\t\t\t'</select>'+\n\t\t\t\t\t\t\t\tloc.select_year_day2+\n\t\t\t\t\t\t\t\t'<select name=\"year_month2\">'+\n\t\t\t\t\t\t\t\t\t'<option value=\"0\" selected >'+loc.month_for_recurring[0]+\n\t\t\t\t\t\t\t\t\t'<option value=\"1\">'+loc.month_for_recurring[1]+\n\t\t\t\t\t\t\t\t\t'<option value=\"2\">'+loc.month_for_recurring[2]+\n\t\t\t\t\t\t\t\t\t'<option value=\"3\">'+loc.month_for_recurring[3]+\n\t\t\t\t\t\t\t\t\t'<option value=\"4\">'+loc.month_for_recurring[4]+\n\t\t\t\t\t\t\t\t\t'<option value=\"5\">'+loc.month_for_recurring[5]+\n\t\t\t\t\t\t\t\t\t'<option value=\"6\">'+loc.month_for_recurring[6]+\n\t\t\t\t\t\t\t\t\t'<option value=\"7\">'+loc.month_for_recurring[7]+\n\t\t\t\t\t\t\t\t\t'<option value=\"8\">'+loc.month_for_recurring[8]+\n\t\t\t\t\t\t\t\t\t'<option value=\"9\">'+loc.month_for_recurring[9]+\n\t\t\t\t\t\t\t\t\t'<option value=\"10\">'+loc.month_for_recurring[10]+\n\t\t\t\t\t\t\t\t\t'<option value=\"11\">'+loc.month_for_recurring[11]+\n\t\t\t\t\t\t\t\t'</select></div> '+\n\t\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t\t'<div class=\"dhx_repeat_divider\">'+\n\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t\t'<div class=\"dhx_repeat_right\"> '+\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" checked/>'+loc.repeat_radio_end+'</label></div> '+\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" />'+loc.repeat_radio_end2+'</label>'+\n\t\t\t\t\t\t\t'<input class=\"dhx_repeat_text\" type=\"text\" name=\"occurences_count\" value=\"1\" />'+loc.repeat_text_occurences_count+'</div> '+\n\t\t\t\t\t\t\t'<div><label><input class=\"dhx_repeat_radio\" type=\"radio\" name=\"end\" />'+loc.repeat_radio_end3+'</label>'+\n\t\t\t\t\t\t\t'<input class=\"dhx_repeat_date\" type=\"text\" name=\"date_of_end\" value=\"'+scheduler.config.repeat_date_of_end+'\" /></div> '+\n\t\t\t\t\t\t'</div> '+\n\t\t\t\t\t'</form> '+\n\t\t\t\t'</div> '+\n\t\t\t\t'</div>';\n\t},\n\t_ds: {},\n\t_get_form_node: function(els, name, value){\n\t\tvar col = els[name];\n\t\tif(!col) return null;\n\t\tif(col.nodeName) return col;\n\n\t\tif(col.length){\n\t\t\tfor(var i=0; i < col.length; i++){\n\t\t\t\tif(col[i].value == value)\n\t\t\t\t\treturn col[i];\n\t\t\t}\n\t\t}\n\t},\n\t_get_node_value: function(els, name, multiselect){\n\t\tvar col = els[name];\n\t\tif(!col) return \"\";\n\t\tif(col.length){\n\t\t\tif(multiselect){\n\t\t\t\tvar res = [];\n\t\t\t\tfor (var i = 0; i < col.length; i++)\n\t\t\t\t\tif (col[i].checked) res.push(col[i].value);\n\n\t\t\t\treturn res;\n\t\t\t}else{\n\t\t\t\tfor (var i = 0; i < col.length; i++)\n\t\t\t\t\tif (col[i].checked) return col[i].value;\n\t\t\t}\n\t\t}\n\n\t\tif(col.value)\n\t\t\treturn !multiselect ? col.value : [col.value];\n\t},\n\n\t_get_node_numeric_value: function(els, name){\n\t\tvar value = scheduler.form_blocks[\"recurring\"]._get_node_value(els, name);\n\t\treturn ((value * 1) || 0);\n\t},\n\n\t_set_node_value: function(els, name, value){\n\t\tvar col = els[name];\n\t\tif(!col) return;\n\n\t\tif(col.name == name){\n\t\t\tcol.value = value;\n\t\t}else if(col.length){\n\t\t\tvar hash_value = typeof value == \"object\";\n\t\t\tfor (var i = 0; i < col.length; i++)\n\t\t\t\tif (hash_value || col[i].value == value){\n\t\t\t\t\tcol[i].checked = hash_value ? !!value[col[i].value] : !!value;\n\t\t\t\t}\n\t\t}\n\t},\n\n\t_init_set_value:function(node, value, ev) {\n\t\tvar block = scheduler.form_blocks[\"recurring\"];\n\t\tvar get_value = block._get_node_value;\n\t\tvar set_value = block._set_node_value;\n\t\tscheduler.form_blocks[\"recurring\"]._ds = {start:ev.start_date, end:ev._end_date};\n\n\t\tvar str_date_format = scheduler.date.str_to_date(scheduler.config.repeat_date, false, true);\n\t\tvar str_date = function(str_date) {\n\t\t\tvar date = str_date_format(str_date);\n\t\t\tif (scheduler.config.include_end_by)\n\t\t\t\tdate = scheduler.date.add(date, 1, 'day');\n\t\t\treturn date;\n\t\t};\n\n\t\tvar date_str = scheduler.date.date_to_str(scheduler.config.repeat_date);\n\n\t\tvar top = node.getElementsByTagName(\"FORM\")[0];\n\t\tvar els = {};\n\n\t\tfunction register_els(inps) {\n\t\t\tfor (var i = 0; i < inps.length; i++) {\n\t\t\t\tvar inp = inps[i];\n\n\t\t\t\tif(inp.name){\n\t\t\t\t\tif(!els[inp.name]){\n\t\t\t\t\t\tels[inp.name] = inp;\n\t\t\t\t\t}else if(els[inp.name].nodeType){\n\t\t\t\t\t\tvar node = els[inp.name];\n\t\t\t\t\t\tels[inp.name] = [node, inp];\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\tels[inp.name].push(inp);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tregister_els(top.getElementsByTagName(\"INPUT\"));\n\t\tregister_els(top.getElementsByTagName(\"SELECT\"));\n\n\t\tif (!scheduler.config.repeat_date_of_end) {\n\t\t\tvar formatter = scheduler.date.date_to_str(scheduler.config.repeat_date);\n\t\t\tscheduler.config.repeat_date_of_end = formatter(scheduler.date.add(scheduler._currentDate(), 30, \"day\"));\n\t\t}\n\t\tset_value(els, \"date_of_end\", scheduler.config.repeat_date_of_end);\n\n\t\tvar $ = function(a) {\n\t\t\treturn scheduler._lightbox.querySelector(`#${a}`) || { style:{} };//return fake object if node not found\n\t\t};\n\n\t\tfunction change_current_view() {\n\t\t\t$(\"dhx_repeat_day\").style.display = \"none\";\n\t\t\t$(\"dhx_repeat_week\").style.display = \"none\";\n\t\t\t$(\"dhx_repeat_month\").style.display = \"none\";\n\t\t\t$(\"dhx_repeat_year\").style.display = \"none\";\n\t\t\t$(\"dhx_repeat_\" + this.value).style.display = \"\";\n\t\t\tscheduler.setLightboxSize();\n\t\t}\n\n\t\tfunction get_repeat_code(dates) {\n\t\t\tvar code = [get_value(els, \"repeat\")];\n\t\t\tget_rcode[code[0]](code, dates);\n\n\t\t\twhile (code.length < 5) code.push(\"\");\n\t\t\tvar repeat = \"\";\n\n\t\t\tvar end = get_end_rule(els);\n\n\t\t\tif (end == \"no\") {\n\t\t\t\tdates.end = new Date(9999, 1, 1);\n\t\t\t\trepeat = \"no\";\n\t\t\t}\n\t\t\telse if (end == \"date_of_end\") {\n\t\t\t\tdates.end = str_date(get_value(els, \"date_of_end\"));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tscheduler.transpose_type(code.join(\"_\"));\n\t\t\t\trepeat = Math.max(1, get_value(els, \"occurences_count\"));\n\n\t\t\t\tvar transp = 0;\n\n\t\t\t\t//var transp = ((code[0] == \"week\" && code[4] && code[4].toString().indexOf(scheduler.config.start_on_monday ? 1 : 0) == -1) ? 1 : 0);\n\n\t\t\t\t// which is equal to following code, seems to produce extra instance, not clear why needed\n\n\t\t\t\t/*if(code[0] == \"week\"){\n\t\t\t\t\tvar days = code[4] || \"\";\n\t\t\t\t\tif(scheduler.config.start_on_monday){\n\t\t\t\t\t\tif(days.indexOf(1) == -1)\n\t\t\t\t\t\ttransp = 1;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(days.indexOf(0) == -1)\n\t\t\t\t\t\ttransp = 1;\n\t\t\t\t\t}\n\t\t\t\t}*/\n\n\t\t\t//\tdates.end = scheduler.date.add(new Date(dates.start), repeat + transp, code.join(\"_\"));\n\n\t\t\t\tdates.end = scheduler.date[\"add_\" + code.join(\"_\")](new Date(dates.start), repeat + transp, {start_date: dates.start}) || dates.start;\n\t\t\t}\n\n\t\t\treturn code.join(\"_\") + \"#\" + repeat;\n\t\t}\n\t\tfunction get_end_rule(els){\n\t\t\tvar end = els[\"end\"];\n\t\t\tif(end.length){\n\t\t\t\tfor(var i =0; i < end.length; i++){\n\t\t\t\t\tif(end[i].checked){\n\t\t\t\t\t\tif(end[i].value && end[i].value != \"on\"){//seems to be default value:var input = document.createElement(\"input\"); input.type = \"radio\"; input.value\n\t\t\t\t\t\t\treturn end[i].value;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(!i){\n\t\t\t\t\t\t\t\treturn \"no\";\n\t\t\t\t\t\t\t}else if(i == 2){\n\t\t\t\t\t\t\t\treturn \"date_of_end\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\treturn \"occurences_count\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(end.value)\n\t\t\t\t\treturn end.value;\n\t\t\t}\n\t\t\treturn \"no\";\n\t\t}\n\t\tfunction set_end_rule(els, value){\n\t\t\tvar end = els[\"end\"];\n\n\t\t\tif(end.length){\n\t\t\t\tvar has_values = !!end[0].value && end[0].value != \"on\";\n\t\t\t\tif(has_values){\n\t\t\t\t\tfor(var i =0; i < end.length; i++){\n\t\t\t\t\t\tif(end[i].value == value)\n\t\t\t\t\t\t\tend[i].checked = true;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tvar ind = 0;\n\t\t\t\t\tswitch(value){\n\t\t\t\t\t\tcase \"no\":\n\t\t\t\t\t\t\tind = 0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"date_of_end\":\n\t\t\t\t\t\t\tind = 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tind = 1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tend[ind].checked = true;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tend.value = value;\n\t\t\t}\n\t\t}\n\n\n\t\tscheduler.form_blocks[\"recurring\"]._get_repeat_code = get_repeat_code;\n\t\tvar get_rcode = {\n\t\t\tmonth:function(code, dates) {\n\t\t\t\tvar get_value = scheduler.form_blocks[\"recurring\"]._get_node_value;\n\t\t\t\tvar get_numeric_value = scheduler.form_blocks[\"recurring\"]._get_node_numeric_value;\n\n\t\t\t\tif (get_value(els, \"month_type\") == \"d\") {\n\t\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"month_count\")));\n\t\t\t\t\tdates.start.setDate(get_value(els, \"month_day\"));\n\t\t\t\t} else {\n\t\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"month_count2\")));\n\t\t\t\t\tcode.push( get_value(els, \"month_day2\"));\n\t\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"month_week2\")));\n\t\t\t\t\tif (!scheduler.config.repeat_precise){\n\t\t\t\t\t\tdates.start.setDate(1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdates._start = true;\n\t\t\t},\n\t\t\tweek:function(code, dates) {\n\t\t\t\tvar get_value = scheduler.form_blocks[\"recurring\"]._get_node_value;\n\t\t\t\tvar get_numeric_value = scheduler.form_blocks[\"recurring\"]._get_node_numeric_value;\n\n\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"week_count\")));\n\t\t\t\tcode.push(\"\");\n\t\t\t\tcode.push(\"\");\n\t\t\t\tvar t = [];\n\n\t\t\t\tvar col = get_value(els, \"week_day\", true);\n\t\t\t\t//var col = els[\"week_day\"];\n\t\t\t\tvar day = dates.start.getDay();\n\t\t\t\tvar start_exists = false;\n\n\t\t\t\tfor (var i = 0; i < col.length; i++){\n\t\t\t\t\tt.push(col[i]);\n\t\t\t\t\tstart_exists = start_exists || col[i] == day;\n\t\t\t\t}\n\t\t\t\tif (!t.length){\n\t\t\t\t\tt.push(day);\n\t\t\t\t\tstart_exists = true;\n\t\t\t\t}\n\t\t\t\tt.sort();\n\n\n\t\t\t\tif (!scheduler.config.repeat_precise){\n\t\t\t\t\tdates.start = scheduler.date.week_start(dates.start);\n\t\t\t\t\tdates._start = true;\n\t\t\t\t} else if (!start_exists){\n\t\t\t\t\tscheduler.transpose_day_week(dates.start, t, 1, 7);\n\t\t\t\t\tdates._start = true;\n\t\t\t\t}\n\n\t\t\t\tcode.push(t.join(\",\"));\n\t\t\t},\n\t\t\tday:function(code) {\n\t\t\t\tvar get_value = scheduler.form_blocks[\"recurring\"]._get_node_value;\n\t\t\t\tvar get_numeric_value = scheduler.form_blocks[\"recurring\"]._get_node_numeric_value;\n\n\t\t\t\tif (get_value(els, \"day_type\") == \"d\") {\n\t\t\t\t\tcode.push(Math.max(1, get_numeric_value(els, \"day_count\")));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcode.push(\"week\");\n\t\t\t\t\tcode.push(1);\n\t\t\t\t\tcode.push(\"\");\n\t\t\t\t\tcode.push(\"\");\n\t\t\t\t\tcode.push(scheduler.config.recurring_workdays.join(\",\"));\n\t\t\t\t\tcode.splice(0, 1);\n\t\t\t\t}\n\t\t\t},\n\t\t\tyear:function(code, dates) {\n\t\t\t\tvar get_value = scheduler.form_blocks[\"recurring\"]._get_node_value;\n\n\t\t\t\tif (get_value(els, \"year_type\") == \"d\") {\n\t\t\t\t\tcode.push(\"1\");\n\t\t\t\t\tdates.start.setMonth(0);\n\t\t\t\t\tdates.start.setDate(get_value(els, \"year_day\"));\n\t\t\t\t\tdates.start.setMonth(get_value(els, \"year_month\"));\n\n\t\t\t\t} else {\n\t\t\t\t\tcode.push(\"1\");\n\t\t\t\t\tcode.push(get_value(els, \"year_day2\"));\n\t\t\t\t\tcode.push(get_value(els, \"year_week2\"));\n\t\t\t\t\tdates.start.setDate(1);\n\t\t\t\t\tdates.start.setMonth(get_value(els, \"year_month2\"));\n\t\t\t\t}\n\t\t\t\tdates._start = true;\n\t\t\t}\n\t\t};\n\t\tvar set_rcode = {\n\t\t\tweek:function(code, dates) {\n\t\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\n\t\t\t\tset_value(els, \"week_count\", code[1]);\n\n\t\t\t\tvar t = code[4].split(\",\");\n\t\t\t\tvar d = {};\n\t\t\t\tfor (var i = 0; i < t.length; i++) d[t[i]] = true;\n\n\t\t\t\tset_value(els, \"week_day\", d);\n\n\t\t\t\t//for (var i = 0; i < col.length; i++)\n\t\t\t\t//\tcol[i].checked = (!!d[col[i].value]);\n\t\t\t},\n\t\t\tmonth:function(code, dates) {\n\t\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\n\n\t\t\t\tif (code[2] === \"\") {\n\t\t\t\t\tset_value(els, \"month_type\", \"d\");\n\t\t\t\t\tset_value(els, \"month_count\", code[1]);\n\t\t\t\t\tset_value(els, \"month_day\", dates.start.getDate());\n\t\t\t\t} else {\n\t\t\t\t\tset_value(els, \"month_type\", \"w\");\n\t\t\t\t\tset_value(els, \"month_count2\", code[1]);\n\t\t\t\t\tset_value(els, \"month_week2\",  code[3]);\n\t\t\t\t\tset_value(els, \"month_day2\", code[2]);\n\t\t\t\t}\n\t\t\t},\n\t\t\tday:function(code, dates) {\n\t\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\n\t\t\t\tset_value(els, \"day_type\", \"d\");\n\t\t\t\tset_value(els, \"day_count\", code[1]);\n\t\t\t},\n\t\t\tyear:function(code, dates) {\n\t\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\n\n\t\t\t\tif (code[2] === \"\") {\n\t\t\t\t\tset_value(els, \"year_type\", \"d\");\n\t\t\t\t\tset_value(els, \"year_day\", dates.start.getDate());\n\t\t\t\t\tset_value(els, \"year_month\", dates.start.getMonth());\n\n\t\t\t\t} else {\n\t\t\t\t\tset_value(els, \"year_type\", \"w\");\n\t\t\t\t\tset_value(els, \"year_week2\", code[3]);\n\t\t\t\t\tset_value(els, \"year_day2\", code[2]);\n\t\t\t\t\tset_value(els, \"year_month2\", dates.start.getMonth());\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfunction set_repeat_code(code, dates) {\n\t\t\tvar set_value = scheduler.form_blocks[\"recurring\"]._set_node_value;\n\t\t\tvar data = code.split(\"#\");\n\t\t\tcode = data[0].split(\"_\");\n\t\t\tset_rcode[code[0]](code, dates);\n\n\t\t\tswitch (data[1]) {\n\t\t\t\tcase \"no\":\n\t\t\t\t\tset_end_rule(els, \"no\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"\":\n\t\t\t\t\tset_end_rule(els, \"date_of_end\");\n\n\t\t\t\t\tvar end_date = dates.end;\n\t\t\t\t\tif (scheduler.config.include_end_by){\n\t\t\t\t\t\tend_date = scheduler.date.add(end_date, -1, 'day');\n\t\t\t\t\t}\n\t\t\t\t\tset_value(els, \"date_of_end\", date_str(end_date));\n\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tset_end_rule(els, \"occurences_count\");\n\t\t\t\t\tset_value(els, \"occurences_count\", data[1]);\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tset_value(els, \"repeat\", code[0]);\n\t\t\t//e.checked = true;\n\n\t\t\tvar node = scheduler.form_blocks[\"recurring\"]._get_form_node(els, \"repeat\", code[0]);\n\t\t\tif(node.nodeName == \"SELECT\"/* && node.onchange*/){\n\t\t\t//\tnode.onchange();\n\t\t\t\tnode.dispatchEvent(new Event('change'));\n\t\t\t\tnode.dispatchEvent(new MouseEvent('click'));\n\t\t\t}else{\n\t\t\t\tnode.dispatchEvent(new MouseEvent('click'));\n\t\t\t}\n\t\t}\n\n\t\tscheduler.form_blocks[\"recurring\"]._set_repeat_code = set_repeat_code;\n\n\t\tfor (var i = 0; i < top.elements.length; i++) {\n\t\t\tvar el = top.elements[i];\n\t\t\tswitch (el.name) {\n\t\t\t\tcase \"repeat\":\n\t\t\t\t\tif (el.nodeName == \"SELECT\" && !el.$_eventAttached) {\n\t\t\t\t\t\tel.$_eventAttached = true;\n\t\t\t\t\t\tel.addEventListener(\"change\", change_current_view);\n\t\t\t\t\t} else if(!el.$_eventAttached){\n\t\t\t\t\t\tel.$_eventAttached = true;\n\t\t\t\t\t\tel.addEventListener(\"click\", change_current_view);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tscheduler._lightbox._rec_init_done = true;\n\t},\n\tset_value:function(node, value, ev) {\n\t\tvar rf = scheduler.form_blocks[\"recurring\"];\n\t\tif (!scheduler._lightbox._rec_init_done)\n\t\t\trf._init_set_value(node, value, ev);\n\t\tnode.open = !ev.rec_type;\n\n\t\tnode.blocked = this._is_modified_occurence(ev);\n\n\t\tvar ds = rf._ds;\n\t\tds.start = ev.start_date;\n\t\tds.end = ev._end_date;\n\n\t\trf._toggle_block();\n\n\t\tif (value)\n\t\t\trf._set_repeat_code(value, ds);\n\t},\n\tget_value:function(node, ev) {\n\t\tif (node.open) {\n\t\t\tvar ds = scheduler.form_blocks[\"recurring\"]._ds;\n\t\t\tvar actual_dates = {};\n\n\t\t\tvar timeControl = getTimeSection();\n\n\t\t\ttimeControl.getValue(actual_dates);\n\t\t\tds.start = actual_dates.start_date;\n\t\t\tev.rec_type = scheduler.form_blocks[\"recurring\"]._get_repeat_code(ds);\n\t\t\tif (ds._start) {\n\t\t\t\tev.start_date = new Date(ds.start);\n\t\t\t\tev._start_date = new Date(ds.start);\n\t\t\t\tds._start = false;\n\t\t\t} else\n\t\t\t\tev._start_date = null;\n\n\t\t\tev._end_date = ds.end;\n\t\t\tev.rec_pattern = ev.rec_type.split(\"#\")[0];\n\t\t} else {\n\t\t\tev.rec_type = ev.rec_pattern = \"\";\n\t\t\tev._end_date = ev.end_date;\n\t\t}\n\t\treturn ev.rec_type;\n\t},\n\t_get_button: function(){\n\t\tvar node = getRecurringSection().header;\n\t\treturn node.firstChild.firstChild;\n\t},\n\t_get_form: function(){\n\t\treturn getRecurringSection().node;\n\t},\n\topen:function(){\n\t\tvar block = scheduler.form_blocks.recurring;\n\n\t\tvar cont = block._get_form();\n\t\tif(!cont.open)\n\t\t\tblock._toggle_block();\n\t},\n\tclose: function(){\n\t\tvar block = scheduler.form_blocks.recurring;\n\n\t\tvar cont = block._get_form();\n\n\t\tif(cont.open)\n\t\t\tblock._toggle_block();\n\t},\n\t_toggle_block: function(){\n\t\tvar block = scheduler.form_blocks.recurring;\n\n\t\tvar cont = block._get_form(),\n\t\t\tel = block._get_button();\n\t\tif (!cont.open && !cont.blocked) {\n\t\t\tcont.style.height = \"auto\";//reset to default value\n\t\t\tif(el){\n\t\t\t\tel.style.backgroundPosition = \"-5px 0px\";\n\t\t\t\tel.nextSibling.innerHTML = scheduler.locale.labels.button_recurring_open;\n\t\t\t}\n\t\t} else {\n\t\t\tcont.style.height = \"0px\";\n\t\t\tif(el){\n\t\t\t\tel.style.backgroundPosition = \"-5px 20px\";\n\t\t\t\tel.nextSibling.innerHTML = scheduler.locale.labels.button_recurring;\n\t\t\t}\n\t\t}\n\t\tcont.open = !cont.open;\n\n\t\tscheduler.setLightboxSize();\n\t},\n\tfocus:function(node) {\n\t},\n\tbutton_click:function(node, button, event) {\n\t\tvar block = scheduler.form_blocks.recurring;\n\t\tvar cont = block._get_form();\n\t\tif (!cont.blocked)\n\t\t\tscheduler.form_blocks.recurring._toggle_block();\n\t}\n};\n\nfunction getTimeSection(){\n\tvar timeControl = scheduler.formSection('time');\n\tif(!timeControl){\n\t\ttimeControl = getFirstSectionOfType('time');\n\t}\n\tif(!timeControl){\n\t\ttimeControl = getFirstSectionOfType('calendar_time');\n\t}\n\n\t\n\tif (!timeControl) {\n\t\tthrow new Error([\"Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.\",\n\"You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. \",\n\"In the latter case, make sure the control is named \\\"time\\\":\",\n\"\",\n\"scheduler.config.lightbox.sections = [\",\n\"{name:\\\"time\\\", height:72, type:\\\"YOU CONTROL\\\", map_to:\\\"auto\\\" }];\"]\n.join(\"\\n\"));\n\t}\n\n\treturn timeControl;\n}\n\nfunction getRecurringSection(){\n\tvar recurringSection = scheduler.formSection('recurring');\n\tif(!recurringSection){\n\t\trecurringSection = getFirstSectionOfType('recurring');\n\t}\n\n\tif (!recurringSection) {\n\t\tthrow new Error([\"Can't locate the Recurring form section.\",\n\t\t\"Make sure that you have the recurring control on the lightbox configuration https://docs.dhtmlx.com/scheduler/recurring_events.html#recurringlightbox \",\n\t\t\"and that the recurring control has name \\\"recurring\\\":\",\n\"\",\n\"scheduler.config.lightbox.sections = [\",\n\"\t{name:\\\"recurring\\\", ... }\",\n\"];\"].join(\"\\n\"));\n\n\t}\n\n\treturn recurringSection;\n}\n\nfunction getFirstSectionOfType(type){\n\tfor(var i = 0; i < scheduler.config.lightbox.sections.length; i++){\n\t\tvar section = scheduler.config.lightbox.sections[i];\n\t\tif(section.type === type){\n\t\t\treturn scheduler.formSection(section.name);\n\t\t}\n\t}\n\treturn null;\n}\n\n//problem may occur if we will have two repeating events in the same moment of time\nscheduler._rec_markers = {};\nscheduler._rec_markers_pull = {};\nscheduler._add_rec_marker = function(ev, time) {\n\tev._pid_time = time;\n\tthis._rec_markers[ev.id] = ev;\n\tif (!this._rec_markers_pull[ev.event_pid]) this._rec_markers_pull[ev.event_pid] = {};\n\tthis._rec_markers_pull[ev.event_pid][time] = ev;\n};\nscheduler._get_rec_marker = function(time, id) {\n\tvar ch = this._rec_markers_pull[id];\n\tif (ch) return ch[time];\n\treturn null;\n};\nscheduler._get_rec_markers = function(id) {\n\treturn (this._rec_markers_pull[id] || []);\n};\n\nfunction clearMilliseconds(date){\n//\treturn date;\n\treturn new Date(\n\t\tdate.getFullYear(), \n\t\tdate.getMonth(), \n\t\tdate.getDate(), \n\t\tdate.getHours(), \n\t\tdate.getMinutes(),\n\t\tdate.getSeconds(),\n\t\t0\n\t);\n}\n\nscheduler._rec_temp = [];\n(function() {\n\tvar old_add_event = scheduler.addEvent;\n\tscheduler.addEvent = function(start_date, end_date, text, id, extra_data) {\n\t\tvar ev_id = old_add_event.apply(this, arguments);\n\n\t\tif (ev_id && scheduler.getEvent(ev_id)) {\n\t\t\tvar ev = scheduler.getEvent(ev_id);\n\t\t\t\n\t\t\tif(ev.start_date){\n\t\t\t\tev.start_date = clearMilliseconds(ev.start_date);\n\t\t\t}\n\t\t\tif(ev.end_date){\n\t\t\t\tev.end_date = clearMilliseconds(ev.end_date);\n\t\t\t}\n\t\t\tif (this._is_modified_occurence(ev))\n\t\t\t\tscheduler._add_rec_marker(ev, ev.event_length * 1000);\n\t\t\tif (ev.rec_type)\n\t\t\t\tev.rec_pattern = ev.rec_type.split(\"#\")[0];\n\t\t}\n\t\treturn ev_id;\n\t};\n})();\n\nscheduler.attachEvent(\"onEventIdChange\", function(id, new_id) {\n\tif (this._ignore_call) return;\n\tthis._ignore_call = true;\n\n\tif(scheduler._rec_markers[id]){\n\t\t//important for for correct work of scheduler.getEvents(from, to) and collision detection\n\t\tscheduler._rec_markers[new_id] = scheduler._rec_markers[id];\n\t\tdelete scheduler._rec_markers[id];\n\t}\n\n\tif(scheduler._rec_markers_pull[id]){\n\t\tscheduler._rec_markers_pull[new_id] = scheduler._rec_markers_pull[id];\n\t\tdelete scheduler._rec_markers_pull[id];\n\t}\n\n\tfor (var i = 0; i < this._rec_temp.length; i++) {\n\t\tvar tev = this._rec_temp[i];\n\t\tif (tev.event_pid == id) {\n\t\t\ttev.event_pid = new_id;\n\t\t\tthis.changeEventId(tev.id, new_id + \"#\" + tev.id.split(\"#\")[1]);\n\t\t}\n\t}\n\n\tfor(var i in this._rec_markers){\n\t\tvar tev = this._rec_markers[i];\n\t\tif(tev.event_pid == id){\n\t\t\ttev.event_pid = new_id;\n\t\t\ttev._pid_changed = true;\n\t\t}\n\t}\n\n\tvar el = scheduler._rec_markers[new_id];\n\tif(el && el._pid_changed) {\n\t\tdelete el._pid_changed;\n\t\tsetTimeout(function() {\n\t\t\tif(scheduler.$destroyed){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tscheduler.callEvent(\"onEventChanged\", [new_id, scheduler.getEvent(new_id)]);\n\t\t}, 1);\n\t}\n\n\tdelete this._ignore_call;\n});\nscheduler.attachEvent(\"onConfirmedBeforeEventDelete\", function(id) {\n\tvar ev = this.getEvent(id);\n\tif (this._is_virtual_event(id) || (this._is_modified_occurence(ev) && ev.rec_type && ev.rec_type != 'none')) {\n\t\tid = id.split(\"#\");\n\t\tvar nid = this.uid();\n\t\tvar tid = (id[1]) ? id[1] : Math.round(ev._pid_time / 1000);\n\n\t\tvar nev = this._copy_event(ev);\n\t\tnev.id = nid;\n\t\tnev.event_pid = ev.event_pid || id[0];\n\t\tvar timestamp = tid;\n\t\tnev.event_length = timestamp;\n\t\tnev.rec_type = nev.rec_pattern = \"none\";\n\t\tthis.addEvent(nev);\n\n\t\tthis._add_rec_marker(nev, timestamp * 1000);\n\t} else {\n\t\tif (ev.rec_type && this._lightbox_id)\n\t\t\tthis._roll_back_dates(ev);\n\t\tvar sub = this._get_rec_markers(id);\n\t\tfor (var i in sub) {\n\t\t\tif (sub.hasOwnProperty(i)) {\n\t\t\t\tid = sub[i].id;\n\t\t\t\tif (this.getEvent(id))\n\t\t\t\t\tthis.deleteEvent(id, true);\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n});\nscheduler.attachEvent(\"onEventDeleted\", function(id, ev){\n\tif(!this._is_virtual_event(id) && this._is_modified_occurence(ev)){\n\t\tif(!scheduler._events[id]){\n\t\t\tev.rec_type = ev.rec_pattern = \"none\";\n\t\t\tthis.setEvent(id, ev);\n\t\t}\n\t}\n});\nscheduler.attachEvent(\"onEventChanged\", function(id, event) {\n\tif (this._loading) return true;\n\n\tvar ev = this.getEvent(id);\n\n\tif (this._is_virtual_event(id)) {\n\t\tvar id = id.split(\"#\");\n\t\tvar nid = this.uid();\n\t\tthis._not_render = true;\n\n\t\tvar nev = this._copy_event(event);\n\t\tnev.id = nid;\n\t\tnev.event_pid = id[0];\n\t\tvar timestamp = id[1];\n\t\tnev.event_length = timestamp;\n\t\tnev.rec_type = nev.rec_pattern = \"\";\n\n\t\tthis._add_rec_marker(nev, timestamp * 1000);\n\t\tthis.addEvent(nev);\n\n\t\tthis._not_render = false;\n\n\t} else {\n\t\tif(ev.start_date){\n\t\t\tev.start_date = clearMilliseconds(ev.start_date);\n\t\t}\n\t\tif(ev.end_date){\n\t\t\tev.end_date = clearMilliseconds(ev.end_date);\n\t\t}\n\n\t\tif (ev.rec_type && this._lightbox_id){\n\t\t\tthis._roll_back_dates(ev);\n\t\t}\n\t\tvar sub = this._get_rec_markers(id);\n\t\tfor (var i in sub) {\n\t\t\tif (sub.hasOwnProperty(i)) {\n\t\t\t\tdelete this._rec_markers[sub[i].id];\n\t\t\t\tthis.deleteEvent(sub[i].id, true);\n\t\t\t}\n\t\t}\n\t\tdelete this._rec_markers_pull[id];\n\n\t\t// it's possible that after editing event is no longer exists, in such case we need to remove _select_id flag\n\t\tvar isEventFound = false;\n\t\tfor (var k = 0; k < this._rendered.length; k++) {\n\t\t\tif (this._rendered[k].getAttribute(this.config.event_attribute) == id)\n\t\t\t\tisEventFound = true;\n\t\t}\n\t\tif (!isEventFound)\n\t\t\tthis._select_id = null;\n\t}\n\treturn true;\n});\nscheduler.attachEvent(\"onEventAdded\", function(id) {\n\tif (!this._loading) {\n\t\tvar ev = this.getEvent(id);\n\t\tif (ev.rec_type && !ev.event_length){\n\t\t\tthis._roll_back_dates(ev);\n\t\t}\n\t}\n\treturn true;\n});\nscheduler.attachEvent(\"onEventSave\", function(id, data, is_new_event) {\n\tvar ev = this.getEvent(id);\n\tif (!ev.rec_type && data.rec_type && !this._is_virtual_event(id))\n\t\tthis._select_id = null;\n\treturn true;\n});\nscheduler.attachEvent(\"onEventCreated\", function(id) {\n\tvar ev = this.getEvent(id);\n\tif (!ev.rec_type)\n\t\tev.rec_type = ev.rec_pattern = ev.event_length = ev.event_pid = \"\";\n\treturn true;\n});\nscheduler.attachEvent(\"onEventCancel\", function(id) {\n\tvar ev = this.getEvent(id);\n\tif (ev.rec_type) {\n\t\tthis._roll_back_dates(ev);\n\t\t// a bit expensive, but we need to be sure that event re-rendered, because view can be corrupted by resize , during edit process\n\t\tthis.render_view_data();\n\t}\n});\nscheduler._roll_back_dates = function(ev) {\n\tif(ev.start_date){\n\t\tev.start_date = clearMilliseconds(ev.start_date);\n\t}\n\tif(ev.end_date){\n\t\tev.end_date = clearMilliseconds(ev.end_date);\n\t}\n\tev.event_length = Math.round((ev.end_date.valueOf() - ev.start_date.valueOf()) / 1000);\n\tev.end_date = ev._end_date;\n\tif (ev._start_date) {\n\t\tev.start_date.setMonth(0);\n\t\tev.start_date.setDate(ev._start_date.getDate());\n\t\tev.start_date.setMonth(ev._start_date.getMonth());\n\t\tev.start_date.setFullYear(ev._start_date.getFullYear());\n\n\t}\n};\n\nscheduler._is_virtual_event = function(id){\n\treturn id.toString().indexOf(\"#\") != -1;\n};\nscheduler._is_modified_occurence = function(ev){\n\treturn (ev.event_pid && ev.event_pid != \"0\");\n};\n\nscheduler.showLightbox_rec = scheduler.showLightbox;\nscheduler.showLightbox = function(id) {\n\tvar locale = this.locale;\n\tvar c = scheduler.config.lightbox_recurring;\n\tvar ev = this.getEvent(id);\n\tvar pid = ev.event_pid;\n\tvar isVirtual = this._is_virtual_event(id);\n\tif (isVirtual)\n\t\tpid = id.split(\"#\")[0];\n\n\t// show series\n\tvar showSeries = function(id) {\n\t\tvar event = scheduler.getEvent(id);\n\t\tevent._end_date = event.end_date;\n\t\tevent.end_date = new Date(event.start_date.valueOf() + event.event_length * 1000);\n\t\treturn scheduler.showLightbox_rec(id); // editing series\n\t};\n\n\tif ( (pid || pid*1 === 0) && ev.rec_type) {\n\t\t// direct API call on series id\n\t\treturn showSeries(id);\n\t}\n\tif ( !pid || pid === '0' || ( (!locale.labels.confirm_recurring || c == 'instance') || (c == 'series' && !isVirtual)) ) {\n\t\t// editing instance or non recurring event\n\t\treturn this.showLightbox_rec(id);\n\t}\n\tif (c == 'ask') {\n\t\tvar that = this;\n\t\tscheduler.modalbox({\n\t\t\ttext: locale.labels.confirm_recurring,\n\t\t\ttitle: locale.labels.title_confirm_recurring,\n\t\t\twidth: \"500px\",\n\t\t\tposition: \"middle\",\n\t\t\tbuttons:[locale.labels.button_edit_series, locale.labels.button_edit_occurrence, locale.labels.icon_cancel],\n\t\t\tcallback: function(index) {\n\t\t\t\tswitch(+index) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\treturn showSeries(pid);\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\treturn that.showLightbox_rec(id);\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\tshowSeries(pid);\n\t}\n};\n\n\nscheduler.get_visible_events_rec = scheduler.get_visible_events;\nscheduler.get_visible_events = function(only_timed) {\n\tfor (var i = 0; i < this._rec_temp.length; i++)\n\t\tdelete this._events[this._rec_temp[i].id];\n\tthis._rec_temp = [];\n\n\tvar stack = this.get_visible_events_rec(only_timed);\n\tvar out = [];\n\tfor (var i = 0; i < stack.length; i++) {\n\t\tif (stack[i].rec_type) {\n\t\t\t//deleted element of series\n\t\t\tif (stack[i].rec_pattern != \"none\")\n\t\t\t\tthis.repeat_date(stack[i], out);\n\t\t}\n\t\telse out.push(stack[i]);\n\t}\n\treturn out;\n};\n\n\n(function() {\n\tvar old = scheduler.isOneDayEvent;\n\tscheduler.isOneDayEvent = function(ev) {\n\t\tif (ev.rec_type) return true;\n\t\treturn old.call(this, ev);\n\t};\n\tvar old_update_event = scheduler.updateEvent;\n\tscheduler.updateEvent = function(id) {\n\t\tvar ev = scheduler.getEvent(id);\n\t\tif(ev && ev.rec_type){\n\t\t\t//rec_type can be changed without the lightbox,\n\t\t\t// make sure rec_pattern updated as well\n\t\t\tev.rec_pattern = (ev.rec_type || \"\").split(\"#\")[0];\n\t\t}\n\t\tif (ev && ev.rec_type && !this._is_virtual_event(id)) {\n\t\t\tscheduler.update_view();\n\t\t} else {\n\t\t\told_update_event.call(this, id);\n\t\t}\n\t};\n})();\n\nscheduler.transponse_size = {\n\tday:1, week:7, month:1, year:12\n};\nscheduler.date.day_week = function(sd, day, week) {\n\tsd.setDate(1);\n\tvar originalMonth = scheduler.date.month_start(new Date(sd));\n\tweek = (week - 1) * 7;\n\tvar cday = sd.getDay();\n\tvar nday = day * 1 + week - cday + 1;\n\tsd.setDate(nday <= week ? (nday + 7) : nday);\n\tvar newMonth = scheduler.date.month_start(new Date(sd));\n\tif(originalMonth.valueOf() !== newMonth.valueOf()){\n\t\treturn false;\n\t}\n\treturn true;\n};\nscheduler.transpose_day_week = function(sd, list, cor, size, cor2) {\n\tvar cday = (sd.getDay() || (scheduler.config.start_on_monday ? 7 : 0)) - cor;\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (list[i] > cday)\n\t\t\treturn sd.setDate(sd.getDate() + list[i] * 1 - cday - (size ? cor : cor2));\n\t}\n\tthis.transpose_day_week(sd, list, cor + size, null, cor);\n};\nscheduler.transpose_type = function(type) {\n\tvar transposeRecurring = \"transpose_\" + type;\n\tif (!this.date[transposeRecurring]) {\n\t\tvar recurringParts = type.split(\"_\");\n\t\tvar dayDurationMs = 60 * 60 * 24 * 1000;\n\t\tvar addRecurring = \"add_\" + type;\n\t\tvar recurringStepDays = this.transponse_size[recurringParts[0]] * recurringParts[1];\n\n\t\tif (recurringParts[0] == \"day\" || recurringParts[0] == \"week\") {\n\t\t\tvar weekDays = null;\n\t\t\tif (recurringParts[4]) {\n\t\t\t\tweekDays = recurringParts[4].split(\",\");\n\t\t\t\tif (scheduler.config.start_on_monday) {\n\t\t\t\t\tfor (var i = 0; i < weekDays.length; i++)\n\t\t\t\t\t\tweekDays[i] = (weekDays[i] * 1) || 7;\n\t\t\t\t\tweekDays.sort();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.date[transposeRecurring] = function(nd, td) {\n\t\t\t\tvar delta = Math.floor((td.valueOf() - nd.valueOf()) / (dayDurationMs * recurringStepDays));\n\t\t\t\tif (delta > 0)\n\t\t\t\t\tnd.setDate(nd.getDate() + delta * recurringStepDays);\n\t\t\t\tif (weekDays)\n\t\t\t\t\tscheduler.transpose_day_week(nd, weekDays, 1, recurringStepDays);\n\n\t\t\t\treturn nd;\n\t\t\t};\n\t\t\tthis.date[addRecurring] = function(sd, inc) {\n\t\t\t\tvar nd = new Date(sd.valueOf());\n\t\t\t\tif (weekDays) {\n\t\t\t\t\tfor (var count = 0; count < inc; count++)\n\t\t\t\t\t\tscheduler.transpose_day_week(nd, weekDays, 0, recurringStepDays);\n\t\t\t\t} else\n\t\t\t\t\tnd.setDate(nd.getDate() + inc * recurringStepDays);\n\n\t\t\t\treturn nd;\n\t\t\t};\n\t\t}\n\t\telse if (recurringParts[0] == \"month\" || recurringParts[0] == \"year\") {\n\t\t\tthis.date[transposeRecurring] = function(nd, td, seriesInstance) {\n\t\t\t\tvar delta = Math.ceil(((td.getFullYear() * 12 + td.getMonth() * 1 + 1) - (nd.getFullYear() * 12 + nd.getMonth() * 1 + 1)) / (recurringStepDays) - 1);\n\n\t\t\t\tif (delta >= 0){\n\t\t\t\t\tnd.setDate(1);\n\t\t\t\t\tnd.setMonth(nd.getMonth() + delta * recurringStepDays);\n\t\t\t\t}\n\n\t\t\t\treturn scheduler.date[addRecurring](nd, 0, seriesInstance);\n\t\t\t\t//if (str[3]){\n\t\t\t\t//\tscheduler.date.day_week(nd, str[2], str[3]);\n\t\t\t\t//}\n\t\t\t};\n\t\t\tthis.date[addRecurring] = function(sd, inc, seriesInstance, currentCount) {\n\t\t\t\tif(!currentCount){\n\t\t\t\t\tcurrentCount = 1;\n\t\t\t\t}else{\n\t\t\t\t\tcurrentCount++;\n\t\t\t\t}\n\t\t\t\tvar maxCount = 12;\n\t\t\t\tif(currentCount > maxCount){\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tvar nd = new Date(sd.valueOf());\n\t\t\t\tnd.setDate(1);\n\n\n\t\t\t\tnd.setMonth(nd.getMonth() + inc * recurringStepDays);\n\t\t\t\tvar origMonth = nd.getMonth();\n\t\t\t\tvar origYear = nd.getFullYear();\n\t\t\t\tnd.setDate(seriesInstance.start_date.getDate());\n\t\t\t\tif (recurringParts[3]){\n\t\t\t\t\tscheduler.date.day_week(nd, recurringParts[2], recurringParts[3]);\n\t\t\t\t}\n\n\t\t\t\tvar correctOverflowInstances = scheduler.config.recurring_overflow_instances;\n\t\t\t\tif(nd.getMonth() != origMonth && correctOverflowInstances != \"none\"){\n\t\t\t\t\t// no such day in a month\n\t\t\t\t\tif(correctOverflowInstances === \"lastDay\"){\n\t\t\t\t\t\t// return either last day of the month\n\t\t\t\t\t\tnd = new Date(origYear, origMonth + 1, 0, nd.getHours(), nd.getMinutes(), nd.getSeconds(), nd.getMilliseconds());\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// or go to the next instance\n\t\t\t\t\t\tnd = scheduler.date[addRecurring](new Date(origYear, origMonth + 1, 0), inc||1, seriesInstance, currentCount);\n\t\t\t\t\t\t// if next instance is not possible (e.g. 'repeat on 40th day of the month') null will be returned\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn nd;\n\t\t\t};\n\t\t}\n\t}\n};\nscheduler.repeat_date = function(ev, stack, non_render, from, to, maxCount) {\n\n\tfrom = from || this._min_date;\n\tto = to || this._max_date;\n\tvar max = maxCount || -1;\n\tvar td = new Date(ev.start_date.valueOf());\n\n\tvar startHour = td.getHours();\n\n\tvar visibleCount = 0;\n\n\tif (!ev.rec_pattern && ev.rec_type)\n\t\tev.rec_pattern = ev.rec_type.split(\"#\")[0];\n\n\tthis.transpose_type(ev.rec_pattern);\n\ttd = scheduler.date[\"transpose_\" + ev.rec_pattern](td, from, ev);\n\twhile ( td && (\n\t\ttd < ev.start_date ||\n\t\tscheduler._fix_daylight_saving_date(td,from,ev,td,new Date(td.valueOf() + ev.event_length * 1000)).valueOf() <= from.valueOf() ||\n\t\ttd.valueOf() + ev.event_length * 1000 <= from.valueOf())){\n\t\t\ttd = this.date[\"add_\" + ev.rec_pattern](td, 1, ev);\n\n\t}\n\twhile (td && (td < to && td < ev.end_date && (max < 0 || visibleCount < max))) {\n\t\ttd.setHours(startHour);\n\n\t\tvar timestamp = (scheduler.config.occurrence_timestamp_in_utc) ? Date.UTC(td.getFullYear(), td.getMonth(), td.getDate(), td.getHours(), td.getMinutes(), td.getSeconds()) : td.valueOf();\n\t\tvar ch = this._get_rec_marker(timestamp, ev.id);\n\t\tif (!ch) { // unmodified element of series\n\t\t\tvar ted = new Date(td.valueOf() + ev.event_length * 1000);\n\t\t\tvar copy = this._copy_event(ev);\n\t\t\t//copy._timed = ev._timed;\n\t\t\tcopy.text = ev.text;\n\t\t\tcopy.start_date = td;\n\t\t\tcopy.event_pid = ev.id;\n\t\t\tcopy.id = ev.id + \"#\" + Math.round(timestamp / 1000);\n\t\t\tcopy.end_date = ted;\n\n\t\t\tcopy.end_date = scheduler._fix_daylight_saving_date(copy.start_date, copy.end_date, ev, td, copy.end_date);\n\n\t\t\tcopy._timed = this.isOneDayEvent(copy);\n\n\t\t\tif (!copy._timed && !this._table_view && !this.config.multi_day) return;\n\t\t\tstack.push(copy);\n\n\t\t\tif (!non_render) {\n\t\t\t\tthis._events[copy.id] = copy;\n\t\t\t\tthis._rec_temp.push(copy);\n\t\t\t}\n\n\t\t\tvisibleCount++;\n\n\t\t} else\n\t\tif (non_render){\n\t\t\tif(ch.rec_type != \"none\"){\n\t\t\t\tvisibleCount++;\n\t\t\t}\n\t\t\tstack.push(ch);\n\t\t}\n\n\t\ttd = this.date[\"add_\" + ev.rec_pattern](td, 1, ev);\n\t//\tif(!scheduler.date[\"validate_add_\" + ev.rec_pattern](td, 1, ev.rec_pattern)){\n\t///\t\talert(\"detect add\")\n\t//\t}\n\t}\n};\nscheduler._fix_daylight_saving_date = function(start_date, end_date, ev, counter, default_date) {\n\tvar shift = start_date.getTimezoneOffset() - end_date.getTimezoneOffset();\n\tif (shift) {\n\t\tif (shift > 0) {\n\t\t\t// e.g. 24h -> 23h\n\t\t\treturn new Date(counter.valueOf() + ev.event_length * 1000 - shift * 60 * 1000);\n\t\t}\n\t\telse {\n\t\t\t// e.g. 24h -> 25h\n\t\t\treturn new Date(end_date.valueOf() - shift * 60 * 1000);\n\t\t}\n\t}\n\treturn new Date(default_date.valueOf());\n};\nscheduler.getRecDates = function(id, max) {\n\tvar ev = typeof id == \"object\" ? id : scheduler.getEvent(id);\n\tvar recurrings = [];\n\tmax = max || 100;\n\n\tif (!ev.rec_type) {\n\t\treturn [\n\t\t\t{ start_date: ev.start_date, end_date: ev.end_date }\n\t\t];\n\t}\n\tif (ev.rec_type == \"none\") {\n\t\treturn [];\n\t}\n\n\tscheduler.repeat_date(ev, recurrings, true, ev.start_date, ev.end_date, max);\n\n\tvar result = [];\n\tfor(var i = 0; i < recurrings.length; i++){\n\t\tif(recurrings[i].rec_type != \"none\"){\n\t\t\tresult.push({start_date: recurrings[i].start_date, end_date: recurrings[i].end_date});\n\t\t}\n\t}\n\n\treturn result;\n};\nscheduler.getEvents = function(from, to) {\n\tvar result = [];\n\tfor (var a in this._events) {\n\t\tvar ev = this._events[a];\n\t\tif (ev && ev.start_date < to && ev.end_date > from) {\n\t\t\tif (ev.rec_pattern) {\n\t\t\t\tif (ev.rec_pattern == \"none\") continue;\n\t\t\t\tvar sev = [];\n\t\t\t\tthis.repeat_date(ev, sev, true, from, to);\n\t\t\t\tfor (var i = 0; i < sev.length; i++) {\n\t\t\t\t\t// if event is in rec_markers then it will be checked by himself, here need to skip it\n\t\t\t\t\tif (!sev[i].rec_pattern && sev[i].start_date < to && sev[i].end_date > from && !this._rec_markers[sev[i].id]) {\n\t\t\t\t\t\tresult.push(sev[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (!this._is_virtual_event(ev.id)) { // if it's virtual event we can skip it\n\t\t\t\tresult.push(ev);\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n};\n\nscheduler.config.repeat_date = \"%m.%d.%Y\";\nscheduler.config.lightbox.sections = [\n\t{name:\"description\", map_to:\"text\", type:\"textarea\" , focus:true},\n\t{name:\"recurring\", type:\"recurring\", map_to:\"rec_type\", button:\"recurring\"},\n\t{name:\"time\", height:72, type:\"time\", map_to:\"auto\"}\n];\n\n\n//drop secondary attributes\nscheduler._copy_dummy = function(ev) {\n\tvar start_date = new Date(this.start_date);\n\tvar end_date = new Date(this.end_date);\n\tthis.start_date = start_date;\n\tthis.end_date = end_date;\n\tthis.event_length = this.event_pid = this.rec_pattern = this.rec_type = null;\n};\n\nscheduler.config.include_end_by = false;\nscheduler.config.lightbox_recurring = 'ask'; // series, instance\n\nscheduler.attachEvent(\"onClearAll\", function(){\n\tscheduler._rec_markers = {}; //clear recurring events data\n\tscheduler._rec_markers_pull = {};\n\tscheduler._rec_temp = [];\n});\n\n}","import getSerializator from '../core/common/get_serializable_events';\nexport default function(scheduler){\n\n\t\nconst getSerializableData = getSerializator(scheduler);\n\n//redefine this method, if you want to provide a custom set of attributes for serialization\nscheduler.data_attributes=function(){\n\tvar attrs = [];\n\tvar format = scheduler._helpers.formatDate;\n\tvar all_events = getSerializableData();\n\tfor (var a in all_events){\n\t\tvar ev = all_events[a];\n\t\tfor (var name in ev)\n\t\t\tif (name.substr(0,1) !=\"_\")\n\t\t\t\tattrs.push([name,((name == \"start_date\" || name == \"end_date\")?format:null)]);\n\t\tbreak;\n\t}\n\treturn attrs;\n};\n\nscheduler.toXML = function(header){\n\tvar xml = [];\n\tvar attrs = this.data_attributes();\n\tvar all_events = getSerializableData();\n\tfor (var a in all_events){\n\t\tvar ev = all_events[a];\n\n\t\txml.push(\"<event>\");\n\t\tfor (var i=0; i < attrs.length; i++)\n\t\t\txml.push(\"<\"+attrs[i][0]+\"><![CDATA[\"+(attrs[i][1]?attrs[i][1](ev[attrs[i][0]]):ev[attrs[i][0]])+\"]]></\"+attrs[i][0]+\">\");\n\n\t\txml.push(\"</event>\");\n\t}\n\treturn (header||\"\")+\"<data>\"+xml.join(\"\\n\")+\"</data>\";\n};\n\nscheduler._serialize_json_value = function(value){\n\tif(value === null || typeof value === \"boolean\"){\n\t\tvalue = \"\" + value;\n\t}else{\n\t\tif(!value && value !== 0){\n\t\t\tvalue = \"\";\n\t\t}\n\t\tvalue = '\"' + value.toString().\n\t\t\treplace(/\\n/g,\"\").\n\t\t\treplace(/\\\\/g,\"\\\\\\\\\").\n\t\t\treplace(/\"/g, '\\\\\"') + '\"';\n\t}\n\treturn value;\n};\n\n\n\nscheduler.toJSON = function(){\n\treturn JSON.stringify(this.serialize());\n};\n\n\nscheduler.toICal = function(header){\n\tvar start = \"BEGIN:VCALENDAR\\nVERSION:2.0\\nPRODID:-//dhtmlXScheduler//NONSGML v2.2//EN\\nDESCRIPTION:\";\n\tvar end = \"END:VCALENDAR\";\n\tvar format = scheduler.date.date_to_str(\"%Y%m%dT%H%i%s\");\n\tvar full_day_format = scheduler.date.date_to_str(\"%Y%m%d\");\n\n\tvar ical = [];\n\tvar all_events = getSerializableData();\n\tfor (var a in all_events){\n\t\tvar ev = all_events[a];\n\n\n\t\tical.push(\"BEGIN:VEVENT\");\n\t\tif (!ev._timed || (!ev.start_date.getHours() && !ev.start_date.getMinutes()))\n\t\t\tical.push(\"DTSTART:\"+full_day_format(ev.start_date));\n\t\telse\n\t\t\tical.push(\"DTSTART:\"+format(ev.start_date));\n\t\tif (!ev._timed || (!ev.end_date.getHours() && !ev.end_date.getMinutes()))\n\t\t\tical.push(\"DTEND:\"+full_day_format(ev.end_date));\n\t\telse\n\t\t\tical.push(\"DTEND:\"+format(ev.end_date));\n\t\tical.push(\"SUMMARY:\"+ev.text);\n\t\tical.push(\"END:VEVENT\");\n\t}\n\treturn start+(header||\"\")+\"\\n\"+ical.join(\"\\n\")+\"\\n\"+end;\n};\n\n}","\nimport autoscroll from \"./timeline/autoscroll\";\nimport scrollHelperFactory from \"./timeline/rtl_scroll_helper\";\nimport smartRender from \"./timeline/timeline_smart_render\";\nimport eventable from \"../utils/eventable\";\n\nexport default function(scheduler){\n\n// define scrollbar width once for correct height of label_wrapper\nfunction getScrollbarwidth() {\n\tvar inner = document.createElement('p');\n\tinner.style.width = \"100%\";\n\tinner.style.height = \"200px\";\n\n\tvar outer = document.createElement('div');\n\touter.style.position = \"absolute\";\n\touter.style.top = \"0px\";\n\touter.style.left = \"0px\";\n\touter.style.visibility = \"hidden\";\n\touter.style.width = \"200px\";\n\touter.style.height = \"150px\";\n\touter.style.overflow = \"hidden\";\n\touter.appendChild(inner);\n\n\tdocument.body.appendChild(outer);\n\tvar w1 = inner.offsetWidth;\n\touter.style.overflow = 'scroll';\n\tvar w2 = inner.offsetWidth;\n\n\tif (w1 == w2) {\n\t\tw2 = outer.clientWidth;\n\t}\n\n\tdocument.body.removeChild(outer);\n\n\treturn (w1 - w2);\n}\n\n\nscheduler.ext.timeline = {\n\trenderCells: function(columns, contentTemplate, baseClass){\n\t\tif(!columns || !columns.length){\n\t\t\treturn;\n\t\t}\n\t\tconst html = [];\n\t\tfor(let i = 0; i < columns.length; i++){\n\t\t\tconst column = columns[i];\n\t\t\tlet style = \"\";\n\t\t\tif(column.$width){\n\t\t\t\tstyle = \"width:\" + column.$width + \"px;\";\n\t\t\t}\n\n\t\t\tlet className = baseClass;\n\t\t\tif(column.css){\n\t\t\t\tclassName += \" \" + column.css;\n\t\t\t}\n\n\t\t\tif(i === 0) {\n\t\t\t\tclassName += \" \" + baseClass + \"_first\";\n\t\t\t}\n\t\t\tif (i === columns.length - 1){\n\t\t\t\tclassName += \" \" + baseClass + \"_last\";\n\t\t\t}\n\n\t\t\tconst content = contentTemplate(column) || \"\";\n\n\t\t\thtml.push(`<div class='${className}' style='${style}'><div class='dhx_timeline_label_content_wrapper'>${content}</div></div>`);\n\t\t}\n\t\t\n\t\treturn html.join(\"\");\n\t},\n\trenderHeading: function renderHeading(){\n\t\treturn this.renderCells(\n\t\t\tthis.columns,\n\t\t\tfunction (column) {\n\t\t\t\treturn column.label;\n\t\t\t},\n\t\t\t\"dhx_timeline_label_column dhx_timeline_label_column_header\"\n\t\t);\n\t},\n\trenderColumns: function renderColumns(section){\n\t\treturn this.renderCells(\n\t\t\tthis.columns,\n\t\t\tfunction (column) {\n\t\t\t\tif(column.template){\n\t\t\t\t\treturn column.template.call(self, section) || \"\";\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t},\n\t\t\t\"dhx_timeline_label_column\"\n\t\t);\n\t},\n\n\tscrollTo: function(scrollPosition){\n\t\tif(!scrollPosition){\n\t\t\treturn;\n\t\t}\n\n\t\tvar scrollDate;\n\t\tif(scrollPosition.date){\n\t\t\tscrollDate = scrollPosition.date;\n\t\t}else if(scrollPosition.left){\n\t\t\tscrollDate = scrollPosition.left;\n\t\t}else{\n\t\t\tscrollDate = scrollPosition;\n\t\t}\n\n\t\tvar scrollTop = -1;\n\t\tif(scrollPosition.section){\n\t\t\tscrollTop = this.getSectionTop(scrollPosition.section);\n\t\t}else if(scrollPosition.top){\n\t\t\tscrollTop = scrollPosition.top;\n\t\t}\n\n\t\tvar posLeft;\n\t\tif(typeof scrollDate == \"number\"){\n\t\t\tposLeft = scrollDate;\n\t\t}else{\n\t\t\tposLeft = this.posFromDate(scrollDate);\n\t\t}\n\t\tif (scheduler.config.rtl){\n\t\t\tvar labelWrapperHeight = +scheduler.$container.querySelector(\".dhx_timeline_label_wrapper\").style.height.replace(\"px\", \"\");\n\t\t\tvar scalesHeight = this._section_height[this.y_unit.length] + this._label_rows[this._label_rows.length - 1].top;\n\n\t\t\tif (this.scrollHelper.getMode() == this.scrollHelper.modes.minMax && (scalesHeight > labelWrapperHeight || this.render == \"tree\")) {\n\t\t\t\tposLeft -= getScrollbarwidth();\n\t\t\t}\n\t\t}\n\n\t\tvar dataWrapperDiv = scheduler.$container.querySelector('.dhx_timeline_data_wrapper');\n\t\tif (!this.scrollable){\n\t\t\tdataWrapperDiv = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t\t}\n\n\t\tif(this.scrollable){\n\t\t\tthis.scrollHelper.setScrollValue(dataWrapperDiv, posLeft);\n\t\t}\n\n\t\tif(scrollTop >= 0){\n\t\t\tdataWrapperDiv.scrollTop = scrollTop;\n\t\t}\n\t},\n\n\tgetScrollPosition: function () {\n\t\treturn {\n\t\t\tleft: this._x_scroll || 0,\n\t\t\ttop: this._y_scroll || 0\n\t\t};\n\t},\n\n\tposFromDate: function(date){\n\t\treturn scheduler._timeline_getX({start_date: date}, false, this) - 1;//getX adds 1px for event positioning\n\t}, \n\t\n\tdateFromPos: function (x) {\n\t\treturn scheduler._timeline_drag_date(this, x);\n\t},\n\n\tsectionFromPos: function(top) {\n\t\tvar pos = {y: top};\n\t\tscheduler._resolve_timeline_section(this, pos);\n\t\treturn pos.section;\n\t},\n\n\tresolvePosition: function(pos){\n\t\tvar result = {\n\t\t\tdate: null,\n\t\t\tsection: null\n\t\t};\n\t\tif(pos.left) {\n\t\t\tresult.date = this.dateFromPos(pos.left);\n\t\t}\n\t\tif(pos.top) {\n\t\t\tresult.section = this.sectionFromPos(pos.top);\n\t\t}\n\t\treturn result;\n\t},\n\n\tgetSectionHeight: function(sectionId){\n\t\treturn this._section_height[sectionId];\n\t},\n\n\tgetSectionTop: function(sectionId){\n\t\treturn this._rowStats[sectionId].top;\n\t},\n\n\tgetEventTop: function(event){\n\t\tvar eventHeight = this.getEventHeight(event);\n\t\tvar sorder = event._sorder || 0;\n\t\tvar y = 1+sorder*(eventHeight - 3)+(sorder?(sorder*2):0); // original top + number_of_events * event_dy + default event top/bottom borders\n\t\tif (scheduler.config.cascade_event_display) {\n\t\t\ty =1+sorder*scheduler.config.cascade_event_margin+(sorder?(sorder*2):0);\n\t\t}\n\t\treturn y;\n\t},\n\n\tgetEventHeight: function(event){\n\t\tvar timeline = this;\n\t\tvar section = event[timeline.y_property]; // section id\n\t\tvar eventHeight = timeline.event_dy;\n\t\tconst sectionIndex = timeline.order[section];\n\t\tif (timeline.event_dy == \"full\") {\n\t\t\tif (timeline.section_autoheight) {\n\t\t\t\t// GS-1509 need to calculate row stats to get sections height\n\t\t\t\tscheduler._timeline_get_cur_row_stats(this, sectionIndex);\n\t\t\t\teventHeight = timeline.getSectionHeight(section) - 6;\n\t\t\t} else {\n\t\t\t\teventHeight = timeline.dy - 3;\n\t\t\t}\n\t\t}\n\t\n\t\tif (timeline.resize_events) {\n\t\t\teventHeight = Math.max(Math.floor(eventHeight / (event._count||1)), timeline.event_min_dy);\n\t\t}\n\t\treturn eventHeight;\n\t}\n};\n\n\nscheduler._temp_matrix_scope = function(){\n//---#include ext/timeline/rtl_scroll_helper.js\n\nscheduler.matrix = {};\nscheduler._merge=function(a,b){\n\tfor (var c in b)\n\t\tif (typeof a[c] == \"undefined\")\n\t\t\ta[c]=b[c];\n};\nscheduler.createTimelineView=function(obj){\n\t/*scheduler._skin_init();*/\n\tscheduler._merge(obj,{\n\t\t// scrollable: true,\n\t\tscrollHelper: scrollHelperFactory(),\n\t\tcolumn_width: 100,\n\t\tautoscroll: {\n\t\t\trange_x: 200,// px to edge\n\t\t\trange_y: 100,\n\t\t\tspeed_x: 20,// speed\n\t\t\tspeed_y: 10\n\t\t},\n\n\t\t_is_new_view: true,\n\t\t_section_autowidth: true,\n\t\t_x_scroll: 0,\n\t\t_y_scroll: 0,\n\t\t_h_cols: {}, // [cellId: {div: htmlElem, left: number}, ... {}]\n\t\t_label_rows: [], // [{div: 'html', top: number}, {}, ...]\n\n\t\tsection_autoheight: true,\n\t\tlayout: \"timeline\",\n\t\tname:\"matrix\",\n\t\tx:\"time\",\n\t\ty:\"time\",\n\t\tx_step:1,\n\t\tx_unit:\"hour\",\n\t\ty_unit:\"day\",\n\t\ty_step:1,\n\t\tx_start:0,\n\t\tx_size:24,\n\t\ty_start:0,\n\t\ty_size:\t7,\n\t\tx_date: scheduler.config.hour_date,\n\t\trender:\"cell\",\n\t\tdx:200,\n\t\tdy:50,\n\t\tevent_dy: scheduler.xy.bar_height,\n\t\tevent_min_dy: scheduler.xy.bar_height,\n\t\tresize_events: true,\n\t\tfit_events: true,\n\t\tfit_events_offset: 0,\n\t\tshow_unassigned: false,\n\t\tsecond_scale: false,\n\t\tround_position: false,\n\t\t_logic: function(render_name, y_unit, timeline) {\n\t\t\tvar res = {};\n\t\t\tif(scheduler.checkEvent(\"onBeforeSectionRender\")) {\n\t\t\t\tres = scheduler.callEvent(\"onBeforeSectionRender\", [render_name, y_unit, timeline]);\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\t});\n\tobj._original_x_start = obj.x_start;\n\n\t//first and last hours are applied only to day based timeline\n\tif (obj.x_unit != \"day\") obj.first_hour = obj.last_hour = 0;\n\t//correction for first and last hour\n\tobj._start_correction = obj.first_hour?obj.first_hour*60*60*1000:0;\n\tobj._end_correction = obj.last_hour?(24-obj.last_hour)*60*60*1000:0;\n\n\tif (scheduler.checkEvent(\"onTimelineCreated\")) {\n\t\tscheduler.callEvent(\"onTimelineCreated\", [obj]);\n\t}\n\n\teventable(obj);\n\tscheduler.attachEvent(\"onDestroy\", function() {\n\t\tobj.detachAllEvents();\n\t});\n\n\tvar old = scheduler.render_data;\n\tscheduler.render_data = function(evs, mode) {\n\t\tif (this._mode == obj.name) {\n\t\t\t//repaint single event, precision is not necessary\n\t\t\tif (mode && (!obj.show_unassigned || scheduler.getState().drag_id) && obj.render != \"cell\") {\n\t\t\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\t\t\tthis.clear_event(evs[i]);\n\t\t\t\t\tthis.render_timeline_event.call(this.matrix[this._mode], evs[i], true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tscheduler._renderMatrix.call(obj, true, true);\n\t\t\t}\n\t\t} else\n\t\t\treturn old.apply(this, arguments);\n\t};\n\n\tscheduler.matrix[obj.name]=obj;\n\tscheduler.templates[obj.name+\"_cell_value\"] = function(ar){ return ar?ar.length:\"\"; };\n\tscheduler.templates[obj.name+\"_cell_class\"] = function(arr){ return \"\"; };\n\t//scheduler.templates[obj.name+\"_scalex_class\"] GS-2314: _scalex_class template comes from scheduler.js\n\tscheduler.templates[obj.name+\"_second_scalex_class\"] = function(date){ return \"\"; };\n\tscheduler.templates[obj.name+\"_row_class\"] = function(section, timeline){\n\t\tif(timeline.folder_events_available && section.children){\n\t\t\t// 'folder' class was added to parent nodes of tree timelines in v5.0\n\t\t\t// pre 5.0 timelines didn't use this class if `folder_events_available` was enabled.\n\t\t\t// Move the classname into template in order not to change the behavior again and give the ability to remove this class by redefining the template\n\t\t\treturn \"folder\";\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tscheduler.templates[obj.name+\"_scaley_class\"] = function(section_id, section_label, section_options){ return \"\"; };\n\t//scheduler.templates[obj.name+\"_scale_label\"] = function(section_id, section_label, section_options){ return section_label; };\n\n\tvar defaultColumnWidth = 20;\n\tfunction configureColumns(columns, timeline){\n\t\tvar totalWidth = timeline.dx;\n\n\t\tvar allocatedWidth = 0;\n\t\tvar fixedSizeColumns = [];\n\t\tvar flexibleColumns = [];\n\n\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.width){\n\t\t\t\tallocatedWidth += column.width;\n\t\t\t\tcolumn.$width = column.width;\n\t\t\t\tfixedSizeColumns.push(column);\n\t\t\t}else{\n\t\t\t\tflexibleColumns.push(column);\n\t\t\t}\n\t\t});\n\n\t\tvar modifyContainerWidth = false;\n\n\t\tvar freeWidth = totalWidth - allocatedWidth;\n\n\t\tif(freeWidth < 0 || flexibleColumns.length === 0){\n\t\t\tmodifyContainerWidth = true;\n\t\t}\n\t\tvar columnsLeft = flexibleColumns.length;\n\t\tflexibleColumns.forEach(function(column){\n\t\t\tcolumn.$width = Math.max(Math.floor(freeWidth / columnsLeft), defaultColumnWidth);\n\t\t\tfreeWidth -= column.$width;\n\t\t\tallocatedWidth += column.$width;\n\t\t\tcolumnsLeft --;\n\t\t});\n\n\t\tif(modifyContainerWidth){\n\t\t\ttimeline.dx = allocatedWidth;\n\t\t}\n\t}\n\n\tobj.attachEvent(\"onBeforeRender\", function(){\n\t\tif(obj.columns && obj.columns.length){\n\t\t\tconfigureColumns(obj.columns, obj);\n\t\t}\n\t\treturn true;\n\t});\n\t\n\n\n\tobj.renderColumns = obj.renderColumns || scheduler.ext.timeline.renderColumns.bind(obj);\n\tobj.renderHeading = obj.renderHeading || scheduler.ext.timeline.renderHeading.bind(obj);\n\tobj.renderCells = obj.renderCells || scheduler.ext.timeline.renderCells.bind(obj);\n\n\tscheduler.templates[obj.name+\"_scale_label\"] = function(section_id, section_label, section_options){ \n\t\tif(obj.columns && obj.columns.length){\n\t\t\treturn obj.renderColumns(section_options);\n\t\t}else{\n\t\t\treturn section_label;\t\n\t\t}\n\t};\n\n\tscheduler.templates[obj.name + \"_scale_header\"] = function(timeline){\n\t\tif(obj.columns){\n\t\t\treturn timeline.renderHeading(timeline);\n\t\t}else{\n\t\t\treturn scheduler.locale.labels[obj.name + \"_scale_header\"] || \"\";\n\t\t}\n\t};\n\n\tscheduler.templates[obj.name+\"_tooltip\"] = function(a,b,e){ return e.text; };\n\tscheduler.templates[obj.name+\"_date\"] = function(datea, dateb){\n\t\tif ( (datea.getDay()==dateb.getDay() && dateb-datea < (24*60*60*1000)) ||\n\t\t\t+datea == +scheduler.date.date_part(new Date(dateb)) ||\n\t\t\t(+scheduler.date.add(datea, 1, \"day\") == +dateb && dateb.getHours() === 0 && dateb.getMinutes() === 0) )\n\t\t\treturn scheduler.templates.day_date(datea);\n\t\tif ( (datea.getDay() != dateb.getDay() && dateb-datea < (24*60*60*1000)) ) {\n\t\t\treturn scheduler.templates.day_date(datea)+\" &ndash; \"+scheduler.templates.day_date(dateb);\n\t\t}\n\t\treturn scheduler.templates.week_date(datea, dateb);\n\t};\n\n\tlet defautDateFormat = obj.x_date || scheduler.config.hour_date;\n\tlet defaultFormatter = null;\n\tscheduler.templates[obj.name + \"_scale_date\"] = function(date) {\n\t\tif (defautDateFormat !== (obj.x_date || scheduler.config.hour_date) || !defaultFormatter) {\n\t\t\tdefautDateFormat = obj.x_date || scheduler.config.hour_date;\n\t\t\tdefaultFormatter = scheduler.date.date_to_str(defautDateFormat );\n\t\t}\n\t\treturn defaultFormatter(date);\n\t};\n\tlet SecondScaleDateFormat = obj.second_scale && obj.second_scale.x_date ? obj.second_scale.x_date : scheduler.config.hour_date;\n\tlet defautSecondScaleFormatter = null;\n\tscheduler.templates[obj.name + \"_second_scale_date\"] = function(date) {\n\t\tif (SecondScaleDateFormat !== (obj.second_scale.x_date || scheduler.config.hour_date) || !defautSecondScaleFormatter) {\n\t\t\tSecondScaleDateFormat = (obj.second_scale && obj.second_scale.x_date)?obj.second_scale.x_date:scheduler.config.hour_date;\n\t\t\tdefautSecondScaleFormatter = scheduler.date.date_to_str(SecondScaleDateFormat );\n\t\t}\n\t\treturn defautSecondScaleFormatter(date);\n\t};\n\n\tscheduler.date[\"add_\" + obj.name + \"_private\"]= function(date, step){\n\t\tvar shift = step;\n\t\tvar unit = obj.x_unit;\n\n\t\tif(obj.x_unit == \"minute\" || obj.x_unit == \"hour\"){\n\n\t\t\tvar scroll_step = shift;\n\t\t\tif(obj.x_unit == \"hour\")\n\t\t\t\tscroll_step *= 60;\n\t\t\t// if scroll days\n\t\t\tif(!(scroll_step % (24 * 60))){\n\t\t\t\t// use timezone-safer day operations instead of hour and minutes which are affected by daylight saving time shifts\n\t\t\t\tshift = scroll_step / (24 * 60);\n\t\t\t\tunit = 'day';\n\t\t\t}\n\t\t}\n\n\t\treturn scheduler.date.add(date, shift, unit);\n\t};\n\n\tscheduler.date[\"add_\" + obj.name] = function(date, step, c) {\n\t\tvar resulting_date = scheduler.date[\"add_\" + obj.name + \"_private\"](date, (obj.x_length || obj.x_size) * obj.x_step * step);\n\n\t\tif (obj.x_unit == \"minute\" || obj.x_unit == \"hour\") {\n\t\t\tvar size = (obj.x_length || obj.x_size);\n\t\t\tvar converted_step = (obj.x_unit == \"hour\") ? obj.x_step*60 : obj.x_step;\n\t\t\tif((converted_step * size) % (24 * 60)){\n\t\t\t\t//if scroll hours within the day\n\t\t\t\tif ( +scheduler.date.date_part(new Date(date)) == +scheduler.date.date_part(new Date(resulting_date )) ) {\n\t\t\t\t\tobj.x_start += step*size;\n\t\t\t\t} else {\n\t\t\t\t\t// total steps starting from 0\n\t\t\t\t\tvar total_steps = ( (24 * 60) / (size * converted_step) ) - 1;\n\t\t\t\t\tvar steps_offset = Math.round(total_steps * size);\n\n\t\t\t\t\tif (step > 0) {\n\t\t\t\t\t\tobj.x_start = obj.x_start - steps_offset;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj.x_start = steps_offset + obj.x_start;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resulting_date;\n\t};\n\tscheduler.date[obj.name+\"_start\"] = function(date) {\n\t\tvar func = scheduler.date[obj.x_unit+\"_start\"] || scheduler.date.day_start;\n\t\tvar start_date = func.call(scheduler.date, date);\n\t\tvar start_offset = start_date.getTimezoneOffset();\n\t\tstart_date = scheduler.date.add(start_date, obj.x_step*obj.x_start, obj.x_unit);\n\t\tvar new_offset = start_date.getTimezoneOffset();\n\t\tif(start_offset != new_offset) {\n\t\t\tstart_date.setTime(start_date.getTime() + (new_offset - start_offset) * 60000);\n\t\t}\n\n\t\treturn start_date;\n\t};\n\n\tobj._smartRenderingEnabled = function(){\n\t\tvar viewPort = null;\n\t\tif(this.scrollable || this.smart_rendering){\n\t\t\tviewPort = scheduler._timeline_smart_render.getViewPort(this.scrollHelper, this._sch_height);\n\t\t}\n\t\n\t\tvar scrollableDataContainer = !!viewPort;\n\t\n\t\tvar smartRender;\n\t\tif(!this.scrollable){\n\t\t\t// smart rendering is disabled by default in non-scrollable timelines\n\t\t\tsmartRender = !!this.smart_rendering && scrollableDataContainer;\n\t\t}else{\n\t\t\t// and enabled by default in scrollable timelines\n\t\t\tif(this.smart_rendering === false){\n\t\t\t\tsmartRender = false;\n\t\t\t}else{\n\t\t\t\tsmartRender = !!scrollableDataContainer;\n\t\t\t}\n\t\t}\n\n\t\treturn !!smartRender;\n\t};\n\n\tobj.scrollTo = obj.scrollTo || scheduler.ext.timeline.scrollTo.bind(obj);\n\n\tobj.getScrollPosition = obj.getScrollPosition || scheduler.ext.timeline.getScrollPosition.bind(obj);\n\n\tobj.posFromDate = obj.posFromDate || scheduler.ext.timeline.posFromDate.bind(obj);\n\t\n\tobj.dateFromPos = obj.dateFromPos || scheduler.ext.timeline.dateFromPos.bind(obj);\n\n\tobj.sectionFromPos = obj.sectionFromPos || scheduler.ext.timeline.sectionFromPos.bind(obj);\n\n\tobj.resolvePosition = obj.resolvePosition || scheduler.ext.timeline.resolvePosition.bind(obj);\n\n\tobj.getSectionHeight = obj.getSectionHeight || scheduler.ext.timeline.getSectionHeight.bind(obj);\n\n\tobj.getSectionTop = obj.getSectionTop || scheduler.ext.timeline.getSectionTop.bind(obj);\n\n\tobj.getEventTop = obj.getEventTop || scheduler.ext.timeline.getEventTop.bind(obj);\n\n\tobj.getEventHeight = obj.getEventHeight || scheduler.ext.timeline.getEventHeight.bind(obj);\n\n\tobj.selectEvents = scheduler.bind(function (config) {\n\t\tvar sectionId = config.section,\n\t\t\tdate = config.date,\n\t\t\tselectSubsections = config.selectNested;\n\n\t\tif (date) {\n\t\t\treturn selectByDate(sectionId, date, selectSubsections, this);\n\t\t} else if(sectionId) {\n\t\t\treturn selectBySection(sectionId, selectSubsections, this);\n\t\t}\n\t}, obj);\n\n\tfunction selectBySection(sectionId, selectSubsections, timeline) {\n\t\tvar evs = scheduler._timeline_smart_render.getPreparedEvents(timeline);\n\t\tvar sectionIndex = timeline.order[sectionId];\n\t\tvar section = timeline.y_unit[sectionIndex];\n\t\tif (!section) {\n\t\t\treturn [];\n\t\t}\n\t\tvar subsections = [sectionId];\n\n\t\tif (selectSubsections) {\n\t\t\tgetChildrenIds(section, subsections);\n\t\t}\n\n\t\tvar sectionEvents = [];\n\t\tfor (var i = 0; i < subsections.length; i++){\n\t\t\tvar sectionIndex = timeline.order[subsections[i]];\n\t\t\tif (sectionIndex !== undefined && evs[sectionIndex]) {\n\t\t\t\tsectionEvents = sectionEvents.concat(evs[sectionIndex]);\n\t\t\t} else if (evs.undefined) {\n\t\t\t\tfor (var j = 0; j < evs.undefined.length; j++){\n\t\t\t\t\tvar event = evs.undefined[j];\n\t\t\t\t\tif (event[timeline.y_property] == subsections[i]) {\n\t\t\t\t\t\tsectionEvents.push(event);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn sectionEvents;\n\t}\n\n\tfunction selectByDate(sectionId, date, selectSubsections, timeline) {\n\t\tvar evs = scheduler._timeline_smart_render.getPreparedEvents(timeline);\n\n\t\tvar columnEvents = [];\n\t\tvar nestedEvents = [];\n\n\t\tvar sectionIndex = timeline.order[sectionId];\n\t\tvar section = timeline.y_unit[sectionIndex];\n\t\tif (!section) {\n\t\t\treturn [];\n\t\t}\n\t\tvar cellIndex = scheduler._get_date_index(timeline, date);\n\t\tif(evs.$matrix){\n\t\t\tcolumnEvents = evs.$matrix[sectionIndex][cellIndex]|| [];\n\t\t\tif(selectSubsections && evs.$matrix.$tree && evs.$matrix.$tree[section.key]){\n\t\t\t\tnestedEvents = evs.$matrix.$tree[section.key][cellIndex] || [];\n\t\t\t}\n\t\t\treturn columnEvents.concat(nestedEvents);\n\t\t}else{\n\t\t\treturn evs[sectionIndex] || [];\n\t\t}\n\t}\n\n\n\tfunction calculateUnits(from, to, timeline){\n\t\tvar scaleStartDate = scheduler.date[timeline.name + '_start'](new Date(from));\n\n\t\t// count the required value of timeline.x_size to display the required range.\n\t\tvar units = 0;\n\t\tvar currentDate = scaleStartDate;\n\t\tvar x_step = timeline.x_step;\n\t\tvar x_unit = timeline.x_unit;\n\t\twhile(currentDate < to){\n\t\t\tunits++;\n\t\t\tcurrentDate = scheduler.date.add(currentDate, x_step, x_unit);\n\t\t}\n\t\t// and modify timeline settings  with the calculated number of steps\n\t\treturn units;\n\t}\n\n\tobj.setRange = scheduler.bind(function(from, to){\n\t\t// calculating the start of the timeline - `startDate`, provided with arguments is to be rounded via date start function:\n\t\tvar scaleStartDate = scheduler.date[this.name + '_start'](new Date(from));\n\t\t// count the required value of timeline.x_size to display the required range.\n\t\tvar units = calculateUnits(from, to, this);\n\n\t\t// and modify timeline settings  with the calculated number of steps\n\t\tthis.x_size = units;\n\n\t\t// when settings are updated - tell scheduler to display a requested start date,\n\t\t// the time scale should contain range from startDate to endDate\n\t\tscheduler.setCurrentView(scaleStartDate, this.name);\n\t}, obj);\n\n\tscheduler.callEvent(\"onOptionsLoad\",[obj]);\n\n\t//init custom wrappers\n\tscheduler[obj.name+\"_view\"]=function(enable){\n\t\tif(enable){\n\t\t\tscheduler._set_timeline_dates(obj);\n\t\t\t//_renderMatrix will be called by render_data immediately after\n\t\t}else{\n\t\t\tscheduler._renderMatrix.apply(obj, arguments);\n\t\t}\n\t};\n\n\t//enable drag for non-cell modes\n\t//var temp_date = new Date();\n\t// var step_diff = (scheduler.date.add(temp_date, obj.x_step, obj.x_unit).valueOf() - temp_date.valueOf()); // \"minute\" + step in ms\n\tscheduler[\"mouse_\"+obj.name]=function(pos){ //mouse_coord handler\n\t\t//get event object\n\t\tvar ev = this._drag_event;\n\t\tif (this._drag_id){\n\t\t\tev = this.getEvent(this._drag_id);\n\t\t}\n\t\tif (obj.scrollable  && !pos.converted) {\n\t\t\tpos.converted = 1;\n\t\t\tpos.x += -obj.dx + obj._x_scroll;\n\t\t\tif (scheduler.config.rtl) {\n\t\t\t\tvar labelWrapperHeight = +scheduler.$container.querySelector(\".dhx_timeline_label_wrapper\").style.height.replace(\"px\", \"\");\n\t\t\t\tvar scalesHeight = obj._section_height[obj.y_unit.length] + obj._label_rows[obj._label_rows.length - 1].top;\n\t\t\t\tpos.x += scheduler.xy.scale_width;\n\t\t\t\tif (obj.scrollHelper.getMode() == obj.scrollHelper.modes.minMax && (scalesHeight > labelWrapperHeight || obj.render == \"tree\")) pos.x += getScrollbarwidth();\n\t\t\t}\n\t\t\tpos.y += obj._y_scroll;\n\t\t} else if (!scheduler.config.rtl){\n\t\t\tpos.x -= obj.dx;\n\t\t} else {\n\t\t\tpos.x -= (obj.dx-scheduler.xy.scale_width);\n\t\t}\n\t\tvar end_date = scheduler._timeline_drag_date(obj, pos.x);\n\n\t\tpos.x =  0;\n\t\tpos.force_redraw = true;\n\t\tpos.custom = true;\n\n\t\t// as we can simply be calling _locate_cell_timeline\n\t\tif (this._drag_mode == \"move\" && this._drag_id && this._drag_event) {\n\t\t\tvar ev = this.getEvent(this._drag_id);\n\t\t\tvar drag_event = this._drag_event;\n\n\t\t\tpos._ignores = (this._ignores_detected || obj._start_correction || obj._end_correction);\n\t\t\tif (drag_event._move_delta === undefined) {\n\t\t\t\tdrag_event._move_delta = (ev.start_date-end_date)/60000;\n\t\t\t\tif (this.config.preserve_length && pos._ignores){\n\t\t\t\t\tdrag_event._move_delta = this._get_real_event_length(ev.start_date,end_date, obj);\n\t\t\t\t\tdrag_event._event_length = this._get_real_event_length(ev.start_date,ev.end_date, obj);\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t//preserve visible size of event\n\t\t\tif (this.config.preserve_length && pos._ignores){\n\t\t\t\t//var ev_length = drag_event._event_length;//this._get_real_event_length(ev.start_date, ev.end_date, obj);\n\t\t\t\tvar current_back_shift = this._get_fictional_event_length(end_date, drag_event._move_delta, obj, true);\n\t\t\t\tend_date = new Date(end_date - current_back_shift);\n\t\t\t} else {\n\t\t\t\t// converting basically to start_date\n\t\t\t\tend_date = scheduler.date.add(end_date, drag_event._move_delta, \"minute\");\n\t\t\t}\n\t\t}\n\n\t\tif (this._drag_mode == \"resize\" && ev){\n\t\t\tif(this.config.timeline_swap_resize && this._drag_id){\n\t\t\t\tif(this._drag_from_start && +end_date> +ev.end_date){\n\t\t\t\t\tthis._drag_from_start = false;\n\t\t\t\t}else if(!this._drag_from_start && +end_date < +ev.start_date){\n\t\t\t\t\tthis._drag_from_start = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tpos.resize_from_start = this._drag_from_start;\n\t\t\tif(!this.config.timeline_swap_resize && this._drag_id){\n\t\t\t\tif(this._drag_from_start && +end_date >= +scheduler.date.add(ev.end_date, -scheduler.config.time_step, \"minute\")){\n\t\t\t\t\tend_date = scheduler.date.add(ev.end_date, -scheduler.config.time_step, \"minute\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (obj.round_position) {\n\t\t\tswitch(this._drag_mode) {\n\t\t\t\tcase \"move\":\n\t\t\t\t\tif (!this.config.preserve_length){\n\t\t\t\t\t\tend_date = scheduler._timeline_get_rounded_date.call(obj, end_date, false);\n\t\t\t\t\t\t// to preserve original start and end dates\n\t\t\t\t\t\tif(obj.x_unit == \"day\")//only make sense for whole-day cells\n\t\t\t\t\t\t\tpos.custom = false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"resize\":\n\t\t\t\t\tif(this._drag_event){\n\t\t\t\t\t\t// will save and use resize position only once\n\t\t\t\t\t\tif (this._drag_event._resize_from_start === null || this._drag_event._resize_from_start === undefined) {\n\t\t\t\t\t\t\tthis._drag_event._resize_from_start = pos.resize_from_start;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpos.resize_from_start = this._drag_event._resize_from_start;\n\t\t\t\t\t\tend_date = scheduler._timeline_get_rounded_date.call(obj, end_date, !this._drag_event._resize_from_start);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis._resolve_timeline_section(obj, pos);\n\t\tif(pos.section){\n\t\t\t// update draggable event with current section\n\t\t\tthis._update_timeline_section({pos:pos, event:this.getEvent(this._drag_id), view:obj});\n\t\t}\n\t\tpos.y = Math.round((this._correct_shift(end_date,1)-this._min_date)/(1000*60*this.config.time_step));\n\t\tpos.shift = this.config.time_step; //step_diff;\n\n\t\tif (obj.round_position && this._drag_mode == \"new-size\") {\n\t\t\tif(end_date <= this._drag_start){\n\t\t\t\tpos.shift = scheduler.date.add(this._drag_start, obj.x_step, obj.x_unit) - this._drag_start;\n\t\t\t}\n\t\t}\n\n\t\tvar pos_changed = this._is_pos_changed(this._drag_pos, pos);\n\t\tif(this._drag_pos && pos_changed){\n\t\t\tthis._drag_event._dhx_changed = true;\n\t\t}\n\t\tif(!pos_changed && !this._drag_pos.has_moved)\n\t\t\tpos.force_redraw = false;\n\n\t\treturn pos;\n\t};\n};\n\nscheduler._prepare_timeline_events = function(timeline){\n\tvar evs = [];\n\tif (timeline.render == \"cell\"){\n\t\tevs = scheduler._timeline_trace_events.call(timeline);\n\t} else {\n\n\t\tvar tevs = scheduler.get_visible_events();\n\t\tvar order = timeline.order;\n\n\t\tfor (var j = 0; j < tevs.length; j++) {\n\t\t\tvar tev = tevs[j];\n\t\t\tvar tev_section = tev[timeline.y_property];\n\t\t\tvar index = timeline.order[ tev_section ];\n\t\t//\tvar sectionObject = timeline.y_unit[index];\n\n\t\t\tif (timeline.show_unassigned && !tev_section) {\n\t\t\t\tfor (var key in order) {\n\t\t\t\t\tif (order.hasOwnProperty(key)) {\n\t\t\t\t\t\tindex = order[key];\n\t\t\t\t\t\tif (!evs[index]) evs[index] = [];\n\t\t\t\t\t\tvar clone = scheduler._lame_copy({}, tev);\n\t\t\t\t\t\tclone[timeline.y_property] = key;\n\t\t\t\t\t\tevs[index].push(clone);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// required as we could have index of not displayed section or \"undefined\"\n\t\t\t\tif (!evs[index]) evs[index] = [];\n\t\t\t\tevs[index].push(tev);\n\t\t\t}\n\t\t}\n\n\t\t//if(timeline.cell_template){\n\t\tevs.$matrix = scheduler._timeline_trace_events.call(timeline);\n\t\t//}\n\n\n\t}\n\treturn evs;\n};\n\nscheduler._populate_timeline_rendered = function(container){\n\tscheduler._rendered = [];\n\tconst dataContainer = container.querySelector(\".dhx_timeline_data_col\");\n\tconst rows = Array.prototype.slice.call(dataContainer.children);\n\n\tif (scheduler._timeline_smart_render && scheduler._timeline_smart_render._rendered_events_cache) {\n\t\tscheduler._timeline_smart_render._rendered_events_cache = [];\n\t}\n\trows.forEach(function(row){\n\t\tconst rowIndex = Number(row.getAttribute(\"data-section-index\"));\n\t\tconst rowChildren = Array.prototype.slice.call(row.children);\n\t\trowChildren.forEach(function(child){\n\t\t\tconst eventId = child.getAttribute(scheduler.config.event_attribute);\n\t\t\tif(eventId){\n\t\t\t\tscheduler._rendered.push(child);\n\t\t\t\tif (scheduler._timeline_smart_render && scheduler._timeline_smart_render._rendered_events_cache) {\n\t\t\t\t\t// save to cache\n\t\t\t\t\tconst smartRenderCache = scheduler._timeline_smart_render._rendered_events_cache;\n\t\t\t\t\tif (!smartRenderCache[rowIndex])\n\t\t\t\t\t\tsmartRenderCache[rowIndex] = [];\n\t\t\t\t\tsmartRenderCache[rowIndex].push(eventId);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\treturn;\n};\n\nscheduler.render_timeline_event = function(ev, attach){\n\tvar section = ev[this.y_property]; // section id\n\tif (!section)\n\t\treturn \"\"; // as we may await html\n\n\tvar sorder = ev._sorder;\n\n\tvar x_start = scheduler._timeline_getX(ev, false, this);\n\tvar x_end = scheduler._timeline_getX(ev, true, this);\n\n//\tvar event_height = scheduler._get_timeline_event_height(ev, this);\n\n\tvar event_height = scheduler._get_timeline_event_height ? scheduler._get_timeline_event_height(ev, this) : this.getEventHeight(ev);\n\tvar hb = event_height - 2;// takes into account css sizes (border/padding)\n\tif (!ev._inner && this.event_dy == \"full\") {\n\t\tvar coefficient = ev._count - sorder; //number that shows the difference between the current outer event and the maximum number of events\n\t\tif (coefficient == 0) {\n\t\t\tcoefficient = 1;\n\t\t}\n\t\thb=(hb+1)*(coefficient) - 2; // height for outer full events\n\t}\n\n\t///*hb += 3*/;// correction for border-box sizing\n\n\tvar y = scheduler._get_timeline_event_y ? scheduler._get_timeline_event_y(ev._sorder, event_height) : this.getEventTop(ev);\n\n\tvar section_height = event_height+y+2;\n\tif(!this._events_height[section] || (this._events_height[section] < section_height)){\n\t\tthis._events_height[section] = section_height;\n\t}\n\n\tvar cs = scheduler.templates.event_class(ev.start_date,ev.end_date,ev);\n\tcs = \"dhx_cal_event_line \"+(cs||\"\");\n\n\tif(scheduler.getState().select_id == ev.id){\n\t\tcs += \" dhx_cal_event_selected\";\n\t}\n\n\tif(ev._no_drag_move){\n\t\tcs += \" no_drag_move\";\n\t}\n\n\tvar bg_color = (ev.color?(\"--dhx-scheduler-event-background:\"+ev.color+\";\"):\"\");\n\tvar color = (ev.textColor?(\"--dhx-scheduler-event-color:\"+ev.textColor+\";\"):\"\");\n\tvar text = scheduler.templates.event_bar_text(ev.start_date,ev.end_date,ev);\n\n\tconst width = Math.max(0,x_end-x_start);\n\tif(width < 70) {\n\t\tcs += \" dhx_cal_event--small\";\n\t}\n\tif(width < 40) {\n\t\tcs += \" dhx_cal_event--xsmall\";\n\t}\n\n\tvar html=\"<div \"+scheduler._waiAria.eventBarAttrString(ev)+\" event_id='\"+ev.id+\"' \"+scheduler.config.event_attribute+\"='\"+ev.id+\"' class='\"+cs+\"' style='\"+bg_color+color+\"position:absolute; top:\"+y+\"px; height: \"+hb+\"px; \"+(scheduler.config.rtl ? \"right:\":\"left:\")+x_start+\"px; width:\"+width+\"px;\"+(ev._text_style||\"\")+\"'>\";\n\tif (scheduler.config.drag_resize && !scheduler.config.readonly) {\n\t\tvar dhx_event_resize = 'dhx_event_resize';\n\n\t\tvar hb_local = hb + 1; // corrected hb after changing table to divs, position of resize markers were rendered wrong\n\t\tvar resize_start = \"<div class='\"+dhx_event_resize+\" \"+dhx_event_resize+\"_start' style='height: \"+hb_local+\"px;'></div>\";\n\t\tvar resize_end = \"<div class='\"+dhx_event_resize+\" \"+dhx_event_resize+\"_end' style='height: \"+hb_local+\"px;'></div>\";\n\t\thtml += (!ev._no_resize_start ? resize_start : \"\") + (!ev._no_resize_end ? resize_end : \"\");\n\t}\n\thtml += (text+'</div>');\n\n\tif (!attach)\n\t\treturn html;\n\telse {\n\n\t\tvar d = document.createElement(\"div\");\n\t\td.innerHTML = html;\n\n\t\tvar parentSection = this._scales[section];\n\t\tif (parentSection){\n\t\t\tscheduler._rendered.push(d.firstChild);\n\t\t\tparentSection.appendChild(d.firstChild);\n\t\t}\n\t}\n};\n\nfunction getChildrenIds(root, result){\n\tresult = result || [];\n\tif(root.children){\n\t\tfor(var i = 0; i < root.children.length; i++){\n\t\t\tresult.push(root.children[i].key);\n\t\t\tgetChildrenIds(root.children[i], result);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction getSectionIndex(sectionId, timeline){\n\tvar sectionIndex = timeline.order[sectionId];\n\tif(sectionIndex === undefined){\n\t\t// row inside a collapsed branch\n\t\tsectionIndex = \"$_\" + sectionId;\n\t}\n\treturn sectionIndex;\n}\n\nfunction iterateSectionsTree(root, result){\n\tresult[root.key] = root;\n\tif(root.children){\n\t\tfor(var i = 0; i < root.children.length; i++){\n\t\t\titerateSectionsTree(root.children[i], result);\n\t\t}\n\t}\n}\n\nfunction buildSectionsHash(timeline){\n\tvar result = {};\n\tvar units = timeline.y_unit_original || timeline.y_unit;\n\tfor(var i = 0; i < units.length; i++){\n\t\titerateSectionsTree(units[i], result);\n\n\t}\n\treturn result;\n\n}\n\nfunction prepareCellMatrix(events, timeline){\n\tvar matrix =[];\n\tfor (var i=0; i < timeline.y_unit.length; i++){\n\t\tmatrix[i]=[];\n\t}\n\n\t//next code defines row for undefined key\n\t//most possible it is an artifact of incorrect configuration\n\tvar sectionIndex;\n\tif (!matrix[sectionIndex]){\n\t\tmatrix[sectionIndex]=[];\n\t}\n\n\tvar sectionsSearch = buildSectionsHash(timeline);\n\n\tvar fillFolders = timeline.render == \"tree\";\n\tif(fillFolders){\n\t\tmatrix.$tree = {};\n\t}\n\n\tfunction fillXArray(matrix, sectionIndex, xFrom, xTo){\n\t\tif(!matrix[sectionIndex]){\n\t\t\tmatrix[sectionIndex]=[];\n\t\t}\n\t\tfor(var x = xFrom; x <= xTo; x++){\n\t\t\tif (!matrix[sectionIndex][x]) matrix[sectionIndex][x]=[];\n\t\t\tmatrix[sectionIndex][x].push(event);\n\t\t}\n\t}\n\n\tvar sectionProperty = timeline.y_property;\n\tfor (var i=0; i < events.length; i++) {\n\t\tvar event = events[i];\n\t\tvar sectionKey = event[sectionProperty];\n\t\tsectionIndex = getSectionIndex(sectionKey, timeline);\n\t\tvar scaleIndexStart = scheduler._get_date_index(timeline, event.start_date);\n\t\tvar scaleIndexEnd = scheduler._get_date_index(timeline, event.end_date);\n\t\tif(event.end_date.valueOf() == timeline._trace_x[scaleIndexEnd].valueOf()){\n\t\t\tscaleIndexEnd -= 1;\n\t\t}\n\n\t\tif(!matrix[sectionIndex]){\n\t\t\tmatrix[sectionIndex]=[];\n\t\t}\n\n\t\tfillXArray(matrix, sectionIndex, scaleIndexStart, scaleIndexEnd);\n\n\t\tvar current = sectionsSearch[sectionKey];\n\t\tif(fillFolders && current && current.$parent){\n\t\t\tvar traversed = {};\n\t\t\t\n\t\t\twhile(current.$parent){\n\t\t\t\tif(traversed[current.key]) {\n\t\t\t\t\tthrow new Error(\"Invalid sections tree. Section `{key:'\" + current.key + \"', label:'\"+current.label+\"'}` \" +\n\t\t\t\t\t\"has the same key as one of its parents. Make sure all sections have unique keys\");\n\t\t\t\t}\n\t\t\t\ttraversed[current.key] = true;\n\n\t\t\t\tvar parent = sectionsSearch[current.$parent];\n\t\t\t\tfillXArray(matrix.$tree, parent.key, scaleIndexStart, scaleIndexEnd);\n\t\t\t\tcurrent = parent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn matrix;\n}\n\nvar escapeForAttribute = function(rawValue){\n\tvar value = String(rawValue);\n\treturn value.replace(/'/g, \"&apos;\").replace(/\"/g, '&quot;');\n};\n\nscheduler._timeline_trace_events = function trace_events(){\n\t//minimize event set\n\tvar evs = scheduler.get_visible_events();\n\tvar matrix = prepareCellMatrix(evs, this);\n\t//if(this.render == \"tree\"){\n\t//\tfillFolderEvents(matrix, this);\n\t//}\n\treturn matrix;\n};\n\n// function used to get X (both start and end) coordinates for timeline bar view\nscheduler._timeline_getX = function _getX(ev, isEndPoint, config) {\n\tvar x = 0;\n\tvar step = config._step;\n\tvar round_position = config.round_position;\n\n\tvar column_offset = 0;\n\tvar date = (isEndPoint) ? ev.end_date : ev.start_date;\n\t//GS-2775: set the step according to the days in month\n\tif(config.x_unit == \"month\"){\n\t\tconst daysInMonth = new Date(new Date(date).getFullYear(), new Date(date).getMonth()+1, 0).getDate();\n\t\tstep = (daysInMonth * 24*60*60*1000)/scheduler._cols[0];\n\t}\n\tif(date.valueOf()>scheduler._max_date.valueOf())\n\t\tdate = scheduler._max_date;\n\tvar delta = date - scheduler._min_date_timeline;\n\n\tif (delta > 0){\n\t\tvar index = scheduler._get_date_index(config, date);\n\t\tif (scheduler._ignores[index])\n\t\t\tround_position=true;\n\n\t\tfor (var i = 0; i < index; i++) {\n\t\t\tx += scheduler._cols[i];\n\t\t}\n\n\t\tvar column_date = scheduler._timeline_get_rounded_date.apply(config, [date, false]);\n\t\t//var column_date = scheduler.date.add(scheduler._min_date_timeline, scheduler.matrix[scheduler._mode].x_step*index, scheduler.matrix[scheduler._mode].x_unit);\n\t\tif (!round_position) {\n\t\t\tdelta = date - column_date;\n\t\t\tif (config.first_hour || config.last_hour){\n\t\t\t\tdelta = delta - config._start_correction;\n\t\t\t\tif (delta < 0) delta = 0;\n\t\t\t\tcolumn_offset = Math.round(delta/step);\n\t\t\t\tif (column_offset > scheduler._cols[index])\n\t\t\t\t\tcolumn_offset = scheduler._cols[index];\n\t\t\t} else {\n\t\t\t\tcolumn_offset = Math.round(delta/step);\n\t\t\t}\n\t\t} else {\n\t\t\tif (+date > +column_date && isEndPoint) {\n\t\t\t\tcolumn_offset = scheduler._cols[index];\n\t\t\t}\n\t\t}\n\t}\n\n\t//var borderBox = scheduler._border_box_events();\n\n\tif (isEndPoint) {\n\t\t// special handling for \"round\" dates which match columns and usual ones\n\t\tif (delta !== 0 && !round_position) {\n\t\t\tx += column_offset;\n\t\t} else {\n\t\t\tx += column_offset - 1;\n\t\t}\n\t} else {\n\t\tx += column_offset;\n\t}\n\treturn x;\n};\n\nscheduler._timeline_get_rounded_date = function get_rounded_date(date, isEndDate) {\n\tvar index = scheduler._get_date_index(this, date);\n\tvar rounded_date = this._trace_x[index];\n\tif (isEndDate && (+date != +this._trace_x[index])) {\n\t\trounded_date = (this._trace_x[index+1]) ? this._trace_x[index+1] : scheduler.date.add(this._trace_x[index], this.x_step, this.x_unit);\n\t}\n\treturn new Date(rounded_date);\n};\n\nscheduler._timeline_skip_ignored = function skip_ignored(evs){\n\n\tif(scheduler._ignores_detected){\n\t\tvar from,\n\t\t\tto,\n\t\t\tvisible,\n\t\t\tev;\n\n\t\tfor(var i = 0; i < evs.length; i++){\n\t\t\tev = evs[i];\n\t\t\tvisible = false;\n\t\t\tfrom = scheduler._get_date_index(this, ev.start_date);\n\t\t\tto = scheduler._get_date_index(this, ev.end_date);\n\n\t\t\twhile(from < to){\n\t\t\t\tif(!scheduler._ignores[from]){\n\t\t\t\t\tvisible = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tfrom++;\n\t\t\t}\n\t\t\tif(!visible && from == to && !scheduler._ignores[to]){\n\t\t\t\tif(+ev.end_date > +this._trace_x[to]){\n\t\t\t\t\tvisible = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!visible){\n\t\t\t\tevs.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// calculates timeline event sorder and update timeline section heights\nscheduler._timeline_calculate_event_positions = function(evs){\n\tif (evs && this.render != \"cell\"){\n\n\t\tscheduler._timeline_skip_ignored.call(this, evs);\n\n\t\tevs.sort(this.sort || function(a,b){\n\t\t\tif (a.start_date.valueOf() == b.start_date.valueOf())\n\t\t\t\treturn a.end_date.valueOf() > b.end_date.valueOf() ? -1 : 1;\n\t\t\treturn a.start_date > b.start_date ? 1 : -1;\n\t\t});\n\t\tvar stack=[];\n\t\tvar evs_length = evs.length;\n\t\tvar maxOrder = -1, maxOrderEvent = null;\n\n\t\t// prepare events for render\n\t\tfor (var j=0; j<evs_length; j++){\n\t\t\tvar ev = evs[j];\n\t\t\tev._inner = false;\n\n\t\t\tvar ev_start_date = (this.round_position) ? scheduler._timeline_get_rounded_date.apply(this, [ev.start_date, false]) : ev.start_date;\n\t\t//\tvar ev_end_date = (this.round_position) ? scheduler._timeline_get_rounded_date.apply(this, [ev.end_date, true]) : ev.end_date;\n\n\t\t\t// cutting stack from the last -> first event side\n\t\t\twhile (stack.length) {\n\t\t\t\tvar stack_ev = stack[stack.length-1];\n\t\t\t\tif (stack_ev.end_date.valueOf() <= ev_start_date.valueOf()) {\n\t\t\t\t\tstack.splice(stack.length-1,1);\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// cutting stack from the first -> last event side\n\t\t\tvar sorderSet = false;\n\t\t\tfor(var p=0; p<stack.length; p++){\n\t\t\t\tvar t_ev = stack[p];\n\t\t\t\tif(t_ev.end_date.valueOf() <= ev_start_date.valueOf()){\n\t\t\t\t\tsorderSet = true;\n\t\t\t\t\tev._sorder=t_ev._sorder;\n\t\t\t\t\tstack.splice(p,1);\n\t\t\t\t\tev._inner=true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (stack.length)\n\t\t\t\tstack[stack.length-1]._inner=true;\n\n\n\t\t\tif (!sorderSet) {\n\t\t\t\tif (stack.length) {\n\t\t\t\t\tif (stack.length <= stack[stack.length - 1]._sorder) {\n\t\t\t\t\t\tif (!stack[stack.length - 1]._sorder)\n\t\t\t\t\t\t\tev._sorder = 0;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor (var h = 0; h < stack.length; h++) {\n\t\t\t\t\t\t\t\tvar _is_sorder = false;\n\t\t\t\t\t\t\t\tfor (var t = 0; t < stack.length; t++) {\n\t\t\t\t\t\t\t\t\tif (stack[t]._sorder == h) {\n\t\t\t\t\t\t\t\t\t\t_is_sorder = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!_is_sorder) {\n\t\t\t\t\t\t\t\t\tev._sorder = h;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tev._inner = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar _max_sorder = stack[0]._sorder;\n\t\t\t\t\t\tfor (var w = 1; w < stack.length; w++)\n\t\t\t\t\t\t\tif (stack[w]._sorder > _max_sorder)\n\t\t\t\t\t\t\t\t_max_sorder = stack[w]._sorder;\n\t\t\t\t\t\tev._sorder = _max_sorder + 1;\n\t\t\t\t\t\tif(maxOrder < ev._sorder){\n\t\t\t\t\t\t\tmaxOrder = ev._sorder;\n\t\t\t\t\t\t\tmaxOrderEvent = ev;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tev._inner = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tev._sorder = 0;\n\t\t\t}\n\n\t\t\tstack.push(ev);\n\n\t\t\tif (stack.length>(stack.max_count||0)) {\n\t\t\t\tstack.max_count=stack.length;\n\t\t\t\tev._count=stack.length;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tev._count=(ev._count)?ev._count:1;\n\t\t\t}\n\t\t}\n\t\t// fix _count for every event\n\t\tfor (var m=0; m < evs.length; m++) {\n\t\t\tevs[m]._count = stack.max_count;\n\t\t\t// if multisection events are enabled - store a copy to be rendered in order to have access to dynamic _count/_index properties\n\t\t\tif(scheduler._register_copy){\n\t\t\t\tscheduler._register_copy(evs[m]);\n\t\t\t}\n\t\t}\n\n\t\tif(maxOrderEvent || evs[0]){\n\t\t\tscheduler.render_timeline_event.call(this, maxOrderEvent || evs[0], false);\n\t\t}\n\t}\n};\n\nscheduler._timeline_get_events_html = function get_events_html(evs) {\n\tvar html = \"\";\n\tif (evs && this.render != \"cell\"){\n\t\t// render events\n\t\tfor (var v=0; v<evs.length; v++) {\n\t\t\thtml+=scheduler.render_timeline_event.call(this, evs[v], false);\n\t\t}\n\t}\n\treturn html;\n};\n\nscheduler._timeline_update_events_html = function get_events_html(evs) {\n\tvar html = \"\";\n\tif (evs && this.render != \"cell\"){\n\n\t\tvar view = scheduler.getView();\n\t\t// cleanup previously rendered events\n\t\tvar ids = {};\n\t\tvar getEventKey = function(eventId, sectionProperty){\n\t\t\treturn eventId + '_' + sectionProperty;\n\t\t};\n\t\tevs.forEach(function(event){\n\t\t\tids[getEventKey(event.id, event[view.y_property])] = true;\n\t\t});\n\t\t/*scheduler._rendered.forEach(function(element){\n\t\t\tif(element.parentNode){\n\t\t\t\tvar sectionId = element.parentNode.getAttribute(\"data-section-id\");\n\t\t\t\tif(ids[getEventKey(element.getAttribute(scheduler.config.event_attribute), sectionId)]){\n\t\t\t\t\telement.parentNode.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\t\t});*/\n\n\t\t// render events\n\t\tfor (var v=0; v<evs.length; v++) {\n\t\t\thtml+=scheduler.render_timeline_event.call(this, evs[v], false);\n\t\t}\n\t}\n\treturn html;\n};\n\n\n// calculate general stats for main blocks (divs)\nscheduler._timeline_get_block_stats = function (d, view) {\n\tvar stats = {};\n\n\tview._sch_height = d.offsetHeight;\n\n\t// define height of dhx_timeline_data_wrapper and dhx_timeline_label_wrapper\n\tstats.style_data_wrapper = (scheduler.config.rtl ? \"padding-right:\": \"padding-left:\") + view.dx + \"px;\";\n\tstats.style_label_wrapper = \"width: \" + view.dx + \"px;\";\n\tif (view.scrollable) {\n\n\t\tstats.style_data_wrapper += \"height:\" + (view._sch_height - 1) + \"px;\";\n\t\tif (view.html_scroll_width === undefined) // define once for correct height of label_wrapper\n\t\t\tview.html_scroll_width = getScrollbarwidth();\n\t\tif(view._section_autowidth){\n\t\t\tview.custom_scroll_width = 0;\n\t\t}else{\n\t\t\tview.custom_scroll_width = view.html_scroll_width;\n\t\t}\n\n\t\tstats.style_label_wrapper  += \"height:\" + (view._sch_height - 1 - view.custom_scroll_width) + \"px;\";\n\t}else{\n\t\tstats.style_data_wrapper += \"height:\" + (view._sch_height - 1) + \"px;\";\n\t\tstats.style_label_wrapper  += \"height:\" + (view._sch_height - 1) + \"px;overflow:visible;\";\n\t}\n\treturn stats;\n};\n\nfunction sectionHasCustomHeight(section){\n\treturn (section.height && !isNaN(Number(section.height)));\n}\n\nfunction getRowsBaseHeight(view, defaultHeight){\n\tvar totalHeight = 0;\n\tvar rowsWithDefaultHeight = view.y_unit.length;\n\tvar totalCustomHeight = 0;\n\tview.y_unit.forEach(function(section){\n\t\tif(sectionHasCustomHeight(section)){\n\t\t\ttotalHeight += Number(section.height);\n\t\t\ttotalCustomHeight += Number(section.height);\n\t\t\trowsWithDefaultHeight --;\n\t\t}\n\t});\n\ttotalHeight += rowsWithDefaultHeight * defaultHeight;\n\treturn { totalHeight, rowsWithDefaultHeight, totalCustomHeight };\n}\n\n// calculate stats for current row\nscheduler._timeline_get_cur_row_stats = function(view, i) {\n\tvar section = view.y_unit[i];\n\tvar stats = view._logic(view.render, section, view); // obj with custom style\n\n\tscheduler._merge(stats, {\n\t\theight: view.dy\n\t});\n\n\t// autosize height, if we have a free space and the height of this section is not specified explicitly\n\tif (view.section_autoheight && !sectionHasCustomHeight(section)) {\n\t\tvar rowBaseSizes = getRowsBaseHeight(view, stats.height);\n\n\t\tvar heightWithoutScroll = view.scrollable ? view._sch_height - scheduler.xy.scroll_width : view._sch_height;\n\t\tif (rowBaseSizes.totalHeight < heightWithoutScroll && rowBaseSizes.rowsWithDefaultHeight > 0) {\n\t\t\tstats.height = Math.max(stats.height, Math.floor((heightWithoutScroll - 1 - rowBaseSizes.totalCustomHeight) / rowBaseSizes.rowsWithDefaultHeight));\n\t\t}\n\t}\n\n\tif(sectionHasCustomHeight(section)){\n\t\tstats.height = Number(section.height);\n\t}\n\n\tview._section_height[section.key] = stats.height;\n\n\tif(!stats.td_className){\n\t\tstats.td_className = \"dhx_matrix_scell\";\n\t\t\n\t\tvar cssTemplate = scheduler.templates[view.name+\"_scaley_class\"](view.y_unit[i].key, view.y_unit[i].label, view.y_unit[i]);\n\t\tif(cssTemplate){\n\t\t\tstats.td_className += \" \" + cssTemplate;\n\t\t}\n\t\t\n\t\tif(view.columns){\n\t\t\tstats.td_className += \" dhx_matrix_scell_columns\";\n\t\t}\n\t}\n\tif(!stats.td_content){\n\t\tstats.td_content = scheduler.templates[view.name+'_scale_label'](view.y_unit[i].key, view.y_unit[i].label, view.y_unit[i]);\n\t}\n\tscheduler._merge(stats, {\n\t\t//section 1\n\t\ttr_className: \"\",\n\t\tstyle_height: \"height:\"+stats.height+\"px;\",\n\t\tstyle_width: \"width:\"+(view.dx)+\"px;\",\n\t\t//section 2\n\t\tsumm_width: \"width:\"+view._summ+\"px;\",\n\t\t//section 3\n\t\ttable_className: ''\n\t});\n\n\treturn stats;\n};\n\nfunction getRowSizes(timeline, eventsBySections){\n\tvar rowStats = [];\n\tvar rowStatsByKey = {};\n\tvar totalRowsHeight = 0;\n\tfor (var rowIndex=0; rowIndex<timeline.y_unit.length; rowIndex++){\n\t\tscheduler._timeline_calculate_event_positions.call(timeline, eventsBySections[rowIndex]);\n\t\tvar stats = scheduler._timeline_get_cur_row_stats(timeline, rowIndex);\n\n\t\tstats = scheduler._timeline_get_fit_events_stats(timeline, rowIndex, stats);\n\t\tstats.top = totalRowsHeight;\n\t\trowStats.push(stats);\n\t\trowStatsByKey[timeline.y_unit[rowIndex].key] = stats;\n\n\t\ttotalRowsHeight += stats.height;\n\n\t}\n\n\treturn {\n\t\ttotalHeight: totalRowsHeight,\n\t\trowStats,\n\t\trowStatsByKey\n\t};\n}\n\n// calculate stats for fit_events\nscheduler._timeline_get_fit_events_stats = function(view, i, stats) {\n\tif(view.fit_events){\n\t\tvar rendered_height = view._events_height[view.y_unit[i].key]||0;\n\t\tif(view.fit_events_offset){\n\t\t\trendered_height += view.fit_events_offset;\n\t\t}\n\t\tstats.height = (rendered_height>stats.height)?rendered_height:stats.height;\n\t\tstats.style_height = \"height:\"+stats.height+\"px;\";\n\t\tstats.style_line_height = \"line-height:\" + (stats.height - 1) + \"px;\";\n\t\tview._section_height[view.y_unit[i].key] = stats.height;\n\t}\n\tstats.style_height = \"height:\"+stats.height+\"px;\";\n\tstats.style_line_height = \"line-height:\" + (stats.height - 1) + \"px;\";\n\tview._section_height[view.y_unit[i].key] = stats.height;\n\n\treturn stats;\n};\n\n/* scroll */\n// set scroll positions that were saved previously\nscheduler._timeline_set_scroll_pos = function(d, view) {\n\tvar dataWrapperDiv = d.querySelector('.dhx_timeline_data_wrapper');\n\tdataWrapperDiv.scrollTop = view._y_scroll || 0;\n\tview.scrollHelper.setScrollValue(dataWrapperDiv, view._x_scroll || 0);\n\tif (view.scrollHelper.getMode() != view.scrollHelper.modes.maxMin && dataWrapperDiv.scrollLeft == view._summ - dataWrapperDiv.offsetWidth + view.dx) dataWrapperDiv.scrollLeft += getScrollbarwidth();\n};\n\n// save current scroll positions\nscheduler._timeline_save_scroll_pos = function(view, scrollTop, scrollLeft, scrollWidth) {\n\tview._y_scroll = scrollTop || 0;\n\tview._x_scroll = scrollLeft || 0;\n};\n/* scroll end */\n\n/* get html section */\n// cell mode\n\nscheduler._timeline_get_html_for_cell_data_row = function(i, stats, top_pos, rowId, templateParams) {\n\tvar css = \"\";\n\tif(templateParams.template){\n\t\tcss += \" \" + (templateParams.template(templateParams.section, templateParams.view)||\"\");\n\t}\n\n\treturn \"<div class='dhx_timeline_data_row\"+css+\"' data-section-id='\"+escapeForAttribute(rowId)+\"' data-section-index='\" + i + \"' style='\" +\n\t\tstats.summ_width + stats.style_height + \" position:absolute; top:\" + (top_pos) + \"px;'>\";\n};\n\nscheduler._timeline_get_html_for_cell_ignores = function(stats) {\n\treturn '<div class=\"dhx_matrix_cell dhx_timeline_data_cell\" style=\"' + stats.style_height + stats.style_line_height + ';display:none\"></div>';\n};\n\nscheduler._timeline_get_html_for_cell = function(x_ind, y_ind, view, ev, stats, cellLeftPos) {\n\tvar cellDate = view._trace_x[x_ind];\n\tvar cellSection = view.y_unit[y_ind];\n\tvar cellWidth = scheduler._cols[x_ind];\n\n\tvar cellDateString = timelineCellDateAttribute(cellDate);\n\n\tvar content = scheduler.templates[view.name + \"_cell_value\"](ev, cellDate, cellSection);\n\treturn \"<div data-col-id='\"+x_ind+\"' data-col-date='\"+cellDateString+\"' class='dhx_matrix_cell dhx_timeline_data_cell \" +\n\t\tscheduler.templates[view.name + \"_cell_class\"](ev, cellDate, cellSection) +\n\t\t\"' style='width:\" + (cellWidth) + \"px;\" + (stats.style_height) + stats.style_line_height + (scheduler.config.rtl ? \" right:\" : \"  left:\") + (cellLeftPos) + \"px;'>\" +\n\t\t\"<div style='width:auto'>\" + content + \"</div></div>\";\n};\n\n// bar mode\nscheduler._timeline_get_html_for_bar_matrix_line = function(i, stats, top_pos, rowId) {\n\treturn \"<div style='\" + stats.summ_width + \" \" + stats.style_height + \" position:absolute; top:\"+top_pos+\"px;' data-section-id='\"+escapeForAttribute(rowId)+\"' data-section-index='\"+i+\"' class='dhx_matrix_line'>\";\n};\n\nscheduler._timeline_get_html_for_bar_data_row = function(stats, templateParams) {\n\tvar css = stats.table_className;\n\tif(templateParams.template){\n\t\tcss += \" \" + (templateParams.template(templateParams.section, templateParams.view)||\"\");\n\t}\n\treturn \"<div class='dhx_timeline_data_row \" + css + \"' style='\" + stats.summ_width + \" \" + stats.style_height + \"' >\";\n};\n\nscheduler._timeline_get_html_for_bar_ignores = function() {\n\treturn \"\";// \"<div></div>\";\n};\n\nfunction timelineCellDateAttribute (cellDate){\n\treturn scheduler._helpers.formatDate(cellDate);\n}\n\nscheduler._timeline_get_html_for_bar = function(x_ind, y_ind, view, ev, cellLeftPos, nestedEvents) {\n\n\tvar cellDate = timelineCellDateAttribute(view._trace_x[x_ind]);\n\tvar cellSection = view.y_unit[y_ind];\n\n\tvar content = \"\";\n\tif(view.cell_template){\n\t\tcontent = scheduler.templates[view.name + \"_cell_value\"](ev, view._trace_x[x_ind], cellSection, nestedEvents);\n\t}\n\n\tvar lineHeight = \"line-height:\" + view._section_height[cellSection.key] + \"px;\";\n\n\tlet cellInner = \"\";\n\tif(content){\n\t\tcellInner = \"<div style='width:auto; height:100%;position:relative;\"+lineHeight+\"'>\" + content + \"</div>\";\n\t}\n\n\treturn \"<div class='dhx_matrix_cell dhx_timeline_data_cell \" +\n\t\tscheduler.templates[view.name + \"_cell_class\"](ev, view._trace_x[x_ind], cellSection, nestedEvents) +\n\t\t\"' style='width:\" + (scheduler._cols[x_ind]) + \"px; \" + (scheduler.config.rtl ? \"right:\" : \"left:\") + (cellLeftPos) + \"px;'  data-col-id='\"+ x_ind +\"' data-col-date='\"+cellDate+\"' >\"+\n\t\tcellInner + \"</div>\";\n};\n/* get html section end */\n\n\n\nscheduler._timeline_render_scale_header = function(view, show){\n\tvar element = scheduler.$container.querySelector(\".dhx_timeline_scale_header\");\n\tif(element){\n\t\telement.remove();\n\t}\n\tif(!show){\n\t\treturn;\n\t}\n\n\telement = document.createElement(\"div\");\n\tvar headerAreaClass = \"dhx_timeline_scale_header\";\n\tif(view.second_scale){\n\t\theaderAreaClass += \" dhx_timeline_second_scale\";\n\t}\n\n\tvar headerHeight = scheduler.xy.scale_height;\n\telement.className = headerAreaClass;\n\telement.style.cssText = [\n\t\t\"width:\"  + (view.dx) + \"px\",\n\t\t\"height:\" + (headerHeight) + \"px\",\n\t\t\"line-height:\" + (headerHeight) + \"px\",\n\t\t\"top:\"    +  \"0px\",\n\t\t(scheduler.config.rtl ? \"right:0px\" : \"left:0px\")\n\t].join(\";\");\n\t//element.innerHTML = scheduler.locale.labels[view.name+\"_scale_header\"] || '';\n\telement.innerHTML = scheduler.templates[view.name + \"_scale_header\"](view);\n\n\tconst header = scheduler.$container.querySelector(\".dhx_cal_header\");\n\telement.style.top = `${header.offsetTop}px`;\n\telement.style.height = `${header.offsetHeight}px`;\n\tscheduler.$container.appendChild(element);\n\t// scheduler.$container.querySelector(\".dhx_cal_header\").appendChild(element);\n};\n\nfunction getScrollableContainer(root, view){\n\tvar dataWrapperDiv = root.querySelector('.dhx_timeline_data_wrapper');\n\tif (!view.scrollable){\n\t\tdataWrapperDiv = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t}\n\treturn dataWrapperDiv;\n}\n\nfunction getLabelContainer(root){\n\treturn root.querySelector('.dhx_timeline_label_wrapper');\n}\n\nfunction getColumnLabelContainer(){\n\treturn scheduler.$container.querySelector(\".dhx_cal_data .dhx_timeline_label_col\");\n}\n\n// define timeline scroll behavior and attach onscroll event\n// define timeline scroll behavior and attach onscroll event\nfunction initScroll(d, view, heights) {\n\n\tscheduler.attachEvent(\"onOptionsLoad\", function(){\n\t\tif(scheduler.getState().mode === view.name){\n\t\t\theights = scheduler._colsS.heights;\n\t\t}\n\t});\n\tscheduler.attachEvent(\"onViewChange\", function(){\n\t\tif(scheduler.getState().mode === view.name){\n\t\t\theights = scheduler._colsS.heights;\n\t\t}\n\t});\n\t\n\tview._is_ev_creating = false;\n\n\tvar dataWrapperDiv = getScrollableContainer(d, view);\n\t// attach scroll events for dhx_cal_header - horizontal\n\t// and dhx_timeline_label_col div - vertical\n\tvar header = scheduler._els[\"dhx_cal_header\"][0];\n\n\t// add ability to scroll over timeline_label_wrapper\n\tvar labelWrapperDiv = getLabelContainer(d);\n\tif(labelWrapperDiv){ // only for vertical scrolling\n\n\t\tif (!labelWrapperDiv.$eventsAttached) {\n\t\t\tlabelWrapperDiv.$eventsAttached = true;\n\t\t\tvar prevLabelAction = { pageX: 0, pageY: 0 };\n\t\t\tscheduler.event(labelWrapperDiv, \"touchstart\", function (e) {\n\t\t\t\tvar touch = e;\n\t\t\t\tif (e.touches) {\n\t\t\t\t\ttouch = e.touches[0];\n\t\t\t\t}\n\t\t\t\tprevLabelAction = { pageX: touch.pageX, pageY: touch.pageY };\n\t\t\t}, {passive: false});\n\t\t\tscheduler.event(labelWrapperDiv, \"touchmove\", function (e) {\n\t\t\t\tvar touch = e;\n\t\t\t\tif (e.touches) {\n\t\t\t\t\ttouch = e.touches[0];\n\t\t\t\t}\n\t\t\t\tvar dy = prevLabelAction.pageY - touch.pageY;\n\t\t\t\tprevLabelAction = { pageX: touch.pageX, pageY: touch.pageY };\n\t\t\t\tif (dy) {\n\t\t\t\t\tdataWrapperDiv.scrollTop += dy;\n\t\t\t\t}\n\t\t\t\tif (e && e.preventDefault)\n\t\t\t\t\te.preventDefault();\n\t\t\t}, {passive: false});\n\t\t}\n\t}\n\n\t// rerender view\n\tvar frameRequest;\n\t// GS-2681 non-scrollable timelines use .dhx_cal_data element as scrollable container\n\t// ensure events are not attached multiple times, but are attached for each view that needs it\n\tif (!dataWrapperDiv.$eventsAttached || !dataWrapperDiv.$eventsAttached[view.name]) {\n\t\tdataWrapperDiv.$eventsAttached = dataWrapperDiv.$eventsAttached || {};\n\t\tdataWrapperDiv.$eventsAttached[view.name] = true;\n\t\t//dataWrapperDiv.$eventsAttached = true;\n\n\t\tlet prevScrollLeft;\n\t\tlet prevScrollTop;\n\n\t\t//eslint-disable-next-line no-inner-declarations\n\t\tfunction onMouseWheel(e) {\n\t\t\tlet scrollPositionChanged = true;\n\t\t\tvar ff = scheduler.env.isFF;\n\t\t\tvar deltaX = ff ? (e.deltaX) : e.wheelDeltaX;\n\t\t\tvar deltaY = ff ? (e.deltaY) : e.wheelDelta;\n\t\n\t\t\tvar multiplier = -20;\n\t\t\tif (ff) {\n\t\t\t\tif (e.deltaMode !== 0) {\n\t\t\t\t\tmultiplier = -40;\n\t\t\t\t} else {\n\t\t\t\t\tmultiplier = -10;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar wheelSpeed = {x: 1, y: 1};\n\t\t\tvar wx = ff ? (deltaX * multiplier * wheelSpeed.x) : deltaX * 2 * wheelSpeed.x;\n\t\t\tvar wy = ff ? (deltaY * multiplier * wheelSpeed.y) : deltaY * wheelSpeed.y;\n\n\t\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\n\t\t\t\t\n\t\t\t\tvar dir  = wx/-40;\n\t\t\t\tdataWrapperDiv.scrollLeft += dir*30;\n\t\t\t\tif(dataWrapperDiv.scrollLeft === prevScrollLeft){\n\t\t\t\t\tscrollPositionChanged = false;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tvar dir  = wy/-40;\n\t\t\t\tif (typeof wy == \"undefined\")\n\t\t\t\t\tdir = e.detail;\n\t\n\t\t\t\tdataWrapperDiv.scrollTop += dir*30;\n\t\t\t\tif(dataWrapperDiv.scrollTop === prevScrollTop){\n\t\t\t\t\tscrollPositionChanged = false;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif(scrollPositionChanged){\n\t\t\t\te.preventDefault();\n\t\t\t\te.cancelBubble=true;\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t}\n\n\t\tscheduler.event(dataWrapperDiv, \"mousewheel\", onMouseWheel, {passive: false});\n\t\tscheduler.event(labelWrapperDiv, \"mousewheel\", onMouseWheel, {passive: false});\n\n\n\t\tconst dataWrapperDivOnScroll = function (e) {\n\t\t\tif(scheduler.getState().mode !== view.name){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\theights = scheduler._colsS.heights;\n\t\t\tvar element = getScrollableContainer(d, view);\n\t\t\te.preventDefault();\n\t\t\tvar scrollTop = element.scrollTop;\n\t\t\tvar scrollLeft = view.scrollHelper.getScrollValue(element);\n\t\t\tprevScrollLeft = scrollLeft;\n\t\t\tprevScrollTop = scrollTop;\n\t\t\tvar scrollWidth = view._summ - scheduler.$container.querySelector('.dhx_cal_data').offsetWidth + view.dx + view.custom_scroll_width;\n\t\t\tvar viewPort = scheduler._timeline_smart_render.getViewPort(view.scrollHelper, 0, scrollLeft, scrollTop);\n\t\t\tvar colLabelDiv = getColumnLabelContainer();\n\t\t\tif(view.scrollable){\n\t\t\t\tcolLabelDiv.style.top = (-scrollTop) + 'px';\n\n\n\t\t\t\tif (scheduler.config.rtl){\n\t\t\t\t\tvar labelWrapperHeight = +scheduler.$container.querySelector(\".dhx_timeline_label_wrapper\").style.height.replace(\"px\", \"\");\n\t\t\t\t\tvar scalesHeight = view._section_height[view.y_unit.length] + view._label_rows[view._label_rows.length - 1].top;\n\n\t\t\t\t\tif (view.scrollHelper.getMode() == view.scrollHelper.modes.minMax && (scalesHeight > labelWrapperHeight || view.render == \"tree\")) {\n\t\t\t\t\t\theader.style.right   = (-1 - scrollLeft - getScrollbarwidth()) + 'px';\n\t\t\t\t\t}\n\t\t\t\t\telse header.style.right   = (-1 - scrollLeft) + 'px';\n\n\t\t\t\t\theader.style.left   = 'unset';\n\t\t\t\t} else {\n\t\t\t\t\theader.style.left   = (-1 - scrollLeft) + 'px';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(view._smartRenderingEnabled()){\n\t\t\t\tif (scrollLeft !== view._x_scroll || view._is_ev_creating) {\n\t\t\t\t\tif (view.second_scale)\n\t\t\t\t\t\tscheduler._timeline_smart_render.updateHeader(view, viewPort, header.children[1]);\n\t\t\t\t\telse\n\t\t\t\t\t\tscheduler._timeline_smart_render.updateHeader(view, viewPort, header.children[0]);\n\t\t\t\t}\n\t\t\t\t//GS-2654: don't return if smart_rendering disabled\n\t\t\t\tif (view._options_changed || scrollTop !== view._y_scroll  || view._is_ev_creating) {\n\t\t\t\t\tscheduler._timeline_smart_render.updateLabels(view, viewPort, colLabelDiv);\n\t\t\t\t}\n\n\t\t\t\tview._is_ev_creating = false;\n\n\t\t\t\tscheduler._timeline_smart_render.updateGridCols(view, viewPort);\n\t\t\t\tscheduler._timeline_smart_render.updateGridRows(view, viewPort);\n\n\n\t\t\t\tvar asyncScroll = false;\n\t\t\t\tif (view.render != 'cell') {\n\t\t\t\t\t//asyncScroll = true;\n\t\t\t\t\t////if (frameRequest) {\n\t\t\t\t\t\tcancelAnimationFrame(frameRequest);\n\t\t\t\t\t//}\n\n\t\t\t\t\t//frameRequest = requestAnimationFrame(function () {\n\t\t\t\t\t\tif(view.name !== scheduler.getState().mode){\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscheduler._timeline_smart_render.updateEvents(view, viewPort);\n\t\t\t\t\t//\tframeRequest = 0;\n\t\t\t\t\t//\tview.callEvent(\"onScroll\", [view.scrollHelper.getScrollValue(dataWrapperDiv), dataWrapperDiv.scrollTop]);\n\t\t\t\t\t//});\n\t\t\t\t}\n\n\t\t\t\tvar dataColHeight = 0;\n\t\t\t\tview._scales = {};\n\t\t\t\tvar rows;\n\n\t\t\t\tif (view.render === 'cell')\n\t\t\t\t\trows = element.querySelectorAll('.dhx_timeline_data_col .dhx_timeline_data_row');\n\t\t\t\telse\n\t\t\t\t\trows = element.querySelectorAll('.dhx_timeline_data_col .dhx_matrix_line');\n\n\t\t\t\tvar render_stats = view._render_stats;\n\t\t\t\tfor (var i= 0, len = rows.length; i < len; i++) {\n\t\t\t\t\tvar unit_key = rows[i].getAttribute(\"data-section-id\");\n\t\t\t\t\tvar rowIndex = view.order[unit_key];\n\n\t\t\t\t\theights[rowIndex] = render_stats[rowIndex].height;\n\t\t\t\t\tview._scales[unit_key] = rows[i];\n\t\t\t\t}\n\n\t\t\t\tfor (var i= 0, len = heights.length; i < len; i++) {\n\t\t\t\t\tdataColHeight+= heights[i];\n\t\t\t\t}\n\n\t\t\t\tvar scrDiv = scheduler.$container.querySelector('.dhx_timeline_data_col');\n\t\t\t\tscrDiv.style.height = dataColHeight + \"px\";\n\t\t\t}\n\n\t\t//\tvar newTop = element.scrollTop;\n\t\t//\tvar newLeft = view.scrollHelper.getScrollValue(element);\n\n\t\t\tvar newTop = scrollTop;\n\t\t\tvar newLeft = scrollLeft;\n\n\t\t\t//var scrollWidth = view._summ - scheduler.$container.querySelector('.dhx_cal_data').offsetWidth + view.dx + view.custom_scroll_width;\n\t\t\tscheduler._timeline_save_scroll_pos(view, newTop, newLeft, scrollWidth);\n\t\t\tif (!asyncScroll) {\n\t\t\t\tview.callEvent(\"onScroll\", [newLeft, newTop]);\n\t\t\t}\n\t\t\t//scheduler._timeline_smart_render.updateEvents(view, viewPort);\n\t\t\t//\tframeRequest = 0;\n\t\t\t//view.callEvent(\"onScroll\", [view.scrollHelper.getScrollValue(dataWrapperDiv), dataWrapperDiv.scrollTop]);\n\n\t\t\tview._is_new_view = false;\n\t\t};\n\n\t\tscheduler.event(dataWrapperDiv, \"scroll\", dataWrapperDivOnScroll, {passive: false});\n\n\t\tvar prevAction = { pageX: 0, pageY: 0 };\n\t\tscheduler.event(dataWrapperDiv, \"touchstart\", function (e) {\n\t\t\tvar touch = e;\n\t\t\tif (e.touches) {\n\t\t\t\ttouch = e.touches[0];\n\t\t\t}\n\t\t\tprevAction = { pageX: touch.pageX, pageY: touch.pageY };\n\t\t}, {passive: false});\n\t\tscheduler.event(dataWrapperDiv, \"touchmove\", function (e) {\n\t\t\tvar touch = e;\n\t\t\tif (e.touches) {\n\t\t\t\ttouch = e.touches[0];\n\t\t\t}\n\t\t\tvar colLabelDiv = getColumnLabelContainer();\n\t\t\tvar dx = prevAction.pageX - touch.pageX;\n\t\t\tvar dy = prevAction.pageY - touch.pageY;\n\t\t\tprevAction = { pageX: touch.pageX, pageY: touch.pageY };\n\n\t\t\tif ((dx || dy) && !scheduler.getState().drag_id) {\n\t\t\t\t// add a threshold for secondary axis movement\n\t\t\t\tvar absoluteDx = Math.abs(dx);\n\t\t\t\tvar absoluteDy = Math.abs(dy);\n\t\t\t\tvar totalDistance = Math.sqrt(dx*dx + dy*dy);\n\t\t\t\tvar horizontalComponent = absoluteDx / totalDistance;//sin\n\t\t\t\tvar verticalComponent = absoluteDy / totalDistance;//cos\n\t\t\t\tif (horizontalComponent < 0.42) {// < 25 degree angle\n\t\t\t\t\tdx = 0;\n\t\t\t\t} else if (verticalComponent < 0.42) {// < 65 degree angle\n\t\t\t\t\tdy = 0;\n\t\t\t\t}\n\t\t\t\t// GS-2457: due to opposite direction in timeline with rtl mode, \n\t\t\t\t// need to change the direction of scrolling when rtl is enabled\n\t\t\t\tif (scheduler.config.rtl){\n\t\t\t\t\tdx = -dx;\n\t\t\t\t} \n\n\t\t\t\tview.scrollHelper.setScrollValue( dataWrapperDiv, view.scrollHelper.getScrollValue(dataWrapperDiv) + dx);\n\n\t\t\t\tdataWrapperDiv.scrollTop += dy;\n\n\t\t\t\tif (view.scrollable && dy) {\n\t\t\t\t\tcolLabelDiv.style.top = (-dataWrapperDiv.scrollTop) + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e && e.preventDefault)\n\t\t\t\te.preventDefault();\n\t\t\treturn false;\n\t\t}, {passive: false});\n\t}\n\n\tif (view.scroll_position && view._is_new_view) {\n\t\t// set scroll position once on scheduler init and save it to timeline obj\n\t\tview.scrollTo(view.scroll_position);\n\t} else {\n\t\tscheduler._timeline_set_scroll_pos(d, view);\n\t}\n\n\tview._is_ev_creating = true;\n}\n\n\n\nscheduler._timeline_y_scale = function y_scale(d) {\n\t// main code for _timeline_y_scale starts here\n\tvar block_stats = scheduler._timeline_get_block_stats(d, this);\n\n\t// _section_autowidth works for scrollable=true and defines is scroll or autosize (width) needed\n\tvar scrollableData = !this.scrollable ? '' : ' dhx_timeline_scrollable_data';\n\n\tvar html = \"<div class='dhx_timeline_table_wrapper'>\" ;\n\tvar labelWrapper  = \"<div class='dhx_timeline_label_wrapper' style='\"+block_stats.style_label_wrapper+\"'>\" +\n\t\t\"<div class='dhx_timeline_label_col'>\";\n\tvar dataWrapper = \"<div class='dhx_timeline_data_wrapper\" + scrollableData + \"' style='\"+block_stats.style_data_wrapper+\"'>\" +\n\t\t\"<div class='dhx_timeline_data_col'>\";\n\n\tif(scheduler._load_mode)\n\t\tscheduler._load();\n\n\tscheduler._timeline_smart_render.clearPreparedEventsCache(evs);\n\tvar evs = scheduler._timeline_smart_render.getPreparedEvents(this);\n\tscheduler._timeline_smart_render.cachePreparedEvents(evs);\n\n\tvar summ = 0;\n\tfor (var i=0; i < scheduler._cols.length; i++)\n\t\tsumm+=scheduler._cols[i];\n\n\tvar step = new Date();\n\tvar realcount = scheduler._cols.length-scheduler._ignores_detected;\n\tstep = ((scheduler.date.add(step, this.x_step*realcount, this.x_unit)-step)-(this._start_correction + this._end_correction)*realcount)/summ;\n\tthis._step = step;\n\tthis._summ = summ;\n\n\tvar heights = scheduler._colsS.heights=[];\n\tvar render_stats = [];\n\n\tthis._render_stats = render_stats;\n\tthis._events_height = {};\n\tthis._section_height = {};\n\tthis._label_rows = [];\n\n\tvar skipRenderCells = false;\n\t//var cellTopPos = 0;\n\tvar viewPort = null;\n\tif(this._smartRenderingEnabled()){\n\t\tviewPort = scheduler._timeline_smart_render.getViewPort(this.scrollHelper, this._sch_height);\n\t}\n\n\tscheduler._timeline_smart_render._rendered_labels_cache = [];\n\tscheduler._timeline_smart_render._rendered_events_cache = [];\n\n\tvar scrollableDataContainer = !!viewPort;\n\n\tvar smartRender = this._smartRenderingEnabled();\n\n\tvar sectionsInfo = getRowSizes(this, evs);\n\n\t// if sections were changed viewport should be shifted upwards\n\tif(viewPort && sectionsInfo.totalHeight < viewPort.scrollTop){\n\t\tviewPort.scrollTop = Math.max(0, sectionsInfo.totalHeight - viewPort.height);\n\t}\n\n\tthis._rowStats = sectionsInfo.rowStatsByKey;\n\n\tfor (var rowIndex=0; rowIndex<this.y_unit.length; rowIndex++){\n\t\tvar stats = sectionsInfo.rowStats[rowIndex];\n\t\tvar row = this.y_unit[rowIndex];\n\t\tvar cellTopPos = stats.top;\n\n\t\t// calculate height of all events but will render below only events in viewport\n\n\t\t// now section 1 = labelWrapper, section 2 = dataWrapper\n\t\tvar labelRow = \"<div class='dhx_timeline_label_row \"+stats.tr_className+\"' style='top:\"+cellTopPos+\"px;\"+stats.style_height + stats.style_line_height+\"'\"+\"data-row-index='\"+rowIndex+\"'\" +\n\t\t\t\" data-row-id='\"+escapeForAttribute(row.key)+\"'>\" +\n\t\t\t\"<div class='\"+stats.td_className+\"' style='\"+stats.style_width+\" height:\"+stats.height+\"px;' \"+scheduler._waiAria.label(stats.td_content)+\">\"+stats.td_content+\"</div></div>\";\n\n\t\tif (smartRender)\n\t\t\tthis._label_rows.push({div: labelRow, top: cellTopPos, section: row});\n\n\t\t// check vertical direction\n\t\tif (smartRender){\n\t\t\tif (!scheduler._timeline_smart_render.isInYViewPort({top: cellTopPos, bottom: cellTopPos + stats.height}, viewPort)) {\n\t\t\t\tskipRenderCells = true;\n\t\t\t}\n\t\t}\n\t//\tcellTopPos += stats.height;\n\n\t\tif (skipRenderCells) {\n\t\t\tskipRenderCells = false;\n\t\t} else {\n\t\t\t// add label row if wasn't skipped render cells\n\t\t\tlabelWrapper += labelRow;\n\n\t\t\t// save label to cache on first time render\n\t\t\tif (smartRender){\n\t\t\t\tscheduler._timeline_smart_render._rendered_labels_cache.push(rowIndex);\n\t\t\t}\n\n\t\t\tvar template = scheduler.templates[this.name + \"_row_class\"];\n\t\t\tvar templateParams = { view: this, section: row, template: template};\n\n\t\t\t// check horizontal direction\n\t\t\tvar cellLeftPos = 0;\n\t\t\tif (this.render == \"cell\") {\n\t\t\t\tdataWrapper +=scheduler._timeline_get_html_for_cell_data_row(rowIndex, stats, stats.top, row.key, templateParams);\n\t\t\t\tfor (var colIndex = 0; colIndex < scheduler._cols.length; colIndex++) {\n\t\t\t\t\tif (scheduler._ignores[colIndex] && !smartRender)\n\t\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_cell_ignores(stats);\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (smartRender && scrollableDataContainer) {\n\t\t\t\t\t\t\tif (scheduler._timeline_smart_render.isInXViewPort({left: cellLeftPos, right: cellLeftPos + scheduler._cols[colIndex]}, viewPort)) {\n\t\t\t\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_cell(colIndex, rowIndex, this, evs[rowIndex][colIndex], stats, cellLeftPos);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_cell(colIndex, rowIndex, this, evs[rowIndex][colIndex], stats, cellLeftPos);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcellLeftPos += scheduler._cols[colIndex];\n\n\t\t\t\t}\n\t\t\t\tdataWrapper += '</div>';\n\t\t\t} else {\n\t\t\t\t//section 2\n\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar_matrix_line(rowIndex, stats, stats.top, row.key);\n\n\t\t\t\tvar printableEvents = evs[rowIndex];\n\t\t\t\t// get events only in viewport\n\t\t\t\tif (smartRender && scrollableDataContainer) {\n\t\t\t\t\tprintableEvents = scheduler._timeline_smart_render.getVisibleEventsForRow(this, viewPort, evs, rowIndex);\n\n\t\t\t\t}\n\t\t\t\tvar events_html = scheduler._timeline_get_events_html.call(this, printableEvents);\n\n\n\t\t\t\t// adding events\n\t\t\t\tdataWrapper += events_html;\n\n\t\t\t\t// section 3\n\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar_data_row(stats, templateParams);\n\n\t\t\t\tfor (var colIndex = 0; colIndex < scheduler._cols.length; colIndex++) {\n\t\t\t\t\tif (scheduler._ignores[colIndex])\n\t\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar_ignores();\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (smartRender && scrollableDataContainer) {\n\t\t\t\t\t\t\tif (scheduler._timeline_smart_render.isInXViewPort({left: cellLeftPos, right: cellLeftPos + scheduler._cols[colIndex]}, viewPort)) {\n\t\t\t\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar(colIndex, rowIndex, this, evs[rowIndex], cellLeftPos);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar(colIndex, rowIndex, this, evs[rowIndex], cellLeftPos);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcellLeftPos += scheduler._cols[colIndex];\n\t\t\t\t}\n\t\t\t\tdataWrapper += \"</div></div>\";\n\t\t\t}\n\t\t}\n\t\tstats.sectionKey = row.key;\n\t\trender_stats.push(stats);\n\t}\n\n\thtml += labelWrapper  + \"</div></div>\";\n\thtml += dataWrapper + \"</div></div>\";\n\thtml += \"</div>\";\n\n\tthis._matrix = evs;\n\n\t//d.scrollTop = 0; //fix flickering in FF;  disabled as it was impossible to create dnd event if scroll was used (window jumped to the top)\n\td.innerHTML = html;\n\tif (smartRender) {\n\t\tif (scheduler._timeline_smart_render) {\n\t\t\tscheduler._timeline_smart_render._rendered_events_cache = [];\n\t\t}\n\t}\n\tscheduler._populate_timeline_rendered(d);\n\t// set height for absolute positioned scrollable div\n\n\tconst sectionRows = d.querySelectorAll(\"[data-section-id]\");\n\tconst divBySectionId = {};\n\tsectionRows.forEach(function(row){\n\t\tdivBySectionId[row.getAttribute(\"data-section-id\")] = row;\n\t});\n\tthis._divBySectionId = divBySectionId;\n\tif (smartRender) {\n\t\tvar scrDiv = scheduler.$container.querySelector('.dhx_timeline_data_col');\n\t\tscrDiv.style.height = sectionsInfo.totalHeight + \"px\";\n\t}\n\n\tthis._scales = {};\n\n\tfor (var i= 0, len = render_stats.length; i < len; i++) {\n\t\theights.push(render_stats[i].height);\n\n\t\tvar unit_key = render_stats[i].sectionKey;\n\t\tscheduler._timeline_finalize_section_add(this, unit_key, this._divBySectionId[unit_key]);\n\t}\n\n\n\tif (smartRender || this.scrollable){\n\t\tinitScroll(d, this, heights);\n\t}\n};\n\nscheduler._timeline_finalize_section_add = function(timeline, sectionKey, sectionDiv){\n\tif(sectionDiv){\n\t\ttimeline._scales[sectionKey] = sectionDiv;\n\t\tscheduler.callEvent(\"onScaleAdd\", [sectionDiv, sectionKey]);\n\t}\n};\n\nscheduler.attachEvent(\"onBeforeViewChange\", function (old_mode,old_date,mode,date) {\n\t// set scroll position for previous when dates are switched (not modes)\n\tif (scheduler.matrix[mode]) {\n\t\tvar view = scheduler.matrix[mode];\n\n\t\tif (view.scrollable || view.smart_rendering) {\n\t\t\tif (view.render == \"tree\") {\n\t\t\t\tif (old_mode === mode && old_date === date) {\n\t\t\t\t\t// do not set scroll pos to 0 if it is click on folder\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(( old_mode !== mode || +old_date !== +date) && scheduler.$container.querySelector('.dhx_timeline_scrollable_data')){\n\t\t\t\tview._x_scroll = view._y_scroll = 0;\n\n\t\t\t\tif (scheduler.$container.querySelector('.dhx_timeline_scrollable_data')) {\n\t\t\t\t\tscheduler._timeline_set_scroll_pos(scheduler._els[\"dhx_cal_data\"][0], view);\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t}\n\t}\n\n\treturn true;\n});\n\nscheduler._timeline_x_dates = function x_dates(preserve){\n\tvar start = scheduler._min_date;\n\tvar end = scheduler._max_date;\n\n\tscheduler._process_ignores(start, this.x_size, this.x_unit, this.x_step, preserve);\n\t// var size = this.x_size + (preserve ? scheduler._ignores_detected : 0);\n\n\tif(scheduler.date[this.x_unit + \"_start\"]){\n\t\tstart = scheduler.date[this.x_unit + \"_start\"](start);\n\t}\n\tvar display_count = 0,\n\t\ttotal_count = 0;\n\twhile(+start < +end){\n\t\t// dates calculation\n\t\t\n\t\tthis._trace_x[total_count]=new Date(start);\n\t\tif(this.x_unit == \"month\" && scheduler.date[this.x_unit + \"_start\"]){\n\t\t\tstart = scheduler.date[this.x_unit + \"_start\"](new Date(start));\n\t\t}\n\t\tstart = scheduler.date.add(start, this.x_step, this.x_unit);\n\t\tif(scheduler.date[this.x_unit + \"_start\"]){\n\t\t\tstart = scheduler.date[this.x_unit + \"_start\"](start);\n\t\t}\n\n\t\tif(!scheduler._ignores[total_count])\n\t\t\tdisplay_count++;\n\t\ttotal_count++;\n\n\t\tif(preserve){\n\t\t\tif(display_count <  this.x_size && !(+start < +end)){\n\t\t\t\tend = scheduler.date[\"add_\" + this.name + \"_private\"](end, (this.x_length || this.x_size)*this.x_step);\n\t\t\t}else if(display_count >=  this.x_size){\n\t\t\t\tscheduler._max_date = start;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn {total: total_count, displayed: display_count};\n};\n\nscheduler._timeline_x_scale = function x_scale(h){\n\tvar timelineContainerWidth = scheduler._x - this.dx - scheduler.xy.scroll_width; //border delta, whole width\n\tvar start = scheduler._min_date;\n\t//var end = scheduler._max_date;\n\t\t\n\tvar current_sh = scheduler.xy.scale_height;\n\tvar original_sh = this._header_resized||scheduler.xy.scale_height;\n\tscheduler._cols=[];\t//store for data section, each column width // scale.width\n\tscheduler._colsS={height:0}; // heights of the y sections\n\tthis._trace_x =[]; // list of dates per cells  // scale.trace_x\n\n\n\tvar preserve = scheduler.config.preserve_scale_length;\n\tvar dates = scheduler._timeline_x_dates.call(this, preserve);\n\n\n\t// calculate width for scrollable, define is autowidth needed or not\n\tif (this.scrollable && this.column_width > 0) {\n\n\t\tvar summ_fixed = this.column_width * dates.displayed;\n\n\t\tif (summ_fixed > timelineContainerWidth) {\n\t\t\ttimelineContainerWidth = summ_fixed;\n\t\t\tthis._section_autowidth = false; // default === true\n\t\t}\n\t}\n\n\tvar left = [this.dx]; // left margins, initial left margin\n\tvar header = scheduler._els['dhx_cal_header'][0];\n\theader.style.width = (left[0]+timelineContainerWidth + 1)+'px';\n\n\tvar start = scheduler._min_date_timeline = scheduler._min_date;\n\n\n\tvar realcount = dates.displayed;\n\tvar size = dates.total;\n\n\t// position calculation\n\n\tfor (var k=0; k<size; k++){\n\n\t\tif (scheduler._ignores[k]){\n\t\t\tscheduler._cols[k]=0;\n\t\t\trealcount++;\n\t\t} else {\n\t\t\tscheduler._cols[k]=Math.floor(timelineContainerWidth/(realcount-k));\n\t\t}\n\n\t\ttimelineContainerWidth -= scheduler._cols[k];\n\t\tleft[k+1] = left[k] + scheduler._cols[k];\n\t}\n\th.innerHTML = \"<div></div>\";\n\n\tif(this.second_scale){\n\t\t// additional calculations\n\t\tvar mode = this.second_scale.x_unit;\n\t\tvar control_dates = [this._trace_x[0]]; // first control date\n\t\tvar second_cols = []; // each column width of the secondary row\n\t\tvar second_left = [this.dx, this.dx]; // left margins of the secondary row\n\t\tvar t_index = 0; // temp index\n\t\tfor (var l = 0; l < this._trace_x.length; l++) {\n\t\t\tvar date = this._trace_x[l];\n\t\t\tvar res = scheduler._timeline_is_new_interval(mode, date, control_dates[t_index]);\n\n\t\t\tif(res) { // new interval\n\t\t\t\t++t_index; // starting new interval\n\t\t\t\tcontrol_dates[t_index] = date; // updating control date as we moved to the new interval\n\t\t\t\tsecond_left[t_index+1] = second_left[t_index];\n\t\t\t}\n\t\t\tvar t = t_index+1;\n\t\t\tsecond_cols[t_index] = scheduler._cols[l] + (second_cols[t_index]||0);\n\t\t\tsecond_left[t] += scheduler._cols[l];\n\t\t}\n\n\t\th.innerHTML = \"<div></div><div></div>\";\n\t\tvar top = h.firstChild;\n\t\ttop.style.height = (original_sh)+'px'; // actually bottom header takes 21px\n\t\tvar bottom = h.lastChild;\n\t\tbottom.style.position = \"relative\";\n\t\tbottom.className = \"dhx_bottom_scale_container\";\n\t\tfor (var m = 0; m < control_dates.length; m++) {\n\t\t\tvar tdate = control_dates[m];\n\t\t\tvar scs = scheduler.templates[this.name+\"_second_scalex_class\"](tdate);\n\t\t\tvar head = document.createElement(\"div\"); \n\t\t\thead.className=\"dhx_scale_bar dhx_second_scale_bar\"+((scs)?(\" \"+scs):\"\");\n\t\t\tscheduler.set_xy(head, second_cols[m], original_sh, second_left[m], 0);\n\t\t\thead.innerHTML = scheduler.templates[this.name+\"_second_scale_date\"](tdate);\n\t\t\ttop.appendChild(head);\n\t\t}\n\t}\n\n\tscheduler.xy.scale_height = original_sh; // fix for _render_x_header which uses current scale_height value\n\th = h.lastChild; // h - original scale\n\n\tthis._h_cols = {};\n\n\tfor (var i=0; i<this._trace_x.length; i++){\n\t\tif (scheduler._ignores[i])\n\t\t\tcontinue;\n\n\t\tstart = this._trace_x[i];\n\t\tscheduler._render_x_header(i, left[i], start, h);\n\n\t\th.lastChild.setAttribute('data-col-id', i);\n\t\th.lastChild.setAttribute('data-col-date', timelineCellDateAttribute(start));\n\n\t\t// need to copy lastChild for IE11\n\t\tvar clnLastChild = h.lastChild.cloneNode(true);\n\n\t\t// get cache of header all elements\n\t\tthis._h_cols[i] = {div: clnLastChild, left: left[i]};\n\t}\n\n\tscheduler.xy.scale_height = current_sh; // restoring current value\n\n\tvar trace = this._trace_x;\n\tif(h.$_clickEventsAttached){\n\t\treturn;\n\t}\n\t\n\th.$_clickEventsAttached = true;\n\tscheduler.event(h, \"click\", function(e){\n\t\tvar pos = scheduler._timeline_locate_hcell(e);\n\t\tif (pos)\n\t\t\tscheduler.callEvent(\"onXScaleClick\",[pos.x, trace[pos.x], e]);\n\t});\n\tscheduler.event(h, \"dblclick\", function(e){\n\t\tvar pos = scheduler._timeline_locate_hcell(e);\n\t\tif (pos)\n\t\t\tscheduler.callEvent(\"onXScaleDblClick\",[pos.x, trace[pos.x], e]);\n\t});\n};\n\nscheduler._timeline_is_new_interval = function is_new_interval(mode, date, control_date){ // mode, date to check, control_date for which period should be checked\n\tswitch(mode) {\n\t\tcase \"hour\":\n\t\t\treturn ((date.getHours() != control_date.getHours()) || scheduler._timeline_is_new_interval(\"day\", date, control_date));\n\t\tcase \"day\":\n\t\t\treturn !(date.getDate() == control_date.getDate() && date.getMonth() == control_date.getMonth() && date.getFullYear() == control_date.getFullYear());\n\t\tcase \"week\":\n\t\t\treturn !(scheduler.date.week_start(new Date(date)).valueOf() == scheduler.date.week_start(new Date(control_date)).valueOf());\n\t\t\t//return !(scheduler.date.getISOWeek(date) == scheduler.date.getISOWeek(control_date) && date.getFullYear() == control_date.getFullYear());\n\t\tcase \"month\":\n\t\t\treturn !(date.getMonth() == control_date.getMonth() && date.getFullYear() == control_date.getFullYear());\n\t\tcase \"year\":\n\t\t\treturn !(date.getFullYear() == control_date.getFullYear());\n\t\tdefault:\n\t\t\treturn false; // same interval\n\t}\n};\n\nscheduler._timeline_reset_scale_height = function reset_scale_height(mode){\n\tif (this._header_resized && (!mode || this.second_scale)) {\n\t\tscheduler.xy.scale_height /= 2;\n\t\tthis._header_resized = false;\n\t\tvar header = scheduler._els['dhx_cal_header'][0];\n\t\theader.className = header.className.replace(/ dhx_second_cal_header/gi,\"\");\n\t}\n};\n\nscheduler._timeline_set_full_view = function set_full_view(mode){\n\tscheduler._timeline_reset_scale_height.call(this, mode);\n\n\tif (mode){\n\t\tif (this.second_scale && !this._header_resized) {\n\t\t\tthis._header_resized = scheduler.xy.scale_height;\n\t\t\tscheduler.xy.scale_height *= 2;\n\t\t\tscheduler._els['dhx_cal_header'][0].className += \" dhx_second_cal_header\";\n\t\t}\n\n\t\tscheduler.set_sizes();\n\t\tscheduler._init_matrix_tooltip();\n\n\t\t//we need to have day-rounded scales for navigation\n\t\t//in same time, during rendering scales may be shifted\n\t\tvar temp = scheduler._min_date;\n\t\tscheduler._timeline_x_scale.call(this,scheduler._els[\"dhx_cal_header\"][0]);\n\n\t\t// get header cells that are only in viewport\n\t\tif (scheduler.$container.querySelector('.dhx_timeline_scrollable_data') && this._smartRenderingEnabled()) {\n\t\t\tvar viewPort  = scheduler._timeline_smart_render.getViewPort(this.scrollHelper);\n\t\t\tvar curHeader = scheduler._timeline_smart_render.getVisibleHeader(this, viewPort);\n\t\t\tif (curHeader) {\n\t\t\t\tif (this.second_scale)\n\t\t\t\t\tscheduler._els.dhx_cal_header[0].children[1].innerHTML = curHeader;\n\t\t\t\telse\n\t\t\t\t\tscheduler._els.dhx_cal_header[0].children[0].innerHTML = curHeader;\n\t\t\t}\n\t\t}\n\n\t\tscheduler._timeline_y_scale.call(this,scheduler._els[\"dhx_cal_data\"][0]);\n\n\t\tscheduler._min_date = temp;\n\n\t\tvar dateElement = scheduler._getNavDateElement();\n\t\tif(dateElement){\n\t\t\tdateElement.innerHTML=scheduler.templates[this.name+\"_date\"](scheduler._min_date, scheduler._max_date);\n\t\t}\n\n\t\tif (scheduler._mark_now) {\n\t\t\tscheduler._mark_now();\n\t\t}\n\t\tscheduler._timeline_reset_scale_height.call(this, mode);\n\n\t}\n\tscheduler._timeline_render_scale_header(this, mode);\n\t// hide tooltip if it is displayed\n\tscheduler._timeline_hideToolTip();\n};\n\n\nscheduler._timeline_hideToolTip = function hideToolTip(){\n\tif (scheduler._tooltip){\n\t\tscheduler._tooltip.style.display = \"none\";\n\t\tscheduler._tooltip.date = \"\";\n\t}\n};\n\nscheduler._timeline_showToolTip = function showToolTip(obj,pos,offset){\n\tif (obj.render != \"cell\") return;\n\tvar mark = pos.x+\"_\"+pos.y;\n\tvar evs = obj._matrix[pos.y][pos.x];\n\n\tif (!evs) return scheduler._timeline_hideToolTip();\n\n\tevs.sort(function(a,b){ return a.start_date>b.start_date?1:-1; });\n\n\tif (scheduler._tooltip){\n\t\tif (scheduler._tooltip.date == mark) return;\n\t\tscheduler._tooltip.innerHTML=\"\";\n\t} else {\n\t\tvar t = scheduler._tooltip = document.createElement(\"div\");\n\t\tt.className = \"dhx_year_tooltip\";\n\t\tif (scheduler.config.rtl) t.className += \" dhx_tooltip_rtl\";\n\t\tdocument.body.appendChild(t);\n\t\tscheduler.event(t, \"click\", scheduler._click.dhx_cal_data);\n\t}\n\n\tvar html = \"\";\n\n\tfor (var i=0; i<evs.length; i++){\n\t\tvar bg_color = (evs[i].color?(\"--dhx-scheduler-event-color:\"+evs[i].color+\";\"):\"\");\n\t\tvar color = (evs[i].textColor?(\"--dhx-scheduler-event-background:\"+evs[i].textColor+\";\"):\"\");\n\t\thtml+=\"<div class='dhx_tooltip_line' event_id='\"+evs[i].id+\"' \"+scheduler.config.event_attribute+\"='\"+evs[i].id+\"' style='\"+bg_color+\"\"+color+\"'>\";\n\t\thtml+=\"<div class='dhx_tooltip_date'>\"+(evs[i]._timed?scheduler.templates.event_date(evs[i].start_date):\"\")+\"</div>\";\n\t\thtml+=\"<div class='dhx_event_icon icon_details'>&nbsp;</div>\";\n\t\thtml+=scheduler.templates[obj.name+\"_tooltip\"](evs[i].start_date, evs[i].end_date,evs[i])+\"</div>\";\n\t}\n\n\tscheduler._tooltip.style.display=\"\";\n\tscheduler._tooltip.style.top = \"0px\";\n\n\tif ((scheduler.config.rtl && offset.left-scheduler._tooltip.offsetWidth >= 0) || document.body.offsetWidth-pos.src.offsetWidth-offset.left-scheduler._tooltip.offsetWidth < 0) {\n\t\tscheduler._tooltip.style.left = offset.left-scheduler._tooltip.offsetWidth+\"px\";\n\t}\n\telse {\n\t\tscheduler._tooltip.style.left = offset.left+pos.src.offsetWidth+\"px\";\n\t}\n\n\tscheduler._tooltip.date = mark;\n\tscheduler._tooltip.innerHTML = html;\n\n\tif (document.body.offsetHeight-offset.top-scheduler._tooltip.offsetHeight < 0)\n\t\tscheduler._tooltip.style.top= offset.top-scheduler._tooltip.offsetHeight+pos.src.offsetHeight+\"px\";\n\telse\n\t\tscheduler._tooltip.style.top= offset.top+\"px\";\n};\n\nscheduler._matrix_tooltip_handler = function(e){\n\tvar obj = scheduler.matrix[scheduler._mode];\n\tif (!obj || obj.render != \"cell\")\n\t\treturn;\n\tif (obj){\n\t\tvar pos = scheduler._locate_cell_timeline(e);\n\t\tif (pos)\n\t\t\treturn scheduler._timeline_showToolTip(obj,pos,scheduler.$domHelpers.getOffset(pos.src));\n\t}\n\tscheduler._timeline_hideToolTip();\n};\nscheduler._init_matrix_tooltip = function() {\n\tscheduler._detachDomEvent(scheduler._els[\"dhx_cal_data\"][0], \"mouseover\", scheduler._matrix_tooltip_handler);\n\tscheduler.event(scheduler._els[\"dhx_cal_data\"][0], \"mouseover\", scheduler._matrix_tooltip_handler);\n};\n\nscheduler._set_timeline_dates = function(view){\n\tscheduler._min_date = scheduler.date[view.name+\"_start\"](new Date(scheduler._date));\n\tscheduler._max_date = scheduler.date[\"add_\" + view.name + \"_private\"](scheduler._min_date, view.x_size*view.x_step);\n\n\tif(scheduler.date[view.x_unit+\"_start\"]){\n\t\tscheduler._max_date = scheduler.date[view.x_unit+\"_start\"](scheduler._max_date);\n\t}\n\tscheduler._table_view = true;\n};\n\n\nscheduler._renderMatrix = function(mode, refresh) {\n\tthis.callEvent(\"onBeforeRender\", []);\n\t\n\tif (!refresh)\n\t\tscheduler._els['dhx_cal_data'][0].scrollTop=0;\n\n\n\n\tscheduler._set_timeline_dates(this);\n\n\tscheduler._timeline_set_full_view.call(this,mode);\n};\n\nscheduler._timeline_html_index = function html_index(el) {\n\tvar p = el.parentNode.childNodes;\n\n\tvar nodeIndex = -1;\n\tfor (var i=0; i < p.length; i++) {\n\t\tif (p[i] == el){\n\t\t\tnodeIndex = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tvar resIndex = nodeIndex;\n\tif(scheduler._ignores_detected){\n\t\tfor(var colIndex in scheduler._ignores){\n\t\t\tif(scheduler._ignores[colIndex] && colIndex*1 <= resIndex)\n\t\t\t\tresIndex++;\n\t\t}\n\t}\n\n\treturn resIndex;\n};\n\nscheduler._timeline_locate_hcell = function locate_hcell(e){\n\tvar trg = e.target?e.target:e.srcElement;\n\twhile (trg && trg.tagName != \"DIV\")\n\t\ttrg=trg.parentNode;\n\tif (trg && trg.tagName == \"DIV\"){\n\t\tvar cs = scheduler._getClassName(trg).split(\" \")[0];\n\t\tif (cs == \"dhx_scale_bar\")\n\t\t\treturn { x:scheduler._timeline_html_index(trg), y:-1, src:trg, scale:true };\n\t}\n};\n\nfunction closest(element, selector){\n\treturn scheduler.$domHelpers.closest(element, selector);\n}\n\n\nscheduler._locate_cell_timeline = function(e){\n\tvar trg = e.target?e.target:e.srcElement;\n\n\tvar res = {};\n\tvar view = scheduler.matrix[scheduler._mode];\n\tvar pos = scheduler.getActionData(e);\n\tvar ign = scheduler._ignores;\n\n\tvar xNonIgnoredInd = 0;\n\tfor (var xind = 0; xind < view._trace_x.length-1; xind++) {\n\t\t// | 8:00, 8:30 | 8:15 should be checked against 8:30\n\t\t// clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\n\t\tif (+pos.date < view._trace_x[xind+1])\n\t\t\tbreak;\n\n\t\tif(!ign[xind]) {\n\t\t\txNonIgnoredInd++;\n\t\t}\n\t}\n\n\tres.x = xNonIgnoredInd === 0 ? 0 : xind;\n\tres.y = view.order[pos.section];\n\t// var diff = scheduler._isRender('cell') ? 1 : 0;\n\n\t// firstCellXind is needed for cell mode when part of cols is rendered only\n\t// and defines correct shift for tooltip xind = xind - firstCellXind\n\t// where xind = current index, firstCellXind = first visible cell index\n\tvar firstCellXind = 0;\n\tif (view.scrollable && view.render === 'cell') {\n\t\t// define xind of first visible cell\n\t\tif (!view._scales[pos.section] || !view._scales[pos.section].querySelector('.dhx_matrix_cell')) return;\n\t\tvar firstCell = view._scales[pos.section].querySelector('.dhx_matrix_cell');\n\t\t\tif (!firstCell) return;\n\t\tvar fc_pos_x = firstCell.offsetLeft;\n\t\tif (fc_pos_x > 0) {\n\t\t\tvar end_date = scheduler._timeline_drag_date(view, fc_pos_x);\n\n\t\t\tfor (var i = 0; i < view._trace_x.length-1; i++) {\n\t\t\t\tif (+end_date < view._trace_x[i+1])\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tfirstCellXind = i;\n\t\t}\n\t}\n\tres.src = view._scales[pos.section] ? view._scales[pos.section].querySelectorAll('.dhx_matrix_cell')[xind - firstCellXind] : null;\n\n\tvar isScale = false;\n\n\tvar scaleTarget = closest(trg, \".dhx_matrix_scell\");\n\tif(scaleTarget){\n\t\ttrg = scaleTarget;\n\t\tisScale = true;\n\t}\n\n\tif (isScale) { // Y scale\n\t\tres.x = -1;\n\t\tres.src = trg;\n\t\tres.scale = true;\n\t}\n\telse{\n\t\tres.x = xind;\n\t}\n\n\treturn res;\n};\n\nvar old_click = scheduler._click.dhx_cal_data;\nscheduler._click.dhx_marked_timespan = scheduler._click.dhx_cal_data = function(e){\n\tvar ret = old_click.apply(this,arguments);\n\tvar obj = scheduler.matrix[scheduler._mode];\n\tif (obj){\n\t\tvar pos = scheduler._locate_cell_timeline(e);\n\t\tif (pos){\n\t\t\tif (pos.scale)\n\t\t\t\tscheduler.callEvent(\"onYScaleClick\",[pos.y, obj.y_unit[pos.y], e]);\n\t\t\telse {\n\t\t\t\tscheduler.callEvent(\"onCellClick\", [pos.x, pos.y, obj._trace_x[pos.x], (((obj._matrix[pos.y] || {})[pos.x]) || []), e]);\n\t\t\t\tscheduler._timeline_set_scroll_pos(scheduler._els[\"dhx_cal_data\"][0], obj);\n\t\t\t}\n\t\t}\n\t}\n\treturn ret;\n};\n\nscheduler.dblclick_dhx_matrix_cell = function(e){\n\tvar obj = scheduler.matrix[scheduler._mode];\n\tif (obj){\n\t\tvar pos = scheduler._locate_cell_timeline(e);\n\t\tif (pos){\n\t\t\tif (pos.scale)\n\t\t\t\tscheduler.callEvent(\"onYScaleDblClick\",[pos.y, obj.y_unit[pos.y], e]);\n\t\t\telse\n\t\t\t\tscheduler.callEvent(\"onCellDblClick\",[pos.x, pos.y, obj._trace_x[pos.x], (((obj._matrix[pos.y]||{})[pos.x])||[]), e]);\n\t\t}\n\t}\n};\n\nvar old_dblclick_marked_timespan = scheduler.dblclick_dhx_marked_timespan || function(){};\nscheduler.dblclick_dhx_marked_timespan = function(e){\n\tvar obj = scheduler.matrix[scheduler._mode];\n\tif (obj)\n\t\treturn scheduler.dblclick_dhx_matrix_cell(e);\n\telse\n\t\treturn old_dblclick_marked_timespan.apply(this,arguments);\n};\n\nscheduler.dblclick_dhx_matrix_scell = function(e){\n\treturn scheduler.dblclick_dhx_matrix_cell(e);\n};\n\nscheduler._isRender = function(mode){\n\treturn (scheduler.matrix[scheduler._mode] && scheduler.matrix[scheduler._mode].render == mode);\n};\n\nscheduler.attachEvent(\"onCellDblClick\", function (x, y, a, b, event){\n\tif (this.config.readonly|| (event.type == \"dblclick\" && !this.config.dblclick_create)) return;\n\n\tvar obj = scheduler.matrix[scheduler._mode];\n\tvar event_options = {};\n\tevent_options.start_date = obj._trace_x[x];\n\tevent_options.end_date = (obj._trace_x[x+1]) ? obj._trace_x[x+1] : scheduler.date.add(obj._trace_x[x], obj.x_step, obj.x_unit);\n\n\tif (obj._start_correction)\n\t\tevent_options.start_date = new Date(event_options.start_date*1 + obj._start_correction);\n\tif (obj._end_correction)\n\t\tevent_options.end_date = new Date(event_options.end_date - obj._end_correction);\n\n\tevent_options[obj.y_property] = obj.y_unit[y].key;\n\tscheduler.addEventNow(event_options, null, event);\n});\n\nscheduler.attachEvent(\"onBeforeDrag\", function (event_id, mode, native_event_object){\n\treturn !scheduler._isRender(\"cell\");\n});\nscheduler.attachEvent(\"onEventChanged\", function(id, ev) {\n\tev._timed = this.isOneDayEvent(ev);\n});\nscheduler.attachEvent(\"onBeforeEventChanged\", function (ev, e, flag, ev_old) {\n\tif(ev){\n\t\tev._move_delta = undefined;\n\t}\n\tif(ev_old){\n\t\tev_old._move_delta = undefined;\n\t}\n\treturn true;\n});\n\nscheduler._is_column_visible = function(date){\n\tvar mode = scheduler.matrix[scheduler._mode];\n\tvar start_ind = scheduler._get_date_index(mode, date);\n\treturn !scheduler._ignores[start_ind];\n};\nvar old_render_marked_timespan = scheduler._render_marked_timespan;\nscheduler._render_marked_timespan = function(options, area, unit_id, min_date, max_date) {\n\tif (!scheduler.config.display_marked_timespans)\n\t\treturn [];\n\n\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\tif (scheduler._isRender('cell'))\n\t\t\treturn;\n\n\t\tvar view_opts = scheduler._lame_copy({}, scheduler.matrix[scheduler._mode]);\n\t\t//timespans must always use actual position, not rounded\n\t\tview_opts.round_position = false;\n\t\tvar blocks = [];\n\n\t\tvar units = [];\n\t\tvar areas = [];\n\t\tvar section = options.sections ? (options.sections.units || options.sections.timeline) : null;\n\t\tif (!unit_id) {  // should draw for every unit...\n\t\t\tvar order = view_opts.order;\n\t\t\tif (section) { // ...or for only section if mentioned in configuration of timespan\n\t\t\t\tif (order.hasOwnProperty(section)) {\n\t\t\t\t\tunits.push(section);\n\t\t\t\t\tareas.push(view_opts._scales[section]);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(view_opts._scales) {\n\t\t\t\t\tfor (var key in order) {\n\t\t\t\t\t\tif (order.hasOwnProperty(key) && view_opts._scales[key]) {\n\t\t\t\t\t\t\tunits.push(key);\n\t\t\t\t\t\t\tareas.push(view_opts._scales[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tareas = [area];\n\t\t\tunits = [unit_id];\n\t\t}\n\n\t\tvar min_date = min_date ? new Date(min_date) : scheduler._min_date;\n\t\tvar max_date = max_date ? new Date(max_date) : scheduler._max_date;\n\n\t\tif(min_date.valueOf() < scheduler._min_date.valueOf())\n\t\t\tmin_date = new Date(scheduler._min_date);\n\t\tif(max_date.valueOf() > scheduler._max_date.valueOf())\n\t\t\tmax_date = new Date(scheduler._max_date);\n\n\t\tif(!view_opts._trace_x) return;\n\n\t\tfor(var i = 0; i < view_opts._trace_x.length; i++){\n\t\t\tif(scheduler._is_column_visible(view_opts._trace_x[i]))\n\t\t\t\tbreak;\n\t\t}\n\t\tif(i == view_opts._trace_x.length)\n\t\t\treturn;\n\n\t\tvar dates = [];\n\n\t\tif (options.days > 6) {\n\t\t\tvar specific_date = new Date(options.days);\n\t\t\tif (scheduler.date.date_part(new Date(min_date)) <= +specific_date && +max_date >= +specific_date)\n\t\t\t\tdates.push(specific_date);\n\t\t} else {\n\t\t\tdates.push.apply(dates, scheduler._get_dates_by_index(options.days));\n\t\t}\n\n\t\tvar zones = options.zones;\n\t\tvar css_classes = scheduler._get_css_classes_by_config(options);\n\n\t\tfor (var j=0; j<units.length; j++) {\n\t\t\tarea = areas[j];\n\t\t\tunit_id = units[j];\n\n\t\t\tfor (var i=0; i<dates.length; i++) {\n\t\t\t\tvar date = dates[i];\n\t\t\t\tfor (var k=0; k<zones.length; k += 2) {\n\t\t\t\t\tvar zone_start = zones[k];\n\t\t\t\t\tvar zone_end = zones[k+1];\n\t\t\t\t\tvar start_date = new Date(+date + zone_start*60*1000);\n\t\t\t\t\tvar end_date = new Date(+date + zone_end*60*1000);\n\n\t\t\t\t\tstart_date = new Date(start_date.valueOf() + (start_date.getTimezoneOffset() - date.getTimezoneOffset())*1000*60);\n\n\t\t\t\t\tend_date = new Date(end_date.valueOf() + (end_date.getTimezoneOffset() - date.getTimezoneOffset())*1000*60);\n\n\t\t\t\t\tif (!(min_date < end_date && max_date > start_date))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvar block = scheduler._get_block_by_config(options);\n\t\t\t\t\tblock.className = css_classes;\n\n\t\t\t\t\tvar start_pos = scheduler._timeline_getX({start_date: start_date}, false, view_opts)-1;\n\t\t\t\t\tvar end_pos = scheduler._timeline_getX({start_date: end_date}, false, view_opts)-1;\n\t\t\t\t\tvar width = Math.max(1, end_pos - start_pos - 1);\n\t\t\t\t\tvar height = ((view_opts._section_height[unit_id]-1) || (view_opts.dy - 1));\n\n\t\t\t\t\tblock.style.cssText = \"height: \"+height+\"px; \" + (scheduler.config.rtl ? \"right: \" :\"left: \")+start_pos+\"px; width: \"+width+\"px; top: 0;\";\n\n\t\t\t\t\tarea.insertBefore(block, area.firstChild);\n\t\t\t\t\tblocks.push(block);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn blocks;\n\n\t} else {\n\t\t\treturn old_render_marked_timespan.apply(scheduler, [options, area, unit_id]);\n\t}\n};\n\nvar old_append_mark_now = scheduler._append_mark_now;\nscheduler._append_mark_now = function(day_index, now) {\n\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\tvar n_date = scheduler._currentDate();\n\t\tvar zone_start = scheduler._get_zone_minutes(n_date);\n\t\tvar options = {\n\t\t\tdays: +scheduler.date.date_part(n_date),\n\t\t\tzones: [zone_start, zone_start+1],\n\t\t\tcss: \"dhx_matrix_now_time\",\n\t\t\ttype: \"dhx_now_time\"\n\t\t};\n\t\treturn scheduler._render_marked_timespan(options);\n\t} else {\n\t\treturn old_append_mark_now.apply(scheduler, [day_index, now]);\n\t}\n};\n\nvar oldTimespans = scheduler._mark_timespans;\nscheduler._mark_timespans = function(){\n\tif(scheduler.matrix && scheduler.matrix[scheduler.getState().mode]){\n\t\tvar divs = [];\n\n\t\tvar view = scheduler.matrix[scheduler.getState().mode];\n\t\tvar options = view.y_unit;\n\t\tfor(var i = 0; i < options.length; i++){\n\t\t\tvar unit_key = options[i].key;\n\t\t\tvar scale = view._scales[unit_key];\n\n\t\t\tvar r = scheduler._on_scale_add_marker(scale, unit_key);\n\t\t\tdivs.push.apply(divs, r);\n\t\t}\n\n\t\treturn divs;\n\t}else{\n\t\treturn oldTimespans.apply(this, arguments);\n\t}\n};\n\nvar on_scale_marker_add = scheduler._on_scale_add_marker;\nscheduler._on_scale_add_marker = function(scale, unit_key){\n\n\tif (scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\tvar divs = [];\n\t\tvar timespans = scheduler._marked_timespans;\n\n\t\tif (timespans && scheduler.matrix && scheduler.matrix[scheduler._mode]) {\n\t\t\tvar mode = scheduler._mode;\n\n\t\t\tvar min_date = scheduler._min_date;\n\t\t\tvar max_date = scheduler._max_date;\n\t\t\tvar global_data = timespans[\"global\"];\n\n\t\t\tfor (var t_date = scheduler.date.date_part(new Date(min_date)); t_date < max_date; t_date = scheduler.date.add(t_date, 1, \"day\")) {\n\t\t\t\tvar day_value = +t_date;\n\t\t\t\tvar day_index = t_date.getDay();\n\t\t\t\tvar r_configs = [];\n\n\t\t\t\tif(scheduler.config.overwrite_marked_timespans){\n\t\t\t\t\tvar day_types = global_data[day_value]||global_data[day_index];\n\t\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(day_types));\n\t\t\t\t} else {\n\t\t\t\t\tif(global_data[day_value]){\n\t\t\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(global_data[day_value]));\n\t\t\t\t\t}\n\t\t\t\t\tif(global_data[day_index]){\n\t\t\t\t\t\tr_configs.push.apply(r_configs, scheduler._get_configs_to_render(global_data[day_index]));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (timespans[mode] && timespans[mode][unit_key]) {\n\t\t\t\t\tvar z_config = [];\n\t\t\t\t\tvar unit_types = scheduler._get_types_to_render(timespans[mode][unit_key][day_index], timespans[mode][unit_key][day_value]);\n\t\t\t\t\tz_config.push.apply(z_config, scheduler._get_configs_to_render(unit_types));\n\t\t\t\t\tif(scheduler.config.overwrite_marked_timespans){\n\t\t\t\t\t\tif(z_config.length){\n\t\t\t\t\t\t\tr_configs = z_config;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tr_configs = r_configs.concat(z_config);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (var i=0; i<r_configs.length; i++) {\n\t\t\t\t\tvar config = r_configs[i];\n\t\t\t\t\tvar day = config.days;\n\t\t\t\t\tif (day < 7) {\n\t\t\t\t\t\tday = day_value;\n\t\t\t\t\t\t//specify min/max timespan dates, otherwise it can be rendered multiple times in some configurations\n\t\t\t\t\t\tdivs.push.apply(divs, scheduler._render_marked_timespan(config, scale, unit_key, t_date, scheduler.date.add(t_date, 1, \"day\")));\n\t\t\t\t\t\tday = day_index;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdivs.push.apply(divs, scheduler._render_marked_timespan(config, scale, unit_key, t_date, scheduler.date.add(t_date, 1, \"day\")));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn divs;\n\t}else{\n\t\treturn on_scale_marker_add.apply(this, arguments);\n\t}\n};\n\nscheduler._resolve_timeline_section = function(view, pos){\n\tvar yind = 0;\n\tvar summ = 0;\n\tfor (yind; yind < this._colsS.heights.length; yind++) {\n\t\tsumm += this._colsS.heights[yind];\n\t\tif (summ > pos.y)\n\t\t\tbreak;\n\t}\n\n\tif(!view.y_unit[yind]) {\n\t\tyind=view.y_unit.length-1;\n\t}\n\tif(this._drag_event && !this._drag_event._orig_section){\n\t\tthis._drag_event._orig_section = view.y_unit[yind].key;\n\t}\n\n\tpos.fields = {};\n\tif (yind >= 0 && view.y_unit[yind]) {\n\t\tpos.section = pos.fields[view.y_property] = view.y_unit[yind].key;\n\t}\n};\nscheduler._update_timeline_section = function(action){\n\tvar view = action.view,\n\t\tevent = action.event,\n\t\tpos = action.pos;\n\n\tif (event) {\n\t\tif(event[view.y_property] != pos.section){\n\t\t\tvar line_height = this._get_timeline_event_height ? this._get_timeline_event_height(event, view) : view.getEventHeight(event);\n\t\t\tevent._sorder = this._get_dnd_order(event._sorder, line_height, view.getSectionHeight(pos.section));\n\t\t}\n\t\tevent[view.y_property] = pos.section;\n\t}\n};\nscheduler._get_date_index=function(config, date) {\n\tvar trace_x = config._trace_x;\n\n\tvar searchFrom = 0,\n\t\tsearchTo = trace_x.length - 1;\n\n\t// reduce search range with binary search\n\tvar dateValue = date.valueOf();\n\twhile(searchTo - searchFrom > 3){\n\t\tvar middle = searchFrom + Math.floor((searchTo - searchFrom)/2);\n\t\tif(trace_x[middle].valueOf() > dateValue){\n\t\t\tsearchTo = middle;\n\t\t}else{\n\t\t\tsearchFrom = middle;\n\t\t}\n\t}\n\n\tvar index = searchFrom;\n\twhile (index <= searchTo && +date >= +trace_x[index+1]) {\n\t\tindex++;\n\t}\n\treturn index;\n};\n\nscheduler._timeline_drag_date = function(timeline, pos_x){\n\tvar obj = timeline,\n\t\tpos = {x: pos_x};\n\n\tif(!obj._trace_x.length){\n\t\treturn new Date(scheduler.getState().date);\n\t}\n\n\tvar summ = 0, xind = 0;\n\tvar ratio,\n\t\tcolumn_width;\n\tfor (xind; xind <= this._cols.length-1; xind++) {\n\n\t\tcolumn_width = this._cols[xind];\n\t\tsumm += column_width;\n\t\tif (summ>pos.x){ //index of section\n\t\t\tratio = (pos.x-(summ-column_width))/column_width;\n\t\t\tratio = (ratio < 0) ? 0 : ratio;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(obj.round_position){\n\t\t// in case of click, or creating new event, mouse position will be always rounded to start date of the cell\n\t\t// when dragging - position can be rounded to the start date of the next column, in order to improve the usability\n\t\t// edge = 1 - always return start date of current cell\n\t\t// 0.5 - round to next cell if mouse in the right half of cell\n\t\tvar edge = 1;\n\t\tvar mode = scheduler.getState().drag_mode;\n\t\tif(mode && mode != \"move\" && mode != \"create\"){\n\t\t\tedge = 0.5;//rounding for resize\n\t\t}\n\t\tif(ratio >= edge){\n\t\t\txind++;\n\t\t}\n\t\tratio = 0;\n\t}\n\n\t//border cases\n\tif (xind === 0 && this._ignores[0]) {\n\t\txind = 1; ratio = 0;\n\t\twhile (this._ignores[xind]) xind++;\n\t} else if ( xind == this._cols.length && this._ignores[xind-1]) {\n\t\txind = this._cols.length-1; ratio = 0;\n\t\twhile (this._ignores[xind]) xind--;\n\t\txind++;\n\t}\n\n\tvar end_date;\n\t// if our event is at the end of the view\n\tif(xind >= obj._trace_x.length) {\n\t\tend_date = scheduler.date.add(obj._trace_x[obj._trace_x.length-1], obj.x_step, obj.x_unit);\n\t\tif (obj._end_correction)\n\t\t\tend_date = new Date(end_date-obj._end_correction);\n\t} else {\n\t\tlet timestamp_diff;\n\t\t//GS-2775: set the step according to the days in month\n\t\tif(obj.x_unit == \"month\"){\n\t\t\tconst daysInMonth = new Date(new Date(+obj._trace_x[xind]).getFullYear(), new Date(+obj._trace_x[xind]).getMonth()+1, 0).getDate();\n\t\t\tconst monthStep = (daysInMonth * 24*60*60*1000)/scheduler._cols[0];\n\t\t\ttimestamp_diff = ratio * column_width * monthStep + obj._start_correction;\n\t\t} else {\n\t\t\ttimestamp_diff = ratio * column_width * obj._step + obj._start_correction;\n\t\t}\n\t\tend_date = new Date(+obj._trace_x[xind]+timestamp_diff);\n\t}\n\treturn end_date;\n};\n\nscheduler.attachEvent(\"onBeforeTodayDisplayed\", function() {\n\tfor(var i in scheduler.matrix){\n\t\tvar obj = scheduler.matrix[i];\n\t\tobj.x_start = obj._original_x_start;\n\t}\n\treturn true;\n});\n\nscheduler.attachEvent(\"onOptionsLoad\",function(){\n\tfor(var i in scheduler.matrix){\n\t\tvar obj = scheduler.matrix[i];\n\n\t\tobj.order = {};\n\t\tscheduler.callEvent('onOptionsLoadStart', []);\n\t\tfor(var i=0; i<obj.y_unit.length;i++)\n\t\t\tobj.order[obj.y_unit[i].key]=i;\n\t\tscheduler.callEvent('onOptionsLoadFinal', []);\n\t\tif (scheduler._date && obj.name == scheduler._mode) {\n\t\t\tobj._options_changed = true;\n\t\t\tscheduler.setCurrentView(scheduler._date, scheduler._mode);\n\t\t\tsetTimeout(function () {\n\t\t\t\tobj._options_changed = false;\n\t\t\t});\n\t\t}\n\t}\n});\n\nscheduler.attachEvent(\"onEventIdChange\", function(){\n\tvar view = scheduler.getView();\n\tif(view && scheduler.matrix[view.name]){\n\t\tif(scheduler._timeline_smart_render){\n\n\t\t\tscheduler._timeline_smart_render.clearPreparedEventsCache();\n\t\t\tscheduler._timeline_smart_render.getPreparedEvents(view);\n\t\t}\n\t}\n\n});\n\nscheduler.attachEvent(\"onBeforeDrag\",function(id, drag_mode, e){\n\tif(drag_mode == 'resize'){\n\t\tvar trg = e.target || e.srcElement;\n\t\tvar className = scheduler._getClassName(trg);\n\t\tif(className.indexOf(\"dhx_event_resize_end\") < 0){\n\t\t\tscheduler._drag_from_start = true;\n\t\t}else{\n\t\t\tscheduler._drag_from_start = false;\n\t\t}\n\t}\n\n\treturn true;\n});\n\nautoscroll(scheduler);\nsmartRender(scheduler);\n\n//-#include ext/timeline/autoscroll.js\n//-#include ext/timeline/timeline_smart_render.js\n\n};\nscheduler._temp_matrix_scope();\n\n\n}","/* timeline smart render */\n\n// scrollable should be = true\n// horizontal and vertical scroll -> dhx_timeline_scrollable_data\n\nexport default function(scheduler){\n\nfunction contains(section, eventId){\n\tfor(let i = 0; i < section.length; i++){\n\t\tif(section[i].id == eventId){\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nscheduler._timeline_smart_render = {\n\t_prepared_events_cache: null,\n\t_rendered_events_cache: [],\n\t_rendered_header_cache: [],\n\t_rendered_labels_cache: [],\n\t_rows_to_delete: [],\n\t_rows_to_add: [],\n\t_cols_to_delete: [],\n\t_cols_to_add: [],\n\n\tgetViewPort: function(scrollHelper, resizeHeight, scrollLeft, scrollTop){\n\t\t// top/left/height/width of viewport with scroll pos\n\t\tvar scrollBlock = scheduler.$container.querySelector(\".dhx_cal_data\");\n\t\tvar coords = scrollBlock.getBoundingClientRect();\n\n\t\tvar scrollableContainer = scheduler.$container.querySelector(\".dhx_timeline_scrollable_data\");\n\t\tif(scrollableContainer && scrollLeft === undefined){\n\t\t\tscrollLeft = scrollHelper.getScrollValue(scrollableContainer);\n\t\t}\n\t\tif(scrollTop === undefined){\n\t\t\tif(scrollableContainer){\n\t\t\t\tscrollTop = scrollableContainer.scrollTop;\n\t\t\t}else{\n\t\t\t\tscrollTop = scrollBlock.scrollTop;\n\t\t\t}\n\t\t}\n\n\t\tvar copy = {};\n\t\tfor(var i in coords){\n\t\t\tcopy[i] = coords[i];\n\t\t}\n\n\t\tcopy.scrollLeft = scrollLeft || 0;\n\t\tcopy.scrollTop = scrollTop || 0;\n\t\tif (resizeHeight)\n\t\t\tcoords.height = resizeHeight;\n\n\t\treturn copy;\n\t},\n\tisInXViewPort: function (item, viewPort) {\n\t\tvar viewPortLeft =  viewPort.scrollLeft;\n\t\tvar viewPortRight = viewPort.width + viewPort.scrollLeft;\n\n\t\t// return true/false for item in/not in viewport on X axis\n\t\treturn (item.left < viewPortRight + 100 && item.right > viewPortLeft - 100); // +100 and -100 spreads viewport width\n\t},\n\tisInYViewPort: function (item, viewPort) {\n\t\tvar viewPortTop =  viewPort.scrollTop;\n\t\tvar viewPortBottom = viewPort.height + viewPort.scrollTop;\n\n\t\t// return true/false for item in/not in viewport on Y axis\n\t\treturn (item.top < (viewPortBottom + 80) && item.bottom > viewPortTop - 80); // +30 and -30 spreads viewport height\n\t},\n\n\tgetVisibleHeader: function(view, viewPort) {\n\t\tvar curHeader = '';\n\t\tthis._rendered_header_cache = [];\n\n\t\tfor (var i in view._h_cols) {\n\t\t\tvar col = view._h_cols[i];\n\t\t\tif (this.isInXViewPort({left: col.left, right: col.left + scheduler._cols[i]}, viewPort)) {\n\t\t\t\tvar html = col.div.outerHTML;\n\t\t\t\tcurHeader += html;\n\n\t\t\t\tthis._rendered_header_cache.push(col.div.getAttribute(\"data-col-id\"));\n\t\t\t}\n\t\t}\n\n\t\treturn curHeader;\n\t},\n\n\tupdateHeader: function(view, viewPort, parent) {\n\t\tthis._cols_to_delete = [];\n\t\tthis._cols_to_add = [];\n\n\t\tvar headers = scheduler.$container.querySelectorAll(\".dhx_cal_header > div\");\n\t\tvar cells = headers[headers.length - 1].querySelectorAll(\".dhx_scale_bar\");// take cells of bottom scale\n\n\t\tvar visibleItems = [];\n\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\tvisibleItems.push(cells[i].getAttribute(\"data-col-id\"));\n\t\t}\n\n\t\t// find new elements\n\t\tvar res = this.getVisibleHeader(view, viewPort);\n\t\tif (!res)\n\t\t\treturn;\n\n\t\tvar renderers = this._rendered_header_cache.slice();\n\t\tvar itemsToDel = [];\n\n\t\tfor (var i = 0, len = visibleItems.length; i < len; i++) {\n\t\t\tvar pos = renderers.indexOf(visibleItems[i]);\n\t\t\tif ( pos > -1) {\n\t\t\t\trenderers.splice(pos, 1);\n\t\t\t} else {\n\t\t\t\titemsToDel.push(visibleItems[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (itemsToDel.length) {\n\t\t\tthis._cols_to_delete = itemsToDel.slice();\n\t\t\tthis._deleteHeaderCells(itemsToDel, view, parent);\n\t\t}\n\t\tif (renderers.length)  {\n\t\t\tthis._cols_to_add = renderers.slice();\n\t\t\tthis._addHeaderCells(renderers, view, parent);\n\t\t}\n\t},\n\n\t_deleteHeaderCells: function(items, view, parent) {\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tvar item = parent.querySelector('[data-col-id=\"'+items[i]+'\"]');\n\t\t\tif(item){\n\t\t\t\tparent.removeChild(item);\n\t\t\t}\n\t\t}\n\t},\n\n\t_addHeaderCells: function(items, view, parent) {\n\t\tvar html = '';\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\thtml += view._h_cols[items[i]].div.outerHTML;\n\t\t}\n\n\t\tconst buffer = document.createElement('template');\n\t\tbuffer.innerHTML = html;\n\t\tparent.appendChild(buffer.content);\n\n\t},\n\n\tgetVisibleLabels: function(view, viewPort) {\n\t\tif (!view._label_rows.length) return;\n\n\t\tvar curLabelCol = '';\n\n\t\tthis._rendered_labels_cache = [];\n\t\tfor (var i = 0; i < view._label_rows.length; i++) {\n\t\t\tif (this.isInYViewPort({top: view._label_rows[i].top, bottom: view._label_rows[i].top + view._section_height[view.y_unit[i].key]}, viewPort)) {\n\t\t\t\tvar html = view._label_rows[i].div;\n\t\t\t\tcurLabelCol += html;\n\n\t\t\t\tthis._rendered_labels_cache.push(i);\n\t\t\t}\n\t\t}\n\n\t\treturn curLabelCol;\n\t},\n\n\tupdateLabels: function(view, viewPort, parent) {\n\t\tthis._rows_to_delete = [];\n\t\tthis._rows_to_add = [];\n\n\t\tlet visibleItems = [];\n\t\tconst gridRows = scheduler.$container.querySelectorAll(\".dhx_timeline_label_row\");\n\t\tgridRows.forEach((row) => {\n\t\t\tvisibleItems.push(Number(row.getAttribute(\"data-row-index\")));\n\t\t});\n\n\t\t// is it realy no visible items? check it again\n\t\tif (!visibleItems.length) {\n\t\t\tthis.getVisibleLabels(view, viewPort);\n\t\t\tvisibleItems = this._rendered_labels_cache.slice();\n\t\t}\n\n\t\t// find new elements\n\t\tvar res = this.getVisibleLabels(view, viewPort);\n\t\tif (!res)\n\t\t\treturn;\n\n\t\tvar renderers = this._rendered_labels_cache.slice();\n\n\t\tvar itemsToDel = [];\n\n\t\tfor (var i = 0, len = visibleItems.length; i < len; i++) {\n\t\t\tvar pos = renderers.indexOf(visibleItems[i]);\n\t\t\tif ( pos > -1) {\n\t\t\t\trenderers.splice(pos, 1);\n\t\t\t} else {\n\t\t\t\titemsToDel.push(visibleItems[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (itemsToDel.length) {\n\t\t\tthis._rows_to_delete = itemsToDel.slice();\n\t\t\tthis._deleteLabelCells(itemsToDel, view, parent);\n\t\t}\n\t\tif (renderers.length) {\n\t\t\tthis._rows_to_add = renderers.slice();\n\t\t\tthis._addLabelCells(renderers, view, parent);\n\t\t}\n\t},\n\n\t_deleteLabelCells: function(items, view, parent) {\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tvar item = parent.querySelector('[data-row-index=\"'+items[i]+'\"]');\n\t\t\tif(item){\n\t\t\t\tparent.removeChild(item);\n\t\t\t}\n\t\t}\n\t},\n\n\t_addLabelCells: function(items, view, parent) {\n\t\tvar html = '';\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\thtml += view._label_rows[items[i]].div;\n\t\t}\n\t\tconst buffer = document.createElement('template');\n\t\tbuffer.innerHTML = html;\n\t\tparent.appendChild(buffer.content);\n\t},\n\n\tclearPreparedEventsCache: function () {\n\t\tthis.cachePreparedEvents(null);\n\t},\n\tcachePreparedEvents: function(events){\n\t\tthis._prepared_events_cache = events;\n\t\tthis._prepared_events_coordinate_cache = events;\n\n\t},\n\n\tgetPreparedEvents: function(view){\n\t\tvar evs;\n\t\tif(this._prepared_events_cache){\n\t\t\tevs = this._prepared_events_cache;\n\n\t\t\tif(scheduler.getState().drag_id){\n\t\t\t\t// events grouped by sections\n\t\t\t\t// the whole structure is not updated during drag and drop\n\t\t\t\t// smart render needs moved event to be under right section here\n\t\t\t\t// manually place event under right section\n\t\t\t\tconst dragId = scheduler.getState().drag_id;\n\t\t\t\tlet stop = false;\n\t\t\t\t\n\n\t\t\t\tlet found = false;\n\n\t\t\t\tevs.forEach((section, index) => {\n\t\t\t\t\tif(stop){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst currentSectionId = view.y_unit[index];\n\t\t\t\t\tfor(let eventIndex = 0; eventIndex < section.length; eventIndex++){\n\t\t\t\t\t\tconst ev = section[eventIndex];\n\n\t\t\t\t\t\tif(ev.id == dragId){\n\n\t\t\t\t\t\t\tif(ev[view.y_property] !== currentSectionId){\n\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\tsection.splice(eventIndex, 1);\n\t\t\t\t\t\t\t\teventIndex--;\n\n\t\t\t\t\t\t\t\tconst actualEventSectionIndex = view.order[ev[view.y_property]];\n\t\t\t\t\t\t\t\tif(evs[actualEventSectionIndex] != section && evs[actualEventSectionIndex] && !contains(evs[actualEventSectionIndex], ev.id)){\n\t\t\t\t\t\t\t\t\tevs[actualEventSectionIndex].push(ev);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\tif(found){\n\t\t\t\t\t\tstop = true;\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\t\t}else{\n\t\t\tevs = scheduler._prepare_timeline_events(view);\n\t\t\tevs.$coordinates = {};\n\t\t\tthis.cachePreparedEvents(evs);\n\n\n\n\n\t\t\t//var x_start = scheduler._timeline_getX(evs[i][m], false, view);\n\t\t\t//\t\tvar x_end = scheduler._timeline_getX(evs[i][m], true, view);\n\t\t}\n\t\treturn evs;\n\t},\n\n\tupdateEvents: function(view, viewPort) {\n\t\tvar eventsBySections = this.getPreparedEvents(view);\n\n\t\tvar renderedEvents = this._rendered_events_cache.slice();\n\t\tthis._rendered_events_cache = [];\n\n\t\tvar grid = scheduler.$container.querySelector('.dhx_cal_data .dhx_timeline_data_col');\n\t\tif (!grid) return;\n\n\t\tconst willAdd = [];\n\t\tfor (var i = 0; i < this._rendered_labels_cache.length; i++) {\n\t\t\tvar row = this._rendered_labels_cache[i];\n\t\t\tvar eventsToAdd = [];\n\n\t\t\tconst sectionId = view.y_unit[row].key;\n\t\t\tvar visibleRowEvents = renderedEvents[row] ? renderedEvents[row].slice() : [];\n\t\t\tscheduler._timeline_calculate_event_positions.call(view, eventsBySections[row]);\n\t\t\tvar renderers = scheduler._timeline_smart_render.getVisibleEventsForRow(view, viewPort, eventsBySections, row);\n\n\t\t\tfor (var item = 0, lenRend = renderers.length; item < lenRend; item++) {\n\t\t\t\tvar pos = visibleRowEvents.indexOf(String(renderers[item].id));\n\t\t\t\tif ( pos > -1) {\n\n\t\t\t\t\tif(scheduler.getState().drag_id == renderers[item].id){\n\t\t\t\t\t\tfor(let r = 0; r < visibleRowEvents.length; r++){\n\t\t\t\t\t\t\tif(visibleRowEvents[r] == renderers[item].id && renderers[item][view.y_property] != sectionId){\n\t\t\t\t\t\t\t\tvisibleRowEvents.splice(r, 1);\n\t\t\t\t\t\t\t\tr--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvisibleRowEvents.splice(pos, 1);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\teventsToAdd.push(renderers[item]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(scheduler.getState().drag_id ) {\n\t\t\t\tconst evId = scheduler.getState().drag_id;\n\t\t\t\tconst draggableEvent = scheduler.getEvent(evId);\n\t\t\t\tif(scheduler._split_one_event && draggableEvent){\n\t\t\t\t\tconst multievs = [];\n\t\t\t\t\tif(draggableEvent[view.y_property] == sectionId){\n\t\t\t\t\t\teventsToAdd.push(draggableEvent);\n\t\t\t\t\t}\n\t\t\t\t\tscheduler._split_one_event(draggableEvent, view, multievs);\n\t\t\t\t\tmultievs.forEach(e => {\n\t\t\t\t\t\tif(e[view.y_property] == sectionId){\n\t\t\t\t\t\t\teventsToAdd.push(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else if(draggableEvent && draggableEvent[view.y_property] == sectionId){\n\t\t\t\t\teventsToAdd.push(draggableEvent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar line = view._divBySectionId[sectionId];// grid.querySelector('[data-section-index=\"'+ row +'\"]');\n\t\t\tif(!line){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (visibleRowEvents.length) {\n\t\t\t\tthis._deleteEvents(visibleRowEvents, view, line);\n\t\t\t}\n\t\t\t\n\t\t\tconst addEntry = {\n\t\t\t\tDOMParent: line,\n\t\t\t\tbuffer: document.createElement('template')\n\t\t\t};\n\t\t\twillAdd.push(addEntry);\n\t\t\tif (eventsToAdd.length) {\n\t\t\t\tthis._addEvents(eventsToAdd, view, addEntry.buffer, row);\n\t\t\t}\n\t\t}\n\n\t\twillAdd.forEach(function(rowEvents){\n\t\t\trowEvents.DOMParent.appendChild(rowEvents.buffer.content);\n\t\t});\n\t\tscheduler._populate_timeline_rendered(scheduler.$container);\n\t\tview._matrix = eventsBySections;\n\t},\n\n\t_deleteEvents: function(events, view, parent) {\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tconst selector = '['+scheduler.config.event_attribute+'=\"'+ events[i] +'\"]';\n\t\t\tvar event = parent.querySelector(selector);\n\t\t\tif (event) {\n\t\t\t\tif (!event.classList.contains('dhx_in_move')){\n\t\t\t\t\tevent.remove();\n\t\t\t\t} else {\n\t\t\t\t\tconst parts = parent.querySelectorAll(selector);\n\n\t\t\t\t\tfor(let i = 0; i < parts.length;i++){\n\t\t\t\t\t\tif (!parts[i].classList.contains('dhx_in_move')){\n\t\t\t\t\t\t\tparts[i].remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t_addEvents: function(events, view, parent, i) {\n\t\t// calculate height of all events but will render below only events in viewport\n\t\tvar events_html = scheduler._timeline_update_events_html.call(view, events);\n\t\tparent.innerHTML = events_html;\n\t},\n\n\tgetVisibleEventsForRow: function(view, viewPort, evs, rowIndex) {\n\t\t// get events only for viewport\n\t\tvar evsInViewport = [];\n\t\tif (view.render == \"cell\") {\n\t\t\tevsInViewport = evs;\n\t\t} else {\n\t\t\tvar rowEvents = evs[rowIndex];\n\t\t\tif (rowEvents) {\n\t\t\t\tfor (var m = 0, evLen = rowEvents.length; m < evLen; m++) {\n\t\t\t\t\tvar event = rowEvents[m];\n\t\t\t\t\tvar coordinateCacheKey = rowIndex + '_' + event.id;\n\t\t\t\t\tvar xStart, xEnd;\n\t\t\t\t\tif (evs.$coordinates && evs.$coordinates[coordinateCacheKey]) {\n\t\t\t\t\t\txStart = evs.$coordinates[coordinateCacheKey].xStart;\n\t\t\t\t\t\txEnd = evs.$coordinates[coordinateCacheKey].xEnd;\n\t\t\t\t\t} else {\n\t\t\t\t\t\txStart = scheduler._timeline_getX(event, false, view);\n\t\t\t\t\t\txEnd = scheduler._timeline_getX(event, true, view);\n\n\t\t\t\t\t\tif (evs.$coordinates) {\n\t\t\t\t\t\t\tevs.$coordinates[coordinateCacheKey] = {\n\t\t\t\t\t\t\t\txStart: xStart,\n\t\t\t\t\t\t\t\txEnd: xEnd\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (scheduler._timeline_smart_render.isInXViewPort({left: xStart, right: xEnd}, viewPort)) {\n\t\t\t\t\t\tevsInViewport.push(event);\n\n\t\t\t\t\t\t// save to cache\n\t\t\t\t\t\tif (!this._rendered_events_cache[rowIndex])\n\t\t\t\t\t\t\tthis._rendered_events_cache[rowIndex] = [];\n\t\t\t\t\t\tthis._rendered_events_cache[rowIndex].push(String(event.id));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn evsInViewport;\n\t},\n\n\tgetVisibleRowCellsHTML: function(view, viewPort, stats, evs, i) {\n\t\t// full render for new row uses _rendered_header_cache\n\t\t// that contains currently visible cols\n\t\tvar dataWrapper = '';\n\t\tvar cellLeftPos;\n\n\t\tvar visibleColumns = this._rendered_header_cache;\n\n\t\tfor (var ind = 0; ind < visibleColumns.length; ind++) {\n\t\t\tvar j = visibleColumns[ind];\n\n\t\t\tcellLeftPos = view._h_cols[j].left - view.dx;\n\n\t\t\tif (scheduler._ignores[j]){\n\n\t\t\t\tif (view.render == \"cell\"){\n\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_cell_ignores(stats);\n\t\t\t\t}else{\n\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar_ignores();\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tif (view.render == \"cell\"){\n\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_cell(j, i, view, evs[i][j], stats, cellLeftPos);\n\t\t\t\t}else{\n\t\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar(j, i, view, evs[i], cellLeftPos);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dataWrapper;\n\t},\n\n\tgetVisibleTimelineRowsHTML: function(view, viewPort, evs, rowIndex) {\n\t\tvar dataWrapper = '';\n\t\tvar stats = scheduler._timeline_get_cur_row_stats(view, rowIndex);\n\t\tstats = scheduler._timeline_get_fit_events_stats(view, rowIndex, stats);\n\n\t\tvar cachedRow = view._label_rows[rowIndex];\n\n\t\tvar template = scheduler.templates[view.name + \"_row_class\"];\n\t\tvar templateParams = { view: view, section: cachedRow.section, template: template};\n\t\t// check vertical direction\n\t\tif (view.render == \"cell\") {\n\t\t\tdataWrapper += scheduler._timeline_get_html_for_cell_data_row(rowIndex, stats, cachedRow.top, cachedRow.section.key, templateParams);\n\t\t\tdataWrapper += this.getVisibleRowCellsHTML(view, viewPort, stats, evs, rowIndex);\n\t\t\tdataWrapper += '</div>';\n\t\t} else {\n\t\t\t//section 2\n\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar_matrix_line(rowIndex, stats, cachedRow.top, cachedRow.section.key, templateParams);\n\n\t\t\t// section 3\n\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar_data_row(stats, templateParams);\n\t\t\tdataWrapper += this.getVisibleRowCellsHTML(view, viewPort, stats, evs, rowIndex);\n\t\t\tdataWrapper += \"</div></div>\";\n\t\t}\n\n\t\treturn dataWrapper;\n\t},\n\n\tupdateGridRows: function(view, viewPort) {\n\t\tif (this._rows_to_delete.length) {\n\t\t\tthis._deleteGridRows(this._rows_to_delete, view);\n\t\t}\n\t\tif (this._rows_to_add.length) {\n\t\t\tthis._addGridRows(this._rows_to_add, view, viewPort);\n\t\t}\n\n\n\t},\n\n\t_deleteGridRows: function(items, view) {\n\t\tvar parent = scheduler.$container.querySelector('.dhx_cal_data .dhx_timeline_data_col');\n\t\tif (!parent) return;\n\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tconst sectionId = view.y_unit[items[i]] ? view.y_unit[items[i]].key : null;\n\t\t\tif(view._divBySectionId[sectionId]){\n\t\t\t\tview._divBySectionId[sectionId].remove();\n\t\t\t\tdelete view._divBySectionId[sectionId];\n\t\t\t}\n\t\t\t//var item = parent.querySelector('[data-section-index=\"'+(items[i])+'\"]');\n\t\t\t//parent.removeChild(item);\n\t\t}\n\n\t\tthis._rows_to_delete = [];\n\t},\n\n\t_addGridRows: function(items, view, viewPort) {\n\t\tvar parent = scheduler.$container.querySelector('.dhx_cal_data .dhx_timeline_data_col');\n\t\tif (!parent) return;\n\n\t\tvar evs = this.getPreparedEvents(view);\n\n\t\tvar html = '';\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\thtml += this.getVisibleTimelineRowsHTML(view, viewPort, evs, items[i]);\n\n\t\t}\n\t\tconst buffer = document.createElement('template');\n\t\tbuffer.innerHTML = html;\n\t\tparent.appendChild(buffer.content);\n\n\t\t//view._divBySectionId[items[i]].remove();\n\t\t//delete view._divBySectionId[items[i]];\n\t\tvar parent = scheduler.$container.querySelector('.dhx_cal_data .dhx_timeline_data_col');\n\t\tview._divBySectionId = {};\n\t\tfor(let i = 0, len = parent.children.length; i < len; i++){\n\t\t\tvar child = parent.children[i];\n\t\t\tif(child.hasAttribute(\"data-section-id\")){\n\t\t\t\tview._divBySectionId[child.getAttribute(\"data-section-id\")] = child;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tconst sectionId = view.y_unit[items[i]] ? view.y_unit[items[i]].key : null;\n\t\t\tscheduler._timeline_finalize_section_add(view, view.y_unit[items[i]].key, view._divBySectionId[sectionId]);\n\t\t}\n\t\tif (scheduler._mark_now) {\n\t\t\tscheduler._mark_now();\n\t\t}\n\t\tthis._rows_to_add = [];\n\t},\n\n\tupdateGridCols: function(view, viewPort) {\n\t\tvar visibleHeaderColumns = this._rendered_header_cache;\n\n\t\tvar visibleHeaderColumnsHash = {};\n\t\tfor(var i = 0; i < visibleHeaderColumns.length; i++){\n\t\t\tvisibleHeaderColumnsHash[visibleHeaderColumns[i]] = true;\n\t\t}\n\n\t\tconst allRows = scheduler.$container.querySelectorAll(\".dhx_timeline_data_row\");\n\t\tallRows.forEach((function(row){\n\t\t\tconst allCells = row.querySelectorAll(\"[data-col-id]\");\n\n\t\t\tconst renderedCells = Array.prototype.reduce.call(allCells, function(hash, cell){\n\t\t\t\thash[cell.dataset.colId] = cell;\n\t\t\t\treturn hash;\n\t\t\t}, {});\n\n\t\t\tvar shouldDelete = [],\n\t\t\tshouldRender = [];\n\t\t\tfor(var i in renderedCells){\n\t\t\t\tif(!visibleHeaderColumnsHash[i]){\n\t\t\t\t\tshouldDelete.push(renderedCells[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var i in visibleHeaderColumnsHash){\n\t\t\t\tif(!renderedCells[i]){\n\t\t\t\t\tshouldRender.push(i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tshouldDelete.forEach(function(cell){\n\t\t\t\tcell.remove();\n\t\t\t});\n\t\t\tif(shouldRender.length){\n\t\t\t\tthis._addGridCols(row, shouldRender, view, viewPort);\n\t\t\t}\n\t\t\t\t\n\t\t\t\n\t\t}).bind(this));\n\t},\n\n\t_addGridCols: function(row, items, view, viewPort) {\n\t\tvar grid = scheduler.$container.querySelector('.dhx_cal_data .dhx_timeline_data_col');\n\t\tif (!grid) return;\n\n\t\tvar evs = this.getPreparedEvents(view);\n\n\t\tconst sectionId = row.closest(\"[data-section-id]\").getAttribute(\"data-section-id\");\n\t\tconst sectionIndex = view.order[sectionId];\n\t\tvar html = '';\n\t\tvar stats = scheduler._timeline_get_cur_row_stats(view, sectionIndex);\n\t\tstats = scheduler._timeline_get_fit_events_stats(view, sectionIndex, stats);\n\n\t\tvar parent = row;\n\n\n\t\tif (parent) {\n\t\t\tfor (var j = 0; j < items.length; j++) {\n\t\t\t\tvar item = parent.querySelector('[data-col-id=\"'+items[j]+'\"]');\n\n\t\t\t\tif (!item) {\n\t\t\t\t\tvar cell = this.getVisibleGridCell(view, viewPort, stats, evs, sectionIndex, items[j]);\n\t\t\t\t\tif (cell)\n\t\t\t\t\t\thtml += cell;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst buffer = document.createElement('template');\n\t\t\tbuffer.innerHTML = html;\n\t\t\tparent.appendChild(buffer.content);\n\t\t}\n\n\t\t//this._cols_to_add = [];\n\t},\n\n\tgetVisibleGridCell: function(view, viewPort, stats, evs, rowIndex, cellIndex) {\n\t\tif (!view._h_cols[cellIndex]) return;\n\t\tvar dataWrapper = '';\n\t\tvar cellLeftPos = view._h_cols[cellIndex].left-view.dx;\n\n\t\tif (view.render == \"cell\") {\n\t\t\tif (scheduler._ignores[cellIndex]){\n\t\t\t\t//dataWrapper += scheduler._timeline_get_html_for_cell_ignores(stats);\n\t\t\t}else {\n\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_cell(cellIndex, rowIndex, view, evs[rowIndex][cellIndex], stats, cellLeftPos);\n\t\t\t}\n\t\t} else {\n\t\t\tif (scheduler._ignores[cellIndex]){\n\t\t\t\t//dataWrapper += scheduler._timeline_get_html_for_bar_ignores();\n\t\t\t}else {\n\t\t\t\tdataWrapper += scheduler._timeline_get_html_for_bar(cellIndex, rowIndex, view, evs[rowIndex], cellLeftPos);\n\t\t\t}\n\t\t}\n\n\t\treturn dataWrapper;\n\t}\n};\n\nscheduler.attachEvent(\"onClearAll\", function(){\n\tscheduler._timeline_smart_render._prepared_events_cache = null;\n\tscheduler._timeline_smart_render._rendered_events_cache = [];\n});\nscheduler.attachEvent(\"onBeforeLightbox\", function(){\n\tscheduler._timeline_smart_render.clearPreparedEventsCache();\n\treturn true;\n});\n\n/* timeline smart render end */\n\n}","import { TooltipManager } from \"./tooltipManager\";\n\nexport default function (scheduler: any) {\n\n\tscheduler.config.tooltip_timeout = 30;\n\tscheduler.config.tooltip_offset_y = 20;\n\tscheduler.config.tooltip_offset_x = 10;\n\tscheduler.config.tooltip_hide_timeout = 30;\n\n\tconst tooltipManager = new TooltipManager(scheduler);\n\n\tscheduler.ext.tooltips = tooltipManager;\n\n\tscheduler.attachEvent(\"onSchedulerReady\", function () {\n\n\t\ttooltipManager.tooltipFor({\n\t\t\tselector: \"[\" + scheduler.config.event_attribute + \"]\",\n\t\t\thtml: (event: MouseEvent) => {\n\t\t\t\tif (scheduler._mobile && !scheduler.config.touch_tooltip) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst targetEventId = scheduler._locate_event(event.target);\n\t\t\t\tif (scheduler.getEvent(targetEventId)) {\n\t\t\t\t\tconst event = scheduler.getEvent(targetEventId);\n\t\t\t\t\treturn scheduler.templates.tooltip_text(event.start_date, event.end_date, event);\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tglobal: false\n\t\t});\n\t});\n\n\tscheduler.attachEvent(\"onDestroy\", function () {\n\t\ttooltipManager.destructor();\n\t});\n\n\tscheduler.attachEvent(\"onLightbox\", function () {\n\t\ttooltipManager.hideTooltip();\n\t});\n\n\tscheduler.attachEvent(\"onBeforeDrag\", function() {\n\t\t// GS-2377: don't hide tooltip on mobile device when ontouchstart event occurs\n\t\tif (scheduler._mobile && scheduler.config.touch_tooltip) {\n\t\t\treturn true;\n\t\t}\n\t\ttooltipManager.hideTooltip();\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventDeleted\", function() {\n\t\ttooltipManager.hideTooltip();\n\t\treturn true;\n\t});\n\n}","export default function(scheduler){\n\nscheduler.attachEvent(\"onTimelineCreated\", function (obj){\n\n\tif(obj.render == \"tree\") {\n\t\tobj.y_unit_original = obj.y_unit;\n\t\tobj.y_unit = scheduler._getArrayToDisplay(obj.y_unit_original);\n\n        scheduler.attachEvent('onOptionsLoadStart', function(){\n            obj.y_unit = scheduler._getArrayToDisplay(obj.y_unit_original);\n        });\n\n\t\tscheduler.form_blocks[obj.name]={\n\t\t\trender:function(sns) {\n\t\t\t\tvar _result = \"<div class='dhx_section_timeline' style='overflow: hidden;'></div>\";\n\t\t\t\treturn _result;\n\t\t\t},\n\t\t\tset_value:function(node,value,ev,config){\n\t\t\t\tvar options = scheduler._getArrayForSelect(scheduler.matrix[config.type].y_unit_original, config.type);\n\t\t\t\tnode.innerHTML = '';\n\t\t\t\tvar temp_select = document.createElement('select');\n\t\t\t\tnode.appendChild(temp_select);\n\n\t\t\t\tvar select = node.getElementsByTagName('select')[0];\n\n\t\t\t\tif (!select._dhx_onchange && config.onchange) {\n\t\t\t\t\tselect.addEventListener('change', config.onchange);\n\t\t\t\t\tselect._dhx_onchange = true;\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < options.length; i++) {\n\t\t\t\t\tvar temp_option = document.createElement('option');\n\t\t\t\t\ttemp_option.value = options[i].key;\n\t\t\t\t\tif(temp_option.value == ev[scheduler.matrix[config.type].y_property])\n\t\t\t\t\t\ttemp_option.selected = true;\n\t\t\t\t\ttemp_option.innerHTML = options[i].label;\n\t\t\t\t\tselect.appendChild(temp_option);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget_value:function(node,ev,config){\n\t\t\t\treturn node.firstChild.value;\n\t\t\t},\n\t\t\tfocus:function(node){\n\t\t\t}\n\t\t};\n\n\n\t}\n});\n\nscheduler.attachEvent(\"onBeforeSectionRender\", function (render_name, y_unit, timeline){\n\tlet res = {};\n\tif(render_name == \"tree\"){\n\t\tlet height;\n\t\t// section 1\n\t\tlet tr_className, style_height, td_className;\n\t\tlet div_expand;\n\t\t// section 3\n\t\tlet table_className;\n\n\t\ttd_className = \"dhx_matrix_scell dhx_treetimeline\";\n\t\tif(y_unit.children) {\n\t\t\theight = timeline.folder_dy||timeline.dy;\n\t\t\tif(timeline.folder_dy && !timeline.section_autoheight) {\n\t\t\t\tstyle_height = \"height:\"+timeline.folder_dy+\"px;\";\n\t\t\t}\n\t\t\ttr_className = \"dhx_row_folder\";\n\t\t\ttd_className += \" folder\";\n\t\t\tif(y_unit.open){\n\t\t\t\ttd_className += \" opened\";\n\t\t\t}else{\n\t\t\t\ttd_className += \" closed\";\n\t\t\t}\n\t\t\tdiv_expand = \"<div class='dhx_scell_expand'></div>\";\n\t\t\ttable_className = (timeline.folder_events_available)?\"dhx_data_table folder_events\":\"dhx_data_table folder\";\n\t\t} else {\n\t\t\theight = timeline.dy;\n\t\t\ttr_className = \"dhx_row_item\";\n\t\t\ttd_className += \" item\";\n\t\t\tdiv_expand = '';\n\t\t\ttable_className = \"dhx_data_table\";\n\t\t}\n\t\t\n\t\tif(timeline.columns){\n\t\t\ttd_className += \" dhx_matrix_scell_columns\";\n\t\t}\n\n\t\ttd_className += (scheduler.templates[timeline.name+\"_scaley_class\"](y_unit.key, y_unit.label, y_unit) ?\n\t\t\t\" \"+scheduler.templates[timeline.name+\"_scaley_class\"](y_unit.key, y_unit.label, y_unit) : '');\n\n\t\tlet td_content;\n\t\tlet paddingValue;\n\t\tconst levelPadding = `var(--dhx-scheduler-treetimeline-level-padding) * ${y_unit.level}`;\n\n\t\tif(y_unit.level < 2){\n\t\t\tpaddingValue = `calc(${levelPadding} + 4px)`;\n\t\t} else {\n\t\t\tpaddingValue = `calc(${levelPadding})`;\n\t\t}\n\t\tconst padding = `style='--dhx-scheduler-treetimeline-level-padding-value: ${paddingValue}'`;\n\n\t\tif(timeline.columns && timeline.columns.length){\n\t\t\ttd_content  = `<div class='dhx_scell_name'><div class='dhx_scell_level' ${padding}>${div_expand}</div>${(scheduler.templates[timeline.name+'_scale_label'](y_unit.key, y_unit.label, y_unit)||y_unit.label)}</div>`;\n\t\t}else{\n\t\t\ttd_content = `<div class='dhx_scell_level' ${padding}>${div_expand}<div class='dhx_scell_name'>${(scheduler.templates[timeline.name+'_scale_label'](y_unit.key, y_unit.label, y_unit)||y_unit.label)}</div></div>`;\n\t\t}\n\t\n\t\tres = {\n\t\t\theight: height,\n\t\t\tstyle_height: style_height,\n\t\t\t//section 1\n\t\t\ttr_className: tr_className,\n\t\t\ttd_className: td_className,\n\t\t\ttd_content: td_content,\n\t\t\t//section 3\n\t\t\ttable_className: table_className\n\t\t};\n\t}\n\treturn res;\n});\n\nvar section_id_before; // section id of the event before dragging (to bring it back if user drop's event on folder without folder_events_available)\n\nscheduler.attachEvent(\"onBeforeEventChanged\", function(event_object, native_event, is_new) {\n\tif (scheduler._isRender(\"tree\")) { // if mode's render == tree\n\n\t\tvar ev_sections = scheduler._get_event_sections ? scheduler._get_event_sections(event_object) : [event_object[scheduler.matrix[scheduler._mode].y_property]];\n\t\tfor(var i = 0; i < ev_sections.length; i++){\n\t\t\tvar section = scheduler.getSection(ev_sections[i]);\n\t\t\tif (section && !!section.children && !scheduler.matrix[scheduler._mode].folder_events_available) { // section itself could be not defined in case of new event (addEventNow)\n\t\t\t\tif (!is_new) { //if old - move back\n\t\t\t\t\tevent_object[scheduler.matrix[scheduler._mode].y_property] = section_id_before;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n});\n\nscheduler.attachEvent(\"onBeforeDrag\", function (event_id, mode, native_event_object){\n\tif(scheduler._isRender(\"tree\")) {\n\t\tvar cell = scheduler._locate_cell_timeline(native_event_object);\n\t\tvar section_id;\n\t\tif(cell) {\n\t\t\tsection_id = scheduler.matrix[scheduler._mode].y_unit[cell.y].key;\n\t\t\tif(!!scheduler.matrix[scheduler._mode].y_unit[cell.y].children && !scheduler.matrix[scheduler._mode].folder_events_available) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tvar ev = scheduler.getEvent(event_id);\n\t\tvar property = scheduler.matrix[scheduler._mode].y_property;\n\n\t\tsection_id_before = (ev && ev[property]) ? ev[property] : section_id; // either event id or section_id will be available\n\t}\n\treturn true;\n});\n\nscheduler._getArrayToDisplay = function(array){ // function to flatten out hierarhical array, used for tree view\n\tvar result = [];\n\tvar fillResultArray = function(array, lvl, parent, skip){\n\t\tvar level = lvl||0;\n\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\tvar node = array[i];\n\t\t\tnode.level = level;\n\t\t\tnode.$parent = parent || null;\n\t\t\tif (!!node.children && typeof node.key == \"undefined\") {\n\t\t\t\tnode.key = scheduler.uid();\n\t\t\t}\n\n\t\t\tif (!skip) {\n\t\t\t\tresult.push(node);\n\t\t\t}\n\n\t\t\tif(node.children) {\n\t\t\t\tfillResultArray(node.children, level+1, node.key, skip || !node.open);\n\t\t\t}\n\t\t}\n\t};\n\tfillResultArray(array);\n\treturn result;\n};\n\n\nscheduler._getArrayForSelect = function(array, mode){ // function to flatten out hierarhical array, used for tree view\n\tvar result = [];\n\tvar fillResultArray = function(array){\n\t\tfor(var i=0; i<array.length; i++) {\n\t\t\tif(scheduler.matrix[mode].folder_events_available) {\n\t\t\t\tresult.push(array[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(!array[i].children) {\n\t\t\t\t\tresult.push(array[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(array[i].children)\n\t\t\t\tfillResultArray(array[i].children, mode);\n\t\t}\n\t};\n\tfillResultArray(array);\n\treturn result;\n};\n\n\n/*\n scheduler._toggleFolderDisplay(4) -- toggle display of the section with key 4 (closed -> open)\n scheduler._toggleFolderDisplay(4, true) -- open section with the key 4 (doesn't matter what status was before). False - close.\n scheduler._toggleFolderDisplay(4, false, true) -- close ALL sections. Key is not used in such condition.\n */\nscheduler._toggleFolderDisplay = function(key, status, all_sections){ // used for tree view\n\tvar marked;\n\tvar toggleElement = function(key, array, status, all_sections) {\n\t\tfor (var i=0; i<array.length; i++) {\n\t\t\tif((array[i].key == key || all_sections) && array[i].children) {\n\t\t\t\tarray[i].open = (typeof status != \"undefined\") ? status : !array[i].open;\n\t\t\t\tmarked = true;\n\t\t\t\tif(!all_sections && marked)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(array[i].children) {\n\t\t\t\ttoggleElement(key,array[i].children, status, all_sections);\n\t\t\t}\n\t\t}\n\t};\n\tvar section = scheduler.getSection(key);\n\n\tif((typeof status == \"undefined\") && !all_sections){\n\t\t//toggle\n\t\tstatus = !section.open;\n\t}\n\tif (scheduler.callEvent(\"onBeforeFolderToggle\", [section, status, all_sections])) {\n\t\ttoggleElement(key,scheduler.matrix[scheduler._mode].y_unit_original, status, all_sections);\n\t\tscheduler.matrix[scheduler._mode].y_unit = scheduler._getArrayToDisplay(scheduler.matrix[scheduler._mode].y_unit_original);\n\t\tscheduler.callEvent(\"onOptionsLoad\",[]);\n\t\tscheduler.callEvent(\"onAfterFolderToggle\", [section, status, all_sections]);\n\t}\n};\n\nscheduler.attachEvent(\"onCellClick\", function (x, y, a, b, event){\n\tif(scheduler._isRender(\"tree\")) {\n\t\tif(!scheduler.matrix[scheduler._mode].folder_events_available) {\n\t\t\tif(typeof scheduler.matrix[scheduler._mode].y_unit[y] != \"undefined\" &&\n\t\t\t\t!!scheduler.matrix[scheduler._mode].y_unit[y].children) {\n\t\t\t\tscheduler._toggleFolderDisplay(scheduler.matrix[scheduler._mode].y_unit[y].key);\n\t\t\t}\n\t\t}\n\t}\n});\n\nscheduler.attachEvent(\"onYScaleClick\", function (index, value, event){\n\tif(scheduler._isRender(\"tree\")) {\n\t\tif(!!value.children) {\n\t\t\tscheduler._toggleFolderDisplay(value.key);\n\t\t}\n\t}\n});\n\nscheduler.getSection = function(id){\n\tif(scheduler._isRender(\"tree\")) {\n\t\tvar obj;\n\t\tvar findElement = function(key, array) {\n\t\t\tfor (var i=0; i<array.length; i++) {\n\t\t\t\tif(array[i].key == key)\n\t\t\t\t\tobj = array[i];\n\t\t\t\tif(array[i].children)\n\t\t\t\t\tfindElement(key,array[i].children);\n\t\t\t}\n\t\t};\n\t\tfindElement(id, scheduler.matrix[scheduler._mode].y_unit_original);\n\t\treturn obj||null;\n\t}\n};\n\nscheduler.deleteSection = function(id){\n\tif(scheduler._isRender(\"tree\")) {\n\t\tvar result = false;\n\t\tvar deleteElement = function(key, array) {\n\t\t\tfor (var i=0; i<array.length; i++) {\n\t\t\t\tif(array[i].key == key) {\n\t\t\t\t\tarray.splice(i,1);\n\t\t\t\t\tresult = true;\n\t\t\t\t}\n\t\t\t\tif(result)\n\t\t\t\t\tbreak;\n\t\t\t\tif(array[i].children)\n\t\t\t\t\tdeleteElement(key,array[i].children);\n\t\t\t}\n\t\t};\n\t\tdeleteElement(id, scheduler.matrix[scheduler._mode].y_unit_original);\n\t\tscheduler.matrix[scheduler._mode].y_unit = scheduler._getArrayToDisplay(scheduler.matrix[scheduler._mode].y_unit_original);\n\t\tscheduler.callEvent(\"onOptionsLoad\",[]);\n\t\treturn result;\n\t}\n};\n\nscheduler.deleteAllSections = function(){\n    if(scheduler._isRender(\"tree\")) {\n        scheduler.matrix[scheduler._mode].y_unit_original = [];\n        scheduler.matrix[scheduler._mode].y_unit = scheduler._getArrayToDisplay(scheduler.matrix[scheduler._mode].y_unit_original);\n        scheduler.callEvent(\"onOptionsLoad\",[]);\n    }\n};\n\nscheduler.addSection = function(obj, parent_id){\n\tif(scheduler._isRender(\"tree\")) {\n\t\tvar result = false;\n\t\tvar addElement = function(obj, parent_key, array) {\n\t\t\tif(!parent_id) {\n\t\t\t\tarray.push(obj);\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var i=0; i<array.length; i++) {\n\t\t\t\t\tif(array[i].key == parent_key && !!array[i].children) {\n\t\t\t\t\t\tarray[i].children.push(obj);\n\t\t\t\t\t\tresult = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(result)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tif(array[i].children)\n\t\t\t\t\t\taddElement(obj,parent_key,array[i].children);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\taddElement(obj, parent_id, scheduler.matrix[scheduler._mode].y_unit_original);\n\t\tscheduler.matrix[scheduler._mode].y_unit = scheduler._getArrayToDisplay(scheduler.matrix[scheduler._mode].y_unit_original);\n\t\tscheduler.callEvent(\"onOptionsLoad\",[]);\n\t\treturn result;\n\t}\n};\n\n\nscheduler.openAllSections = function() {\n\tif(scheduler._isRender(\"tree\"))\n\t\tscheduler._toggleFolderDisplay(1, true, true);\n};\nscheduler.closeAllSections = function() {\n\tif(scheduler._isRender(\"tree\"))\n\t\tscheduler._toggleFolderDisplay(1, false, true);\n};\nscheduler.openSection = function(section_id){\n\tif(scheduler._isRender(\"tree\"))\n\t\tscheduler._toggleFolderDisplay(section_id, true);\n};\nscheduler.closeSection = function(section_id){\n\tif(scheduler._isRender(\"tree\"))\n\t\tscheduler._toggleFolderDisplay(section_id, false);\n};\n\n}","export default function(scheduler){\n\nscheduler._props = {};\nscheduler.createUnitsView=function(name,property,list,size,step,skip_incorrect, days){\n\tif (typeof name == \"object\"){\n\t\tlist = name.list;\n\t\tproperty = name.property;\n\t\tsize = name.size||0;\n\t\tstep = name.step||1;\n\t\tskip_incorrect = name.skip_incorrect;\n\t\tdays = name.days || 1;\n\t\tname = name.name;\n\t}\n\n\tscheduler._props[name]={map_to:property, options:list, step:step, position:0, days: days, layout:\"units\"};\n    if(size>scheduler._props[name].options.length){\n        scheduler._props[name]._original_size = size;\n        size = 0;\n    }\n    scheduler._props[name].size = size;\n\tscheduler._props[name].skip_incorrect = skip_incorrect||false;\n\n\tscheduler.date[name+\"_start\"]= scheduler.date.day_start;\n\tscheduler.templates[name+\"_date\"] = function(date, end_date){\n\t\tvar pr = scheduler._props[name];\n\t\tif(!(pr.days > 1)){\n\t\t\treturn scheduler.templates.day_date(date);\n\t\t}else{\n\t\t\treturn scheduler.templates.week_date(date, end_date);\n\t\t}\n\t};\n\n\tfunction getDateIndex(date) {\n\t\treturn Math.round((scheduler._correct_shift(+date, 1) - +scheduler._min_date) / (60 * 60 * 24 * 1000));\n\t}\n\n\tscheduler._get_unit_index = function(unit_view, date) {\n\t\tvar original_position = unit_view.position || 0;\n\t\tvar date_position = getDateIndex(date);\n\n\t\tvar l = unit_view.size || unit_view.options.length;\n\t\tif(date_position >= l) {\n\t\t\tdate_position = date_position % l;\n\t\t}\n\n\t\treturn original_position + date_position;\n\t};\n\tscheduler.templates[name + \"_scale_text\"] = function(id, label, option) {\n\t\tif (option.css) {\n\t\t\treturn \"<span class='\" + option.css + \"'>\" + label + \"</span>\";\n\t\t} else {\n\t\t\treturn label;\n\t\t}\n\t};\n\tscheduler.templates[name+\"_scale_date\"] = function(date) {\n\t\tvar unit_view = scheduler._props[name];\n\t\tvar list = unit_view.options;\n\t\tif (!list.length) return \"\";\n\t\tvar index = scheduler._get_unit_index(unit_view, date);\n\t\tvar option = list[index];\n\n\t\tvar dateIndex = getDateIndex(date);\n\t\tvar length = unit_view.size || unit_view.options.length;\n\t\tvar realDate = scheduler.date.add(scheduler.getState().min_date, Math.floor(dateIndex / length), \"day\");\n\n\t\treturn scheduler.templates[name + \"_scale_text\"](option.key, option.label, option, realDate);\n\t};\n\tscheduler.templates[name+\"_second_scale_date\"] = function(date) {\n\t\treturn scheduler.templates.week_scale_date(date);\n\t};\n\n\tscheduler.date[\"add_\"+name]=function(date,inc){\n\t\treturn scheduler.date.add(date,inc * scheduler._props[name].days,\"day\");\n\t};\n\tscheduler.date[\"get_\"+name+\"_end\"]=function(date){\n\t\tconst unit_view = scheduler._props[name];\n\t\tconst availSize = unit_view.size || unit_view.options.length;\n\t\tconst length = Math.min(availSize, unit_view.options.length);\n\t\treturn scheduler.date.add(date, length * scheduler._props[name].days, \"day\");\n\t};\n\n\tscheduler.attachEvent(\"onOptionsLoad\",function(){\n        var pr = scheduler._props[name];\n\t\tvar order = pr.order = {};\n\t\tvar list = pr.options;\n\t\tfor(var i=0; i<list.length;i++)\n\t\t\torder[list[i].key]=i;\n        if(pr._original_size && pr.size===0){\n            pr.size = pr._original_size;\n            delete pr._original_size;\n        }\n\t\tif(pr.size > list.length) {\n            pr._original_size = pr.size;\n            pr.position = 0;\n            pr.size = 0;\n        }\n        else\n            pr.size = pr._original_size||pr.size;\n\t\tif (scheduler._date && scheduler._mode == name)\n\t\t\tscheduler.setCurrentView(scheduler._date, scheduler._mode);\n\t});\n\n\tscheduler[\"mouse_\"+ name] = function(pos){ //mouse_coord handler\n\t\tvar pr = scheduler._props[this._mode];\n\n\t\tif (pr){\n\t\t\tpos = this._week_indexes_from_pos(pos);\n\t\t\tif(!this._drag_event) this._drag_event = {};\n\n\t\t\tif (this._drag_id && this._drag_mode){\n\t\t\t\tthis._drag_event._dhx_changed = true;\n\t\t\t}\n\n\n\t\t\tif(this._drag_mode && this._drag_mode == \"new-size\"){\n\t\t\t\tvar sday = scheduler._get_event_sday(scheduler._events[scheduler._drag_id]);\n\t\t\t\tif(Math.floor(pos.x / pr.options.length) != Math.floor(sday / pr.options.length))\n\t\t\t\t\tpos.x = sday;\n\t\t\t}\n\n\t\t\tvar size = (pr.size || pr.options.length);\n\t\t\tvar section_ind = pos.x % size;\n\t\t\tvar unit_ind = Math.min(section_ind+pr.position,pr.options.length-1);\n\n\t\t\tpos.section = (pr.options[unit_ind]||{}).key;\n\t\t\tpos.x = Math.floor(pos.x / size);\n\n\t\t\tvar ev = this.getEvent(this._drag_id);\n\t\t\tthis._update_unit_section({view:pr, event:ev, pos:pos});\n\t\t}\n\t\tpos.force_redraw = true;\n\n\t\treturn pos;\n\t};\n\n\tvar headerResized = false;\n\n\tfunction setHeaderSize(){\n\t\tif(!headerResized){\n\t\t\theaderResized = scheduler.xy.scale_height;\n\t\t\tscheduler.xy.scale_height = scheduler.xy.scale_height * 2;\n\t\t}\n\t}\n\tfunction revertHeaderSize(){\n\t\tif(headerResized){\n\t\t\tscheduler.xy.scale_height /= 2;\n\t\t\theaderResized = false;\n\t\t}\n\t}\n\n\tscheduler[name + \"_view\"] = function(enable){\n\t\tvar pr = scheduler._props[scheduler._mode];\n\t\tif(enable){\n\t\t\tif (pr && pr.days > 1){\n\t\t\t\tsetHeaderSize();\n\t\t\t}else{\n\t\t\t\trevertHeaderSize();\n\t\t\t}\n\t\t\tscheduler._reset_scale();\n\t\t}else{\n\t\t\trevertHeaderSize();\n\t\t}\n\t};\n\n\tscheduler.callEvent(\"onOptionsLoad\",[]);\n};\n\nscheduler._update_unit_section = function(action){\n\tvar view = action.view,\n\t\tevent = action.event,\n\t\tpos = action.pos;\n\tif(event) {\n\t\tevent[view.map_to] = pos.section;\n\t}\n};\n\nscheduler.scrollUnit=function(step){\n\tvar pr = scheduler._props[this._mode];\n\tif (pr){\n\t\tpr.position=Math.min(Math.max(0,pr.position+step),pr.options.length-pr.size);\n\t\tthis.setCurrentView();\n\t}\n};\n(function(){\n\tvar _removeIncorrectEvents = function(evs) {\n\t\tvar pr = scheduler._props[scheduler._mode];\n\t\tif(pr && pr.order && pr.skip_incorrect) {\n            var correct_events = [];\n\t\t\tfor(var i=0; i<evs.length; i++) {\n\t\t\t\tif(typeof pr.order[evs[i][pr.map_to]] != \"undefined\") {\n                    correct_events.push(evs[i]);\n\t\t\t\t}\n\t\t\t}\n            evs.splice(0,evs.length);\n\t\t\tevs.push.apply(evs,correct_events);\n\t\t}\n\t\treturn evs;\n\t};\n\tvar old_pre_render_events_table = scheduler._pre_render_events_table;\n\tscheduler._pre_render_events_table=function(evs,hold) {\n\t\tevs = _removeIncorrectEvents(evs);\n\t\treturn old_pre_render_events_table.apply(this, [evs, hold]);\n\t};\n\tvar old_pre_render_events_line = scheduler._pre_render_events_line;\n\tscheduler._pre_render_events_line = function(evs,hold){\n\t\tevs = _removeIncorrectEvents(evs);\n\t\treturn old_pre_render_events_line.apply(this, [evs, hold]);\n\t};\n\tvar fix_und=function(pr,ev){\n\t\tif (pr && typeof pr.order[ev[pr.map_to]] == \"undefined\"){\n\t\t\tif(pr.options.length)\n\t\t\t\tev[pr.map_to] = pr.options[0].key;\n\t\t\treturn true;\n\t\t}\n\t};\n\n\n\tvar oldive = scheduler.is_visible_events;\n\tscheduler.is_visible_events = function(e){\n\t\tvar res = oldive.apply(this,arguments);\n\t\tif (res){\n\t\t\tvar pr = scheduler._props[this._mode];\n\t\t\tif (pr && pr.size){\n\t\t\t\tvar val = pr.order[e[pr.map_to]];\n\t\t\t\tif (val < pr.position || val >= pr.size+pr.position )\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t};\n\n\tvar old_process_ignores = scheduler._process_ignores;\n\n\tscheduler._process_ignores = function(sd, n, mode, step, preserve){\n\t\tif(!scheduler._props[this._mode]){\n\t\t\told_process_ignores.call(this, sd, n, mode, step, preserve);\n\t\t\treturn;\n\t\t}\n\t\tthis._ignores={};\n\t\tthis._ignores_detected = 0;\n\t\tvar ignore = scheduler[\"ignore_\"+this._mode];\n\n\t\tif (ignore){\n\t\t\tvar sectionsCount = (scheduler._props && scheduler._props[this._mode] ?\n\t\t\t\t(scheduler._props[this._mode].size||scheduler._props[this._mode].options.length) : 1);\n\t\t\tn /= sectionsCount;\n\n\t\t\tvar ign_date = new Date(sd);\n\t\t\tfor (var i=0; i<n; i++){\n\t\t\t\tif (ignore(ign_date)){\n\t\t\t\t\tvar sectionStart = i * sectionsCount,\n\t\t\t\t\t\tsectionEnd = (i + 1) * sectionsCount;\n\n\t\t\t\t\tfor(var j = sectionStart; j < sectionEnd; j++) {\n\t\t\t\t\t\tthis._ignores_detected += 1;\n\t\t\t\t\t\tthis._ignores[j] = true;\n\t\t\t\t\t\tif (preserve)\n\t\t\t\t\t\t\tn++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tign_date = scheduler.date.add(ign_date, step, mode);\n\t\t\t\tif(scheduler.date[mode + '_start'])\n\t\t\t\t\tign_date = scheduler.date[mode + '_start'](ign_date);\n\t\t\t}\n\t\t}\n\t};\n\n\n\tvar t = scheduler._reset_scale;\n\tscheduler._reset_scale = function(){\n\t\tvar pr = scheduler._props[this._mode];\n\n\t\tif(pr){\n\t\t\t// section scroll in units view, check scroll boundaries\n\t\t\tif(pr.size && pr.position && pr.size + pr.position > pr.options.length){\n\t\t\t\tpr.position = Math.max(0, pr.options.length - pr.size);\n\t\t\t}else if(!pr.size){\n\t\t\t\tpr.position = 0;\n\t\t\t}\n\t\t\t//GS-2795: size can't be more than options length\n\t\t\tif(pr.size && pr.size > pr.options.length){\n\t\t\t\tpr.size = pr.options.length;\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar ret = t.apply(this,arguments);\n\t\tif (pr){\n\n\t\t\tthis._max_date = this.date.add(this._min_date,pr.days,\"day\");\n\n\t\t\tvar d = this._els[\"dhx_cal_data\"][0].childNodes;\n\t\t\tfor (var i=0; i < d.length; i++)\n\t\t\t\td[i].classList.remove(\"dhx_scale_holder_now\"); \n\n\t\t\t// set background for current date\n\t\t\tvar today = this._currentDate();\n\t\t\tif(today.valueOf() >= this._min_date && today.valueOf() < this._max_date) {\n\t\t\t\tvar dx = 24*60*60*1000;\n\t\t\t\tvar ind = Math.floor((today - scheduler._min_date)/dx);\n\t\t\t\tvar units_l = pr.size || pr.options.length;\n\t\t\t\tvar today_start = ind*units_l;\n\t\t\t\tvar today_end = today_start + units_l;\n\t\t\t\tfor (i=today_start; i<today_end; i++){\n\t\t\t\t\tif(d[i])\n\t\t\t\t\t\td[i].classList.add(\"dhx_scale_holder_now\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (pr.size && pr.size < pr.options.length){\n\n\t\t\t\tvar h = this._els[\"dhx_cal_header\"][0];\n\t\t\t\tvar arrow = document.createElement(\"div\");\n\t\t\t\tif (pr.position){\n\n\t\t\t\t\tthis._waiAria.headerButtonsAttributes(arrow, \"\");\n\n\t\t\t\t\tif (scheduler.config.rtl) {\n\t\t\t\t\t\tarrow.className = \"dhx_cal_next_button\";\n\t\t\t\t\t\tarrow.style.cssText = \"left:auto;margin-top:-8px;right:0px;position:absolute;\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarrow.className = \"dhx_cal_prev_button\";\n\t\t\t\t\t\tarrow.style.cssText = \"left:1px;margin-top:-8px;position:absolute;\";\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\th.firstChild.appendChild(arrow);\n\t\t\t\t\tarrow.addEventListener(\"click\", function(e) {\n\t\t\t\t\t\tscheduler.scrollUnit(pr.step*-1);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (pr.position+pr.size<pr.options.length){\n\t\t\t\t\tthis._waiAria.headerButtonsAttributes(arrow, \"\");\n\n\t\t\t\t\tarrow = document.createElement(\"div\");\n\t\t\t\t\tif (scheduler.config.rtl) {\n\t\t\t\t\t\tarrow.className = \"dhx_cal_prev_button\";\n\t\t\t\t\t\tarrow.style.cssText = \"left:1px;margin-top:-8px;position:absolute;\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarrow.className = \"dhx_cal_next_button\";\n\t\t\t\t\t\tarrow.style.cssText = \"left:auto;margin-top:-8px;right:0px;position:absolute;\";\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\th.lastChild.appendChild(arrow);\n\t\t\t\t\tarrow.addEventListener(\"click\", function () {\n\t\t\t\t\t\tscheduler.scrollUnit(pr.step);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\n\t};\n\n\tvar _get_view_end = scheduler._get_view_end;\n\tscheduler._get_view_end = function(){\n\t\tvar pr = scheduler._props[this._mode];\n\t\tif(pr && pr.days > 1) {\n\t\t\tvar dd = this._get_timeunit_start();\n\t\t\treturn scheduler.date.add(dd, pr.days, \"day\");\n\t\t}else{\n\t\t\treturn _get_view_end.apply(this, arguments);\n\t\t}\n\t};\n\n\tvar xh = scheduler._render_x_header;\n\tscheduler._render_x_header = function(i, left, d, h) {\n\n\t\tvar pr = scheduler._props[this._mode];\n\t\tif(!pr || pr.days <= 1) {\n\t\t\treturn xh.apply(this, arguments);\n\t\t}else if(pr.days > 1){\n\n\t\t\tvar headerWrapper = h.querySelector(\".dhx_second_cal_header\");\n\t\t\tif(!headerWrapper){\n\t\t\t\theaderWrapper = document.createElement(\"div\");\n\t\t\t\theaderWrapper.className = \"dhx_second_cal_header\";\n\t\t\t\th.appendChild(headerWrapper);\n\t\t\t}\n\n\t\t\tvar scale_height = scheduler.xy.scale_height;\n\t\t\tscheduler.xy.scale_height = Math.ceil(scale_height / 2);\n\t\t\txh.call(this, i, left, d, headerWrapper, Math.ceil(scheduler.xy.scale_height));\n\n\t\t\tvar units_l = pr.size || pr.options.length;\n\t\t\t// second scale\n\t\t\tif( (i+1)%units_l === 0 ) {\n\t\t\t\tvar head = document.createElement(\"div\");\n\t\t\t\thead.className = \"dhx_scale_bar dhx_second_scale_bar\";\n\t\t\t\tvar date = this.date.add(this._min_date, Math.floor(i/units_l), \"day\");\n\t\t\t\tif (this.templates[this._mode + \"_second_scalex_class\"]) {\n\t\t\t\t\thead.className += ' ' + this.templates[this._mode + \"_second_scalex_class\"](new Date(date));\n\t\t\t\t}\n\t\t\t\tvar s_left,\n\t\t\t\t\ts_width = this._cols[i]*units_l;\n\t\t\t\tif(units_l > 1 && this.config.rtl) {\n\t\t\t\t\ts_left = this._colsS[i-(units_l-1)] - this.xy.scroll_width; \n\t\t\t\t} else if (units_l > 1) {\n\t\t\t\t\ts_left = this._colsS[i-(units_l-1)] - this.xy.scale_width;\n\t\t\t\t} else {\n\t\t\t\t\ts_left = left;\n\t\t\t\t}\n\n\n\t\t\t\tthis.set_xy(head, s_width, this.xy.scale_height, s_left, 0); \n\t\t\t\thead.innerHTML = this.templates[this._mode + \"_second_scale_date\"](new Date(date), this._mode); //TODO - move in separate method\n\t\t\t\theaderWrapper.appendChild(head);\n\t\t\t}\n\t\t\tscheduler.xy.scale_height = scale_height;\n\t\t}\n\t};\n\n\tvar r = scheduler._get_event_sday;\n\tscheduler._get_event_sday=function(ev){\n\t\tvar pr = scheduler._props[this._mode];\n\t\tif (pr){\n\t\t\tif(pr.days <= 1){\n\t\t\t\tfix_und(pr,ev);\n\t\t\t\treturn this._get_section_sday(ev[pr.map_to]);\n\t\t\t}else{\n\t\t\t\tvar dx = 24*60*60*1000;\n\t\t\t\tvar ind = Math.floor(((ev.end_date.valueOf()-1 - ev.end_date.getTimezoneOffset() * 60 * 1000) -// -1 for events with 00:00 end time\n\t\t\t\t\t(scheduler._min_date.valueOf() - scheduler._min_date.getTimezoneOffset() * 60 * 1000))/dx);\n\n\t\t\t\tvar units_l = pr.size || pr.options.length;\n\t\t\t\tvar section_index = pr.order[ev[pr.map_to]];\n\t\t\t\treturn ( ind * units_l + section_index ) - pr.position;\n\t\t\t}\n\n\t\t}\n\t\treturn r.call(this,ev);\n\t};\n\tscheduler._get_section_sday = function(section){\n\t\tvar pr = scheduler._props[this._mode];\n\t\treturn pr.order[section]-pr.position;\n\t};\n\n\tvar l = scheduler.locate_holder_day;\n\tscheduler.locate_holder_day=function(a,b,ev) {\n\t\tvar pr = scheduler._props[this._mode];\n\t\tif (!pr) {\n\t\t\treturn l.apply(this, arguments);\n\t\t}\n\t\tvar section;\n\t\tif (!ev) {\n\t\t\tev = {\n\t\t\t\tstart_date: a,\n\t\t\t\tend_date: a\n\t\t\t};\n\t\t\tsection = 0;\n\t\t}\n\t\telse {\n\t\t\tfix_und(pr, ev);\n\t\t}\n\t\tif (pr.days <= 1) {\n\t\t\treturn (section === undefined ? pr.order[ev[pr.map_to]] : section) * 1 + (b ? 1 : 0) - pr.position;\n\t\t} else {\n\t\t\tvar dx = 24 * 60 * 60 * 1000;\n\t\t\tvar ind = Math.floor((ev.start_date.valueOf() - scheduler._min_date.valueOf()) / dx); // -1 for events with 00:00 end time\n\t\t\tvar units_l = pr.size || pr.options.length;\n\t\t\tvar section_index = section === undefined ? pr.order[ev[pr.map_to]] : section;\n\t\t\treturn (ind * units_l + section_index * 1) + (b ? 1 : 0) - pr.position;\n\t\t}\n\t};\n\n\tvar o = scheduler._time_order;\n\tscheduler._time_order = function(evs){\n\t\tvar pr = scheduler._props[this._mode];\n\t\tif (pr){\n\t\t\tevs.sort(function(a,b){\n\t\t\t\treturn pr.order[a[pr.map_to]]>pr.order[b[pr.map_to]]?1:-1;\n\t\t\t});\n\t\t} else\n\t\t\to.apply(this,arguments);\n\t};\n\n\n\tvar prerender = scheduler._pre_render_events_table;\n\tscheduler._pre_render_events_table = function(evs, hold){\n\t\tvar pr = scheduler._props[this._mode];\n\n\t\t// split multiday event into several one-day parts\n\t\tif(pr && pr.days > 1){\n\t\t\tvar days = {};\n\t\t\tfor(var i = 0; i < evs.length; i++){\n\t\t\t\tvar ev = evs[i];\n\t\t\t\tif(!scheduler.isOneDayEvent(evs[i])){\n\n\t\t\t\t\tvar to = new Date(Math.min(+ev.end_date, +this._max_date)),\n\t\t\t\t\t\tfrom = new Date(Math.max(+ev.start_date, +this._min_date));\n\t\t\t\t\tfrom = scheduler.date.day_start(from);\n\t\t\t\t\tevs.splice(i, 1);\n\t\t\t\t\ti--;\n\n\t\t\t\t\twhile(+from < +to){\n\t\t\t\t\t\tvar chunk = this._copy_event(ev);\n\t\t\t\t\t\tchunk.start_date = from;\n\t\t\t\t\t\tchunk.end_date = getNextDay(chunk.start_date);\n\t\t\t\t\t\tfrom = scheduler.date.add(from, 1, 'day');\n\n\t\t\t\t\t\tvar date = +scheduler.date.date_part(new Date(from));\n\t\t\t\t\t\tif(!days[date])\n\t\t\t\t\t\t\tdays[date] = [];\n\t\t\t\t\t\tdays[date].push(chunk);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tvar date = +scheduler.date.date_part(new Date(ev.start_date));\n\t\t\t\t\tif(!days[date])\n\t\t\t\t\t\tdays[date] = [];\n\t\t\t\t\tdays[date].push(ev);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tvar heights;\n\t\t\tvar evs = [];\n\t\t\tfor(var i in days){\n\t\t\t\tvar columnEvents = prerender.apply(this, [days[i], hold]);\n\t\t\t\tvar currentHeights = this._colsS.heights;\n\t\t\t\t// prerender table updates _colsS.heights array\n\t\t\t\t// which is used to define the height of multiday section\n\t\t\t\t// since columns are calculated separetely here - take maximum height value\n\t\t\t\tif(!heights || currentHeights[0] > heights[0]){\n\t\t\t\t\theights = currentHeights.slice();\n\t\t\t\t}\n\t\t\t\tevs.push.apply(evs, columnEvents);\n\t\t\t}\n\t\t\tvar schedulerHeights = this._colsS.heights;\n\t\t\tschedulerHeights.splice(0, schedulerHeights.length);\n\t\t\tschedulerHeights.push.apply(schedulerHeights, heights);\n\n\n\t\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\t\tif (this._ignores[evs[i]._sday]) {\n\t\t\t\t\tevs.splice(i, 1);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar current = evs[i];\n\t\t\t\t\tcurrent._first_chunk = current._last_chunk = false;\n\t\t\t\t\t// _sorder can calculated for event copies, update the originals\n\t\t\t\t\tvar originalEvent = this.getEvent(current.id);\n\t\t\t\t\toriginalEvent._sorder = current._sorder;\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tevs.sort(function(a, b) {\n\t\t\t\tif (a.start_date.valueOf() == b.start_date.valueOf())\n\t\t\t\t\treturn a.id > b.id ? 1 : -1;\n\t\t\t\treturn a.start_date > b.start_date ? 1 : -1;\n\t\t\t});\n\n\t\t}else{\n\t\t\tevs = prerender.apply(this, [evs, hold]);\n\t\t}\n\n\t\tfunction getNextDay(date){\n\t\t\tvar next_day = scheduler.date.add(date, 1, \"day\");\n\t\t\tnext_day = scheduler.date.date_part(next_day);\n\t\t\treturn next_day;\n\t\t}\n\t\treturn evs;\n\t};\n\n\tscheduler.attachEvent(\"onEventAdded\",function(id,ev){\n\t\tif (this._loading) return true;\n\t\tfor (var a in scheduler._props){\n\t\t\tvar pr = scheduler._props[a];\n\t\t\tif (typeof ev[pr.map_to] == \"undefined\" && pr.options[0]) {\n\t\t\t\tev[pr.map_to] = pr.options[0].key;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n\tscheduler.attachEvent(\"onEventCreated\",function(id,n_ev){\n\t\tvar pr = scheduler._props[this._mode];\n\t\tif (pr && n_ev){\n\t\t\tvar ev = this.getEvent(id);\n\t\t\tfix_und(pr,ev);\n\t\t\tvar pos = this._mouse_coords(n_ev);\n\t\t\tthis._update_unit_section({view:pr, event:ev, pos:pos});\n\n\t\t\tthis.event_updated(ev);\n\t\t}\n\t\treturn true;\n\t});\n})();\n\n\n}","export default function(scheduler){\n\nscheduler._get_url_nav = function(){\n\tvar p = {};\n\tvar data = (document.location.hash || \"\").replace(\"#\", \"\").split(\",\");\n\tfor (var i = 0; i < data.length; i++) {\n\t\tvar s = data[i].split(\"=\");\n\t\tif (s.length == 2)\n\t\t\tp[s[0]] = s[1];\n\t}\n\treturn p;\n};\n\nscheduler.attachEvent(\"onTemplatesReady\", function () {\n\tvar first = true;\n\tvar s2d = scheduler.date.str_to_date(\"%Y-%m-%d\");\n\tvar d2s = scheduler.date.date_to_str(\"%Y-%m-%d\");\n\tvar select_event =  scheduler._get_url_nav().event || null;\n\n\tscheduler.attachEvent(\"onAfterEventDisplay\", function(ev){\n\t\tselect_event = null;\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onBeforeViewChange\", function (om, od, m, d) {\n\t\tif (first) {\n\t\t\tfirst = false;\n\t\t\tvar p = scheduler._get_url_nav();\n\n\t\t\tif (p.event){\n\t\t\t\ttry{\n\t\t\t\t\tif(scheduler.getEvent(p.event)){\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\tshowEvent(p.event);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar handler = scheduler.attachEvent(\"onXLE\", function(){\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\tshowEvent(p.event);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tscheduler.detachEvent(handler);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (e){}\n\t\t\t}\n\n\t\t\tif (p.date || p.mode) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.setCurrentView((p.date ? s2d(p.date) : null), (p.mode || null));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t//assuming that mode is not available anymore\n\t\t\t\t\tthis.setCurrentView((p.date ? s2d(p.date) : null), m);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tvar values = [\n\t\t\t\"date=\" + d2s(d || od),\n\t\t\t\"mode=\" + (m || om)\n\t\t];\n\n\t\tif(select_event){\n\t\t\tvalues.push(\"event=\" + select_event);\n\t\t}\n\n\t\tvar text = \"#\" + values.join(\",\");\n\t\tdocument.location.hash = text;\n\t\treturn true;\n\t});\n\n\tfunction showEvent(e){\n\t\tif(scheduler.$destroyed){\n\t\t\treturn true;\n\t\t}\n\t\tselect_event = e;\n\t\tif(scheduler.getEvent(e)){\n\t\t\tscheduler.showEvent(e);\n\t\t}\n\t}\n});\n}","export default function(scheduler){\n\nscheduler._wa = {};\nscheduler.xy.week_agenda_scale_height = 20;\nscheduler.templates.week_agenda_event_text = function(start_date, end_date, event, date) {\n\treturn scheduler.templates.event_date(start_date) + \" \" + event.text;\n};\nscheduler.date.week_agenda_start = scheduler.date.week_start;\nscheduler.date.week_agenda_end = function(date) {\n\treturn scheduler.date.add(date, 7, \"day\");\n};\nscheduler.date.add_week_agenda = function(date, inc) {\n\treturn scheduler.date.add(date, inc * 7, \"day\");\n};\n\nscheduler.attachEvent(\"onSchedulerReady\", function() {\n\tvar t = scheduler.templates;\n\tif (!t.week_agenda_date)\n\t\tt.week_agenda_date = t.week_date;\n});\n\n(function() {\n\tvar scale_date_format = scheduler.date.date_to_str(\"%l, %F %d\");\n\tscheduler.templates.week_agenda_scale_date = function(date) {\n\t\treturn scale_date_format(date);\n\t};\n})();\n\nscheduler.attachEvent(\"onTemplatesReady\", function() {\n\n\tvar old = scheduler.render_data;\n\tscheduler.render_data = function(evs) {\n\t\tif (this._mode == \"week_agenda\") {\n\t\t\tscheduler.week_agenda_view(true);\n\t\t} else\n\t\t\treturn old.apply(this, arguments);\n\t};\n\n\tfunction renderDay(index){\n\t\treturn `<div class='dhx_wa_day_cont'>\n\t<div class='dhx_wa_scale_bar'></div>\n\t<div class='dhx_wa_day_data' data-day='${index}'></div>\n</div>`;\n\t}\n\n\tvar fillWeekAgendaTab = function() {\n\t//\tgetColumnSizes();\n\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = '';\n\t\tscheduler._rendered = [];\n\t\t\n\t\tvar html = `<div class=\"dhx_week_agenda_wrapper\">\n<div class='dhx_wa_column'>\n\t${renderDay(0)}\n\t${renderDay(1)}\n\t${renderDay(2)}\n</div>\n<div class='dhx_wa_column'>\n\t${renderDay(3)}\n\t${renderDay(4)}\n\t${renderDay(5)}\n\t${renderDay(6)}\n</div>\n</div>`;\n\n\t\tvar dateElement = scheduler._getNavDateElement();\n\t\tif(dateElement){\n\t\t\tdateElement.innerHTML = scheduler.templates[scheduler._mode + \"_date\"](scheduler._min_date, scheduler._max_date, scheduler._mode);\n\t\t}\n\t\t\n\t\tscheduler._els[\"dhx_cal_data\"][0].innerHTML = html;\n\n\t\tconst dayDivs = scheduler.$container.querySelectorAll(\".dhx_wa_day_cont\");\n\n\t\tscheduler._wa._selected_divs = [];\n\t\tvar events = scheduler.get_visible_events(); // list of events to be displayed in current week\n\t\tvar tstart = scheduler.date.week_start(scheduler._date);\n\t\tvar tend = scheduler.date.add(tstart, 1, \"day\");\n\t\tfor (var i = 0; i < 7; i++) {\n\t\t\tdayDivs[i]._date = tstart;\n\t\t\tdayDivs[i].setAttribute(\"data-date\", scheduler.templates.format_date(tstart));\n\n\t\t\tscheduler._waiAria.weekAgendaDayCell(dayDivs[i], tstart);\n\n\t\t\tvar scale_bar = dayDivs[i].querySelector(\".dhx_wa_scale_bar\");\n\t\t\tvar events_div = dayDivs[i].querySelector(\".dhx_wa_day_data\");\n\t\t\tscale_bar.innerHTML = scheduler.templates.week_agenda_scale_date(tstart);\n\t\t\tvar evs = []; // events which will be displayed in the current day\n\t\t\tfor (var j = 0; j < events.length; j++) {\n\t\t\t\tvar tev = events[j];\n\t\t\t\tif (tev.start_date < tend && tev.end_date > tstart)\n\t\t\t\t\tevs.push(tev);\n\t\t\t}\n\t\t\tevs.sort(function(a, b) {\n\t\t\t\tif (a.start_date.valueOf() == b.start_date.valueOf())\n\t\t\t\t\treturn a.id > b.id ? 1 : -1;\n\t\t\t\treturn a.start_date > b.start_date ? 1 : -1;\n\t\t\t});\n\t\t\tfor (var k = 0; k < evs.length; k++) {\n\t\t\t\tvar ev = evs[k];\n\t\t\t\tvar ev_div = document.createElement('div');\n\t\t\t\tscheduler._rendered.push(ev_div);\n\t\t\t\tvar ev_class = scheduler.templates.event_class(ev.start_date, ev.end_date, ev);\n\t\t\t\tev_div.classList.add('dhx_wa_ev_body');\n\t\t\t\tif(ev_class){\n\t\t\t\t\tev_div.classList.add(ev_class);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (scheduler.config.rtl){\n\t\t\t\t\tev_div.classList.add(\"dhx_wa_ev_body_rtl\");\n\t\t\t\t}\n\t\t\t\tif (ev._text_style)\n\t\t\t\t\tev_div.style.cssText = ev._text_style;\n\t\t\t\tif (ev.color)\n\t\t\t\t\tev_div.style.setProperty(\"--dhx-scheduler-event-background\", ev.color);\n\t\t\t\tif (ev.textColor)\n\t\t\t\t\tev_div.style.setProperty(\"--dhx-scheduler-event-color\", ev.textColor);\n\t\t\t\tif (scheduler._select_id && ev.id == scheduler._select_id && !(!scheduler.config.week_agenda_select && scheduler.config.week_agenda_select !== undefined)) {\n\t\t\t\t\tev_div.classList.add(\"dhx_cal_event_selected\");\n\t\t\t\t\tscheduler._wa._selected_divs.push(ev_div);\n\t\t\t\t}\n\t\t\t\tvar position = \"\";\n\t\t\t\tif (!ev._timed) {\n\t\t\t\t\tposition = \"middle\";\n\t\t\t\t\tif (ev.start_date.valueOf() >= tstart.valueOf() && ev.start_date.valueOf() <= tend.valueOf())\n\t\t\t\t\t\tposition = \"start\";\n\t\t\t\t\tif (ev.end_date.valueOf() >= tstart.valueOf() && ev.end_date.valueOf() <= tend.valueOf())\n\t\t\t\t\t\tposition = \"end\";\n\t\t\t\t}\n\t\t\t\tev_div.innerHTML = scheduler.templates.week_agenda_event_text(ev.start_date, ev.end_date, ev, tstart, position);\n\t\t\t\tev_div.setAttribute('event_id', ev.id); // for backward compatibility\n\t\t\t\tev_div.setAttribute(scheduler.config.event_attribute, ev.id);\n\n\t\t\t\tscheduler._waiAria.weekAgendaEvent(ev_div, ev);\n\n\t\t\t\tevents_div.appendChild(ev_div);\n\t\t\t}\n\t\t\ttstart = scheduler.date.add(tstart, 1, \"day\");\n\t\t\ttend = scheduler.date.add(tend, 1, \"day\");\n\t\t}\n\t};\n\tscheduler.week_agenda_view = function(mode) {\n\t\tscheduler._min_date = scheduler.date.week_start(scheduler._date);\n\t\tscheduler._max_date = scheduler.date.add(scheduler._min_date, 1, \"week\");\n\t\tscheduler.set_sizes();\n\t\tif (mode) { // mode enabled\n\t\t\tscheduler._table_view = scheduler._allow_dnd = true;\n\t\t\tscheduler.$container.querySelector(\".dhx_cal_header\").style.display = 'none';\n\n\t\t\t// cleaning dhx_cal_date from the previous date\n\t\t\tscheduler._els['dhx_cal_date'][0].innerHTML = \"\";\n\t\t\tfillWeekAgendaTab();\n\t\t} else { // leaving week_agenda mode\n\t\t\tscheduler._table_view = scheduler._allow_dnd = false;\n\t\t\tscheduler.$container.querySelector(\".dhx_cal_header\").style.display = '';\n\t\t}\n\t};\n\tscheduler.mouse_week_agenda = function(pos) {\n\t\tvar native_event = pos.ev;\n\n\t\tconst dayCont = pos.ev.target.closest(\".dhx_wa_day_cont\");\n\t\tlet date;\n\t\tif(dayCont){\n\t\t\tdate = dayCont._date;\n\t\t}\n\n\t\tif (!date)\n\t\t\treturn pos;\n\t\tpos.x = 0;\n\t\tvar diff = date.valueOf() - scheduler._min_date.valueOf();\n\t\tpos.y = Math.ceil(( diff / (1000 * 60) ) / this.config.time_step);\n\t\tif (this._drag_mode == 'move' && this._drag_pos && this._is_pos_changed(this._drag_pos, pos)) {\n\t\t\tvar event_div;\n\t\t\tthis._drag_event._dhx_changed = true;\n\t\t\tthis._select_id = this._drag_id;\n\t\t\tfor (var i = 0; i < scheduler._rendered.length; i++) {\n\t\t\t\tif (scheduler._drag_id == this._rendered[i].getAttribute(this.config.event_attribute))\n\t\t\t\t\tevent_div = this._rendered[i];\n\t\t\t}\n\t\t\tif (!scheduler._wa._dnd) {\n\t\t\t\tvar div = event_div.cloneNode(true);\n\t\t\t\tthis._wa._dnd = div;\n\t\t\t\tdiv.className = event_div.className;\n\t\t\t\tdiv.id = 'dhx_wa_dnd';\n\t\t\t\tdiv.className += ' dhx_wa_dnd';\n\t\t\t\tdocument.body.appendChild(div);\n\t\t\t}\n\t\t\tvar dnd_div = document.getElementById('dhx_wa_dnd');\n\t\t\tdnd_div.style.top = ((native_event.pageY || native_event.clientY) + 20) + \"px\";\n\t\t\tdnd_div.style.left = ((native_event.pageX || native_event.clientX) + 20) + \"px\";\n\t\t}\n\t\treturn pos;\n\t};\n\tscheduler.attachEvent('onBeforeEventChanged', function(event_object, native_event, is_new) {\n\t\tif (this._mode == 'week_agenda') {\n\t\t\tif (this._drag_mode == 'move') {\n\t\t\t\tvar dnd = document.getElementById('dhx_wa_dnd');\n\t\t\t\tdnd.parentNode.removeChild(dnd);\n\t\t\t\tscheduler._wa._dnd = false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t});\n\n\tscheduler.attachEvent(\"onEventSave\", function(id, data, is_new_event) {\n\t\tif (is_new_event && this._mode == 'week_agenda')\n\t\t\tthis._select_id = id;\n\t\treturn true;\n\t});\n\n\tscheduler._wa._selected_divs = [];\n\n\tscheduler.attachEvent(\"onClick\", function(event_id, native_event_object) {\n\t\tif (this._mode == 'week_agenda' && !(!scheduler.config.week_agenda_select && scheduler.config.week_agenda_select !== undefined)) {\n\t\t\tif (scheduler._wa._selected_divs) {\n\t\t\t\tfor (var i = 0; i < this._wa._selected_divs.length; i++) {\n\t\t\t\t\tvar div = this._wa._selected_divs[i];\n\t\t\t\t\tdiv.className = div.className.replace(/ dhx_cal_event_selected/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.for_rendered(event_id, function(event_div) {\n\t\t\t\tevent_div.className += \" dhx_cal_event_selected\";\n\t\t\t\tscheduler._wa._selected_divs.push(event_div);\n\t\t\t});\n\t\t\t// scheduler.select(event_id);\n\t\t\t// not using .select(), as it triggers redraw of the view and resets the state of possible scrolls in day cells\n\t\t\tscheduler._select_id = event_id;\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n});\n\n\n}","export default function(scheduler){\nscheduler.attachEvent(\"onLightBox\",function(){\n\tif (this._cover){\n\t\ttry{\n\t\t\tthis._cover.style.height = this.expanded ? \"100%\" : ((document.body.parentNode||document.body).scrollHeight+\"px\");\n\t\t} catch(e) {\n\n\t\t}\n\t}\n});\n\nscheduler.form_blocks.select.set_value=function(node,value,ev){\n\tif (typeof value == \"undefined\" || value === \"\")\n\t\tvalue = (node.firstChild.options[0]||{}).value;\n\tnode.firstChild.value=value||\"\";\n};\n\n}","export default function(scheduler){\n\n\t// scheduler.config.year_x = 4;\n\t// scheduler.config.year_y = 3;\n\t// scheduler.xy.year_top = 0;\n\n\tscheduler.templates.year_date = function(date) {\n\t\treturn scheduler.date.date_to_str(scheduler.locale.labels.year_tab + \" %Y\")(date);\n\t};\n\tscheduler.templates.year_month = scheduler.date.date_to_str(\"%F\");\n\tscheduler.templates.year_scale_date = scheduler.date.date_to_str(\"%D\");\n\tscheduler.templates.year_tooltip = function(s, e, ev) {\n\t\treturn ev.text;\n\t};\n\n\tconst isYearMode = function() {\n\t\treturn scheduler._mode == \"year\";\n\t};\n\t\n\tconst getCellDate = function(node){\n\t\tvar day = scheduler.$domHelpers.closest(node, \"[data-cell-date]\");\n\t\tif(!day || !day.hasAttribute(\"data-cell-date\")) return null;\n\t\treturn scheduler.templates.parse_date(day.getAttribute(\"data-cell-date\"));\n\t};\n\n\t// dbl click hook for scheduler._on_dbl_click\n\tscheduler.dblclick_dhx_year_grid= function(e) {\n\t\tif (isYearMode()) {\n\t\t\tconst target = e.target;\n\t\t\tif(scheduler.$domHelpers.closest(target, \".dhx_before\") || scheduler.$domHelpers.closest(target, \".dhx_after\")){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tconst date = getCellDate(target);\n\t\t\t\n\t\t\tif(date){\n\t\t\t\tconst start = date;\n\t\t\t\tconst end = this.date.add(start, 1, \"day\");\n\t\t\t\tif (!this.config.readonly && this.config.dblclick_create){\n\t\t\t\t\tthis.addEventNow(start.valueOf(), end.valueOf(), e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\tscheduler.attachEvent(\"onEventIdChange\", function(){\n\t\tif (isYearMode())\n\t\t\tthis.year_view(true);\n\t});\n\n\n\tvar old = scheduler.render_data;\n\tscheduler.render_data = function(evs) {\n\t\tif (!isYearMode()) return old.apply(this, arguments);\n\t\tfor (var i = 0; i < evs.length; i++)\n\t\t\tthis._year_render_event(evs[i]);\n\t};\n\n\tvar clear = scheduler.clear_view;\n\tscheduler.clear_view = function() {\n\t\tif (!isYearMode()) return clear.apply(this, arguments);\n\t\tvar dates = scheduler._year_marked_cells,\n\t\t\tdiv = null;\n\t\tfor (var date in dates) {\n\t\t\tif (dates.hasOwnProperty(date)) {\n\t\t\t\tdiv = dates[date];\n\t\t\t\tdiv.classList.remove(\"dhx_year_event\", \"dhx_cal_datepicker_event\");\n\t\t\t\t// div.className = \"dhx_month_head\";\n\t\t\t\t// div.removeAttribute(\"date\");\n\t\t\t\t// div.removeAttribute(\"data-year-date\");\n\t\t\t}\n\t\t}\n\t\tscheduler._year_marked_cells = {};\n\t};\n\n\tscheduler._hideToolTip = function() {\n\t\tif (this._tooltip) {\n\t\t\tthis._tooltip.style.display = \"none\";\n\t\t\tthis._tooltip.date = new Date(9999, 1, 1);\n\t\t}\n\t};\n\n\tscheduler._showToolTip = function(date, pos, e, src) {\n\t\tif (this._tooltip) {\n\t\t\tif (this._tooltip.date.valueOf() == date.valueOf()) return;\n\t\t\tthis._tooltip.innerHTML = \"\";\n\t\t} else {\n\t\t\tvar t = this._tooltip = document.createElement(\"div\");\n\t\t\tt.className = \"dhx_year_tooltip\";\n\t\t\tif (this.config.rtl) t.className += \" dhx_tooltip_rtl\";\n\t\t\tdocument.body.appendChild(t);\n\t\t\tt.addEventListener(\"click\", scheduler._click.dhx_cal_data);\n\t\t\tt.addEventListener(\"click\", function(e){\n\t\t\t\tif(e.target.closest(`[${scheduler.config.event_attribute}]`)){\n\t\t\t\t\tconst id = e.target.closest(`[${scheduler.config.event_attribute}]`).getAttribute(scheduler.config.event_attribute);\n\t\t\t\t\tscheduler.showLightbox(id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tvar evs = this.getEvents(date, this.date.add(date, 1, \"day\"));\n\t\tvar html = \"\";\n\n\t\tfor (var i = 0; i < evs.length; i++) {\n\t\t\tvar ev = evs[i];\n\t\t\tif(!this.filter_event(ev.id, ev))\n\t\t\t\tcontinue;\n\n\t\t\tvar bg_color = (ev.color ? (\"--dhx-scheduler-event-background:\" + ev.color + \";\") : \"\");\n\t\t\tvar color = (ev.textColor ? (\"--dhx-scheduler-event-color:\" + ev.textColor + \";\") : \"\");\n\n\t\t\thtml += \"<div class='dhx_tooltip_line' style='\" + bg_color + \"\" + color + \"' event_id='\" + evs[i].id + \"' \"+this.config.event_attribute+\"='\"+evs[i].id+\"'>\";\n\t\t\thtml += \"<div class='dhx_tooltip_date' style='\" + bg_color + \"\" + color + \"'>\" + (evs[i]._timed ? this.templates.event_date(evs[i].start_date) : \"\") + \"</div>\";\n\t\t\thtml += \"<div class='dhx_event_icon icon_details'>&nbsp;</div>\";\n\t\t\thtml += this.templates.year_tooltip(evs[i].start_date, evs[i].end_date, evs[i]) + \"</div>\";\n\t\t}\n\n\t\tthis._tooltip.style.display = \"\";\n\t\tthis._tooltip.style.top = \"0px\";\n\n\n\t\tif (document.body.offsetWidth - pos.left - this._tooltip.offsetWidth < 0)\n\t\t\tthis._tooltip.style.left = pos.left - this._tooltip.offsetWidth + \"px\";\n\t\telse\n\t\t\tthis._tooltip.style.left = pos.left + src.offsetWidth + \"px\";\n\n\t\tthis._tooltip.date = date;\n\t\tthis._tooltip.innerHTML = html;\n\n\t\tif (document.body.offsetHeight - pos.top - this._tooltip.offsetHeight < 0)\n\t\t\tthis._tooltip.style.top = pos.top - this._tooltip.offsetHeight + src.offsetHeight + \"px\";\n\t\telse\n\t\t\tthis._tooltip.style.top = pos.top + \"px\";\n\t};\n\n\tscheduler._year_view_tooltip_handler = function(e){\n\t\tif (!isYearMode()) return;\n\n\t\tvar src = e.target || e.srcElement;\n\t\tif (src.tagName.toLowerCase() == 'a') // fix for active links extension (it adds links to the date in the cell)\n\t\t\tsrc = src.parentNode;\n\t\tif (scheduler._getClassName(src).indexOf(\"dhx_year_event\") != -1)\n\t\t\tscheduler._showToolTip(scheduler.templates.parse_date(src.getAttribute(\"data-year-date\")), scheduler.$domHelpers.getOffset(src), e, src);\n\t\telse\n\t\t\tscheduler._hideToolTip();\n\t};\n\tscheduler._init_year_tooltip = function() {\n\t\tscheduler._detachDomEvent(scheduler._els[\"dhx_cal_data\"][0], \"mouseover\", scheduler._year_view_tooltip_handler);\n\t\tscheduler.event(scheduler._els[\"dhx_cal_data\"][0], \"mouseover\", scheduler._year_view_tooltip_handler);\n\t};\n\n\tscheduler._get_year_cell = function(d) {\n\t\tvar dateString = scheduler.templates.format_date(d);\n\t\tvar cells = this.$root.querySelectorAll(`.dhx_cal_data .dhx_cal_datepicker_date[data-cell-date=\"${dateString}\"]`);\n\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\tif(!scheduler.$domHelpers.closest(cells[i], \".dhx_after, .dhx_before\")){\n\t\t\t\treturn cells[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\n\tscheduler._year_marked_cells = {};\n\tscheduler._mark_year_date = function(date, event) {\n\t\tvar dateString = scheduler.templates.format_date(date);\n\t\tvar cell = this._get_year_cell(date);\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\t\tvar ev_class = this.templates.event_class(event.start_date, event.end_date, event);\n\t\tif (!scheduler._year_marked_cells[dateString]) {\n\t\t\tcell.classList.add(\"dhx_year_event\", \"dhx_cal_datepicker_event\");// = \"dhx_month_head dhx_year_event\";\n\t\t\tcell.setAttribute(\"data-year-date\", dateString);\n\t\t\tcell.setAttribute(\"date\", dateString);\n\t\t\tscheduler._year_marked_cells[dateString] = cell;\n\t\t}\n\t\tif(ev_class){\n\t\t\tcell.classList.add(ev_class);\n\t\t}\n\t};\n\tscheduler._unmark_year_date = function(date) {\n\t\tvar cell = this._get_year_cell(date);\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\t\tcell.classList.remove(\"dhx_year_event\", \"dhx_cal_datepicker_event\");\n//\t\tcell.className = \"dhx_month_head\";\n\t};\n\tscheduler._year_render_event = function(event) {\n\t\tvar date = event.start_date;\n\t\tif (date.valueOf() < this._min_date.valueOf()){\n\t\t\tdate = this._min_date;\n\t\t} else {\n\t\t\tdate = this.date.date_part(new Date(date));\n\t\t}\n\n\t\twhile (date < event.end_date) {\n\t\t\tthis._mark_year_date(date, event);\n\t\t\tdate = this.date.add(date, 1, \"day\");\n\t\t\tif (date.valueOf() >= this._max_date.valueOf())\n\t\t\t\treturn;\n\t\t}\n\t};\n\n\tscheduler.year_view = function(mode) {\n\n\t\tscheduler.set_sizes();\n\n\t\tscheduler._table_view = mode;\n\n\t\tif (this._load_mode && this._load()) return;\n\n\t\tif (mode) {\n\t\t\tscheduler._init_year_tooltip();\n\t\t\tscheduler._reset_year_scale();\n\t\t\tif (scheduler._load_mode && scheduler._load()){\n\t\t\t\tscheduler._render_wait = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tscheduler.render_view_data();\n\t\t} else {\n\t\t\tscheduler._hideToolTip();\n\t\t}\n\t};\n\n\tscheduler._reset_year_scale = function(){\n\n\t\tvar dataArea = this._els[\"dhx_cal_data\"][0];\n\n\t\tdataArea.scrollTop = 0; //fix flickering in FF\n\t\tdataArea.innerHTML = \"\";\n\n\t\tlet yearStart = this.date.year_start(new Date(this._date));\n\t\t\n\t\tthis._min_date = this.date.week_start(new Date(yearStart));\n\n\t\tconst wrapper = document.createElement(\"div\");\n\t\twrapper.classList.add(\"dhx_year_wrapper\");\n\n\t\tlet currentDate = yearStart;\n\t\tfor(let i = 0; i < 12; i++){\n\t\t\tlet yearBox = document.createElement(\"div\");\n\t\t\tyearBox.className = \"dhx_year_box\";\n\n\t\t\tyearBox.setAttribute(\"date\", this._helpers.formatDate(currentDate));\n\t\t\tyearBox.setAttribute(\"data-month-date\", this._helpers.formatDate(currentDate));\n\t\t\tyearBox.innerHTML = `<div class='dhx_year_month'>${this.templates.year_month(currentDate)}</div>\n\t\t\t<div class='dhx_year_grid'></div>`;\n\n\t\t\tconst yearGrid = yearBox.querySelector(\".dhx_year_grid\");\n\t\t\tconst datepicker = scheduler._createDatePicker(null, {\n\t\t\t\tdate: currentDate,\n\t\t\t\tfilterDays: scheduler.ignore_year,\n\t\t\t\tminWeeks: 6\n\t\t\t});\n\t\t\tdatepicker._renderDayGrid(yearGrid);\n\t\t\tdatepicker.destructor();\n\n\t\t\twrapper.appendChild(yearBox);\n\n\t\t\tcurrentDate = this.date.add(currentDate, 1, \"month\");\n\n\t\t}\n\t\tdataArea.appendChild(wrapper);\n\n\t\tlet lastDate = this.date.add(yearStart, 1, \"year\");\n\t\tif(lastDate.valueOf() != this.date.week_start(new Date(lastDate)).valueOf()){\n\t\t\tlastDate = this.date.week_start(new Date(lastDate));\n\t\t\tlastDate = this.date.add(lastDate, 1, \"week\");\n\t\t}\n\t\tthis._max_date = lastDate;\n\t\tvar dateElement = this._getNavDateElement();\n\t\tif(dateElement){\n\t\t\tdateElement.innerHTML = this.templates[this._mode + \"_date\"](yearStart, lastDate, this._mode);\n\t\t}\n\t};\n\n\tvar getActionData = scheduler.getActionData;\n\tscheduler.getActionData = function(n_ev) {\n\t\tif(!isYearMode()){\n\t\t\treturn getActionData.apply(scheduler, arguments);\n\t\t}\n\t\t\n\t\tvar date = getCellDate(n_ev.target);\n\t\treturn {\n\t\t\tdate:date,\n\t\t\tsection:null\n\t\t};\n\t};\n\n\tvar locateEvent = scheduler._locate_event;\n\tscheduler._locate_event = function(node) {\n\t\tvar id = locateEvent.apply(scheduler, arguments);\n\t\tif(!id){\n\t\t\t\n\t\t\tvar date = getCellDate(node);\n\t\t\tif(!date) return null;\n\t\t\tvar evs = scheduler.getEvents(date, scheduler.date.add(date, 1, \"day\"));\n\t\t\tif(!evs.length) return null;\n\n\t\t\t//can be multiple events in the cell, return any single one\n\t\t\tid = evs[0].id;\n\t\t}\n\t\treturn id;\n\t};\n\n\tscheduler.attachEvent(\"onDestroy\", function(){\n\t\tscheduler._hideToolTip();\n\t});\n}","import SchedulerFactory from \"./scheduler_factory\";\nimport allExtensions from \"./ext/extensions_all\";\n\nconst factory = new SchedulerFactory(allExtensions);\n\nconst scheduler = factory.getSchedulerInstance();\nconst Scheduler = {\n\tplugin: scheduler.bind(factory.plugin, factory)\n};\n\nwindow.scheduler = scheduler;\nwindow.Scheduler = Scheduler;\n\nif(!window.$dhx) {\n\twindow.$dhx = {};\n}\n\nwindow.$dhx.scheduler = scheduler;\nwindow.$dhx.Scheduler = Scheduler;\n\nexport { scheduler, Scheduler };","\n\nimport dhtmlxHook from \"./dhtmlx_hook\";\nimport \"./css/theme.less\";\ndhtmlxHook();\n\nimport global from \"./global\";\n\nimport factoryMethod from \"./scheduler_factory_method\";\nimport ExtensionsManager from \"./ext/extension_manager\";\n\nclass SchedulerFactory {\n\n\tconstructor (extensions) {\n\t\tthis._seed = 0;\n\t\tthis._schedulerPlugins = [];\n\t\tthis._bundledExtensions = extensions;\n\t\tthis._extensionsManager = new ExtensionsManager(extensions);\n\t}\n\n\tplugin(code) {\n\t\tthis._schedulerPlugins.push(code);\n\n\t\tif(global.scheduler){\n\t\t\tcode(global.scheduler);\n\t\t}\n\t}\n\t\n\tgetSchedulerInstance(initConfig) {\n\t\tvar scheduler = factoryMethod(this._extensionsManager);\n\n\t\tfor (var i = 0; i < this._schedulerPlugins.length; i++) {\n\t\t\tthis._schedulerPlugins[i](scheduler);\n\t\t}\n\t\tscheduler._internal_id = this._seed++;\n\t\n\t\tif (this.$syncFactory){\n\t\t\tthis.$syncFactory(scheduler);\n\t\t}\n\n\t\tif(initConfig){\n\t\t\tthis._initFromConfig(scheduler, initConfig);\n\t\t}\n\n\t\treturn scheduler;\n\t}\n\n\t_initFromConfig(scheduler, initConfig){\n\t\tif(initConfig.plugins){\n\t\t\tscheduler.plugins(initConfig.plugins);\n\t\t}\n\t\n\t\tif(initConfig.config){\n\t\t\tscheduler.mixin(scheduler.config, initConfig.config, true);\n\t\t}\n\t\n\t\tif(initConfig.templates){\n\t\t\tscheduler.attachEvent(\"onTemplatesReady\", function(){\n\t\t\t\tscheduler.mixin(scheduler.templates, initConfig.templates, true);\n\t\t\t}, {once: true});\n\t\t}\n\t\n\t\tif(initConfig.events){\n\t\t\tfor(const event in initConfig.events){\n\t\t\t\tscheduler.attachEvent(event, initConfig.events[event]);\n\t\t\t}\n\t\t}\n\t\n\t\tif(initConfig.locale){\n\t\t\tscheduler.i18n.setLocale(initConfig.locale);\n\t\t}\n\t\n\t\tif(Array.isArray(initConfig.calendars)){\n\t\t\tinitConfig.calendars.forEach(function(calendar){\n\t\t\t\tscheduler.addCalendar(calendar);\n\t\t\t});\n\t\t}\n\t\n\t\tif(initConfig.container){\n\t\t\tscheduler.init(initConfig.container);\n\t\t} else {\n\t\t\tscheduler.init();\n\t\t}\n\t\n\t\tif(initConfig.data){\n\t\t\tif(typeof initConfig.data === \"string\"){\n\t\t\t\tscheduler.load(initConfig.data);\n\t\t\t}else{\n\t\t\t\tscheduler.parse(initConfig.data);\n\t\t\t}\n\t\t}\n\t}\n\t\n\n}\n\nexport default SchedulerFactory;"],"names":["global$1","window","global","dragHighlightPos","scheduler","dndMarkers","dragStarted","eventNode","event","isEnabled","config","drag_highlight","markTimespan","checkViewName","viewName","viewObj","getView","layout","createMarkerConfig","configSettings","sectionId","style","top","left","marginLeft","sections","markerObject","start_date","end_date","css","html","round_position","index","_get_date_index","rounded_date","_trace_x","date","add","createViewMarker","settings","markerConfigs","monthViewMarkersArray","weekDates","currDate","Date","valueOf","obj","push","week_start","cells","$container","querySelectorAll","event_attribute","id","i","length","cloneNode","unitMarkersArray","sectionPropertyName","y_property","map_to","formatedSections","String","split","section_delimiter","map","element","elems","columnViewMarkersArray","eventNodes","eventNodeClone","getAttribute","forEach","cfg","attachEvent","mode","e","getEvent","target","closest","getState","cascade_event_display","unselect","getActionData","section","unmarkTimespan","limitPlugin","mark_now","display_marked_timespans","overwrite_marked_timespans","dhx_time_block","default_timespan_type","get_resulting_options","days","zones","options","type","getZones","ev","timespans","day_index","day_value","timespan_type","s","containers","_props","matrix","container","property","view","linker","_add_timespan_zones","_get_blocked_zones","blockTime","addMarkedTimespan","unblockTime","deleteMarkedTimespan","checkInMarkedTimespan","on_overlap","res","temp_start_date","temp_end_date","_marked_timespans","date_part","getDay","eventStart","_get_zone_minutes","eventEnd","getDate","markerStart","markerEnd","checkLimitViolation","check_limits","c","evs","rec_type","_end_date","seriesEnd","limit_start","limit_end","complete_res","p","_timed","isOneDayEvent","allow","_drag_id","_drag_mode","setHours","setMinutes","checkEvent","callEvent","timeline_zones","blocked_timeline_zones","this","_get_relevant_blocked_zones","resultZones","concat","_mark_now","hide","dhx_now_time","_els","now","_currentDate","_remove_mark_now","_max_date","_min_date","getHours","first_hour","last_hour","locate_holder_day","_append_mark_now","zone_start","_table_view","_mode","start_index","end_index","units_l","size","position","r_divs","t_day","t_div","_render_marked_timespan","els","div","parent","parentNode","removeChild","getMinutes","_prepare_timespan_options","r_configs","temp_configs","Array","t_days","slice","cloned_config","_lame_clone","apply","undefined","invert_zones","invertZones","uid","view_key","hasOwnProperty","ids","t_config","_lame_copy","k","c_config","t_sd","t_ed","zone_end","_get_dates_by_index","start","end","dates","start_day","delta","t_date","_get_css_classes_by_config","css_classes","join","_get_block_by_config","block","document","createElement","innerHTML","appendChild","area","day","blocks","min_date","max_date","date_to_display","min_day","areas","_","_scales","sday","_cols","_ignores","block_proto","className","height","width","order","inner_index","locate_holder","Math","max","min","all_hours_height","hour_size_px","hour_ms","round","_mark_timespans","data","divs","_on_scale_add_marker","len","childNodes","firstChild","_getClassName","indexOf","configuration","Error","rebuild_els","get_elements","timespans_ids","_marked_timespans_ids","timespan_types","_marked_timespans_types","_addMarkerTimespanConfig","unit_id","timespans_view","day_configs","_array","configs","current_zones","resulting_zones","c_zone_start","c_zone_end","isLast","offset","splice","_subtract_timespan_zones","is_modified","d","_delete_marked_timespan_by_id","parent_array","_delete_marked_timespan_by_config","viewspans","_delete_marked_timespans_list","dayConfig","day_timespans","d_t","related_zones","arguments","types","t","typedConfig","_get_types_to_render","common","specific","types_to_render","_get_configs_to_render","units","unit","_get_unit_index","day_ind","unitsPerDay","floor","_date","key","unit_zones","unit_types","global_data","day_types","dblclick_dhx_marked_timespan","src","dblclick_create","addEventNow","createMethod","methods","isActive","disableMethod","methodName","dummyMethod","restoreMethod","disableMethods","methodsHash","call","restoreMethods","batchUpdatePayload","callback","console","error","$stateProvider","registerProvider","batch_update","noRedraw","dp_mode","call_dp","_dp","updateMode","setUpdateMode","calls","setModeDate","needRender","needUpdateView","repaintEvents","rememberModeDate","render","setCurrentView","updateView","render_data","render_view_data","updateEvent","sendData","url","token","_url","_token","_seed","_queue","api","_events","Accept","credentials","headers","method","body","fetch","then","json","parse","websocket","_wrapper","connect","_socket","onclose","close","n","location","protocol","host","replace","o","r","WebSocket","setTimeout","onmessage","JSON","action","result","fire","name","value","onError","_send","_resubscribe","Promise","_uid","args","status","resolve","reject","onCall","bind","toString","filter","stringify","catch","send","onResponse","handler","RemoteEvents","remote","Client","req","_ready","load","back","_remote","ready","on","createHandlers","processUpdate","eventData","warn","templates","parse_date","original_start","ignore","addEvent","sid","existingEvent","changeEventId","event_pid","rrule","_roll_back_dates","markers","_get_rec_markers","markerId","deleteEvent","lightbox_id","_new_event","_lightbox_id","endLightbox","_lightbox","code","events","message","_in_progress","once","initPlugins","undoableDeletes","deletedEvent","copy","undo_deleted","new_event","text","expire","duration","limit","batchUpdate","ext","liveUpdates","remoteUpdates","uidSeed","isDate","getFullYear","getMonth","utils","mixin","source","force","f","object","isArray","pop","Function","prototype","constructor","Number","Boolean","varType","Object","defined","delay","timeout","timer","$cancelTimeout","$pending","clearTimeout","$execute","extend","cssClass","classList","itemTypes","setAttribute","fix_tab_position","$firstTab","$lastTab","$segmentedTab","minicalendarDiv","click","$_eventAttached","isCalendarVisible","destroyCalendar","renderCalendar","navigation","calendar","renderElement","renderer","rows","cols","align","justifyContent","prepareConfig","renderLayout","items","fragment","createDocumentFragment","next","_init_nav_bar","navBar","querySelector","_update_nav_bar","previousHeight","heightChanged","newHeight","xy","nav_height","unset_actions","set_actions","display","isAttachedNode","isConnected","contains","getWindowSize","w","innerWidth","documentElement","clientWidth","h","innerHeight","clientHeight","listenWindowResize","resizeDelay","oldSize","$destroyed","a","b","newSize","triggerSchedulerResize","$initialized","$root","root","getComputedStyle","getPropertyValue","ResizeObserver","skipFirst","resizeObserver","entries","observe","unobserve","resizeWatcher","tabIndex","wai_aria_attributes","offsetHeight","previousWidth","offsetWidth","lowlevelResizeWatcher","contentWindow","EventHost","_silent_mode","listeners","makeEventable","eventHost","eventName","toLowerCase","handlers","eventStorage","combinedResult","handlerResult","handlerId","originalHandler","removeEvent","clear","thisObject","attachAll","eventArguments","handlerName","detachEvent","list","eventId","detachAllEvents","defaultDomEvents","el","addEventListener","eventRemove","removeEventListener","domEvents","eventScope","attach","capture","detach","detachAll","staticArray","_eventRemoveAll","_createDomEventScope","_trim","str","trim","_isDate","_isObject","getClassName","node","baseVal","locateCss","classname","strict","trg","srcElement","ind","charAt","right","isVisible","visibility","currentStyle","hiddenSection","recurringSection","hasNonNegativeTabIndex","isNaN","hasHref","nodeName","loLowerCase","input","select","textarea","button","hasAttribute","isShadowDomSupported","head","createShadowRoot","attachShadow","getRootNode","ShadowRoot","dom_helpers","getAbsoluteLeft","htmlObject","getOffset","getAbsoluteTop","getOffsetSum","elem","parseInt","offsetTop","offsetLeft","offsetParent","getOffsetRect","box","getBoundingClientRect","test","navigator","userAgent","dummy","dummyBox","docElem","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","selector","insertAfter","newNode","referenceNode","nextSibling","insertBefore","remove","isChildOf","child","getFocusableNodes","nodes","nodesArray","$position","sort","hasShadowParent","getActiveElement","activeElement","shadowRoot","getSelection","focusNode","getRelativeEventPosition","bottom","y","x","clientX","clientY","getTargetNode","tagName","composedPath","getNodePosition","Element","matches","msMatchesSelector","webkitMatchesSelector","parentElement","nodeType","isWindowAwailable","env","isIE","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","isNode","serialize$1","serialized","encodeURIComponent","generateStringToDate","format","utc","splt","mask","match","csp_str_to_date","set","temp","locale","month_short_hash","month_full_hash","UTC","cspEnabled","useCsp","csp","checkIfCSPEnabled","init","month_short","month_full","old","setSeconds","setMilliseconds","setTime","getTime","time_part","getTimezoneOffset","shift","start_on_monday","month_start","setDate","year_start","setMonth","day_start","_add_days","inc","ndate","rest","hours","setYear","to_fixed","num","date_to_str","getUTCDate","getUTCMonth","getUTCFullYear","day_short","getUTCDay","day_full","getUTCHours","getUTCMinutes","getUTCSeconds","getSeconds","getUTCISOWeek","getISOWeek","str_to_date","exactFormat","stringToDateMethod","parseExactFormat","yyyyMMddhhIIss","MMddyyyyhhIIss","ddMMyyyyhhIIss","ISO8601","parseYMD","parseMDY","parseDMY","dateString","parse_exact_format","datestr","nday","first_thursday","year_number","ordinal_date","convert_to_utc","getSerializator","_loaded","_load","from","_load_url","to","prevent_cache","_load_mode","lf","load_format","cache_line","temp_to","ajax","get","ajaxCallback","response","on_load","_parsers","xml","canParse","xhr","responseXML","xmlDoc","responseText","topElement","xmltop","loader","csrfToken","dhtmlx","security_key","opts","xpath","arr","serverList","itms","j","attrs","attributes","label","attr","nodeValue","ud","udx","_xmlNodeToJSON","_userdata","_init_event","dhx_security","collections","collections_loaded","collection","option","option_key","ical","RegExp","c_start","c_end","incoming","event_r","e_start","e_end","exec","param","param_r","parse_param","substr","dh","dm","utcMark","dy","dn","dd","server_utc","foundParser","parser","_process","_process_loading","_loading","_not_render","_render_wait","_after_call","_tagvalue","_init_date","_helpers","parseDate","getSerializableData","createSerializator","serialize","dataset","allEvents","exportedEvent","exportValue","rawValue","xml_format","format_date","setLoadMode","array","show_loading","_x","_y","_obj","getLightboxRoot","cspEnvironment","salesforceEnvironment","_lightbox_controls","formSection","lightbox","getLightbox","header","getValue","form_blocks","get_value","setValue","set_value","get_template_control","control","get_select_control","getElementsByTagName","get_textarea_control","get_time_control","defaults","template","time","sns","focus","placeholder","_get_input","_focus","_dhx_onchange","onchange","time_format","_time_format_order","dt","last","first","limit_time_select","time_option","selectBoxClass","range","start_year","end_year","year_range","v","tdate","_time_values","time_picker","time_step","ariaAttrs","_waiAria","lightboxSelectAttrString","readonly","full_day","_full_day","labels","wide_form","previousSibling","checked","disabled","_fill_lightbox_select","auto_end_date","event_duration","_update_lightbox_select","time_values","direct_value","fixed_value","value_found","t_v","selectedIndex","original","_setLbPosition","showCover","responsive_lightbox","show_cover","_cover","showLightbox","_fill_lightbox","lightboxVisibleAttr","lightboxHeader","lightbox_header","headerContent","headerDate","event_header","headerTitle","event_bar_text","current_sns","_get_lightbox_section_node","default_value","_lightbox_out","_empty_lightbox","setEvent","_edit_stop_event","hide_lightbox","hideCover","hide_cover","_move_while_dnd","_finish_dnd","save_lightbox","startLightbox","_custom_lightbox","_temp_lightbox","lightboxHiddenAttr","resetLightbox","cancel_lightbox","hideLightbox","_init_lightbox_events","buttonTarget","$domHelpers","sectionButton","button_click","readonly_active","confirm_deleting","_dhtmlx_confirm","title","title_confirm_deleting","_thisAndFollowing","_removeFollowing","ok","icon_delete","keyCode","shiftKey","keys","edit_save","edit_cancel","monthSelectNodes","daySelectNodes","yearSelectNodes","daySelect","month","year","daysInMonth","maxDays","curDayValue","textContent","setLightboxSize","_init_dnd_events","_dnd_start_lb","dhx_unselectable","lb","pageX","pageY","_lb_start","_ready_to_dnd","recurring","rtl","_lightbox_template","buttons","buttons_right","lightboxButtonAttrString","buttons_left","drag_lightbox","preventDefault","cursor","lightboxAttr","lightboxSectionButtonAttrString","label_name","ds","t_ds","_bindLightboxLabels","inputBlock","fallback","inputId","old_id","new_id","_init_touch_events","touch","MSStream","platform","maxTouchPoints","scroll_width","_mobile","touchEventsSupported","createEvent","_touch_events","touches","PointerEvent","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","names","accessor","tracker","drag_mode","scroll_mode","action_mode","dblclicktime","attachTouchEvent","_is_lightbox_open","passive","drag_cancel","_hide_global_tip","_on_mouse_up","_temp_touch_block","_drag_pos","_pointerDragId","acc","dnd","timeline","original_render","drag_id","getEvents","_sorder","_count","_on_mouse_move","cancelBubble","_update_global_tip","abs","fake_event","pointerId","_click","dhx_cal_data","_on_dbl_click","_block_next_stop","touch_drag","actTask","_locate_event","fakeTask","sourceTask","_ignore_next_click","_on_mouse_down","for_rendered","_rendered","touch_tip","_show_global_tip","touch_swipe_dates","s_ev","e_ev","step","max_dy","scrollable","dx","dhx_cal_next_button","dhx_cal_prev_button","toptip","_global_tip","day_date","drag_to_create","drag_to_move","calculatedMaterial","cachedBorderBoxValue","checkIfBorderBoxStyling","_is_material_skin","probe","boxSizing","refreshAfterLoad","_border_box_events","oldStyling","flatSkinHourScale","_addThemeClass","skin","_skin_settings","use_select_menu_space","displayed_event_color","displayed_event_text_color","_skin_xy","lightbox_additional_height","bar_height","checkIfMaterialSkin","_build_skin_info","clearInterval","monitorIntervalId","setInterval","csstheme","setSkin","monitorThemeChange","styles","themeVar","themeName","isCssVarTheme","cssValues","oldMaterialTheme","links","href","themeNameFromFile","_theme_info","theme","cssVarTheme","values","themeVariables","_configure","col","_skin_init","hour_scale","hour_date","_old_month_day","month_day","old_month_day","dhx_cal_today_button","tab","tabs","specialTabs","tabName","find","firstTab","reverse","DataProcessorEvents","dp","$scheduler","$dp","_dataProcessorHandlers","_validId","setUpdated","z","_invalid","updatedRows","_waitMode","_update_callback","upd","setUserData","action_param","_add_rec_marker","DataProcessor","serverProcessorURL","serverProcessor","autoUpdate","_tMode","_headers","_payload","post_delim","messages","updated","inserted","deleted","invalid","invalid_cell","enableUTFencoding","eventable","boxAttribute","_dhx_msg_cfg","usercall","modalBox","modal_key","which","messageBox","keyboard","domHelpers","modality","cover","classValue","buttonAriaAttrs","messageButtonAttrString","getFirstDefined","_createBox","cancel","contentId","messageModalAttr","inner","content","message_ok","message_cancel","btn","getElementById","hidden","alertPopup","confirmPopup","boxPopup","box_params","params","focusable","messageInfoAttr","timers","pull","seed","hideAll","popups","alert","confirm","modalbox","setTransactionMode","total","payload","_tSend","_endnm","_serializeAsJson","_router","router","escape","_utf","setDataColumns","val","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","master","rowId","state","findRow","existing","getUserData","set_invalid","is_invalid","markRow","_methods","details","getActionByState","checkBeforeUpdate","editStop","sendAllData","_beforeSendData","_getRowData","_sendData","_serializeAsJSON","serialize_one","stack","pref","_applyPayload","urlSeparator","dataToSend","self","queryParams","afterUpdate","urlParams","_user","_cleanupArgumentsBeforeSend","preprocessedData","_cleanupItemBeforeSend","query","_onResolvedCreateUpdate","tag","resultState","setRequestHeader","tid","afterUpdateCallback","routerMode","actionPromise","create","delete","update","valid","_forEachUpdatedRow","_getAllData","out","has_one","row","pattern","defineAction","_uActions","btag","marker","correct","originalSid","_errorResponse","cleanUpdate","_setDefaultTransactionMode","_serverProcessor","that","finalizeUpdate","atag","_initialized","_dp_init","_is_virtual_event","_set_event_text_style","cssText","event_updated","rec_pattern","_dp_change_event_id","_dp_hook_delete","setDp","dataProcessorEvents","_dataprocessor","setOnAfterUpdate","setOnBeforeUpdateHandler","func","setAutoUpdate","interval","user","_need_update","_update_busy","xml_node","afterAutoUpdate","fullSync","intervalId","loadUpdate","getUpdates","_getXmlNodeValue","version","vers","updates","destructor","processedData","updatedItem","output","item","processedItem","prop","formatDate","_prepareItemForJson","_prepareItemForForm","_prepareDataItem","dataItem","ar","day_tab","week_tab","month_tab","icon_save","icon_cancel","icon_details","icon_edit","confirm_closing","section_description","section_time","confirm_recurring","section_recurring","button_recurring","button_recurring_open","button_edit_series","button_edit_occurrence","button_edit_occurrence_and_following","grid_tab","prev","hour","minute","repeat_radio_day","repeat_radio_week","repeat_radio_month","repeat_radio_year","repeat_radio_day_type","repeat_text_day_count","repeat_radio_day_type2","repeat_week","repeat_text_week_count","repeat_radio_month_type","repeat_radio_month_start","repeat_text_month_day","repeat_text_month_count","repeat_text_month_count2_before","repeat_text_month_count2_after","repeat_year_label","select_year_day2","repeat_text_year_day","select_year_month","repeat_radio_end","repeat_text_occurrences_count","repeat_radio_end2","repeat_radio_end3","repeat_never","repeat_daily","repeat_workdays","repeat_weekly","repeat_monthly","repeat_yearly","repeat_custom","repeat_freq_day","repeat_freq_week","repeat_freq_month","repeat_freq_year","repeat_on_date","repeat_ends","month_for_recurring","day_for_recurring","be","agenda_tab","description","year_tab","week_agenda_tab","ca","cn","cs","da","de","en","es","fi","fr","he","hu","it","jp","LocaleManager","_locales","nb","nl","no","pl","pt","ro","ru","si","sk","sv","tr","ua","DatePicker","modes","currentRange","eventDates","filterDays","currentModeIndex","onStateChangeHandlers","_domEvents","onStateChange","oldState","newState","_notifyStateChange","direction","newDate","setFullYear","setState","newIndex","backwardArrow","monthLabel","innerText","toLocaleString","startYear","_toggleMode","forwardArrow","_adjustDate","_renderCalendarHeader","dataContainer","_renderDayGrid","_renderMonthGrid","_renderYearGrid","daysOfWeekContainer","currentDate","maxDate","labelFormat","dayElement","weeks","currWeek","minWeeks","minSchedulerDate","maxSchedulerDate","eventDaysTable","reduce","_renderDayGridHeader","weekLength","children","setProperty","firstDate","monthStart","monthEnd","lastDate","currentCalDate","_weeksBetween","dayGridContainer","dateCell","wrapper","months","formatLabel","monthElement","doneArea","doneBtn","yearElement","factoryMethod","extensionManager","stateProviders","internal","provider","unregisterProvider","commonViews","agenda","grid","week_agenda","anythingElse","requiredExtensions","_commonErrorMessages","unknownView","relatedExtension","collapsedContainer","createTimelineView","createUnitsView","createGridView","exportToPNG","exportToPDF","extend$n","_detachDomEvent","_init_once","scheduler_resize_listener","hasSchedulerMarkup","wai_aria_application_role","views","_grid","log","_scroll","init_templates","set_sizes","min_event_height","scale_width","scale_height","month_scale_height","menu_width","margin_top","margin_left","editor_width","month_head_height","event_header_height","functor","scale_x","materialScalePlaceholder","set_xy","_data_width","prepareValue","prepared","class_name","attr_value","labelAttr","domEventsScope","getDaysDifference","startDate","endDate","differenceInDays","_select_id","_close_not_saved","previousSelection","editor_id","_edit_id","select_id","expanded","icon","def_step","dhx_cal_tab","deprecated_name","substring","edit","save","form","base","start_hour","_drag_event","details_on_dblclick","viewHandler","_get_column_index","x_pos","column","_week_indexes_from_pos","pos","ceil","_mouse_coords","$env","_colsS","dataArea","heights","_ignores_detected","preserve_length","_event_length","_get_real_event_length","x_step","x_unit","timestamp","confirmationText","title_confirm_closing","positive_closing","_correct_shift","_is_pos_changed","old_pos","new_pos","diff","old_val","new_val","has_moved","_correct_drag_start_date","_start_correction","_end_correction","_get_fictional_event_length","_correct_drag_end_date","mousedownPos","_get_date_from_pos","_drag_start","fields","timeStep","custom","_dragEventBody","_move_event_shift","resize_date","_drag_from_start","resize_from_start","tempEnd","end_day_start","end_day_date","firstHour","maxY","precisePos","minDate","preciseDate","new_end","new_start","limit_drag_out","all_timed","_get_section_view","_get_event_sday","tempBorderBottomDate","_allow_dnd","update_render","sx","update_view","drag_event_body","_get_private_properties","_clear_temporary_properties","clean","flagged_event","initial","current_state","moved","_dhx_changed","is_new","edit_on_create","details_on_create","_trigger_dyn_loading","_reset_ignores","_reset_scale","isViewExists","_set_aria_buttons_attrs","buttonGroups","group","headerButtonsAttributes","icon_form","oldClass","newClass","multidayScroll","dhx_multi_day","prev_scroll","preserve_scroll","_dy_shift","headerToggleState","_render_x_header","offset_top","left_border","columnHeaderText","dayHeaderAttr","_get_columns_num","count","count_n","_get_timeunit_start","_get_view_end","ed","_calc_scale_sizes","summ","_process_ignores","realcount","_set_scale_col_size","_render_scales","data_area","sd","today","scales","cls","firstHalf","slotDate","htmlContent","time_slot_text","time_slot_class","secondHalf","week_date_class","dayColumnAttr","_getNavDateElement","drag_resize","drag_move","navBarDateStr","scaleElement","navBarDateAttr","_reset_month_scale","_reset_hours_scale","multi_day","c1","totalWidth","col_length","hiddenWidth","c2","cc","hourScaleAttr","scroll_hour","now_date","preserve","ign_date","_render_month_scale","view_start","cd","tdwidths","cell_width","getCellHeight","cellheight","table","cell","month_date_class","body_class","head_class","monthCellAttr","cellHead","cellBody","bf1","getLabel","updateCollection","list_name","cache","n_ev","endColumnIndex","eventLength","startColumnIndex","last_column","check","excludedDuration","intervalStart","intervalEnd","leftCellCutOffStart","leftCellCutOffEnd","rightCellCutOffStart","rightCellCutOffEnd","ev_length","dir","per_day","end_slot","fd","start_slot","_get_section_property","_is_initialized","htmlTags","extraSpaces","stripHTMLLite","htmlText","singleQuotes","escapeQuotes","getAttributeString","setAttributes","role","getHeaderCellAttr","eventAttr","_eventCommonAttr","event_text","$dataprocessor_class","setEventBarAttr","_getAttributes","attributeSetter","arg","eventBarAttrString","agendaHeadAttrString","agendaHeadDateString","agendaHeadDescriptionString","agendaDataAttrString","agendaEventAttrString","agendaDetailsBtnString","gridAttrString","gridRowAttrString","gridCellAttrString","mapAttrString","mapRowAttrString","mapDetailsBtnString","minicalHeader","headerId","minicalGrid","minicalRow","minicalDayCell","selected","minicalHeadCell","weekAgendaDayCell","weekAgendaEvent","tabindex","yearHeader","yearGrid","yearHeadCell","yearRow","yearDayCell","buttonName","eventMenuAttrString","iconName","headerText","buttonLabel","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","dom","assert","show_errors","_createDatePicker","_getFocusableNodes","_locate_css","messageApi","$","counter","clearAll","createConfig","async","serializeRequestParams","DOMParser","ActiveXObject","loadXML","parseFromString","tagname","xpathExp","docObj","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","onLoad","getSync","put","postData","del","post","postSync","XMLHttpRequest","isQt","readyState","filePath","open","toUpperCase","$ajax","default_date","month_date","load_date","week_date","date_format","api_date","day_column_padding","drag_create","resize_month_events","resize_month_timed","separate_short_events","cascade_event_count","cascade_event_margin","multi_day_height_limit","quick_info_detached","icons_edit","icons_select","highlight_displayed_event","ajax_error","delay_render","timeline_swap_resize","$initial","xml_date","d1","d2","day_scale_date","month_scale_date","week_scale_date","event_date","event_class","event_bar_date","month_events_link","drag_marker_class","drag_marker_content","tooltip_date_format","tooltip_text","calendar_month","calendar_scale_date","calendar_date","calendar_time","clear_view","extra_data","silent","hash","create_getter","create_setter","is_visible_events","clear_event","evFirstHour","evLastHour","lastHour","checkEndDate","get_visible_events","only_timed","filter_event","_is_main_area_event","hold","full","_recalculate_timed","tvs","tvd","_rendered_location","buffer","renderedLocation","_view_month_day","_render_month_link","toRender","_sday","_eday","curr","_sweek","_get_event_bar_pos","widt","x2","_pre_render_events","render_event_bar","max_evs","max_month_events","real","render_event","_get_first_visible_cell","hb","h_old","_pre_render_events_table","_pre_render_events_line","monthRows","cellHeight","cHeight","unshift","scrollHeight","scroll_fix","scale_settings","sum_width","row_heights","full_multi_day_height","used_multi_day_height","used_multi_day_height_css","multi_day_section","multi_day_icon","overflowY","datePart","_get_event_mapped_end_date","ev_duration","_min_mapped_duration","evs_originals","sh","eh","_inner","t_ev","slot_index","sorderSet","_is_sorder","_max_sorder","max_count","_copy_event","_time_order","_is_any_multiday_cell_visible","isAnyCellVisible","checkDate","noCells","lastDayEnd","weekCellIndex","chunks_info","first_chunk","last_chunk","chunk_info","locate_s","locate_e","_length","stack_line","_first_chunk","_last_chunk","_copy_dummy","_y_from_date","sm","_calc_event_y","min_height","em","parentWidth","menu","menu_offset","pos_y","ev_count","ev_sorder","margin","marginRight","_render_v_bar","_text_style","zIndex","color","tplClass","_editor","ariaAttr","icons","icons_str","currentIcon","textColor","highlightEventPosition","contentA","contentB","cse","boxWidth","renderEvent","inner_html","footer_class","_drag_resize","past","_get_dnd_order","ev_height","max_height","_orig_sorder","evTop","columns","y_event_offset","resize_handle","resizable","left_chunk","right_chunk","resize_left","resize_right","timed","bg_color","style_text","_beforeEventChangedFlag","getRenderedEvent","rendered_events","rendered_event","showEvent","original_color","original_text_color","getSectionTop","posFromDate","_smartRenderingEnabled","restoreOriginalColors","scrollTo","_append_drag_marker","m","scale","lastChild","_update_marker_position","getRootView","hooks","didInsert","cmp","skins","jQuery","fn","dhx_scheduler","each","Scheduler","getSchedulerInstance","comp","update_view_timer","curr_view_timer","lazy_setCurrentView","oldDate","oldMode","updateFlags","lazy_updateView","ars","createDataProcessor","tMode","dhtmlxError","catchError","i18n","addLocale","setLocale","localeObject","getLocale","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","addPlugins","activePlugins","plugins","dependencies","priorities","extension","dep","dependencyName","orderA","orderB","treetimeline","daytimeline","outerdrag","legacy","extensionList","plugin","getExtension","ExtensionsManager","_extensions","attaches","attachScheduler","_genStr","attachObject","vs","av","sched","schedId","setSizes","_viewRestore","_inited_multisection_copies","copies","_multisection_copies","eventCopies","_register_copies_array","_register_copy","_get_copied_event","event_id","parts","_orig_section","min_sorder","Infinity","_clear_copied_events","_restore_render_flags","section_evs","prev_state","externalDrag","from_scheduler","to_scheduler","drag_data","drag_placeholder","delete_dnd_holder","copy_event_node","clone","create_dnd_holder","holder","event_outside","move_dnd_holder","clear_scheduler_dnd","stop_drag","inject_into_scheduler","dom_event","event_length","start_dnd","drag_out","drag","orig_id","land_into_scheduler","drag_in","target_id","drag_from_scheduler","reset_event","move_permanently","original_event","moved_event","outerDragHandlerAttached","connectedSchedulers","processScheduler","target_scheduler","current_scheduler","nextScheduler","modals","modalsStack","isModal","afterPopup","trapFocus","currentTarget","$keyboardNavigation","_keyNavMessagePopup","focusElement","backupFocus","key_nav_legacy","_temp_key_scope","key_nav","_pasteDate","_pasteSection","isCopy","trackMousePosition","mousePointer","keyNavPointer","elementFromPoint","dispatcher","copyEvent","_make_pasted_event","multisection","isMultisectionEvent","_do_paste","is_copy","modified_ev","original_ev","_is_key_nav_active","ctrlKey","metaKey","_buffer_event","_key_nav_copy_paste","getActiveNode","new_ev","scheduler_handlers","attachSchedulerHandlers","waitCall","keyDownHandler","focusHandler","keepScrollPosition","focusGlobalNode","enable","reFocusActiveNode","activeNode","isValid","MinicalButton","MinicalCell","mousedownHandler","dataAreaClick","listOfScales","some","Event","TimeSlot","nextSlot","setActiveNode","removeAttribute","evNode","prevState","lastStart","lastEnd","lastSection","getNode","catches","dhtmlxError$1","func_name","throwError","GoogleMapAdapter","_markers","zoom","zoom_after_resolve","initial_zoom","lat","lng","setCenter","setZoom","error_position","google","maps","trigger","mapOptions","center","initial_position","mapId","scrollwheel","mapTypeId","Map","__gm","messageOverlay","outerContainer","setOptions","addListener","geocoder","Geocoder","point","latLng","geocode","results","GeocoderStatus","OK","geometry","event_location","formatted_address","clearInstanceListeners","addEventMarker","AdvancedMarkerElement","importLibrary","mapView","createMarker","setMap","infoWindow","InfoWindow","maxWidth","info_window_max_width","setContent","map_info_content","anchor","markerInfo","setVisible","setPosition","latlng","LatLng","clearEventMarkers","latitude","longitude","string","address","OpenStreetMapAdapter","openPopup","closeTooltip","setView","mapWrapper","L","tileLayer","addTo","country","myIcon","iconUrl","iconSize","shadowSize","iconAnchor","shadowAnchor","popupConfig","minWidth","markerPopup","popup","tooltip","markerConfig","bindPopup","bindTooltip","removeLayer","setLatLng","resolveAddress","lon","MapboxAdapter","getPopup","isOpen","togglePopup","mapboxgl","accessToken","lngLat","features","place_name","Popup","focusAfterOpen","setMaxWidth","setHTML","Marker","setLngLat","setPopup","ALL_WEEKDAYS","Weekday","weekday","fromStr","nth","equals","other","getJsWeekday","isPresent","isNumber","isWeekdayStr","includes","rang","repeat","times","padStart","targetLength","padString","pymod","divmod","mod","empty","notEmpty","datetime","MONTH_DAYS","ONE_DAY","ORDINAL_BASE","PY_WEEKDAYS","isLeapYear","isValidDate","toOrdinal","date2","differencems","fromOrdinal","ordinal","getMonthDays","getWeekday","monthRange","combine","getMilliseconds","cloneDates","clones","timeToUntilString","untilStringToDate","until","bits","dateTZtoISO8601","timeZone","IterResult","_result","before","after","accept","tooEarly","tooLate","extendStatics","setPrototypeOf","__proto__","__extends","TypeError","__","__assign","assign","__spreadArray","pack","l","SuppressedError","Frequency","CallbackIterResult","_super","iterator","_this","ENGLISH","dayNames","monthNames","tokens","SKIP","number","numberAsText","every","at","the","second","third","for","monday","tuesday","wednesday","thursday","friday","saturday","sunday","january","february","march","april","may","june","july","august","september","october","november","december","comma","defaultGetText","defaultDateFormatter","ToText","gettext","language","dateFormatter","origOptions","bymonthday","bynmonthday","byweekday","allWeeks","someWeeks","isWeekdays","isEveryDay","sortWeekDays","isFullyConvertible","freq","IMPLEMENTED","RRule","FREQUENCIES","plural","HOURLY","MINUTELY","DAILY","bymonth","_bymonth","_bymonthday","_byweekday","byhour","_byhour","WEEKLY","MONTHLY","YEARLY","byyearday","byweekno","weekdaytext","monthtext","npos","wday","finalDelim","delim","realCallback","delimiter","finalDelimiter","Parser","rules","done","nextSymbol","isDone","symbol","best","bestSymbol","name_1","acceptNumber","expect","parseText","ttr","AT","F","MO","TU","WE","TH","FR","ON","wkd","decodeWKD","decodeNTH","decodeM","S","freqIsDailyOrGreater","fromText","Time","millisecond","DateTime","fromDate","getYear","addYears","years","addMonths","yearDiv","monthMod","addWeekly","wkst","fixDay","addDaily","addHours","filtered","_a","dayDiv","hourMod","addMinutes","minutes","byminute","hourDiv","minuteMod","addSeconds","seconds","bysecond","minuteDiv","secondMod","daysinmonth","SECONDLY","initializeOptions","_i","keys_1","defaultKeys","parseOptions","DEFAULT_OPTIONS","byeaster","dtstart","bysetpos","bynweekday","parsedOptions","parseString","rfcString","parseLine","parseDtstart","line","dtstartWithZone","tzid","parseRrule","Days","parseIndividualNumber","optionKey","SyntaxError","wdaypart","DateWithZone","RangeError","defineProperty","enumerable","configurable","isUTC","rezonedDate","localTimeZone","Intl","DateTimeFormat","resolvedOptions","dateInLocalTZ","tzOffset","optionsToString","outValue","buildDtstart","strValues","ruleString","argsMatch","Cache","all","between","_cacheAdd","what","_value","_cacheGet","cached","argsKeys","findCacheDiff","cachedObject","iterResult","M365MASK","M366MASK","M28","M29","M30","M31","MDAY366MASK","MDAY365MASK","NM28","NM29","NM30","NM31","NMDAY366MASK","NMDAY365MASK","M366RANGE","M365RANGE","WDAYMASK","wdaymask","rebuildYear","firstwkst","wyearlen","firstyday","yearlen","nextyearlen","yearordinal","yearweekday","mmask","mdaymask","nmdaymask","mrange","wnomask","no1wkst","numweeks","lnumweeks","lyearweekday","lno1wkst","lyearlen","weekst","Iterinfo","rebuild","lastyear","yearinfo","lastmonth","monthinfo","nwdaymask","ranges","eastermask","g","yearStart","ydayset","mdayset","wdayset","ddayset","htimeset","mtimeset","stimeset","getdayset","gettimeset","buildPoslist","timeset","ii","dayset","poslist","daypos","timepos","tmp","iter","emitResult","counterDate","millisecondModulo","removeFilteredDays","rezoneIfNeeded","currentDay","isFiltered","dayCounter","SA","SU","noCache","_cache","fromString","_iter","toText","isFullyConvertibleToText","unfold","forceset","compatible","parseInput","rrulevals","rdatevals","exrulevals","exdatevals","parsedDtstart","lines","_b","sep","splits","parms","rdateTzid","parseRDate","rrulestr","rset_1","RRuleSet","groomRruleOptions","rdate","exrule","exdate","rdateval","parm","createGetterSetter","fieldName","field","_rrule","field_1","_rdate","_exrule","_exdate","_exdateHash","_accept","evalExdate","zonedDate","_addRule","_addDate","rrules","exrules","rdates","exdates","_dtstart","rdatesToString","rrs","rule","autoscroll","startPos","autoscrollInterval","_schedulerOuter","eventPos","viewport","availWidth","availHeight","posX","posY","_merge","range_x","range_y","speed_x","speed_y","need_scroll","started","boxSize","startCoord","scrollRange","evId","scrollHelperFactory","currentMode","minMax","maxMin","nMaxMin","detectScrollMode","demoElement","normalizeValue","scrollWidth","getMode","getScrollValue","maxScroll","setScrollValue","normalized","Tooltip","_scheduler","_tooltipNode","_root","_isLikeMouseEvent","_calculateTooltipPosition","_getViewPortSize","tooltipNode","offsetX","tooltip_offset_x","offsetY","tooltip_offset_y","mouse","containerPos","scrollY","_getViewPort","scrollX","$event_data","$event","TooltipManager","_listeners","_initDelayedFunctions","delayHide","watchableTarget","eventTarget","targetNode","doOnMouseEnter","onmouseenter","touch_tooltip","onmouseleave","onmousemove","listener","cloneDomEvent","delayShow","utils.default","show","tooltip_timeout","tooltip_hide_timeout","allExtensions","active_links","active_link_view","_active_link_click","s_d","do_wrapper","fullname","week_x","d_s","agenda_legacy","add_agenda_legacy","agenda_legacy_time","agenda_legacy_text","agenda_legacy_date","agenda_legacy_start","old_dblclick_dhx_cal_data","dblclick_dhx_cal_data","fill_agenda_tab","old_render_view_data","ev_class","agendaDetailsButtonAttr","agenda_time","agenda_text","_agendaScrollTop","agenda_area","dateElement","agenda_date","agenda_legacy_view","agenda_start","agenda_end","rowAttr","dateHeader","descriptionHeader","agenda_view","add_agenda","dayDateToStr","dayDowToStr","agenda_day","eventsInDays","anyEvents","ignore_agenda","renderDay","calendarEvent","selectedId","all_timed_month","allTimed","isMainAreaEvent","is_event_short","_safe_copy","proto","isPrototypeOf","old_prerender_events_line","old_prerender_events_table","prerender_events","ce","_virtual","isOvernightEvent","getNextDay","setDateTime","event_changed","re","redraw","next_day","old_get_visible_events","old_mode","old_date","oldUpdate","fullRedrawNeeded","collision","temp_section","_setTempSection","collision_limit","checkCollision","edited_ev","recurring_event_id","_check_sections_collision","evs_dates","getRecDates","tevs","concurrent","_pid_time","checked_mode","single","container_autoresize","month_day_min_height","min_grid_size","min_map_size","old_pre_render_event","active","total_height","multiday_height","evl","_h_fix","navHeight","headerHeight","checked_divs","updateContainterHeight","is_repaint","checked_div","maxHeight","year_y","cur_height","week_agenda_scale_height","eventsContainer","_gridView","y_unit","getSectionHeight","getScrollSize","callUpdate","conditionalUpdateContainerHeight","asyncRepaint","requestAnimationFrame","autosizeEnabled","$original_scroll_width","$original_section_autoheight","section_autoheight","cookie","getCookieName","_get_url_nav","urlNavigationPlugin","schedulerCookie","unescape","newMode","cookie_param","old_load","virtual_events_helpers","old_timeline","section_id","section_label","section_options","x_start","renderMatrix","_renderMatrix","refresh","oldCollision","_w_line_drag_from_start","old_mouse","move_delta","_move_delta","converted","_x_scroll","_y_scroll","pos_copy","_resolve_timeline_section","set_time_part","_timeline_drag_date","drag_event","dat","days_y","st_date","flag","ev_old","oldUpdateTimelineSection","_update_timeline_section","storedEv","oldRender","week_line_dates","old_get_evs","old_add_event_now","set_date_part","old_render_marked_timespan","copy_timeline_event","week_line_ev_date","multiday_chunks","chunk","get_next_day","set_resize_options","chunks","_w_start_date","_w_end_date","_no_resize_start","_no_resize_end","par","drag_between","_outer_drag","editors","cached_options","sectionHeight","resetCombo","_combo","DOMParent","combo","unload","DOMelem","dhx_globalImgPath","image_path","dhtmlXCombo","options_height","setOptionHeight","enableFilteringMode","filtering","script_path","selected_id","addOption","disable","selectOption","setComboValue","all_options","single_option","getIndexByValue","getSelectedValue","getSelectedText","vertical","radiobuttons","checked_value","isChecked","check_html","label_html","checkbox","unchecked_value","expand","fullscreen","toggleIcon","_position","_width","_height","_overflow","overflow","_maximize","collapse","directions","prev_margin","export_api","std","getElementSizes","sizes","dhtmlxAjax","dhx4","getTimeline","orientation","dpi","_export_html","_send_to_export","exportToICal","_serialize_plain","exportToExcel","_serialize_columns","_ajax_to_export","server","info","_plain_export_copy","$text","_create_hidden_form","submit","_hidden_export_form","_get_export_size","footer","A5","A4","A3","A2","A1","A0","dataX","cSize","parseFloat","initialSizes","smartRendering","smart_rendering","style_width","style_height","timeline_scrollable","timeline_smart_rendering","getInitialSizes","grid_view","sort_rules","int","getVal","_getObjName","_getViewName","objName","isValidSize","defPadding","initialWidth","paddingLeft","paddingRight","_selected_divs","field_name","selectEvent","unselectEvent","_fill_grid_tab","data_container","_gridScrollTop","_sort_marker","paging","set_full_view","dblclick_dhx_grid_area","dhx_cal_header","_old_header_click","_get_target_column","_toggle_sort_state","view_name","event_div","_unselectDiv","targ","originalTarget","_get_sort_state","_get_sort_value_for_column","draw_sort_marker","_get_column_node","sort_grid","_print_grid_header","_calcPadding","_getStyles","cell_style","valign","_get_sort_rule","sortRule","_print_event_row","_getCellContent","availStyles","ariaCellAttribute","widths","unsized_columns","avail_width","unsized_width","column_width","html_templates","getScope","scopes","minicalButton","minicalDate","SchedulerNode","DataArea","timeSlot","searchMap","key_nav_step","addShortcut","shortcut","scope","scopeObject","getShortcutHandler","commands","shortcuts","findHandler","removeShortcut","unbind","disp","setDefaultNode","_compose","createCommand","modifiers","alt","ctrl","meta","expr","getExpressions","words","getWords","command","commandKeys","specialKeys","charCodeAt","getCommandFromEvent","domEvent","altKey","printableKey","fromCharCode","getHashFromEvent","getHash","junctionChar","term","combinationChar","backspace","enter","esc","space","up","down","home","pageup","pagedown","insert","plus","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","EventHandler","_handlers","doAction","returnValue","bindAll","initKeys","nextItem","currentFocus","currentIndex","renderMultiple","currentStart","currentEnd","_modes","_getMode","renderVerticalMarker","renderTimelineMarker","renderYearMarker","renderMonthMarker","weekAgenda","renderWeekAgendaMarker","renderAgendaMarker","dayColumns","addWaiAriaLabel","addDataAttributes","dateToStr","dateTimeLabel","sectionObject","markerDate","_wrapDiv","_get_year_cell","opacity","view_opts","_is_column_visible","start_pos","end_pos","tempStart","_timeline_getX","_section_height","_isRender","renderMonthCell","weekNumber","dayIndex","datatable","lineHeight","getDefaultNode","blur","_compareEvents","_pickEvent","startId","nextEventHandler","nextEvent","currEvent","visibleDates","nextEv","prevEventHandler","HeaderCell","getNodes","KeyNavNode","moveTo","compareTo","canStringifyThis","canStringifyThat","defaultCell","_getSection","_getNodes","defaultElement","isScrolledIntoView","eventBox","viewPort","idSelector","inlineEditor","getInlineEditor","_moveToSlot","slot","movingDate","getDefaultDate","_getDefaultSection","visibleTime","nowTime","showNowTime","findVisibleColumn","timeslot","_getMultisectionView","_getNextSection","nextIndex","defaultSlot","addMonthDate","nextMonthSlot","_alignTimeSlot","nextTimelineSlot","newPos","nextUnitsSlot","optionsCount","nextDaySlot","_moveDate","isBeforeLastHour","isStartDate","isAfterFirstHour","isInVisibleDayTime","oldStart","toNextDay","testEnd","nextWeekAgendaSlot","nextAgendaSlot","isDateVisible","nextDateColumn","current","tempSlot","extendSlot","extendUnitsSlot","extendTimelineSlot","extendMonthSlot","extendDaySlot","extendWeekAgendaSlot","extendGenericSlot","allowedDirections","moveDate","newDates","extendSlotDates","oldSlot","newSlot","dateDirection","scrollSlot","globalNode","_getGrid","_getNode","enabled","newRow","newCol","blurNode","editor","defaultPrevented","schedulerNode","_timeout","_minicalendars","isMinical","minicalendars","patchMinicalendar","focusMinical","minicalClick","rowIndex","cellIndex","td","renderMinical","cal","added","destroyMinical","_def_count","attachOnce","isSchedulerSelected","changeState","layer","layers","validId","_clearUpdateFlag","_cloneObj","_dataprocessors","_layers_zindex","initial_layer_zindex","isDefault","defaultLayer","showLayer","tlayer","toggleLayer","hideLayer","visible","getLayer","layer_name","native_event_object","noMenu","_evs_layer","_t_render_view_data","evs_layer","borderBox","borderBoxWidth","headerWidth","bodyWidth","footerWidth","bodyHeight","new_zIndex","filter_agenda","dtmlXMLLoaderObject","funcObject","dhtmlObject","rSeed","onloadAction","mainObject","dhtmlDragAndDropObject","dhtmlDragAndDrop","lastLanding","dragNode","dragStartNode","dragStartObject","tempDOMU","tempDOMM","waitDrag","extend_api","_init","_patch","waitLoadFunction","getXMLTopNode","oldObj","_retry","_isIE","loadXMLString","xmlString","onreadystatechange","postMode","postVars","rpc","_filterXPath","_getAllNamedChilds","doXPath","doXPathOpera","doXSLTransToObject","doXSLTransToString","doSerialization","xmlNodeToJSON","setXSLParamValue","removeDraggableItem","htmlNode","onmousedown","dragStarter","dragLanding","addDraggableItem","preCreateDragCopy","addDragLanding","onmouseup","stopDrag","callDrag","downtime","dragger","_createDragNode","onselectstart","gldragNode","pWindow","initFrameRoute","grd","oldBody","_dragOut","outerHTML","fx","fy","checkLanding","calculateFramePosition","frames","frameElement","ls","_dragIn","lastLanding_scr","_onNotFound","stopFrameRoute","_drag","win","_isFF","_FFrv","_isKHTML","appName","appVersion","compatMode","namespace","result_type","selectSingleNode","nodeObj","retType","FIRST_ORDERED_NODE_TYPE","rowsCol","singleNodeValue","thisColMemb","dhtmlxErrorConstructor","dhtmlxEvent","xslDoc","paramName","paramValue","transformNodeToObject","transformNode","XSLProcessor","XSLTProcessor","importStylesheet","transformToDocument","XMLSerializer","serializeToString","dhtmlxEventable","catcher","callObj","eventCatcher","arg0","dhx_catch","zr","limit_view","_temp_limit_scope","om","od","nm","nd","isBlocked","date_end","resetDate","is_new_event","data_copy","native_object","_mark_now_timer","map_view","mapAdapter","eventHandlerIds","adapters","googleMap","openStreetMaps","mapbox","setupMapView","createAdapter","unmodifiedEvent","_eventLocationChanged","map_settings","resolve_event_location","_latLngUpdate","addEventWithLocation","updateEventMarker","newIdEvent","removeEventMarker","onEventClick","coordinates","map_view_provider","currentAdapter","resolve_user_location","view_provider","map_initial_position","map_error_position","map_date_width","map_icon_width","map_description_width","add_map","map_date","map_time","map_text","map_start","dblclick_dhx_map_area","map_initial_zoom","map_zoom_after_resolve","map_infowindow_max_width","map_resolve_user_location","map_type","map_resolve_event_location","fill_map_tab","_selected_event_id","ariaButtonAttr","map_end","mapContainer","adapter","elem_id","marginTop","destroy","initialize","geolocation","getCurrentPosition","coords","_updateEventLocation","_event_resolve_delay","ret","minical","minicalDomEvents","minicalendar","mark_events","_synced_minicalendars","_prev","is_refresh","_render_calendar","unmarkCalendar","cont","tpos","_get_def_cont","$dom","dateAttribute","markCalendar","_last_date","conf","onDateClick","onDateMouseOver","markedDates","_markCalendarCurrentDate","sync","_on_xle_handler","updateCalendar","_created","_locateCalendar","weekNum","dayCell","_week_template","week_template","dummy_date","onBeforeMonthChange","onMonthChange","_mini_cal_arrows","previous","ts","temp2","temp3","temp4","temp5","temp6","temp7","temp8","padding","weekHeader","move_minicalendar_date","css_classnames","css_texts","diffs","calendars","arrow","dayHeaders","dayCells","inputs","selects","inp","new_date","_update_minical_select","isFulldayEvent","_attach_action","_round_minutes","linkCalendar","datediff","dateNew","month_end","monthheight","old_s","multisection_shift_all","old_unit","_update_unit_section","_update_sections","_get_multisection_view","_get_event_sections","_parse_event_sections","_split_events","pr","_split_one_event","mapping","vis_evs","_rendered_events","old_view_data","def_handler","new_sections","shifted","new_section","_shift_sections","orig_section","orig_order","new_unit","old_get_blocked_zones","old_check_secions_collision","a_ind","a_len","b_ind","b_len","multiselect","_children","_mark_inputs","_ids","script_url","divLoading","multisource","mvc","update_timer","use_id","sanitize","_finish_ext_load","_get_id","model","cid","backbone","toJSON","changes","queue","add_from_queue","Backbone","Collection","last_event","on_drop","sourceHtmlObject","targetHtmlObject","targetHtml","action_data","event_data","view_options","_locate_cell_timeline","shtmlObject","DragControl","addDrop","onDrop","sourceDhtmlx","getMaster","onDragIn","pdf","html_regexp","newline_regexp","clean_html","x_norm","colsWidth","x_norm_event","is_left","y_norm","get_style","de_day","de_week","xml_end","xml_top","profile","xml_body_header","dhx_cal_date","xh","xml_month_scale","xml_month","yh","xhs","second_scale","top_width","top_col","xml_body","colors","week_starts","_month","text_color","zx","zdx","left_norm","zy","zdy","e_type","dets","week","dy_copy","toXML","original_date","original_mode","temp_date","to_pdf","objects","getPDFData","toPDF","toPDFRange","quick_info","show_quick_info","clickedElementPosition","fitQIInsideWindow","quickInfoPopup","popupRect","offsetBottom","getPositionInsideScheduler","_$quickInfoHandler","eventElement","showQuickInfo","hiding_function","hideQuickInfo","quick_info_title","quick_info_content","quick_info_date","_quick_info_box_id","_get_event_counter_part","_quick_info_box","_init_quick_info","_fill_quick_data","_show_quick_info","cssTimeToMs","milliseconds","forced","qi","dataPos","ontransitionend","_quick_info_onscroll_handler","$testmode","_qi_button_click","main","mainContent","originalRecurringSetValue","original_left_buttons","original_right_buttons","txt_replace","txts","txtt","readonly_form","forbidden_buttons","button_arrays","forbidden_button","button_array","originalForm","readonlyForm","_lightbox_r","clearMilliseconds","isSeries","toUTCDate","updateFollowingEventsRRULE","parsedRRule","toIcalString","newRRULE","updateFollowingWithWEEKLY","rruleStringparts","updatedRRULE","splited","old_add_event","setPropsForFirstOccurrence","occurrence","_isExceptionFirstOccurrence","_start_date","_modified","_firstOccurrence","setPropsForStorageEvent","tempEvent","targetIndex","deleteExceptionFromStorage","exception","updateTextEvents","tev","deleteEventFromSeries","idTimestamp","originalStartTimestamp","nid","nev","removeTempDraggedEvent","showModalbox","callbacks","selectedOption","groupExceptions","exceptions","_isFollowing","_isFirstOccurrence","pid","_is_modified_occurrence","recEvent","_rec_temp","_rec_markers_pull","_rec_markers","_get_rec_marker","ch","ev_id","_ignore_call","_pid_changed","sub","_showRequiredModalBox","isEventFound","tempDataRRULE","_shorten_end_date","_shorten","followingEv","_ocr","showLightbox_rec","formSetting","lightbox_recurring","isVirtual","showRequiredLightbox","originalStart","tempStartDate","tempEndDate","btnAll","initialOccurrence","btnFollowing","btnOccurrence","get_visible_events_rec","repeat_date","existingItem","old_update_event","getWeekdayOfMonth","dayOfWeek","dayOfMonth","dayNumber","non_render","maxCount","seriesExceptions","utcStart","repeatedDates","adjustedDate","visibleCount","eventDuration","_fix_daylight_saving_date","recurrings","sev","include_end_by","recurring_workdays","jsDaysToRRULEDays","RruleDayNumsToJs","fillIntervalInput","intervalInput","formatDayNumber","repeat_monthly_date","repeat_monthly_weekday","nthDayOfMonth","repeat_yearly_month_date","repeat_yearly_month_weekday","getRecValue","WORKDAYS","CUSTOM","monthRepeat","yearRepeat","formatFunc","endRule","NEVER","fillInDefaults","dayNum","dayLabel","dateOfMonth","nthWeekDayOfMonth","dateOfYear","nthWeekDayOfYear","countInput","ondateInput","endOptionSelect","formatter","repeat_date_of_end","dispatchEvent","getFirstSectionOfType","_get_node","_outer_html","rec","loc","_init_set_value","_ds","repeatSelect","customRepeatUnitInput","weekly","monthly","yearly","customRepeatEndInput","_rec_init_done","rf","blocked","rruleset","topOption","rruleObj","untilDate","customFreq","actual_dates","timeControl","recurrence","_start","recurring_legacy","getRecurringSection","occurrence_timestamp_in_utc","repeat_text_occurences_count","_get_form_node","_get_node_value","_get_node_numeric_value","_set_node_value","hash_value","str_date_format","date_str","register_els","inps","change_current_view","set_end_rule","_get_repeat_code","get_rcode","str_date","transpose_type","get_numeric_value","repeat_precise","start_exists","transpose_day_week","set_rcode","_set_repeat_code","MouseEvent","elements","_is_modified_occurence","_toggle_block","_get_button","_get_form","backgroundPosition","showSeries","title_confirm_recurring","transponse_size","day_week","originalMonth","newMonth","cor","cor2","cday","transposeRecurring","recurringParts","addRecurring","recurringStepDays","weekDays","seriesInstance","currentCount","origMonth","origYear","correctOverflowInstances","recurring_overflow_instances","startHour","ted","data_attributes","all_events","_serialize_json_value","toICal","full_day_format","getScrollbarwidth","outer","w1","w2","renderCells","contentTemplate","baseClass","$width","renderHeading","renderColumns","scrollPosition","scrollDate","posLeft","labelWrapperHeight","scalesHeight","_label_rows","scrollHelper","dataWrapperDiv","getScrollPosition","dateFromPos","sectionFromPos","resolvePosition","_rowStats","getEventTop","eventHeight","getEventHeight","sorder","event_dy","sectionIndex","_timeline_get_cur_row_stats","resize_events","event_min_dy","_temp_matrix_scope","getChildrenIds","getSectionIndex","iterateSectionsTree","prepareCellMatrix","sectionsSearch","y_unit_original","fillFolders","fillXArray","xFrom","xTo","$tree","sectionProperty","sectionKey","scaleIndexStart","scaleIndexEnd","$parent","traversed","_is_new_view","_section_autowidth","_h_cols","y_step","x_size","y_start","y_size","x_date","fit_events","fit_events_offset","show_unassigned","_logic","render_name","_original_x_start","render_timeline_event","folder_events_available","allocatedWidth","flexibleColumns","modifyContainerWidth","freeWidth","columnsLeft","datea","dateb","defautDateFormat","defaultFormatter","SecondScaleDateFormat","defautSecondScaleFormatter","scroll_step","resulting_date","x_length","converted_step","total_steps","steps_offset","start_offset","new_offset","_timeline_smart_render","getViewPort","_sch_height","scrollableDataContainer","selectEvents","selectSubsections","selectNested","getPreparedEvents","columnEvents","nestedEvents","$matrix","subsections","sectionEvents","setRange","scaleStartDate","_set_timeline_dates","force_redraw","current_back_shift","_timeline_get_rounded_date","_resize_from_start","pos_changed","_prepare_timeline_events","_timeline_trace_events","tev_section","_populate_timeline_rendered","_rendered_events_cache","smartRenderCache","x_end","event_height","_get_timeline_event_height","coefficient","_get_timeline_event_y","section_height","_events_height","_no_drag_move","dhx_event_resize","hb_local","resize_start","resize_end","parentSection","escapeForAttribute","sectionHasCustomHeight","timelineCellDateAttribute","cellDate","getScrollableContainer","getColumnLabelContainer","isEndPoint","_step","column_offset","_min_date_timeline","column_date","isEndDate","_timeline_skip_ignored","_timeline_calculate_event_positions","evs_length","maxOrder","maxOrderEvent","ev_start_date","_timeline_get_events_html","_timeline_update_events_html","_timeline_get_block_stats","stats","style_data_wrapper","style_label_wrapper","html_scroll_width","custom_scroll_width","rowBaseSizes","defaultHeight","totalHeight","rowsWithDefaultHeight","totalCustomHeight","heightWithoutScroll","td_className","cssTemplate","td_content","tr_className","summ_width","_summ","table_className","_timeline_get_fit_events_stats","rendered_height","style_line_height","_timeline_set_scroll_pos","_timeline_save_scroll_pos","_timeline_get_html_for_cell_data_row","top_pos","templateParams","_timeline_get_html_for_cell_ignores","_timeline_get_html_for_cell","x_ind","y_ind","cellLeftPos","cellSection","cellWidth","cellDateString","_timeline_get_html_for_bar_matrix_line","_timeline_get_html_for_bar_data_row","_timeline_get_html_for_bar_ignores","_timeline_get_html_for_bar","cell_template","cellInner","_timeline_render_scale_header","headerAreaClass","_timeline_y_scale","block_stats","scrollableData","labelWrapper","dataWrapper","clearPreparedEventsCache","cachePreparedEvents","render_stats","_render_stats","skipRenderCells","_rendered_labels_cache","smartRender","sectionsInfo","eventsBySections","rowStats","rowStatsByKey","totalRowsHeight","cellTopPos","labelRow","isInYViewPort","colIndex","isInXViewPort","printableEvents","getVisibleEventsForRow","_matrix","sectionRows","divBySectionId","_divBySectionId","unit_key","_timeline_finalize_section_add","_is_ev_creating","labelWrapperDiv","$eventsAttached","prevLabelAction","onMouseWheel","scrollPositionChanged","ff","deltaX","wheelDeltaX","deltaY","wheelDelta","multiplier","deltaMode","wheelSpeed","wx","wy","prevScrollLeft","detail","prevScrollTop","dataWrapperDivOnScroll","colLabelDiv","updateHeader","_options_changed","updateLabels","updateGridCols","updateGridRows","asyncScroll","cancelAnimationFrame","updateEvents","dataColHeight","newTop","newLeft","prevAction","absoluteDx","absoluteDy","totalDistance","sqrt","scroll_position","sectionDiv","_timeline_x_dates","display_count","total_count","displayed","_timeline_x_scale","timelineContainerWidth","current_sh","original_sh","_header_resized","preserve_scale_length","summ_fixed","control_dates","second_cols","second_left","t_index","_timeline_is_new_interval","scs","clnLastChild","trace","$_clickEventsAttached","_timeline_locate_hcell","control_date","_timeline_reset_scale_height","_timeline_set_full_view","_init_matrix_tooltip","curHeader","getVisibleHeader","_timeline_hideToolTip","_tooltip","_timeline_showToolTip","mark","_matrix_tooltip_handler","_timeline_html_index","nodeIndex","resIndex","ign","xNonIgnoredInd","xind","firstCellXind","firstCell","fc_pos_x","isScale","scaleTarget","old_click","dhx_marked_timespan","dblclick_dhx_matrix_cell","old_dblclick_marked_timespan","dblclick_dhx_matrix_scell","event_options","start_ind","specific_date","old_append_mark_now","n_date","oldTimespans","on_scale_marker_add","z_config","yind","line_height","trace_x","searchFrom","searchTo","dateValue","middle","pos_x","ratio","edge","timestamp_diff","_prepared_events_cache","_rendered_header_cache","_rows_to_delete","_rows_to_add","_cols_to_delete","_cols_to_add","resizeHeight","scrollBlock","scrollableContainer","viewPortLeft","viewPortRight","viewPortTop","viewPortBottom","visibleItems","renderers","itemsToDel","_deleteHeaderCells","_addHeaderCells","getVisibleLabels","curLabelCol","_deleteLabelCells","_addLabelCells","_prepared_events_coordinate_cache","dragId","stop","found","currentSectionId","eventIndex","actualEventSectionIndex","$coordinates","renderedEvents","willAdd","eventsToAdd","visibleRowEvents","lenRend","draggableEvent","multievs","_deleteEvents","addEntry","_addEvents","rowEvents","events_html","evsInViewport","evLen","xStart","xEnd","coordinateCacheKey","getVisibleRowCellsHTML","visibleColumns","getVisibleTimelineRowsHTML","cachedRow","_deleteGridRows","_addGridRows","visibleHeaderColumns","visibleHeaderColumnsHash","allCells","renderedCells","colId","shouldDelete","shouldRender","_addGridCols","getVisibleGridCell","tooltipManager","tooltips","tooltipFor","targetEventId","hideTooltip","section_id_before","_getArrayToDisplay","_getArrayForSelect","temp_select","temp_option","div_expand","paddingValue","folder_dy","levelPadding","level","event_object","native_event","ev_sections","getSection","fillResultArray","lvl","skip","_toggleFolderDisplay","all_sections","toggleElement","findElement","deleteSection","deleteElement","deleteAllSections","addSection","parent_id","addElement","parent_key","openAllSections","closeAllSections","openSection","closeSection","skip_incorrect","getDateIndex","_original_size","unit_view","original_position","date_position","dateIndex","realDate","availSize","section_ind","unit_ind","headerResized","revertHeaderSize","scrollUnit","_removeIncorrectEvents","correct_events","old_pre_render_events_table","old_pre_render_events_line","fix_und","oldive","old_process_ignores","sectionsCount","sectionEnd","today_start","today_end","headerWrapper","s_left","s_width","_get_section_sday","prerender","currentHeights","schedulerHeights","s2d","d2s","select_event","scale_date_format","_wa","week_agenda_event_text","week_agenda_start","week_agenda_end","add_week_agenda","week_agenda_date","week_agenda_scale_date","week_agenda_view","dayDivs","tstart","tend","scale_bar","events_div","ev_div","week_agenda_select","mouse_week_agenda","dayCont","_dnd","dnd_div","wp","year_view","year_date","year_month","year_scale_date","year_tooltip","isYearMode","getCellDate","dblclick_dhx_year_grid","_year_render_event","_year_marked_cells","_hideToolTip","_showToolTip","_year_view_tooltip_handler","_init_year_tooltip","_mark_year_date","_unmark_year_date","_reset_year_scale","yearBox","datepicker","ignore_year","locateEvent","factory","extensions","_schedulerPlugins","_bundledExtensions","_extensionsManager","initConfig","_internal_id","$syncFactory","_initFromConfig","addCalendar","$dhx"],"mappings":"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","x_google_ignoreList":[4,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117]}